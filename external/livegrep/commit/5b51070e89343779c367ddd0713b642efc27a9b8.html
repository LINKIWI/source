<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Merge branch &#39;bazelup&#39; - livegrep - Fast, regular expression code search service</title>
<meta name="description" content="Fast, regular expression code search service" />
<meta name="author" content="Kevin Lin" />
<link rel="icon" type="image/png" href="https://static.kevinlin.info/favicon.png" />
<link rel="alternate" type="application/atom+xml" title="livegrep Atom Feed" href="../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="livegrep Atom Feed (tags)" href="../tags.xml" />
<style type="text/css">
body{color:#000;background-color:#fff;font-family:monospace}h1,h2,h3,h4,h5,h6{font-size:1em;margin:0}img,h1,h2{vertical-align:middle}img{border:0}a:target{background-color:#ccc}a.d,a.h,a.i{text-decoration:none}a.line{text-decoration:none;user-select:none}#blob a{color:#555}#blob a:hover{color:blue;text-decoration:none}table thead td{font-weight:bold}table td{padding:0 .4em}table td pre{margin:0}#content table td{vertical-align:top;white-space:nowrap}#branches tr:hover td,#tags tr:hover td,#index tr:hover td,#log tr:hover td,#files tr:hover td{background-color:#eee}#index tr td:nth-child(2),#tags tr td:nth-child(3),#branches tr td:nth-child(3),#log tr td:nth-child(2){white-space:normal}td.num{text-align:right}.desc{color:#555}hr{border:0;border-top:1px solid #555;height:1px}pre{font-family:monospace}pre a.h{color:#00a}.A,span.i,pre a.i{color:#070}.D,span.d,pre a.d{color:#e00}pre a.h:hover,pre a.i:hover,pre a.d:hover{text-decoration:none}
</style>
</head>
<body>
<table><tr><td><a href="/"><img src="https://static.kevinlin.info/favicon.png" alt="" width="32" height="32" /></a></td><td><h1>livegrep</h1><span class="desc">Fast, regular expression code search service</span></td></tr><tr class="url"><td></td><td>git clone <a href="https://source.static.kevinlin.info/external/livegrep.git">https://source.static.kevinlin.info/external/livegrep.git</a></td></tr><tr><td></td><td>
<a href="../log">Log</a> | <a href="../files">Files</a> | <a href="../refs">Refs</a> | <a href="../file/README.md">README</a> | <a href="../file/COPYING">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/5b51070e89343779c367ddd0713b642efc27a9b8">5b51070e89343779c367ddd0713b642efc27a9b8</a>
<b>parent</b> <a href="../commit/754e800ec66c360af0abee1d51762033b9eb63b7">754e800ec66c360af0abee1d51762033b9eb63b7</a>
<b>Author:</b> Nelson Elhage &lt;<a href="mailto:nelhage@nelhage.com">nelhage@nelhage.com</a>&gt;
<b>Date:</b>   Sun, 30 Oct 2016 18:22:48 -0700

Merge branch &#39;bazelup&#39;

GRPC interface, update bazel deps

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">WORKSPACE</a></td><td> | </td><td class="num">49</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++</span><span class="d">----------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h1">client/BUILD</a></td><td> | </td><td class="num">31</td><td><span class="i"></span><span class="d">-------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h2">client/client.go</a></td><td> | </td><td class="num">179</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h3">client/client_test.go</a></td><td> | </td><td class="num">234</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h4">client/test/BUILD</a></td><td> | </td><td class="num">8</td><td><span class="i">++++</span><span class="d">----</span></td></tr>
<tr><td class="M">M</td><td><a href="#h5">client/test/bench_test.go</a></td><td> | </td><td class="num">41</td><td><span class="i">+++++++++++++++</span><span class="d">--------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h6">client/test/integration_test.go</a></td><td> | </td><td class="num">29</td><td><span class="i">++++++++++++++</span><span class="d">---------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h7">client/test/mock_test.go</a></td><td> | </td><td class="num">75</td><td><span class="i"></span><span class="d">---------------------------------------------------------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h8">client/test/testutil.go</a></td><td> | </td><td class="num">143</td><td><span class="i">++++++++++++++++</span><span class="d">---------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h9">client/types.go</a></td><td> | </td><td class="num">86</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h10">cmd/livegrep-github-reindex/BUILD</a></td><td> | </td><td class="num">7</td><td><span class="i">+++</span><span class="d">----</span></td></tr>
<tr><td class="M">M</td><td><a href="#h11">server/BUILD</a></td><td> | </td><td class="num">11</td><td><span class="i">++++</span><span class="d">-------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h12">server/api.go</a></td><td> | </td><td class="num">82</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">----------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h13">server/api/BUILD</a></td><td> | </td><td class="num">3</td><td><span class="i"></span><span class="d">---</span></td></tr>
<tr><td class="M">M</td><td><a href="#h14">server/api/types.go</a></td><td> | </td><td class="num">26</td><td><span class="i">++++++++++++++++++++++</span><span class="d">----</span></td></tr>
<tr><td class="M">M</td><td><a href="#h15">server/backend.go</a></td><td> | </td><td class="num">107</td><td><span class="i">++++++++++++++++++++++</span><span class="d">---------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h16">server/backend_test.go</a></td><td> | </td><td class="num">102</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h17">server/log/BUILD</a></td><td> | </td><td class="num">4</td><td><span class="i">+</span><span class="d">---</span></td></tr>
<tr><td class="M">M</td><td><a href="#h18">server/query.go</a></td><td> | </td><td class="num">12</td><td><span class="i">++++++</span><span class="d">------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h19">server/query_test.go</a></td><td> | </td><td class="num">59</td><td><span class="i">++++++++++++++++++++++++</span><span class="d">-----------------------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h20">server/reqid/BUILD</a></td><td> | </td><td class="num">4</td><td><span class="i">+</span><span class="d">---</span></td></tr>
<tr><td class="D">D</td><td><a href="#h21">server/request_log.go</a></td><td> | </td><td class="num">20</td><td><span class="i"></span><span class="d">--------------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h22">server/server.go</a></td><td> | </td><td class="num">8</td><td><span class="i">+++</span><span class="d">-----</span></td></tr>
<tr><td class="M">M</td><td><a href="#h23">src/lib/debug.cc</a></td><td> | </td><td class="num">6</td><td><span class="i">++++</span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h24">src/lib/timer.h</a></td><td> | </td><td class="num">4</td><td><span class="i">++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h25">src/proto/BUILD</a></td><td> | </td><td class="num">16</td><td><span class="i">++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h26">src/proto/go_proto</a></td><td> | </td><td class="num">2</td><td><span class="i">++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h27">src/proto/livegrep.proto</a></td><td> | </td><td class="num">66</td><td><span class="i">++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h28">src/tagsearch.cc</a></td><td> | </td><td class="num">31</td><td><span class="i">++++++++++++++++</span><span class="d">---------------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h29">src/tagsearch.h</a></td><td> | </td><td class="num">8</td><td><span class="i">+</span><span class="d">-------</span></td></tr>
<tr><td class="M">M</td><td><a href="#h30">src/tools/BUILD</a></td><td> | </td><td class="num">19</td><td><span class="i">+++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h31">src/tools/codesearch.cc</a></td><td> | </td><td class="num">44</td><td><span class="i">+++++++++++++++++++++++++++++++++</span><span class="d">-----------</span></td></tr>
<tr><td class="A">A</td><td><a href="#h32">src/tools/grpc_server.cc</a></td><td> | </td><td class="num">231</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h33">src/tools/grpc_server.h</a></td><td> | </td><td class="num">23</td><td><span class="i">+++++++++++++++++++++++</span><span class="d"></span></td></tr>
<tr><td class="A">A</td><td><a href="#h34">src/tools/limits.h</a></td><td> | </td><td class="num">7</td><td><span class="i">+++++++</span><span class="d"></span></td></tr>
<tr><td class="M">M</td><td><a href="#h35">src/tools/transport.cc</a></td><td> | </td><td class="num">5</td><td><span class="i">+</span><span class="d">----</span></td></tr>
<tr><td class="M">M</td><td><a href="#h36">src/tools/transport.h</a></td><td> | </td><td class="num">2</td><td><span class="i"></span><span class="d">--</span></td></tr>
<tr><td class="M">M</td><td><a href="#h37">test/BUILD</a></td><td> | </td><td class="num">11</td><td><span class="i">+++++++</span><span class="d">----</span></td></tr>
<tr><td class="M">M</td><td><a href="#h38">test/codesearch_test.cc</a></td><td> | </td><td class="num">161</td><td><span class="i">+++++++++++++++++++++++++++++++++++++++++++++++</span><span class="d">--------------------------------</span></td></tr>
<tr><td class="A">A</td><td><a href="#h39">test/main.cc</a></td><td> | </td><td class="num">6</td><td><span class="i">++++++</span><span class="d"></span></td></tr>
<tr><td class="D">D</td><td><a href="#h40">vendor/golang.org/x/net/LICENSE</a></td><td> | </td><td class="num">27</td><td><span class="i"></span><span class="d">---------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h41">vendor/golang.org/x/net/PATENTS</a></td><td> | </td><td class="num">22</td><td><span class="i"></span><span class="d">----------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h42">vendor/golang.org/x/net/context/BUILD</a></td><td> | </td><td class="num">19</td><td><span class="i"></span><span class="d">-------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h43">vendor/golang.org/x/net/context/context.go</a></td><td> | </td><td class="num">156</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h44">vendor/golang.org/x/net/context/go17.go</a></td><td> | </td><td class="num">72</td><td><span class="i"></span><span class="d">------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h45">vendor/golang.org/x/net/context/pre_go17.go</a></td><td> | </td><td class="num">300</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h46">vendor/golang.org/x/oauth2/AUTHORS</a></td><td> | </td><td class="num">3</td><td><span class="i"></span><span class="d">---</span></td></tr>
<tr><td class="D">D</td><td><a href="#h47">vendor/golang.org/x/oauth2/BUILD</a></td><td> | </td><td class="num">22</td><td><span class="i"></span><span class="d">----------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h48">vendor/golang.org/x/oauth2/CONTRIBUTING.md</a></td><td> | </td><td class="num">31</td><td><span class="i"></span><span class="d">-------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h49">vendor/golang.org/x/oauth2/CONTRIBUTORS</a></td><td> | </td><td class="num">3</td><td><span class="i"></span><span class="d">---</span></td></tr>
<tr><td class="D">D</td><td><a href="#h50">vendor/golang.org/x/oauth2/LICENSE</a></td><td> | </td><td class="num">27</td><td><span class="i"></span><span class="d">---------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h51">vendor/golang.org/x/oauth2/README.md</a></td><td> | </td><td class="num">64</td><td><span class="i"></span><span class="d">----------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h52">vendor/golang.org/x/oauth2/client_appengine.go</a></td><td> | </td><td class="num">25</td><td><span class="i"></span><span class="d">-------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h53">vendor/golang.org/x/oauth2/internal/BUILD</a></td><td> | </td><td class="num">21</td><td><span class="i"></span><span class="d">---------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h54">vendor/golang.org/x/oauth2/internal/oauth2.go</a></td><td> | </td><td class="num">76</td><td><span class="i"></span><span class="d">----------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h55">vendor/golang.org/x/oauth2/internal/token.go</a></td><td> | </td><td class="num">225</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h56">vendor/golang.org/x/oauth2/internal/transport.go</a></td><td> | </td><td class="num">69</td><td><span class="i"></span><span class="d">---------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h57">vendor/golang.org/x/oauth2/oauth2.go</a></td><td> | </td><td class="num">337</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h58">vendor/golang.org/x/oauth2/token.go</a></td><td> | </td><td class="num">158</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h59">vendor/golang.org/x/oauth2/transport.go</a></td><td> | </td><td class="num">132</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h60">vendor/google.golang.org/appengine/LICENSE</a></td><td> | </td><td class="num">202</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h61">vendor/google.golang.org/appengine/internal/BUILD</a></td><td> | </td><td class="num">33</td><td><span class="i"></span><span class="d">---------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h62">vendor/google.golang.org/appengine/internal/api.go</a></td><td> | </td><td class="num">646</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h63">vendor/google.golang.org/appengine/internal/api_classic.go</a></td><td> | </td><td class="num">159</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h64">vendor/google.golang.org/appengine/internal/api_common.go</a></td><td> | </td><td class="num">86</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h65">vendor/google.golang.org/appengine/internal/app_id.go</a></td><td> | </td><td class="num">28</td><td><span class="i"></span><span class="d">----------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h66">vendor/google.golang.org/appengine/internal/base/BUILD</a></td><td> | </td><td class="num">19</td><td><span class="i"></span><span class="d">-------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h67">vendor/google.golang.org/appengine/internal/base/api_base.pb.go</a></td><td> | </td><td class="num">133</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h68">vendor/google.golang.org/appengine/internal/base/api_base.proto</a></td><td> | </td><td class="num">33</td><td><span class="i"></span><span class="d">---------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h69">vendor/google.golang.org/appengine/internal/datastore/BUILD</a></td><td> | </td><td class="num">19</td><td><span class="i"></span><span class="d">-------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h70">vendor/google.golang.org/appengine/internal/datastore/datastore_v3.pb.go</a></td><td> | </td><td class="num">2778</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h71">vendor/google.golang.org/appengine/internal/datastore/datastore_v3.proto</a></td><td> | </td><td class="num">541</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h72">vendor/google.golang.org/appengine/internal/identity.go</a></td><td> | </td><td class="num">14</td><td><span class="i"></span><span class="d">--------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h73">vendor/google.golang.org/appengine/internal/identity_classic.go</a></td><td> | </td><td class="num">27</td><td><span class="i"></span><span class="d">---------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h74">vendor/google.golang.org/appengine/internal/identity_vm.go</a></td><td> | </td><td class="num">97</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h75">vendor/google.golang.org/appengine/internal/internal.go</a></td><td> | </td><td class="num">110</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h76">vendor/google.golang.org/appengine/internal/log/BUILD</a></td><td> | </td><td class="num">19</td><td><span class="i"></span><span class="d">-------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h77">vendor/google.golang.org/appengine/internal/log/log_service.pb.go</a></td><td> | </td><td class="num">899</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h78">vendor/google.golang.org/appengine/internal/log/log_service.proto</a></td><td> | </td><td class="num">150</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h79">vendor/google.golang.org/appengine/internal/main.go</a></td><td> | </td><td class="num">15</td><td><span class="i"></span><span class="d">---------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h80">vendor/google.golang.org/appengine/internal/main_vm.go</a></td><td> | </td><td class="num">44</td><td><span class="i"></span><span class="d">--------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h81">vendor/google.golang.org/appengine/internal/metadata.go</a></td><td> | </td><td class="num">61</td><td><span class="i"></span><span class="d">-------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h82">vendor/google.golang.org/appengine/internal/net.go</a></td><td> | </td><td class="num">56</td><td><span class="i"></span><span class="d">--------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h83">vendor/google.golang.org/appengine/internal/regen.sh</a></td><td> | </td><td class="num">40</td><td><span class="i"></span><span class="d">----------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h84">vendor/google.golang.org/appengine/internal/remote_api/BUILD</a></td><td> | </td><td class="num">19</td><td><span class="i"></span><span class="d">-------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h85">vendor/google.golang.org/appengine/internal/remote_api/remote_api.pb.go</a></td><td> | </td><td class="num">231</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h86">vendor/google.golang.org/appengine/internal/remote_api/remote_api.proto</a></td><td> | </td><td class="num">44</td><td><span class="i"></span><span class="d">--------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h87">vendor/google.golang.org/appengine/internal/transaction.go</a></td><td> | </td><td class="num">107</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h88">vendor/google.golang.org/appengine/internal/urlfetch/BUILD</a></td><td> | </td><td class="num">19</td><td><span class="i"></span><span class="d">-------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h89">vendor/google.golang.org/appengine/internal/urlfetch/urlfetch_service.pb.go</a></td><td> | </td><td class="num">355</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h90">vendor/google.golang.org/appengine/internal/urlfetch/urlfetch_service.proto</a></td><td> | </td><td class="num">64</td><td><span class="i"></span><span class="d">----------------------------------------------------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h91">vendor/google.golang.org/appengine/urlfetch/BUILD</a></td><td> | </td><td class="num">22</td><td><span class="i"></span><span class="d">----------------------</span></td></tr>
<tr><td class="D">D</td><td><a href="#h92">vendor/google.golang.org/appengine/urlfetch/urlfetch.go</a></td><td> | </td><td class="num">210</td><td><span class="i"></span><span class="d">-------------------------------------------------------------------------------</span></td></tr>
</table></pre><pre>93 files changed, 780 insertions(+), 10251 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/WORKSPACE">WORKSPACE</a> b/<a href="../file/WORKSPACE">WORKSPACE</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -1,5 +1,11 @@
</a> workspace(name = &quot;com_github_livegrep_livegrep&quot;)
 
<a href="#h0-0-2" id="h0-0-2" class="i">+git_repository(
</a><a href="#h0-0-3" id="h0-0-3" class="i">+  name = &quot;org_pubref_rules_protobuf&quot;,
</a><a href="#h0-0-4" id="h0-0-4" class="i">+  remote = &quot;https://github.com/pubref/rules_protobuf&quot;,
</a><a href="#h0-0-5" id="h0-0-5" class="i">+  commit = &quot;7d12b7e3f1d40086a2d28ce900cd7980ab8f2758&quot;,
</a><a href="#h0-0-6" id="h0-0-6" class="i">+)
</a><a href="#h0-0-7" id="h0-0-7" class="i">+
</a> load(&quot;//tools/build_defs:externals.bzl&quot;,
      &quot;new_patched_http_archive&quot;,
 )
<a href="#h0-1" id="h0-1" class="h">@@ -20,14 +26,6 @@ git_repository(
</a>   commit = &quot;ec8dfdfa39233663779f01935124ecc36e840a03&quot;,
 )
 
<a href="#h0-1-3" id="h0-1-3" class="d">-new_http_archive(
</a><a href="#h0-1-4" id="h0-1-4" class="d">-  name = &quot;gtest&quot;,
</a><a href="#h0-1-5" id="h0-1-5" class="d">-  url = &quot;https://github.com/google/googletest/archive/release-1.7.0.tar.gz&quot;,
</a><a href="#h0-1-6" id="h0-1-6" class="d">-  sha256 = &quot;f73a6546fdf9fce9ff93a5015e0333a8af3062a152a9ad6bcb772c96687016cc&quot;,
</a><a href="#h0-1-7" id="h0-1-7" class="d">-  build_file = &quot;//third_party:BUILD.gtest&quot;,
</a><a href="#h0-1-8" id="h0-1-8" class="d">-  strip_prefix = &quot;googletest-release-1.7.0&quot;,
</a><a href="#h0-1-9" id="h0-1-9" class="d">-)
</a><a href="#h0-1-10" id="h0-1-10" class="d">-
</a> git_repository(
   name = &quot;gflags&quot;,
   remote = &quot;git://github.com/gflags/gflags&quot;,
<a href="#h0-2" id="h0-2" class="h">@@ -70,11 +68,30 @@ new_patched_http_archive(
</a> git_repository(
     name = &quot;io_bazel_rules_go&quot;,
     remote = &quot;https://github.com/bazelbuild/rules_go.git&quot;,
<a href="#h0-2-3" id="h0-2-3" class="d">-    commit = &quot;ae8ea32be1af991eef77d6347591dc8ba56c40a2&quot;,
</a><a href="#h0-2-4" id="h0-2-4" class="i">+    commit = &quot;3b13b2dba81e09ec213ccbd4da56ad332cb5d3dc&quot;,
</a> )
<a href="#h0-2-6" id="h0-2-6" class="d">-load(&quot;@io_bazel_rules_go//go:def.bzl&quot;, &quot;go_repositories&quot;)
</a><a href="#h0-2-7" id="h0-2-7" class="i">+
</a><a href="#h0-2-8" id="h0-2-8" class="i">+load(&quot;@io_bazel_rules_go//go:def.bzl&quot;,
</a><a href="#h0-2-9" id="h0-2-9" class="i">+     &quot;go_repositories&quot;, &quot;new_go_repository&quot;)
</a> 
 go_repositories()
<a href="#h0-2-12" id="h0-2-12" class="i">+new_go_repository(
</a><a href="#h0-2-13" id="h0-2-13" class="i">+  name = &quot;org_golang_x_net&quot;,
</a><a href="#h0-2-14" id="h0-2-14" class="i">+  importpath = &quot;golang.org/x/net&quot;,
</a><a href="#h0-2-15" id="h0-2-15" class="i">+  commit = &quot;73058b0420c0c24a7f9ec3eb6f624ac85d2ed035&quot;,
</a><a href="#h0-2-16" id="h0-2-16" class="i">+)
</a><a href="#h0-2-17" id="h0-2-17" class="i">+
</a><a href="#h0-2-18" id="h0-2-18" class="i">+new_go_repository(
</a><a href="#h0-2-19" id="h0-2-19" class="i">+  name = &quot;org_golang_google_appengine&quot;,
</a><a href="#h0-2-20" id="h0-2-20" class="i">+  importpath = &quot;google.golang.org/appengine/&quot;,
</a><a href="#h0-2-21" id="h0-2-21" class="i">+  commit = &quot;46239ca616842c00f41b8cbc6bbf2bd6ffbfcdad&quot;,
</a><a href="#h0-2-22" id="h0-2-22" class="i">+)
</a><a href="#h0-2-23" id="h0-2-23" class="i">+
</a><a href="#h0-2-24" id="h0-2-24" class="i">+new_go_repository(
</a><a href="#h0-2-25" id="h0-2-25" class="i">+  name = &quot;org_golang_x_oauth2&quot;,
</a><a href="#h0-2-26" id="h0-2-26" class="i">+  importpath = &quot;golang.org/x/oauth2&quot;,
</a><a href="#h0-2-27" id="h0-2-27" class="i">+  commit = &quot;25b4fb1468cb89700c7c060cb99f30581a61f5e3&quot;,
</a><a href="#h0-2-28" id="h0-2-28" class="i">+)
</a> 
 load(&quot;//tools/build_defs:libgit2.bzl&quot;,
      &quot;new_libgit2_archive&quot;,
<a href="#h0-3" id="h0-3" class="h">@@ -87,3 +104,15 @@ new_libgit2_archive(
</a>   sha256 = &quot;60198cbb34066b9b5c1613d15c0479f6cd25f4aef42f7ec515cd1cc13a77fede&quot;,
   build_file = &quot;//third_party:BUILD.libgit2&quot;,
 )
<a href="#h0-3-3" id="h0-3-3" class="i">+
</a><a href="#h0-3-4" id="h0-3-4" class="i">+load(&quot;@org_pubref_rules_protobuf//go:rules.bzl&quot;, &quot;go_proto_repositories&quot;)
</a><a href="#h0-3-5" id="h0-3-5" class="i">+load(&quot;@org_pubref_rules_protobuf//cpp:rules.bzl&quot;, &quot;cpp_proto_repositories&quot;)
</a><a href="#h0-3-6" id="h0-3-6" class="i">+
</a><a href="#h0-3-7" id="h0-3-7" class="i">+go_proto_repositories();
</a><a href="#h0-3-8" id="h0-3-8" class="i">+cpp_proto_repositories();
</a><a href="#h0-3-9" id="h0-3-9" class="i">+
</a><a href="#h0-3-10" id="h0-3-10" class="i">+git_repository(
</a><a href="#h0-3-11" id="h0-3-11" class="i">+    name = &quot;io_bazel_buildifier&quot;,
</a><a href="#h0-3-12" id="h0-3-12" class="i">+    commit = &quot;0ca1d7991357ae7a7555589af88930d82cf07c0a&quot;,
</a><a href="#h0-3-13" id="h0-3-13" class="i">+    remote = &quot;https://github.com/bazelbuild/buildifier.git&quot;,
</a><a href="#h0-3-14" id="h0-3-14" class="i">+)
</a><b>diff --git a/<a id="h1" href="../file/client/BUILD">client/BUILD</a> b/<a href="../file/client/BUILD">client/BUILD</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -1,31 +0,0 @@
</a><a href="#h1-0-0" id="h1-0-0" class="d">-
</a><a href="#h1-0-1" id="h1-0-1" class="d">-load(&quot;@io_bazel_rules_go//go:def.bzl&quot;,
</a><a href="#h1-0-2" id="h1-0-2" class="d">-  &quot;go_binary&quot;,
</a><a href="#h1-0-3" id="h1-0-3" class="d">-  &quot;go_library&quot;,
</a><a href="#h1-0-4" id="h1-0-4" class="d">-  &quot;go_test&quot;,
</a><a href="#h1-0-5" id="h1-0-5" class="d">-)
</a><a href="#h1-0-6" id="h1-0-6" class="d">-
</a><a href="#h1-0-7" id="h1-0-7" class="d">-go_library(
</a><a href="#h1-0-8" id="h1-0-8" class="d">-name = &quot;go_default_library&quot;,
</a><a href="#h1-0-9" id="h1-0-9" class="d">-  srcs = [
</a><a href="#h1-0-10" id="h1-0-10" class="d">-    &quot;client.go&quot;,
</a><a href="#h1-0-11" id="h1-0-11" class="d">-    &quot;types.go&quot;,
</a><a href="#h1-0-12" id="h1-0-12" class="d">-  ],
</a><a href="#h1-0-13" id="h1-0-13" class="d">-  deps = [
</a><a href="#h1-0-14" id="h1-0-14" class="d">-    &quot;//jsonframe:go_default_library&quot;,
</a><a href="#h1-0-15" id="h1-0-15" class="d">-  ],
</a><a href="#h1-0-16" id="h1-0-16" class="d">-  visibility = [&quot;//visibility:public&quot;],
</a><a href="#h1-0-17" id="h1-0-17" class="d">-)
</a><a href="#h1-0-18" id="h1-0-18" class="d">-
</a><a href="#h1-0-19" id="h1-0-19" class="d">-
</a><a href="#h1-0-20" id="h1-0-20" class="d">-go_test(
</a><a href="#h1-0-21" id="h1-0-21" class="d">-  name = &quot;go_default_test&quot;,
</a><a href="#h1-0-22" id="h1-0-22" class="d">-  srcs = [
</a><a href="#h1-0-23" id="h1-0-23" class="d">-    &quot;client_test.go&quot;,
</a><a href="#h1-0-24" id="h1-0-24" class="d">-  ],
</a><a href="#h1-0-25" id="h1-0-25" class="d">-  deps = [
</a><a href="#h1-0-26" id="h1-0-26" class="d">-    &quot;//vendor/gopkg.in/check.v1:go_default_library&quot;,
</a><a href="#h1-0-27" id="h1-0-27" class="d">-  ],
</a><a href="#h1-0-28" id="h1-0-28" class="d">-  library = &quot;:go_default_library&quot;,
</a><a href="#h1-0-29" id="h1-0-29" class="d">-)
</a><a href="#h1-0-30" id="h1-0-30" class="d">-
</a><b>diff --git a/<a id="h2" href="../file/client/client.go">client/client.go</a> b/<a href="../file/client/client.go">client/client.go</a></b>
<a href="#h2-0" id="h2-0" class="h">@@ -1,179 +0,0 @@
</a><a href="#h2-0-0" id="h2-0-0" class="d">-package client
</a><a href="#h2-0-1" id="h2-0-1" class="d">-
</a><a href="#h2-0-2" id="h2-0-2" class="d">-import (
</a><a href="#h2-0-3" id="h2-0-3" class="d">-	&quot;encoding/json&quot;
</a><a href="#h2-0-4" id="h2-0-4" class="d">-	&quot;errors&quot;
</a><a href="#h2-0-5" id="h2-0-5" class="d">-	&quot;fmt&quot;
</a><a href="#h2-0-6" id="h2-0-6" class="d">-	&quot;io&quot;
</a><a href="#h2-0-7" id="h2-0-7" class="d">-	&quot;net&quot;
</a><a href="#h2-0-8" id="h2-0-8" class="d">-
</a><a href="#h2-0-9" id="h2-0-9" class="d">-	&quot;github.com/livegrep/livegrep/jsonframe&quot;
</a><a href="#h2-0-10" id="h2-0-10" class="d">-)
</a><a href="#h2-0-11" id="h2-0-11" class="d">-
</a><a href="#h2-0-12" id="h2-0-12" class="d">-var ops jsonframe.Marshaler
</a><a href="#h2-0-13" id="h2-0-13" class="d">-
</a><a href="#h2-0-14" id="h2-0-14" class="d">-func init() {
</a><a href="#h2-0-15" id="h2-0-15" class="d">-	ops.Register(new(Result))
</a><a href="#h2-0-16" id="h2-0-16" class="d">-	ops.Register(new(ReplyError))
</a><a href="#h2-0-17" id="h2-0-17" class="d">-	ops.Register(new(ServerInfo))
</a><a href="#h2-0-18" id="h2-0-18" class="d">-	ops.Register(new(Stats))
</a><a href="#h2-0-19" id="h2-0-19" class="d">-	ops.Register(new(Query))
</a><a href="#h2-0-20" id="h2-0-20" class="d">-}
</a><a href="#h2-0-21" id="h2-0-21" class="d">-
</a><a href="#h2-0-22" id="h2-0-22" class="d">-type client struct {
</a><a href="#h2-0-23" id="h2-0-23" class="d">-	conn    io.ReadWriteCloser
</a><a href="#h2-0-24" id="h2-0-24" class="d">-	queries chan *search
</a><a href="#h2-0-25" id="h2-0-25" class="d">-	errors  chan error
</a><a href="#h2-0-26" id="h2-0-26" class="d">-	error   error
</a><a href="#h2-0-27" id="h2-0-27" class="d">-	ready   chan *ServerInfo
</a><a href="#h2-0-28" id="h2-0-28" class="d">-	info    *ServerInfo
</a><a href="#h2-0-29" id="h2-0-29" class="d">-}
</a><a href="#h2-0-30" id="h2-0-30" class="d">-
</a><a href="#h2-0-31" id="h2-0-31" class="d">-type search struct {
</a><a href="#h2-0-32" id="h2-0-32" class="d">-	query   *Query
</a><a href="#h2-0-33" id="h2-0-33" class="d">-	results chan *Result
</a><a href="#h2-0-34" id="h2-0-34" class="d">-	errors  chan error
</a><a href="#h2-0-35" id="h2-0-35" class="d">-	stats   chan *Stats
</a><a href="#h2-0-36" id="h2-0-36" class="d">-}
</a><a href="#h2-0-37" id="h2-0-37" class="d">-
</a><a href="#h2-0-38" id="h2-0-38" class="d">-func Dial(network, address string) (Client, error) {
</a><a href="#h2-0-39" id="h2-0-39" class="d">-	conn, err := net.Dial(network, address)
</a><a href="#h2-0-40" id="h2-0-40" class="d">-	if err != nil {
</a><a href="#h2-0-41" id="h2-0-41" class="d">-		return nil, err
</a><a href="#h2-0-42" id="h2-0-42" class="d">-	}
</a><a href="#h2-0-43" id="h2-0-43" class="d">-
</a><a href="#h2-0-44" id="h2-0-44" class="d">-	return New(conn)
</a><a href="#h2-0-45" id="h2-0-45" class="d">-}
</a><a href="#h2-0-46" id="h2-0-46" class="d">-
</a><a href="#h2-0-47" id="h2-0-47" class="d">-func New(conn io.ReadWriteCloser) (Client, error) {
</a><a href="#h2-0-48" id="h2-0-48" class="d">-	var err error
</a><a href="#h2-0-49" id="h2-0-49" class="d">-
</a><a href="#h2-0-50" id="h2-0-50" class="d">-	cl := &amp;client{
</a><a href="#h2-0-51" id="h2-0-51" class="d">-		conn:    conn,
</a><a href="#h2-0-52" id="h2-0-52" class="d">-		queries: make(chan *search),
</a><a href="#h2-0-53" id="h2-0-53" class="d">-		errors:  make(chan error, 1),
</a><a href="#h2-0-54" id="h2-0-54" class="d">-		ready:   make(chan *ServerInfo),
</a><a href="#h2-0-55" id="h2-0-55" class="d">-	}
</a><a href="#h2-0-56" id="h2-0-56" class="d">-
</a><a href="#h2-0-57" id="h2-0-57" class="d">-	go cl.loop()
</a><a href="#h2-0-58" id="h2-0-58" class="d">-
</a><a href="#h2-0-59" id="h2-0-59" class="d">-	select {
</a><a href="#h2-0-60" id="h2-0-60" class="d">-	case cl.info = &lt;-cl.ready:
</a><a href="#h2-0-61" id="h2-0-61" class="d">-	case err = &lt;-cl.errors:
</a><a href="#h2-0-62" id="h2-0-62" class="d">-		close(cl.queries)
</a><a href="#h2-0-63" id="h2-0-63" class="d">-		return nil, err
</a><a href="#h2-0-64" id="h2-0-64" class="d">-	}
</a><a href="#h2-0-65" id="h2-0-65" class="d">-
</a><a href="#h2-0-66" id="h2-0-66" class="d">-	return cl, nil
</a><a href="#h2-0-67" id="h2-0-67" class="d">-}
</a><a href="#h2-0-68" id="h2-0-68" class="d">-
</a><a href="#h2-0-69" id="h2-0-69" class="d">-func (c *client) Info() *ServerInfo {
</a><a href="#h2-0-70" id="h2-0-70" class="d">-	return c.info
</a><a href="#h2-0-71" id="h2-0-71" class="d">-}
</a><a href="#h2-0-72" id="h2-0-72" class="d">-
</a><a href="#h2-0-73" id="h2-0-73" class="d">-func (c *client) Err() error {
</a><a href="#h2-0-74" id="h2-0-74" class="d">-	if c.error != nil {
</a><a href="#h2-0-75" id="h2-0-75" class="d">-		return c.error
</a><a href="#h2-0-76" id="h2-0-76" class="d">-	}
</a><a href="#h2-0-77" id="h2-0-77" class="d">-	select {
</a><a href="#h2-0-78" id="h2-0-78" class="d">-	case c.error = &lt;-c.errors:
</a><a href="#h2-0-79" id="h2-0-79" class="d">-	default:
</a><a href="#h2-0-80" id="h2-0-80" class="d">-	}
</a><a href="#h2-0-81" id="h2-0-81" class="d">-	return c.error
</a><a href="#h2-0-82" id="h2-0-82" class="d">-}
</a><a href="#h2-0-83" id="h2-0-83" class="d">-
</a><a href="#h2-0-84" id="h2-0-84" class="d">-func (c *client) Query(q *Query) (Search, error) {
</a><a href="#h2-0-85" id="h2-0-85" class="d">-	s := &amp;search{q, make(chan *Result), make(chan error, 1), make(chan *Stats, 1)}
</a><a href="#h2-0-86" id="h2-0-86" class="d">-	select {
</a><a href="#h2-0-87" id="h2-0-87" class="d">-	case e, ok := &lt;-c.errors:
</a><a href="#h2-0-88" id="h2-0-88" class="d">-		if !ok {
</a><a href="#h2-0-89" id="h2-0-89" class="d">-			e = errors.New(&quot;use of a closed Client&quot;)
</a><a href="#h2-0-90" id="h2-0-90" class="d">-		}
</a><a href="#h2-0-91" id="h2-0-91" class="d">-		c.error = e
</a><a href="#h2-0-92" id="h2-0-92" class="d">-		return nil, e
</a><a href="#h2-0-93" id="h2-0-93" class="d">-	case c.queries &lt;- s:
</a><a href="#h2-0-94" id="h2-0-94" class="d">-		return s, nil
</a><a href="#h2-0-95" id="h2-0-95" class="d">-	}
</a><a href="#h2-0-96" id="h2-0-96" class="d">-}
</a><a href="#h2-0-97" id="h2-0-97" class="d">-
</a><a href="#h2-0-98" id="h2-0-98" class="d">-func (c *client) Close() {
</a><a href="#h2-0-99" id="h2-0-99" class="d">-	close(c.queries)
</a><a href="#h2-0-100" id="h2-0-100" class="d">-}
</a><a href="#h2-0-101" id="h2-0-101" class="d">-
</a><a href="#h2-0-102" id="h2-0-102" class="d">-func (c *client) loop() {
</a><a href="#h2-0-103" id="h2-0-103" class="d">-	defer c.conn.Close()
</a><a href="#h2-0-104" id="h2-0-104" class="d">-	defer close(c.errors)
</a><a href="#h2-0-105" id="h2-0-105" class="d">-	encoder := json.NewEncoder(c.conn)
</a><a href="#h2-0-106" id="h2-0-106" class="d">-	decoder := json.NewDecoder(c.conn)
</a><a href="#h2-0-107" id="h2-0-107" class="d">-
</a><a href="#h2-0-108" id="h2-0-108" class="d">-	for {
</a><a href="#h2-0-109" id="h2-0-109" class="d">-		op, err := ops.Decode(decoder)
</a><a href="#h2-0-110" id="h2-0-110" class="d">-		if err != nil {
</a><a href="#h2-0-111" id="h2-0-111" class="d">-			c.errors &lt;- err
</a><a href="#h2-0-112" id="h2-0-112" class="d">-			return
</a><a href="#h2-0-113" id="h2-0-113" class="d">-		}
</a><a href="#h2-0-114" id="h2-0-114" class="d">-		if info, ok := op.(*ServerInfo); !ok {
</a><a href="#h2-0-115" id="h2-0-115" class="d">-			bytes, _ := ops.Marshal(op)
</a><a href="#h2-0-116" id="h2-0-116" class="d">-			c.errors &lt;- fmt.Errorf(&quot;Expected op: &#39;%s&#39;, got: %s (%s)&quot;,
</a><a href="#h2-0-117" id="h2-0-117" class="d">-				new(ServerInfo).Opcode(), op.Opcode(), bytes)
</a><a href="#h2-0-118" id="h2-0-118" class="d">-			return
</a><a href="#h2-0-119" id="h2-0-119" class="d">-		} else {
</a><a href="#h2-0-120" id="h2-0-120" class="d">-			select {
</a><a href="#h2-0-121" id="h2-0-121" class="d">-			case c.ready &lt;- info:
</a><a href="#h2-0-122" id="h2-0-122" class="d">-			default:
</a><a href="#h2-0-123" id="h2-0-123" class="d">-			}
</a><a href="#h2-0-124" id="h2-0-124" class="d">-		}
</a><a href="#h2-0-125" id="h2-0-125" class="d">-
</a><a href="#h2-0-126" id="h2-0-126" class="d">-		q, ok := &lt;-c.queries
</a><a href="#h2-0-127" id="h2-0-127" class="d">-		if !ok {
</a><a href="#h2-0-128" id="h2-0-128" class="d">-			break
</a><a href="#h2-0-129" id="h2-0-129" class="d">-		}
</a><a href="#h2-0-130" id="h2-0-130" class="d">-		if e := ops.Encode(encoder, q.query); e != nil {
</a><a href="#h2-0-131" id="h2-0-131" class="d">-			q.errors &lt;- e
</a><a href="#h2-0-132" id="h2-0-132" class="d">-			close(q.errors)
</a><a href="#h2-0-133" id="h2-0-133" class="d">-			close(q.results)
</a><a href="#h2-0-134" id="h2-0-134" class="d">-			close(q.stats)
</a><a href="#h2-0-135" id="h2-0-135" class="d">-			continue
</a><a href="#h2-0-136" id="h2-0-136" class="d">-		}
</a><a href="#h2-0-137" id="h2-0-137" class="d">-		done := false
</a><a href="#h2-0-138" id="h2-0-138" class="d">-	ResultLoop:
</a><a href="#h2-0-139" id="h2-0-139" class="d">-		for {
</a><a href="#h2-0-140" id="h2-0-140" class="d">-			op, err = ops.Decode(decoder)
</a><a href="#h2-0-141" id="h2-0-141" class="d">-			if err != nil {
</a><a href="#h2-0-142" id="h2-0-142" class="d">-				break
</a><a href="#h2-0-143" id="h2-0-143" class="d">-			}
</a><a href="#h2-0-144" id="h2-0-144" class="d">-			switch concrete := op.(type) {
</a><a href="#h2-0-145" id="h2-0-145" class="d">-			case *ReplyError:
</a><a href="#h2-0-146" id="h2-0-146" class="d">-				q.errors &lt;- QueryError{q.query, string(*concrete)}
</a><a href="#h2-0-147" id="h2-0-147" class="d">-				done = true
</a><a href="#h2-0-148" id="h2-0-148" class="d">-				break ResultLoop
</a><a href="#h2-0-149" id="h2-0-149" class="d">-			case *Stats:
</a><a href="#h2-0-150" id="h2-0-150" class="d">-				q.stats &lt;- concrete
</a><a href="#h2-0-151" id="h2-0-151" class="d">-				done = true
</a><a href="#h2-0-152" id="h2-0-152" class="d">-				break ResultLoop
</a><a href="#h2-0-153" id="h2-0-153" class="d">-			case *Result:
</a><a href="#h2-0-154" id="h2-0-154" class="d">-				q.results &lt;- concrete
</a><a href="#h2-0-155" id="h2-0-155" class="d">-			}
</a><a href="#h2-0-156" id="h2-0-156" class="d">-		}
</a><a href="#h2-0-157" id="h2-0-157" class="d">-
</a><a href="#h2-0-158" id="h2-0-158" class="d">-		if err != nil {
</a><a href="#h2-0-159" id="h2-0-159" class="d">-			q.errors &lt;- err
</a><a href="#h2-0-160" id="h2-0-160" class="d">-		} else if !done {
</a><a href="#h2-0-161" id="h2-0-161" class="d">-			q.errors &lt;- errors.New(&quot;connection closed unexpectedly&quot;)
</a><a href="#h2-0-162" id="h2-0-162" class="d">-		}
</a><a href="#h2-0-163" id="h2-0-163" class="d">-
</a><a href="#h2-0-164" id="h2-0-164" class="d">-		close(q.errors)
</a><a href="#h2-0-165" id="h2-0-165" class="d">-		close(q.results)
</a><a href="#h2-0-166" id="h2-0-166" class="d">-		close(q.stats)
</a><a href="#h2-0-167" id="h2-0-167" class="d">-	}
</a><a href="#h2-0-168" id="h2-0-168" class="d">-}
</a><a href="#h2-0-169" id="h2-0-169" class="d">-
</a><a href="#h2-0-170" id="h2-0-170" class="d">-func (s *search) Results() &lt;-chan *Result {
</a><a href="#h2-0-171" id="h2-0-171" class="d">-	return s.results
</a><a href="#h2-0-172" id="h2-0-172" class="d">-}
</a><a href="#h2-0-173" id="h2-0-173" class="d">-
</a><a href="#h2-0-174" id="h2-0-174" class="d">-func (s *search) Close() (*Stats, error) {
</a><a href="#h2-0-175" id="h2-0-175" class="d">-	for _ = range s.results {
</a><a href="#h2-0-176" id="h2-0-176" class="d">-	}
</a><a href="#h2-0-177" id="h2-0-177" class="d">-	return &lt;-s.stats, &lt;-s.errors
</a><a href="#h2-0-178" id="h2-0-178" class="d">-}
</a><b>diff --git a/<a id="h3" href="../file/client/client_test.go">client/client_test.go</a> b/<a href="../file/client/client_test.go">client/client_test.go</a></b>
<a href="#h3-0" id="h3-0" class="h">@@ -1,234 +0,0 @@
</a><a href="#h3-0-0" id="h3-0-0" class="d">-package client
</a><a href="#h3-0-1" id="h3-0-1" class="d">-
</a><a href="#h3-0-2" id="h3-0-2" class="d">-import (
</a><a href="#h3-0-3" id="h3-0-3" class="d">-	&quot;encoding/json&quot;
</a><a href="#h3-0-4" id="h3-0-4" class="d">-	&quot;io&quot;
</a><a href="#h3-0-5" id="h3-0-5" class="d">-	&quot;net&quot;
</a><a href="#h3-0-6" id="h3-0-6" class="d">-	&quot;strings&quot;
</a><a href="#h3-0-7" id="h3-0-7" class="d">-	&quot;testing&quot;
</a><a href="#h3-0-8" id="h3-0-8" class="d">-
</a><a href="#h3-0-9" id="h3-0-9" class="d">-	&quot;gopkg.in/check.v1&quot;
</a><a href="#h3-0-10" id="h3-0-10" class="d">-)
</a><a href="#h3-0-11" id="h3-0-11" class="d">-
</a><a href="#h3-0-12" id="h3-0-12" class="d">-func Test(t *testing.T) { check.TestingT(t) }
</a><a href="#h3-0-13" id="h3-0-13" class="d">-
</a><a href="#h3-0-14" id="h3-0-14" class="d">-type ClientSuite struct {
</a><a href="#h3-0-15" id="h3-0-15" class="d">-	client Client
</a><a href="#h3-0-16" id="h3-0-16" class="d">-}
</a><a href="#h3-0-17" id="h3-0-17" class="d">-
</a><a href="#h3-0-18" id="h3-0-18" class="d">-func (c *ClientSuite) TearDownTest(*check.C) {
</a><a href="#h3-0-19" id="h3-0-19" class="d">-	if c.client != nil {
</a><a href="#h3-0-20" id="h3-0-20" class="d">-		c.client.Close()
</a><a href="#h3-0-21" id="h3-0-21" class="d">-	}
</a><a href="#h3-0-22" id="h3-0-22" class="d">-}
</a><a href="#h3-0-23" id="h3-0-23" class="d">-
</a><a href="#h3-0-24" id="h3-0-24" class="d">-var _ = check.Suite(&amp;ClientSuite{})
</a><a href="#h3-0-25" id="h3-0-25" class="d">-
</a><a href="#h3-0-26" id="h3-0-26" class="d">-var (
</a><a href="#h3-0-27" id="h3-0-27" class="d">-	Equals = check.Equals
</a><a href="#h3-0-28" id="h3-0-28" class="d">-	IsNil  = check.IsNil
</a><a href="#h3-0-29" id="h3-0-29" class="d">-	Not    = check.Not
</a><a href="#h3-0-30" id="h3-0-30" class="d">-)
</a><a href="#h3-0-31" id="h3-0-31" class="d">-
</a><a href="#h3-0-32" id="h3-0-32" class="d">-type MockServer struct {
</a><a href="#h3-0-33" id="h3-0-33" class="d">-	Info    *ServerInfo
</a><a href="#h3-0-34" id="h3-0-34" class="d">-	Results []*Result
</a><a href="#h3-0-35" id="h3-0-35" class="d">-}
</a><a href="#h3-0-36" id="h3-0-36" class="d">-
</a><a href="#h3-0-37" id="h3-0-37" class="d">-func (m *MockServer) handle(conn net.Conn) {
</a><a href="#h3-0-38" id="h3-0-38" class="d">-	defer conn.Close()
</a><a href="#h3-0-39" id="h3-0-39" class="d">-
</a><a href="#h3-0-40" id="h3-0-40" class="d">-	encoder := json.NewEncoder(conn)
</a><a href="#h3-0-41" id="h3-0-41" class="d">-	decoder := json.NewDecoder(conn)
</a><a href="#h3-0-42" id="h3-0-42" class="d">-	for {
</a><a href="#h3-0-43" id="h3-0-43" class="d">-		ops.Encode(encoder, m.Info)
</a><a href="#h3-0-44" id="h3-0-44" class="d">-
</a><a href="#h3-0-45" id="h3-0-45" class="d">-		if op, err := ops.Decode(decoder); err != nil {
</a><a href="#h3-0-46" id="h3-0-46" class="d">-			if err == io.EOF {
</a><a href="#h3-0-47" id="h3-0-47" class="d">-				return
</a><a href="#h3-0-48" id="h3-0-48" class="d">-			}
</a><a href="#h3-0-49" id="h3-0-49" class="d">-			panic(err.Error())
</a><a href="#h3-0-50" id="h3-0-50" class="d">-		} else {
</a><a href="#h3-0-51" id="h3-0-51" class="d">-			if op.(*Query) == nil {
</a><a href="#h3-0-52" id="h3-0-52" class="d">-				panic(&quot;expected query&quot;)
</a><a href="#h3-0-53" id="h3-0-53" class="d">-			}
</a><a href="#h3-0-54" id="h3-0-54" class="d">-		}
</a><a href="#h3-0-55" id="h3-0-55" class="d">-
</a><a href="#h3-0-56" id="h3-0-56" class="d">-		for _, r := range m.Results {
</a><a href="#h3-0-57" id="h3-0-57" class="d">-			ops.Encode(encoder, r)
</a><a href="#h3-0-58" id="h3-0-58" class="d">-		}
</a><a href="#h3-0-59" id="h3-0-59" class="d">-
</a><a href="#h3-0-60" id="h3-0-60" class="d">-		ops.Encode(encoder, &amp;Stats{})
</a><a href="#h3-0-61" id="h3-0-61" class="d">-	}
</a><a href="#h3-0-62" id="h3-0-62" class="d">-}
</a><a href="#h3-0-63" id="h3-0-63" class="d">-
</a><a href="#h3-0-64" id="h3-0-64" class="d">-func runMockServer(handle func(net.Conn)) &lt;-chan string {
</a><a href="#h3-0-65" id="h3-0-65" class="d">-	ready := make(chan string, 1)
</a><a href="#h3-0-66" id="h3-0-66" class="d">-	go func() {
</a><a href="#h3-0-67" id="h3-0-67" class="d">-		defer close(ready)
</a><a href="#h3-0-68" id="h3-0-68" class="d">-		ln, err := net.Listen(&quot;tcp4&quot;, &quot;:0&quot;)
</a><a href="#h3-0-69" id="h3-0-69" class="d">-		if err != nil {
</a><a href="#h3-0-70" id="h3-0-70" class="d">-			panic(err.Error())
</a><a href="#h3-0-71" id="h3-0-71" class="d">-		}
</a><a href="#h3-0-72" id="h3-0-72" class="d">-		defer ln.Close()
</a><a href="#h3-0-73" id="h3-0-73" class="d">-		ready &lt;- ln.Addr().String()
</a><a href="#h3-0-74" id="h3-0-74" class="d">-		conn, err := ln.Accept()
</a><a href="#h3-0-75" id="h3-0-75" class="d">-		if err != nil {
</a><a href="#h3-0-76" id="h3-0-76" class="d">-			panic(err.Error())
</a><a href="#h3-0-77" id="h3-0-77" class="d">-		}
</a><a href="#h3-0-78" id="h3-0-78" class="d">-		handle(conn)
</a><a href="#h3-0-79" id="h3-0-79" class="d">-	}()
</a><a href="#h3-0-80" id="h3-0-80" class="d">-	return ready
</a><a href="#h3-0-81" id="h3-0-81" class="d">-}
</a><a href="#h3-0-82" id="h3-0-82" class="d">-
</a><a href="#h3-0-83" id="h3-0-83" class="d">-func (s *ClientSuite) connect(c *check.C, addr string) {
</a><a href="#h3-0-84" id="h3-0-84" class="d">-	var err error
</a><a href="#h3-0-85" id="h3-0-85" class="d">-	s.client, err = Dial(&quot;tcp&quot;, addr)
</a><a href="#h3-0-86" id="h3-0-86" class="d">-	if err != nil {
</a><a href="#h3-0-87" id="h3-0-87" class="d">-		c.Fatalf(&quot;connecting to %s: %s&quot;, addr, err.Error())
</a><a href="#h3-0-88" id="h3-0-88" class="d">-	}
</a><a href="#h3-0-89" id="h3-0-89" class="d">-}
</a><a href="#h3-0-90" id="h3-0-90" class="d">-
</a><a href="#h3-0-91" id="h3-0-91" class="d">-func (s *ClientSuite) TestQuery(c *check.C) {
</a><a href="#h3-0-92" id="h3-0-92" class="d">-	s.connect(c, &lt;-runMockServer((&amp;MockServer{
</a><a href="#h3-0-93" id="h3-0-93" class="d">-		Results: []*Result{
</a><a href="#h3-0-94" id="h3-0-94" class="d">-			{Line: &quot;match line 1&quot;},
</a><a href="#h3-0-95" id="h3-0-95" class="d">-		},
</a><a href="#h3-0-96" id="h3-0-96" class="d">-	}).handle))
</a><a href="#h3-0-97" id="h3-0-97" class="d">-	search, err := s.client.Query(&amp;Query{Line: &quot;.&quot;})
</a><a href="#h3-0-98" id="h3-0-98" class="d">-	c.Assert(err, check.IsNil)
</a><a href="#h3-0-99" id="h3-0-99" class="d">-	var n int
</a><a href="#h3-0-100" id="h3-0-100" class="d">-	for r := range search.Results() {
</a><a href="#h3-0-101" id="h3-0-101" class="d">-		n++
</a><a href="#h3-0-102" id="h3-0-102" class="d">-		c.Assert(r.Line, check.Not(Equals), &quot;&quot;)
</a><a href="#h3-0-103" id="h3-0-103" class="d">-	}
</a><a href="#h3-0-104" id="h3-0-104" class="d">-	c.Assert(n, Equals, 1)
</a><a href="#h3-0-105" id="h3-0-105" class="d">-	st, e := search.Close()
</a><a href="#h3-0-106" id="h3-0-106" class="d">-	c.Assert(e, IsNil)
</a><a href="#h3-0-107" id="h3-0-107" class="d">-	c.Assert(st, Not(IsNil))
</a><a href="#h3-0-108" id="h3-0-108" class="d">-}
</a><a href="#h3-0-109" id="h3-0-109" class="d">-
</a><a href="#h3-0-110" id="h3-0-110" class="d">-func (s *ClientSuite) TestTwoQueries(c *check.C) {
</a><a href="#h3-0-111" id="h3-0-111" class="d">-	s.connect(c, &lt;-runMockServer((&amp;MockServer{
</a><a href="#h3-0-112" id="h3-0-112" class="d">-		Results: []*Result{
</a><a href="#h3-0-113" id="h3-0-113" class="d">-			{Line: &quot;match line 1&quot;},
</a><a href="#h3-0-114" id="h3-0-114" class="d">-		},
</a><a href="#h3-0-115" id="h3-0-115" class="d">-	}).handle))
</a><a href="#h3-0-116" id="h3-0-116" class="d">-
</a><a href="#h3-0-117" id="h3-0-117" class="d">-	search, err := s.client.Query(&amp;Query{Line: &quot;.&quot;})
</a><a href="#h3-0-118" id="h3-0-118" class="d">-	c.Assert(err, IsNil)
</a><a href="#h3-0-119" id="h3-0-119" class="d">-	_, err = search.Close()
</a><a href="#h3-0-120" id="h3-0-120" class="d">-	c.Assert(err, IsNil)
</a><a href="#h3-0-121" id="h3-0-121" class="d">-
</a><a href="#h3-0-122" id="h3-0-122" class="d">-	search, err = s.client.Query(&amp;Query{Line: &quot;.&quot;})
</a><a href="#h3-0-123" id="h3-0-123" class="d">-	c.Assert(err, IsNil)
</a><a href="#h3-0-124" id="h3-0-124" class="d">-	n := 0
</a><a href="#h3-0-125" id="h3-0-125" class="d">-	for _ = range search.Results() {
</a><a href="#h3-0-126" id="h3-0-126" class="d">-		n++
</a><a href="#h3-0-127" id="h3-0-127" class="d">-	}
</a><a href="#h3-0-128" id="h3-0-128" class="d">-	_, err = search.Close()
</a><a href="#h3-0-129" id="h3-0-129" class="d">-	if err != nil {
</a><a href="#h3-0-130" id="h3-0-130" class="d">-		c.Fatalf(&quot;Unexpected error: %s&quot;, err.Error())
</a><a href="#h3-0-131" id="h3-0-131" class="d">-	}
</a><a href="#h3-0-132" id="h3-0-132" class="d">-	c.Assert(n, Not(Equals), 0)
</a><a href="#h3-0-133" id="h3-0-133" class="d">-}
</a><a href="#h3-0-134" id="h3-0-134" class="d">-
</a><a href="#h3-0-135" id="h3-0-135" class="d">-func (s *ClientSuite) TestLongLine(c *check.C) {
</a><a href="#h3-0-136" id="h3-0-136" class="d">-	longLine := strings.Repeat(&quot;X&quot;, 1&lt;&lt;16)
</a><a href="#h3-0-137" id="h3-0-137" class="d">-	s.connect(c, &lt;-runMockServer((&amp;MockServer{
</a><a href="#h3-0-138" id="h3-0-138" class="d">-		Results: []*Result{
</a><a href="#h3-0-139" id="h3-0-139" class="d">-			{Line: longLine},
</a><a href="#h3-0-140" id="h3-0-140" class="d">-		},
</a><a href="#h3-0-141" id="h3-0-141" class="d">-	}).handle))
</a><a href="#h3-0-142" id="h3-0-142" class="d">-	search, err := s.client.Query(&amp;Query{Line: &quot;.&quot;})
</a><a href="#h3-0-143" id="h3-0-143" class="d">-	c.Assert(err, IsNil)
</a><a href="#h3-0-144" id="h3-0-144" class="d">-	var rs []*Result
</a><a href="#h3-0-145" id="h3-0-145" class="d">-	for r := range search.Results() {
</a><a href="#h3-0-146" id="h3-0-146" class="d">-		rs = append(rs, r)
</a><a href="#h3-0-147" id="h3-0-147" class="d">-	}
</a><a href="#h3-0-148" id="h3-0-148" class="d">-
</a><a href="#h3-0-149" id="h3-0-149" class="d">-	c.Assert(len(rs), Equals, 1)
</a><a href="#h3-0-150" id="h3-0-150" class="d">-	c.Assert(rs[0].Line, Equals, longLine)
</a><a href="#h3-0-151" id="h3-0-151" class="d">-}
</a><a href="#h3-0-152" id="h3-0-152" class="d">-
</a><a href="#h3-0-153" id="h3-0-153" class="d">-type MockServerQueryError struct {
</a><a href="#h3-0-154" id="h3-0-154" class="d">-	Info *ServerInfo
</a><a href="#h3-0-155" id="h3-0-155" class="d">-	Err  string
</a><a href="#h3-0-156" id="h3-0-156" class="d">-}
</a><a href="#h3-0-157" id="h3-0-157" class="d">-
</a><a href="#h3-0-158" id="h3-0-158" class="d">-func (m *MockServerQueryError) handle(conn net.Conn) {
</a><a href="#h3-0-159" id="h3-0-159" class="d">-	defer conn.Close()
</a><a href="#h3-0-160" id="h3-0-160" class="d">-	encoder := json.NewEncoder(conn)
</a><a href="#h3-0-161" id="h3-0-161" class="d">-	decoder := json.NewDecoder(conn)
</a><a href="#h3-0-162" id="h3-0-162" class="d">-	for {
</a><a href="#h3-0-163" id="h3-0-163" class="d">-		ops.Encode(encoder, m.Info)
</a><a href="#h3-0-164" id="h3-0-164" class="d">-
</a><a href="#h3-0-165" id="h3-0-165" class="d">-		if op, err := ops.Decode(decoder); err != nil {
</a><a href="#h3-0-166" id="h3-0-166" class="d">-			if err == io.EOF {
</a><a href="#h3-0-167" id="h3-0-167" class="d">-				return
</a><a href="#h3-0-168" id="h3-0-168" class="d">-			}
</a><a href="#h3-0-169" id="h3-0-169" class="d">-			panic(err.Error())
</a><a href="#h3-0-170" id="h3-0-170" class="d">-		} else {
</a><a href="#h3-0-171" id="h3-0-171" class="d">-			if op.(*Query) == nil {
</a><a href="#h3-0-172" id="h3-0-172" class="d">-				panic(&quot;expected query&quot;)
</a><a href="#h3-0-173" id="h3-0-173" class="d">-			}
</a><a href="#h3-0-174" id="h3-0-174" class="d">-		}
</a><a href="#h3-0-175" id="h3-0-175" class="d">-
</a><a href="#h3-0-176" id="h3-0-176" class="d">-		re := ReplyError(m.Err)
</a><a href="#h3-0-177" id="h3-0-177" class="d">-		ops.Encode(encoder, &amp;re)
</a><a href="#h3-0-178" id="h3-0-178" class="d">-	}
</a><a href="#h3-0-179" id="h3-0-179" class="d">-}
</a><a href="#h3-0-180" id="h3-0-180" class="d">-
</a><a href="#h3-0-181" id="h3-0-181" class="d">-func (s *ClientSuite) TestBadRegex(c *check.C) {
</a><a href="#h3-0-182" id="h3-0-182" class="d">-	errStr := &quot;Invalid query: (&quot;
</a><a href="#h3-0-183" id="h3-0-183" class="d">-	s.connect(c, &lt;-runMockServer((&amp;MockServerQueryError{
</a><a href="#h3-0-184" id="h3-0-184" class="d">-		Err: errStr,
</a><a href="#h3-0-185" id="h3-0-185" class="d">-	}).handle))
</a><a href="#h3-0-186" id="h3-0-186" class="d">-
</a><a href="#h3-0-187" id="h3-0-187" class="d">-	search, err := s.client.Query(&amp;Query{Line: &quot;(&quot;})
</a><a href="#h3-0-188" id="h3-0-188" class="d">-	c.Assert(err, IsNil)
</a><a href="#h3-0-189" id="h3-0-189" class="d">-	for _ = range search.Results() {
</a><a href="#h3-0-190" id="h3-0-190" class="d">-		c.Fatal(&quot;Got back a result from an erroneous query!&quot;)
</a><a href="#h3-0-191" id="h3-0-191" class="d">-	}
</a><a href="#h3-0-192" id="h3-0-192" class="d">-	st, e := search.Close()
</a><a href="#h3-0-193" id="h3-0-193" class="d">-	c.Assert(st, IsNil)
</a><a href="#h3-0-194" id="h3-0-194" class="d">-	if e == nil {
</a><a href="#h3-0-195" id="h3-0-195" class="d">-		c.Fatal(&quot;Didn&#39;t get back an error&quot;)
</a><a href="#h3-0-196" id="h3-0-196" class="d">-	}
</a><a href="#h3-0-197" id="h3-0-197" class="d">-	if q, ok := e.(QueryError); ok {
</a><a href="#h3-0-198" id="h3-0-198" class="d">-		c.Assert(q.Query.Line, Equals, &quot;(&quot;)
</a><a href="#h3-0-199" id="h3-0-199" class="d">-		c.Assert(q.Err, Equals, errStr)
</a><a href="#h3-0-200" id="h3-0-200" class="d">-	} else {
</a><a href="#h3-0-201" id="h3-0-201" class="d">-		c.Fatalf(&quot;Error %v wasn&#39;t a QueryError&quot;, e)
</a><a href="#h3-0-202" id="h3-0-202" class="d">-	}
</a><a href="#h3-0-203" id="h3-0-203" class="d">-}
</a><a href="#h3-0-204" id="h3-0-204" class="d">-
</a><a href="#h3-0-205" id="h3-0-205" class="d">-func mockServerShutdown() &lt;-chan string {
</a><a href="#h3-0-206" id="h3-0-206" class="d">-	return runMockServer(func(conn net.Conn) {
</a><a href="#h3-0-207" id="h3-0-207" class="d">-		ops.Encode(json.NewEncoder(conn), &amp;ServerInfo{})
</a><a href="#h3-0-208" id="h3-0-208" class="d">-		conn.Close()
</a><a href="#h3-0-209" id="h3-0-209" class="d">-	})
</a><a href="#h3-0-210" id="h3-0-210" class="d">-}
</a><a href="#h3-0-211" id="h3-0-211" class="d">-
</a><a href="#h3-0-212" id="h3-0-212" class="d">-func (s *ClientSuite) TestShutdown(c *check.C) {
</a><a href="#h3-0-213" id="h3-0-213" class="d">-	addr := &lt;-mockServerShutdown()
</a><a href="#h3-0-214" id="h3-0-214" class="d">-
</a><a href="#h3-0-215" id="h3-0-215" class="d">-	s.connect(c, addr)
</a><a href="#h3-0-216" id="h3-0-216" class="d">-
</a><a href="#h3-0-217" id="h3-0-217" class="d">-	search, err := s.client.Query(&amp;Query{Line: &quot;l&quot;})
</a><a href="#h3-0-218" id="h3-0-218" class="d">-	c.Assert(err, IsNil)
</a><a href="#h3-0-219" id="h3-0-219" class="d">-	c.Assert(search, Not(IsNil))
</a><a href="#h3-0-220" id="h3-0-220" class="d">-
</a><a href="#h3-0-221" id="h3-0-221" class="d">-	results := search.Results()
</a><a href="#h3-0-222" id="h3-0-222" class="d">-	c.Assert(results, Not(IsNil))
</a><a href="#h3-0-223" id="h3-0-223" class="d">-	for r := range results {
</a><a href="#h3-0-224" id="h3-0-224" class="d">-		c.Errorf(&quot;Got a result back: %+v&quot;, r)
</a><a href="#h3-0-225" id="h3-0-225" class="d">-	}
</a><a href="#h3-0-226" id="h3-0-226" class="d">-	st, err := search.Close()
</a><a href="#h3-0-227" id="h3-0-227" class="d">-	c.Assert(st, IsNil)
</a><a href="#h3-0-228" id="h3-0-228" class="d">-	c.Assert(err, Not(IsNil))
</a><a href="#h3-0-229" id="h3-0-229" class="d">-
</a><a href="#h3-0-230" id="h3-0-230" class="d">-	search, err = s.client.Query(&amp;Query{Line: &quot;l&quot;})
</a><a href="#h3-0-231" id="h3-0-231" class="d">-	c.Assert(err, Not(IsNil))
</a><a href="#h3-0-232" id="h3-0-232" class="d">-	c.Assert(search, IsNil)
</a><a href="#h3-0-233" id="h3-0-233" class="d">-}
</a><b>diff --git a/<a id="h4" href="../file/client/test/BUILD">client/test/BUILD</a> b/<a href="../file/client/test/BUILD">client/test/BUILD</a></b>
<a href="#h4-0" id="h4-0" class="h">@@ -11,7 +11,10 @@ name = &quot;go_default_library&quot;,
</a>     &quot;testutil.go&quot;,
   ],
   deps = [
<a href="#h4-0-3" id="h4-0-3" class="d">-    &quot;//client:go_default_library&quot;,
</a><a href="#h4-0-4" id="h4-0-4" class="i">+    &quot;//src/proto:go_proto&quot;,
</a><a href="#h4-0-5" id="h4-0-5" class="i">+
</a><a href="#h4-0-6" id="h4-0-6" class="i">+    &quot;@org_golang_x_net//context:go_default_library&quot;,
</a><a href="#h4-0-7" id="h4-0-7" class="i">+    &quot;@org_golang_google_grpc//:go_default_library&quot;,
</a>   ],
   visibility = [&quot;//visibility:public&quot;],
 )
<a href="#h4-1" id="h4-1" class="h">@@ -22,12 +25,9 @@ go_test(
</a>   srcs = [
     &quot;bench_test.go&quot;,
     &quot;integration_test.go&quot;,
<a href="#h4-1-3" id="h4-1-3" class="d">-    &quot;mock_test.go&quot;,
</a>   ],
   deps = [
<a href="#h4-1-6" id="h4-1-6" class="d">-    &quot;//client:go_default_library&quot;,
</a>     &quot;//vendor/gopkg.in/check.v1:go_default_library&quot;,
   ],
   library = &quot;:go_default_library&quot;,
 )
<a href="#h4-1-11" id="h4-1-11" class="d">-
</a><b>diff --git a/<a id="h5" href="../file/client/test/bench_test.go">client/test/bench_test.go</a> b/<a href="../file/client/test/bench_test.go">client/test/bench_test.go</a></b>
<a href="#h5-0" id="h5-0" class="h">@@ -1,15 +1,16 @@
</a> package test
 
 import (
<a href="#h5-0-3" id="h5-0-3" class="i">+	&quot;context&quot;
</a> 	&quot;flag&quot;
 	&quot;testing&quot;
 
<a href="#h5-0-7" id="h5-0-7" class="d">-	&quot;github.com/livegrep/livegrep/client&quot;
</a><a href="#h5-0-8" id="h5-0-8" class="i">+	pb &quot;github.com/livegrep/livegrep/src/proto/go_proto&quot;
</a> )
 
 var index = flag.String(&quot;index&quot;, &quot;&quot;, &quot;Path to an index to run benchmarks against&quot;)
 
<a href="#h5-0-13" id="h5-0-13" class="d">-func benchmarkQuery(b *testing.B, q *client.Query) {
</a><a href="#h5-0-14" id="h5-0-14" class="i">+func benchmarkQuery(b *testing.B, q *pb.Query) {
</a> 	if *index == &quot;&quot; {
 		b.SkipNow()
 	}
<a href="#h5-1" id="h5-1" class="h">@@ -19,68 +20,56 @@ func benchmarkQuery(b *testing.B, q *client.Query) {
</a> 		b.Fatal(e.Error())
 	}
 
<a href="#h5-1-3" id="h5-1-3" class="i">+	b.ResetTimer()
</a> 	for i := 0; i &lt; b.N+1; i++ {
<a href="#h5-1-5" id="h5-1-5" class="d">-		if i == 1 {
</a><a href="#h5-1-6" id="h5-1-6" class="d">-			// Don&#39;t count the first run+setup, to make
</a><a href="#h5-1-7" id="h5-1-7" class="d">-			// sure everything is primed.
</a><a href="#h5-1-8" id="h5-1-8" class="d">-			b.ResetTimer()
</a><a href="#h5-1-9" id="h5-1-9" class="d">-		}
</a><a href="#h5-1-10" id="h5-1-10" class="d">-		if e := c.Err(); e != nil {
</a><a href="#h5-1-11" id="h5-1-11" class="d">-			b.Fatalf(&quot;err: %s&quot;, e.Error())
</a><a href="#h5-1-12" id="h5-1-12" class="d">-		}
</a><a href="#h5-1-13" id="h5-1-13" class="d">-		s, e := c.Query(q)
</a><a href="#h5-1-14" id="h5-1-14" class="i">+		_, e := c.Search(context.Background(), q)
</a> 		if e != nil {
 			b.Fatalf(&quot;query: %s&quot;, e.Error())
 		}
<a href="#h5-1-18" id="h5-1-18" class="d">-		for _ = range s.Results() {
</a><a href="#h5-1-19" id="h5-1-19" class="d">-		}
</a><a href="#h5-1-20" id="h5-1-20" class="d">-		if _, e := s.Close(); e != nil {
</a><a href="#h5-1-21" id="h5-1-21" class="d">-			b.Fatalf(&quot;close: %s&quot;, e.Error())
</a><a href="#h5-1-22" id="h5-1-22" class="d">-		}
</a> 	}
 }
 
 func BenchmarkDazed(b *testing.B) {
<a href="#h5-1-27" id="h5-1-27" class="d">-	benchmarkQuery(b, &amp;client.Query{Line: `dazed`})
</a><a href="#h5-1-28" id="h5-1-28" class="i">+	benchmarkQuery(b, &amp;pb.Query{Line: `dazed`})
</a> }
 
 func BenchmarkDazedCaseFold(b *testing.B) {
<a href="#h5-1-32" id="h5-1-32" class="d">-	benchmarkQuery(b, &amp;client.Query{Line: `dazed`, FoldCase: true})
</a><a href="#h5-1-33" id="h5-1-33" class="i">+	benchmarkQuery(b, &amp;pb.Query{Line: `dazed`, FoldCase: true})
</a> }
 
 func BenchmarkDefKmalloc(b *testing.B) {
<a href="#h5-1-37" id="h5-1-37" class="d">-	benchmarkQuery(b, &amp;client.Query{Line: `^(\s.*\S)?kmalloc\s*\(`})
</a><a href="#h5-1-38" id="h5-1-38" class="i">+	benchmarkQuery(b, &amp;pb.Query{Line: `^(\s.*\S)?kmalloc\s*\(`})
</a> }
 
 func BenchmarkSpaceEOL(b *testing.B) {
<a href="#h5-1-42" id="h5-1-42" class="d">-	benchmarkQuery(b, &amp;client.Query{Line: `\s$`})
</a><a href="#h5-1-43" id="h5-1-43" class="i">+	benchmarkQuery(b, &amp;pb.Query{Line: `\s$`})
</a> }
 
 func Benchmark10Space(b *testing.B) {
<a href="#h5-1-47" id="h5-1-47" class="d">-	benchmarkQuery(b, &amp;client.Query{Line: `\s{10}$`})
</a><a href="#h5-1-48" id="h5-1-48" class="i">+	benchmarkQuery(b, &amp;pb.Query{Line: `\s{10}$`})
</a> }
 
 func BenchmarkUUID(b *testing.B) {
<a href="#h5-1-52" id="h5-1-52" class="d">-	benchmarkQuery(b, &amp;client.Query{
</a><a href="#h5-1-53" id="h5-1-53" class="i">+	benchmarkQuery(b, &amp;pb.Query{
</a> 		Line: `[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}`,
 	})
 }
 
 func BenchmarkUUIDCaseFold(b *testing.B) {
<a href="#h5-1-59" id="h5-1-59" class="d">-	benchmarkQuery(b, &amp;client.Query{
</a><a href="#h5-1-60" id="h5-1-60" class="i">+	benchmarkQuery(b, &amp;pb.Query{
</a> 		Line:     `[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}`,
 		FoldCase: true,
 	})
 }
 
 func BenchmarkAlphanum20(b *testing.B) {
<a href="#h5-1-67" id="h5-1-67" class="d">-	benchmarkQuery(b, &amp;client.Query{Line: `[0-9a-f]{20}`})
</a><a href="#h5-1-68" id="h5-1-68" class="i">+	benchmarkQuery(b, &amp;pb.Query{Line: `[0-9a-f]{20}`})
</a> }
 
 func BenchmarkAlphanum50(b *testing.B) {
<a href="#h5-1-72" id="h5-1-72" class="d">-	benchmarkQuery(b, &amp;client.Query{Line: `[0-9a-f]{50}`})
</a><a href="#h5-1-73" id="h5-1-73" class="i">+	benchmarkQuery(b, &amp;pb.Query{Line: `[0-9a-f]{50}`})
</a> }
 
 func BenchmarkAlphanum100(b *testing.B) {
<a href="#h5-1-77" id="h5-1-77" class="d">-	benchmarkQuery(b, &amp;client.Query{Line: `[0-9a-f]{50}`})
</a><a href="#h5-1-78" id="h5-1-78" class="i">+	benchmarkQuery(b, &amp;pb.Query{Line: `[0-9a-f]{50}`})
</a> }
<b>diff --git a/<a id="h6" href="../file/client/test/integration_test.go">client/test/integration_test.go</a> b/<a href="../file/client/test/integration_test.go">client/test/integration_test.go</a></b>
<a href="#h6-0" id="h6-0" class="h">@@ -3,6 +3,7 @@ package test
</a> import (
 	&quot;bufio&quot;
 	&quot;bytes&quot;
<a href="#h6-0-3" id="h6-0-3" class="i">+	&quot;context&quot;
</a> 	&quot;encoding/json&quot;
 	&quot;flag&quot;
 	&quot;fmt&quot;
<a href="#h6-1" id="h6-1" class="h">@@ -16,8 +17,9 @@ import (
</a> 	&quot;strconv&quot;
 	&quot;testing&quot;
 
<a href="#h6-1-3" id="h6-1-3" class="d">-	&quot;github.com/livegrep/livegrep/client&quot;
</a> 	&quot;gopkg.in/check.v1&quot;
<a href="#h6-1-5" id="h6-1-5" class="i">+
</a><a href="#h6-1-6" id="h6-1-6" class="i">+	pb &quot;github.com/livegrep/livegrep/src/proto/go_proto&quot;
</a> )
 
 const LineLimit = 1024
<a href="#h6-2" id="h6-2" class="h">@@ -30,7 +32,7 @@ var patterns = flag.String(&quot;test.patterns&quot;, &quot;patterns&quot;, &quot;File containing pattern
</a> type IntegrationSuite struct {
 	config   *os.File
 	index    *os.File
<a href="#h6-2-3" id="h6-2-3" class="d">-	client   client.Client
</a><a href="#h6-2-4" id="h6-2-4" class="i">+	client   *TestClient
</a> 	patterns []string
 }
 
<a href="#h6-3" id="h6-3" class="h">@@ -58,7 +60,7 @@ func (i *IntegrationSuite) loadPatterns() error {
</a> 
 func (i *IntegrationSuite) SetUpSuite(c *check.C) {
 	if *repo == &quot;&quot; {
<a href="#h6-3-3" id="h6-3-3" class="d">-		c.Skip(&quot;No test.root specified.&quot;)
</a><a href="#h6-3-4" id="h6-3-4" class="i">+		c.Skip(&quot;No test.repo specified.&quot;)
</a> 		return
 	}
 
<a href="#h6-4" id="h6-4" class="h">@@ -118,14 +120,10 @@ func (i *IntegrationSuite) TearDownSuite(*check.C) {
</a> }
 
 func (i *IntegrationSuite) TestBasic(c *check.C) {
<a href="#h6-4-3" id="h6-4-3" class="d">-	search, err := i.client.Query(&amp;client.Query{Line: &quot;.&quot;})
</a><a href="#h6-4-4" id="h6-4-4" class="d">-	if err != nil {
</a><a href="#h6-4-5" id="h6-4-5" class="d">-		c.Fatalf(&quot;Query: %s&quot;, err)
</a><a href="#h6-4-6" id="h6-4-6" class="d">-	}
</a><a href="#h6-4-7" id="h6-4-7" class="d">-	for _ = range search.Results() {
</a><a href="#h6-4-8" id="h6-4-8" class="d">-	}
</a><a href="#h6-4-9" id="h6-4-9" class="d">-	stats, err := search.Close()
</a><a href="#h6-4-10" id="h6-4-10" class="d">-	c.Check(stats, check.Not(check.IsNil))
</a><a href="#h6-4-11" id="h6-4-11" class="i">+	search, err := i.client.Search(
</a><a href="#h6-4-12" id="h6-4-12" class="i">+		context.Background(),
</a><a href="#h6-4-13" id="h6-4-13" class="i">+		&amp;pb.Query{Line: &quot;.&quot;})
</a><a href="#h6-4-14" id="h6-4-14" class="i">+	c.Check(search, check.Not(check.IsNil))
</a> 	c.Check(err, check.IsNil)
 }
 
<a href="#h6-5" id="h6-5" class="h">@@ -258,14 +256,15 @@ func (i *IntegrationSuite) crosscheck(c *check.C, regex string, casefold bool) {
</a> 	}
 
 	var livegrepMatches []Match
<a href="#h6-5-3" id="h6-5-3" class="d">-	search, err := i.client.Query(&amp;client.Query{Line: regex, FoldCase: casefold})
</a><a href="#h6-5-4" id="h6-5-4" class="i">+	search, err := i.client.Search(
</a><a href="#h6-5-5" id="h6-5-5" class="i">+		context.Background(),
</a><a href="#h6-5-6" id="h6-5-6" class="i">+		&amp;pb.Query{Line: regex, FoldCase: casefold})
</a> 	if err != nil {
 		c.Fatalf(&quot;Query: %s&quot;, err)
 	}
<a href="#h6-5-10" id="h6-5-10" class="d">-	for m := range search.Results() {
</a><a href="#h6-5-11" id="h6-5-11" class="d">-		livegrepMatches = append(livegrepMatches, Match{m.Path, m.LineNumber})
</a><a href="#h6-5-12" id="h6-5-12" class="i">+	for _, m := range search.Results {
</a><a href="#h6-5-13" id="h6-5-13" class="i">+		livegrepMatches = append(livegrepMatches, Match{m.Path, int(m.LineNumber)})
</a> 	}
<a href="#h6-5-15" id="h6-5-15" class="d">-	search.Close()
</a> 
 	sort.Sort(SortMatches(gitMatches))
 	sort.Sort(SortMatches(livegrepMatches))
<b>diff --git a/<a id="h7" href="../file/client/test/mock_test.go">client/test/mock_test.go</a> b/<a href="../file/client/test/mock_test.go">client/test/mock_test.go</a></b>
<a href="#h7-0" id="h7-0" class="h">@@ -1,75 +0,0 @@
</a><a href="#h7-0-0" id="h7-0-0" class="d">-package test
</a><a href="#h7-0-1" id="h7-0-1" class="d">-
</a><a href="#h7-0-2" id="h7-0-2" class="d">-import (
</a><a href="#h7-0-3" id="h7-0-3" class="d">-	&quot;errors&quot;
</a><a href="#h7-0-4" id="h7-0-4" class="d">-	&quot;reflect&quot;
</a><a href="#h7-0-5" id="h7-0-5" class="d">-	&quot;testing&quot;
</a><a href="#h7-0-6" id="h7-0-6" class="d">-
</a><a href="#h7-0-7" id="h7-0-7" class="d">-	&quot;github.com/livegrep/livegrep/client&quot;
</a><a href="#h7-0-8" id="h7-0-8" class="d">-)
</a><a href="#h7-0-9" id="h7-0-9" class="d">-
</a><a href="#h7-0-10" id="h7-0-10" class="d">-func TestQueryError(t *testing.T) {
</a><a href="#h7-0-11" id="h7-0-11" class="d">-	m := &amp;MockClient{QueryError: errors.New(&quot;query error&quot;)}
</a><a href="#h7-0-12" id="h7-0-12" class="d">-	s, e := m.Query(&amp;client.Query{})
</a><a href="#h7-0-13" id="h7-0-13" class="d">-	if e == nil || s != nil {
</a><a href="#h7-0-14" id="h7-0-14" class="d">-		t.Fatalf(&quot;QueryError&quot;)
</a><a href="#h7-0-15" id="h7-0-15" class="d">-	}
</a><a href="#h7-0-16" id="h7-0-16" class="d">-	if e.Error() != &quot;query error&quot; {
</a><a href="#h7-0-17" id="h7-0-17" class="d">-		t.Fatalf(&quot;QueryError %s&quot;, e)
</a><a href="#h7-0-18" id="h7-0-18" class="d">-	}
</a><a href="#h7-0-19" id="h7-0-19" class="d">-}
</a><a href="#h7-0-20" id="h7-0-20" class="d">-
</a><a href="#h7-0-21" id="h7-0-21" class="d">-func TestSearchError(t *testing.T) {
</a><a href="#h7-0-22" id="h7-0-22" class="d">-	m := &amp;MockClient{SearchError: errors.New(&quot;search error&quot;)}
</a><a href="#h7-0-23" id="h7-0-23" class="d">-	s, e := m.Query(&amp;client.Query{})
</a><a href="#h7-0-24" id="h7-0-24" class="d">-	if e != nil || s == nil {
</a><a href="#h7-0-25" id="h7-0-25" class="d">-		t.Fatal(&quot;SearchError&quot;)
</a><a href="#h7-0-26" id="h7-0-26" class="d">-	}
</a><a href="#h7-0-27" id="h7-0-27" class="d">-	r := s.Results()
</a><a href="#h7-0-28" id="h7-0-28" class="d">-	if _, ok := &lt;-r; ok {
</a><a href="#h7-0-29" id="h7-0-29" class="d">-		t.Fatal(&quot;SearchError results&quot;)
</a><a href="#h7-0-30" id="h7-0-30" class="d">-	}
</a><a href="#h7-0-31" id="h7-0-31" class="d">-	_, e = s.Close()
</a><a href="#h7-0-32" id="h7-0-32" class="d">-	if e == nil {
</a><a href="#h7-0-33" id="h7-0-33" class="d">-		t.Fatal(&quot;SearchError error&quot;)
</a><a href="#h7-0-34" id="h7-0-34" class="d">-	}
</a><a href="#h7-0-35" id="h7-0-35" class="d">-	if e.Error() != &quot;search error&quot; {
</a><a href="#h7-0-36" id="h7-0-36" class="d">-		t.Fatal(&quot;SearchErrors&quot;, e)
</a><a href="#h7-0-37" id="h7-0-37" class="d">-	}
</a><a href="#h7-0-38" id="h7-0-38" class="d">-}
</a><a href="#h7-0-39" id="h7-0-39" class="d">-
</a><a href="#h7-0-40" id="h7-0-40" class="d">-func TestErr(t *testing.T) {
</a><a href="#h7-0-41" id="h7-0-41" class="d">-	m := &amp;MockClient{Err_: errors.New(&quot;client error&quot;)}
</a><a href="#h7-0-42" id="h7-0-42" class="d">-	e := m.Err()
</a><a href="#h7-0-43" id="h7-0-43" class="d">-	if e == nil || e.Error() != &quot;client error&quot; {
</a><a href="#h7-0-44" id="h7-0-44" class="d">-		t.Fatal(&quot;Err&quot;, e)
</a><a href="#h7-0-45" id="h7-0-45" class="d">-	}
</a><a href="#h7-0-46" id="h7-0-46" class="d">-}
</a><a href="#h7-0-47" id="h7-0-47" class="d">-
</a><a href="#h7-0-48" id="h7-0-48" class="d">-func TestResults(t *testing.T) {
</a><a href="#h7-0-49" id="h7-0-49" class="d">-	rs := []*client.Result{
</a><a href="#h7-0-50" id="h7-0-50" class="d">-		{Line: &quot;line 1&quot;},
</a><a href="#h7-0-51" id="h7-0-51" class="d">-		{Line: &quot;line 2&quot;},
</a><a href="#h7-0-52" id="h7-0-52" class="d">-	}
</a><a href="#h7-0-53" id="h7-0-53" class="d">-	st := &amp;client.Stats{ExitReason: &quot;time&quot;}
</a><a href="#h7-0-54" id="h7-0-54" class="d">-	m := &amp;MockClient{Results: rs, Stats: st}
</a><a href="#h7-0-55" id="h7-0-55" class="d">-	s, e := m.Query(&amp;client.Query{})
</a><a href="#h7-0-56" id="h7-0-56" class="d">-	if s == nil || e != nil {
</a><a href="#h7-0-57" id="h7-0-57" class="d">-		t.Fatal(&quot;Results&quot;, s, e)
</a><a href="#h7-0-58" id="h7-0-58" class="d">-	}
</a><a href="#h7-0-59" id="h7-0-59" class="d">-	rc := s.Results()
</a><a href="#h7-0-60" id="h7-0-60" class="d">-	i := 0
</a><a href="#h7-0-61" id="h7-0-61" class="d">-	for r := range rc {
</a><a href="#h7-0-62" id="h7-0-62" class="d">-		if !reflect.DeepEqual(r, rs[i]) {
</a><a href="#h7-0-63" id="h7-0-63" class="d">-			t.Fatal(&quot;result&quot;, i, r)
</a><a href="#h7-0-64" id="h7-0-64" class="d">-		}
</a><a href="#h7-0-65" id="h7-0-65" class="d">-		i++
</a><a href="#h7-0-66" id="h7-0-66" class="d">-	}
</a><a href="#h7-0-67" id="h7-0-67" class="d">-	if i != len(rs) {
</a><a href="#h7-0-68" id="h7-0-68" class="d">-		t.Fatalf(&quot;len %d!=%d&quot;, len(rs), i)
</a><a href="#h7-0-69" id="h7-0-69" class="d">-	}
</a><a href="#h7-0-70" id="h7-0-70" class="d">-	st_, e := s.Close()
</a><a href="#h7-0-71" id="h7-0-71" class="d">-	if st_ != st || e != nil {
</a><a href="#h7-0-72" id="h7-0-72" class="d">-		t.Fatal(&quot;Results&quot;)
</a><a href="#h7-0-73" id="h7-0-73" class="d">-	}
</a><a href="#h7-0-74" id="h7-0-74" class="d">-}
</a><b>diff --git a/<a id="h8" href="../file/client/test/testutil.go">client/test/testutil.go</a> b/<a href="../file/client/test/testutil.go">client/test/testutil.go</a></b>
<a href="#h8-0" id="h8-0" class="h">@@ -1,85 +1,48 @@
</a> package test
 
 import (
<a href="#h8-0-3" id="h8-0-3" class="d">-	&quot;io&quot;
</a><a href="#h8-0-4" id="h8-0-4" class="i">+	&quot;context&quot;
</a><a href="#h8-0-5" id="h8-0-5" class="i">+	&quot;fmt&quot;
</a> 	&quot;os&quot;
 	&quot;os/exec&quot;
 
<a href="#h8-0-9" id="h8-0-9" class="d">-	&quot;github.com/livegrep/livegrep/client&quot;
</a><a href="#h8-0-10" id="h8-0-10" class="d">-)
</a><a href="#h8-0-11" id="h8-0-11" class="d">-
</a><a href="#h8-0-12" id="h8-0-12" class="d">-type childClient struct {
</a><a href="#h8-0-13" id="h8-0-13" class="d">-	client.Client
</a><a href="#h8-0-14" id="h8-0-14" class="d">-	cmd  *exec.Cmd
</a><a href="#h8-0-15" id="h8-0-15" class="d">-	wait chan error
</a><a href="#h8-0-16" id="h8-0-16" class="d">-	err  error
</a><a href="#h8-0-17" id="h8-0-17" class="d">-}
</a><a href="#h8-0-18" id="h8-0-18" class="d">-
</a><a href="#h8-0-19" id="h8-0-19" class="d">-func (c *childClient) Close() {
</a><a href="#h8-0-20" id="h8-0-20" class="d">-	c.Client.Close()
</a><a href="#h8-0-21" id="h8-0-21" class="d">-	if c.err != nil {
</a><a href="#h8-0-22" id="h8-0-22" class="d">-		return
</a><a href="#h8-0-23" id="h8-0-23" class="d">-	}
</a><a href="#h8-0-24" id="h8-0-24" class="d">-	&lt;-c.wait
</a><a href="#h8-0-25" id="h8-0-25" class="d">-}
</a><a href="#h8-0-26" id="h8-0-26" class="i">+	&quot;google.golang.org/grpc&quot;
</a> 
<a href="#h8-0-28" id="h8-0-28" class="d">-func (c *childClient) Err() error {
</a><a href="#h8-0-29" id="h8-0-29" class="d">-	select {
</a><a href="#h8-0-30" id="h8-0-30" class="d">-	case c.err = &lt;-c.wait:
</a><a href="#h8-0-31" id="h8-0-31" class="d">-	default:
</a><a href="#h8-0-32" id="h8-0-32" class="d">-	}
</a><a href="#h8-0-33" id="h8-0-33" class="d">-	if c.err != nil {
</a><a href="#h8-0-34" id="h8-0-34" class="d">-		return c.err
</a><a href="#h8-0-35" id="h8-0-35" class="d">-	}
</a><a href="#h8-0-36" id="h8-0-36" class="d">-	if e := c.Client.Err(); e != nil {
</a><a href="#h8-0-37" id="h8-0-37" class="d">-		return e
</a><a href="#h8-0-38" id="h8-0-38" class="d">-	}
</a><a href="#h8-0-39" id="h8-0-39" class="d">-	return nil
</a><a href="#h8-0-40" id="h8-0-40" class="d">-}
</a><a href="#h8-0-41" id="h8-0-41" class="i">+	pb &quot;github.com/livegrep/livegrep/src/proto/go_proto&quot;
</a><a href="#h8-0-42" id="h8-0-42" class="i">+)
</a> 
<a href="#h8-0-44" id="h8-0-44" class="d">-type connection struct {
</a><a href="#h8-0-45" id="h8-0-45" class="d">-	in  io.ReadCloser
</a><a href="#h8-0-46" id="h8-0-46" class="d">-	out io.WriteCloser
</a><a href="#h8-0-47" id="h8-0-47" class="i">+type TestClient struct {
</a><a href="#h8-0-48" id="h8-0-48" class="i">+	client pb.CodeSearchClient
</a><a href="#h8-0-49" id="h8-0-49" class="i">+	cmd    *exec.Cmd
</a><a href="#h8-0-50" id="h8-0-50" class="i">+	wait   chan error
</a> }
 
<a href="#h8-0-53" id="h8-0-53" class="d">-func (c *connection) Read(b []byte) (int, error) {
</a><a href="#h8-0-54" id="h8-0-54" class="d">-	return c.in.Read(b)
</a><a href="#h8-0-55" id="h8-0-55" class="i">+func (c *TestClient) Info(ctx context.Context, in *pb.InfoRequest, opts ...grpc.CallOption) (*pb.ServerInfo, error) {
</a><a href="#h8-0-56" id="h8-0-56" class="i">+	return c.client.Info(ctx, in, opts...)
</a> }
 
<a href="#h8-0-59" id="h8-0-59" class="d">-func (c *connection) Write(b []byte) (int, error) {
</a><a href="#h8-0-60" id="h8-0-60" class="d">-	return c.out.Write(b)
</a><a href="#h8-0-61" id="h8-0-61" class="i">+func (c *TestClient) Search(ctx context.Context, in *pb.Query, opts ...grpc.CallOption) (*pb.CodeSearchResult, error) {
</a><a href="#h8-0-62" id="h8-0-62" class="i">+	return c.client.Search(ctx, in, opts...)
</a> }
 
<a href="#h8-0-65" id="h8-0-65" class="d">-func (c *connection) Close() error {
</a><a href="#h8-0-66" id="h8-0-66" class="d">-	e1 := c.in.Close()
</a><a href="#h8-0-67" id="h8-0-67" class="d">-	e2 := c.out.Close()
</a><a href="#h8-0-68" id="h8-0-68" class="d">-	if e1 != nil {
</a><a href="#h8-0-69" id="h8-0-69" class="d">-		return e1
</a><a href="#h8-0-70" id="h8-0-70" class="d">-	}
</a><a href="#h8-0-71" id="h8-0-71" class="d">-	if e2 != nil {
</a><a href="#h8-0-72" id="h8-0-72" class="d">-		return e2
</a><a href="#h8-0-73" id="h8-0-73" class="d">-	}
</a><a href="#h8-0-74" id="h8-0-74" class="d">-	return nil
</a><a href="#h8-0-75" id="h8-0-75" class="i">+func (c *TestClient) Close() {
</a><a href="#h8-0-76" id="h8-0-76" class="i">+	c.cmd.Process.Kill()
</a><a href="#h8-0-77" id="h8-0-77" class="i">+	&lt;-c.wait
</a> }
 
 const Codesearch = &quot;../../bazel-bin/src/tools/codesearch&quot;
<a href="#h8-0-81" id="h8-0-81" class="i">+const Port = 9812
</a> 
<a href="#h8-0-83" id="h8-0-83" class="d">-func NewClient(args ...string) (client.Client, error) {
</a><a href="#h8-0-84" id="h8-0-84" class="d">-	cl := &amp;childClient{wait: make(chan error)}
</a><a href="#h8-0-85" id="h8-0-85" class="i">+func NewClient(args ...string) (*TestClient, error) {
</a><a href="#h8-0-86" id="h8-0-86" class="i">+	addr := fmt.Sprintf(&quot;localhost:%d&quot;, Port)
</a><a href="#h8-0-87" id="h8-0-87" class="i">+	args = append([]string{&quot;-grpc&quot;, addr},
</a><a href="#h8-0-88" id="h8-0-88" class="i">+		args...)
</a><a href="#h8-0-89" id="h8-0-89" class="i">+	cl := &amp;TestClient{wait: make(chan error)}
</a> 	cl.cmd = exec.Command(Codesearch, args...)
 
 	cl.cmd.Stderr = os.Stderr
<a href="#h8-0-93" id="h8-0-93" class="d">-	in, e := cl.cmd.StdinPipe()
</a><a href="#h8-0-94" id="h8-0-94" class="d">-	if e != nil {
</a><a href="#h8-0-95" id="h8-0-95" class="d">-		return nil, e
</a><a href="#h8-0-96" id="h8-0-96" class="d">-	}
</a><a href="#h8-0-97" id="h8-0-97" class="d">-	out, e := cl.cmd.StdoutPipe()
</a><a href="#h8-0-98" id="h8-0-98" class="d">-	if e != nil {
</a><a href="#h8-0-99" id="h8-0-99" class="d">-		in.Close()
</a><a href="#h8-0-100" id="h8-0-100" class="d">-		return nil, e
</a><a href="#h8-0-101" id="h8-0-101" class="d">-	}
</a> 
<a href="#h8-0-103" id="h8-0-103" class="d">-	if e = cl.cmd.Start(); e != nil {
</a><a href="#h8-0-104" id="h8-0-104" class="i">+	if e := cl.cmd.Start(); e != nil {
</a> 		return nil, e
 	}
 
<a href="#h8-1" id="h8-1" class="h">@@ -87,61 +50,13 @@ func NewClient(args ...string) (client.Client, error) {
</a> 		cl.wait &lt;- cl.cmd.Wait()
 	}()
 
<a href="#h8-1-3" id="h8-1-3" class="d">-	cl.Client, e = client.New(&amp;connection{out, in})
</a><a href="#h8-1-4" id="h8-1-4" class="d">-	if e != nil {
</a><a href="#h8-1-5" id="h8-1-5" class="d">-		return nil, e
</a><a href="#h8-1-6" id="h8-1-6" class="d">-	}
</a><a href="#h8-1-7" id="h8-1-7" class="d">-
</a><a href="#h8-1-8" id="h8-1-8" class="d">-	return cl, nil
</a><a href="#h8-1-9" id="h8-1-9" class="d">-}
</a><a href="#h8-1-10" id="h8-1-10" class="d">-
</a><a href="#h8-1-11" id="h8-1-11" class="d">-// MockClient implements a fake Client that returns constant values
</a><a href="#h8-1-12" id="h8-1-12" class="d">-// based on the provided fields.
</a><a href="#h8-1-13" id="h8-1-13" class="d">-type MockClient struct {
</a><a href="#h8-1-14" id="h8-1-14" class="d">-	QueryError  error
</a><a href="#h8-1-15" id="h8-1-15" class="d">-	SearchError error
</a><a href="#h8-1-16" id="h8-1-16" class="d">-	Err_        error
</a><a href="#h8-1-17" id="h8-1-17" class="d">-	Info_       *client.ServerInfo
</a><a href="#h8-1-18" id="h8-1-18" class="d">-	Stats       *client.Stats
</a><a href="#h8-1-19" id="h8-1-19" class="d">-	Results     []*client.Result
</a><a href="#h8-1-20" id="h8-1-20" class="d">-
</a><a href="#h8-1-21" id="h8-1-21" class="d">-	Closed  bool
</a><a href="#h8-1-22" id="h8-1-22" class="d">-	Queries []*client.Query
</a><a href="#h8-1-23" id="h8-1-23" class="d">-}
</a><a href="#h8-1-24" id="h8-1-24" class="d">-
</a><a href="#h8-1-25" id="h8-1-25" class="d">-type mockSearch struct {
</a><a href="#h8-1-26" id="h8-1-26" class="d">-	m *MockClient
</a><a href="#h8-1-27" id="h8-1-27" class="d">-}
</a><a href="#h8-1-28" id="h8-1-28" class="d">-
</a><a href="#h8-1-29" id="h8-1-29" class="d">-func (m *MockClient) Query(q *client.Query) (client.Search, error) {
</a><a href="#h8-1-30" id="h8-1-30" class="d">-	m.Queries = append(m.Queries, q)
</a><a href="#h8-1-31" id="h8-1-31" class="d">-	if m.QueryError != nil {
</a><a href="#h8-1-32" id="h8-1-32" class="d">-		return nil, m.QueryError
</a><a href="#h8-1-33" id="h8-1-33" class="i">+	conn, err := grpc.Dial(addr, grpc.WithInsecure(), grpc.WithBlock())
</a><a href="#h8-1-34" id="h8-1-34" class="i">+	if err != nil {
</a><a href="#h8-1-35" id="h8-1-35" class="i">+		cl.Close()
</a><a href="#h8-1-36" id="h8-1-36" class="i">+		return nil, err
</a> 	}
<a href="#h8-1-38" id="h8-1-38" class="d">-	return &amp;mockSearch{m}, nil
</a><a href="#h8-1-39" id="h8-1-39" class="d">-}
</a><a href="#h8-1-40" id="h8-1-40" class="d">-
</a><a href="#h8-1-41" id="h8-1-41" class="d">-func (m *MockClient) Close() {
</a><a href="#h8-1-42" id="h8-1-42" class="d">-	m.Closed = true
</a><a href="#h8-1-43" id="h8-1-43" class="d">-}
</a><a href="#h8-1-44" id="h8-1-44" class="d">-
</a><a href="#h8-1-45" id="h8-1-45" class="d">-func (m *MockClient) Info() *client.ServerInfo {
</a><a href="#h8-1-46" id="h8-1-46" class="d">-	return m.Info_
</a><a href="#h8-1-47" id="h8-1-47" class="d">-}
</a> 
<a href="#h8-1-49" id="h8-1-49" class="d">-func (m *MockClient) Err() error {
</a><a href="#h8-1-50" id="h8-1-50" class="d">-	return m.Err_
</a><a href="#h8-1-51" id="h8-1-51" class="d">-}
</a><a href="#h8-1-52" id="h8-1-52" class="i">+	cl.client = pb.NewCodeSearchClient(conn)
</a> 
<a href="#h8-1-54" id="h8-1-54" class="d">-func (s *mockSearch) Results() &lt;-chan *client.Result {
</a><a href="#h8-1-55" id="h8-1-55" class="d">-	out := make(chan *client.Result, len(s.m.Results))
</a><a href="#h8-1-56" id="h8-1-56" class="d">-	for _, r := range s.m.Results {
</a><a href="#h8-1-57" id="h8-1-57" class="d">-		out &lt;- r
</a><a href="#h8-1-58" id="h8-1-58" class="d">-	}
</a><a href="#h8-1-59" id="h8-1-59" class="d">-	close(out)
</a><a href="#h8-1-60" id="h8-1-60" class="d">-	return out
</a><a href="#h8-1-61" id="h8-1-61" class="d">-}
</a><a href="#h8-1-62" id="h8-1-62" class="d">-
</a><a href="#h8-1-63" id="h8-1-63" class="d">-func (s *mockSearch) Close() (*client.Stats, error) {
</a><a href="#h8-1-64" id="h8-1-64" class="d">-	return s.m.Stats, s.m.SearchError
</a><a href="#h8-1-65" id="h8-1-65" class="i">+	return cl, nil
</a> }
<b>diff --git a/<a id="h9" href="../file/client/types.go">client/types.go</a> b/<a href="../file/client/types.go">client/types.go</a></b>
<a href="#h9-0" id="h9-0" class="h">@@ -1,86 +0,0 @@
</a><a href="#h9-0-0" id="h9-0-0" class="d">-package client
</a><a href="#h9-0-1" id="h9-0-1" class="d">-
</a><a href="#h9-0-2" id="h9-0-2" class="d">-type Query struct {
</a><a href="#h9-0-3" id="h9-0-3" class="d">-	Line     string `json:&quot;line&quot;`
</a><a href="#h9-0-4" id="h9-0-4" class="d">-	File     string `json:&quot;file&quot;`
</a><a href="#h9-0-5" id="h9-0-5" class="d">-	Repo     string `json:&quot;repo&quot;`
</a><a href="#h9-0-6" id="h9-0-6" class="d">-	Tags     string `json:&quot;tags&quot;`
</a><a href="#h9-0-7" id="h9-0-7" class="d">-	FoldCase bool   `json:&quot;fold_case&quot;`
</a><a href="#h9-0-8" id="h9-0-8" class="d">-	Not      struct {
</a><a href="#h9-0-9" id="h9-0-9" class="d">-		File string `json:&quot;file&quot;`
</a><a href="#h9-0-10" id="h9-0-10" class="d">-		Repo string `json:&quot;repo&quot;`
</a><a href="#h9-0-11" id="h9-0-11" class="d">-		Tags string `json:&quot;tags&quot;`
</a><a href="#h9-0-12" id="h9-0-12" class="d">-	} `json:&quot;not&quot;`
</a><a href="#h9-0-13" id="h9-0-13" class="d">-}
</a><a href="#h9-0-14" id="h9-0-14" class="d">-
</a><a href="#h9-0-15" id="h9-0-15" class="d">-func (q *Query) Opcode() string {
</a><a href="#h9-0-16" id="h9-0-16" class="d">-	return &quot;query&quot;
</a><a href="#h9-0-17" id="h9-0-17" class="d">-}
</a><a href="#h9-0-18" id="h9-0-18" class="d">-
</a><a href="#h9-0-19" id="h9-0-19" class="d">-type QueryError struct {
</a><a href="#h9-0-20" id="h9-0-20" class="d">-	Query *Query
</a><a href="#h9-0-21" id="h9-0-21" class="d">-	Err   string
</a><a href="#h9-0-22" id="h9-0-22" class="d">-}
</a><a href="#h9-0-23" id="h9-0-23" class="d">-
</a><a href="#h9-0-24" id="h9-0-24" class="d">-func (q QueryError) Error() string {
</a><a href="#h9-0-25" id="h9-0-25" class="d">-	return q.Err
</a><a href="#h9-0-26" id="h9-0-26" class="d">-}
</a><a href="#h9-0-27" id="h9-0-27" class="d">-
</a><a href="#h9-0-28" id="h9-0-28" class="d">-type Result struct {
</a><a href="#h9-0-29" id="h9-0-29" class="d">-	Tree          string   `json:&quot;tree&quot;`
</a><a href="#h9-0-30" id="h9-0-30" class="d">-	Version       string   `json:&quot;version&quot;`
</a><a href="#h9-0-31" id="h9-0-31" class="d">-	Path          string   `json:&quot;path&quot;`
</a><a href="#h9-0-32" id="h9-0-32" class="d">-	LineNumber    int      `json:&quot;lno&quot;`
</a><a href="#h9-0-33" id="h9-0-33" class="d">-	ContextBefore []string `json:&quot;context_before&quot;`
</a><a href="#h9-0-34" id="h9-0-34" class="d">-	ContextAfter  []string `json:&quot;context_after&quot;`
</a><a href="#h9-0-35" id="h9-0-35" class="d">-	Bounds        [2]int   `json:&quot;bounds&quot;`
</a><a href="#h9-0-36" id="h9-0-36" class="d">-	Line          string   `json:&quot;line&quot;`
</a><a href="#h9-0-37" id="h9-0-37" class="d">-}
</a><a href="#h9-0-38" id="h9-0-38" class="d">-
</a><a href="#h9-0-39" id="h9-0-39" class="d">-func (r *Result) Opcode() string {
</a><a href="#h9-0-40" id="h9-0-40" class="d">-	return &quot;match&quot;
</a><a href="#h9-0-41" id="h9-0-41" class="d">-}
</a><a href="#h9-0-42" id="h9-0-42" class="d">-
</a><a href="#h9-0-43" id="h9-0-43" class="d">-type Stats struct {
</a><a href="#h9-0-44" id="h9-0-44" class="d">-	RE2Time     int64  `json:&quot;re2_time&quot;`
</a><a href="#h9-0-45" id="h9-0-45" class="d">-	GitTime     int64  `json:&quot;git_time&quot;`
</a><a href="#h9-0-46" id="h9-0-46" class="d">-	SortTime    int64  `json:&quot;sort_time&quot;`
</a><a href="#h9-0-47" id="h9-0-47" class="d">-	IndexTime   int64  `json:&quot;index_time&quot;`
</a><a href="#h9-0-48" id="h9-0-48" class="d">-	AnalyzeTime int64  `json:&quot;analyze_time&quot;`
</a><a href="#h9-0-49" id="h9-0-49" class="d">-	ExitReason  string `json:&quot;why&quot;`
</a><a href="#h9-0-50" id="h9-0-50" class="d">-}
</a><a href="#h9-0-51" id="h9-0-51" class="d">-
</a><a href="#h9-0-52" id="h9-0-52" class="d">-func (s *Stats) Opcode() string {
</a><a href="#h9-0-53" id="h9-0-53" class="d">-	return &quot;done&quot;
</a><a href="#h9-0-54" id="h9-0-54" class="d">-}
</a><a href="#h9-0-55" id="h9-0-55" class="d">-
</a><a href="#h9-0-56" id="h9-0-56" class="d">-type ServerInfo struct {
</a><a href="#h9-0-57" id="h9-0-57" class="d">-	Name  string `json:&quot;name&quot;`
</a><a href="#h9-0-58" id="h9-0-58" class="d">-	Trees []struct {
</a><a href="#h9-0-59" id="h9-0-59" class="d">-		Name     string                 `json:&quot;name&quot;`
</a><a href="#h9-0-60" id="h9-0-60" class="d">-		Version  string                 `json:&quot;version&quot;`
</a><a href="#h9-0-61" id="h9-0-61" class="d">-		Metadata map[string]interface{} `json:&quot;metadata&quot;`
</a><a href="#h9-0-62" id="h9-0-62" class="d">-	} `json:&quot;trees&quot;`
</a><a href="#h9-0-63" id="h9-0-63" class="d">-}
</a><a href="#h9-0-64" id="h9-0-64" class="d">-
</a><a href="#h9-0-65" id="h9-0-65" class="d">-func (s *ServerInfo) Opcode() string {
</a><a href="#h9-0-66" id="h9-0-66" class="d">-	return &quot;ready&quot;
</a><a href="#h9-0-67" id="h9-0-67" class="d">-}
</a><a href="#h9-0-68" id="h9-0-68" class="d">-
</a><a href="#h9-0-69" id="h9-0-69" class="d">-type ReplyError string
</a><a href="#h9-0-70" id="h9-0-70" class="d">-
</a><a href="#h9-0-71" id="h9-0-71" class="d">-func (r *ReplyError) Opcode() string {
</a><a href="#h9-0-72" id="h9-0-72" class="d">-	return &quot;error&quot;
</a><a href="#h9-0-73" id="h9-0-73" class="d">-}
</a><a href="#h9-0-74" id="h9-0-74" class="d">-
</a><a href="#h9-0-75" id="h9-0-75" class="d">-type Client interface {
</a><a href="#h9-0-76" id="h9-0-76" class="d">-	Query(q *Query) (Search, error)
</a><a href="#h9-0-77" id="h9-0-77" class="d">-	Close()
</a><a href="#h9-0-78" id="h9-0-78" class="d">-	Info() *ServerInfo
</a><a href="#h9-0-79" id="h9-0-79" class="d">-	Err() error
</a><a href="#h9-0-80" id="h9-0-80" class="d">-}
</a><a href="#h9-0-81" id="h9-0-81" class="d">-
</a><a href="#h9-0-82" id="h9-0-82" class="d">-type Search interface {
</a><a href="#h9-0-83" id="h9-0-83" class="d">-	Results() &lt;-chan *Result
</a><a href="#h9-0-84" id="h9-0-84" class="d">-	Close() (*Stats, error)
</a><a href="#h9-0-85" id="h9-0-85" class="d">-}
</a><b>diff --git a/<a id="h10" href="../file/cmd/livegrep-github-reindex/BUILD">cmd/livegrep-github-reindex/BUILD</a> b/<a href="../file/cmd/livegrep-github-reindex/BUILD">cmd/livegrep-github-reindex/BUILD</a></b>
<a href="#h10-0" id="h10-0" class="h">@@ -13,10 +13,9 @@ name = &quot;livegrep-github-reindex&quot;,
</a>   ],
   deps = [
     &quot;//vendor/github.com/google/go-github/github:go_default_library&quot;,
<a href="#h10-0-3" id="h10-0-3" class="d">-    &quot;//vendor/golang.org/x/net/context:go_default_library&quot;,
</a><a href="#h10-0-4" id="h10-0-4" class="d">-    &quot;//vendor/golang.org/x/oauth2:go_default_library&quot;,
</a><a href="#h10-0-5" id="h10-0-5" class="i">+
</a><a href="#h10-0-6" id="h10-0-6" class="i">+    &quot;@org_golang_x_oauth2//:go_default_library&quot;,
</a><a href="#h10-0-7" id="h10-0-7" class="i">+    &quot;@org_golang_x_net//context:go_default_library&quot;,
</a>   ],
   visibility = [&quot;//visibility:public&quot;],
 )
<a href="#h10-0-11" id="h10-0-11" class="d">-
</a><a href="#h10-0-12" id="h10-0-12" class="d">-
</a><b>diff --git a/<a id="h11" href="../file/server/BUILD">server/BUILD</a> b/<a href="../file/server/BUILD">server/BUILD</a></b>
<a href="#h11-0" id="h11-0" class="h">@@ -12,20 +12,21 @@ name = &quot;go_default_library&quot;,
</a>     &quot;backend.go&quot;,
     &quot;json.go&quot;,
     &quot;query.go&quot;,
<a href="#h11-0-3" id="h11-0-3" class="d">-    &quot;request_log.go&quot;,
</a>     &quot;server.go&quot;,
     &quot;templates.go&quot;,
   ],
   deps = [
<a href="#h11-0-8" id="h11-0-8" class="d">-    &quot;//client:go_default_library&quot;,
</a>     &quot;//server/api:go_default_library&quot;,
     &quot;//server/config:go_default_library&quot;,
     &quot;//server/log:go_default_library&quot;,
     &quot;//server/reqid:go_default_library&quot;,
     &quot;//server/templates:go_default_library&quot;,
<a href="#h11-0-14" id="h11-0-14" class="i">+    &quot;//src/proto:go_proto&quot;,
</a>     &quot;//vendor/github.com/bmizerany/pat:go_default_library&quot;,
     &quot;//vendor/github.com/honeycombio/libhoney-go:go_default_library&quot;,
<a href="#h11-0-17" id="h11-0-17" class="d">-    &quot;//vendor/golang.org/x/net/context:go_default_library&quot;,
</a><a href="#h11-0-18" id="h11-0-18" class="i">+    &quot;@org_golang_google_grpc//:go_default_library&quot;,
</a><a href="#h11-0-19" id="h11-0-19" class="i">+    &quot;@org_golang_google_grpc//metadata:go_default_library&quot;,
</a><a href="#h11-0-20" id="h11-0-20" class="i">+    &quot;@org_golang_x_net//context:go_default_library&quot;,
</a>   ],
   visibility = [&quot;//visibility:public&quot;],
 )
<a href="#h11-1" id="h11-1" class="h">@@ -34,13 +35,9 @@ name = &quot;go_default_library&quot;,
</a> go_test(
   name = &quot;go_default_test&quot;,
   srcs = [
<a href="#h11-1-3" id="h11-1-3" class="d">-    &quot;backend_test.go&quot;,
</a>     &quot;query_test.go&quot;,
   ],
   deps = [
<a href="#h11-1-7" id="h11-1-7" class="d">-    &quot;//client/test:go_default_library&quot;,
</a><a href="#h11-1-8" id="h11-1-8" class="d">-    &quot;//client:go_default_library&quot;,
</a>   ],
   library = &quot;:go_default_library&quot;,
 )
<a href="#h11-1-12" id="h11-1-12" class="d">-
</a><b>diff --git a/<a id="h12" href="../file/server/api.go">server/api.go</a> b/<a href="../file/server/api.go">server/api.go</a></b>
<a href="#h12-0" id="h12-0" class="h">@@ -5,13 +5,18 @@ import (
</a> 	&quot;errors&quot;
 	&quot;fmt&quot;
 	&quot;net/http&quot;
<a href="#h12-0-3" id="h12-0-3" class="i">+	&quot;time&quot;
</a><a href="#h12-0-4" id="h12-0-4" class="i">+
</a><a href="#h12-0-5" id="h12-0-5" class="i">+	&quot;google.golang.org/grpc&quot;
</a><a href="#h12-0-6" id="h12-0-6" class="i">+	&quot;google.golang.org/grpc/metadata&quot;
</a> 
 	&quot;golang.org/x/net/context&quot;
 
<a href="#h12-0-10" id="h12-0-10" class="d">-	&quot;github.com/livegrep/livegrep/client&quot;
</a> 	&quot;github.com/livegrep/livegrep/server/api&quot;
 	&quot;github.com/livegrep/livegrep/server/log&quot;
 	&quot;github.com/livegrep/livegrep/server/reqid&quot;
<a href="#h12-0-14" id="h12-0-14" class="i">+
</a><a href="#h12-0-15" id="h12-0-15" class="i">+	pb &quot;github.com/livegrep/livegrep/src/proto/go_proto&quot;
</a> )
 
 func replyJSON(ctx context.Context, w http.ResponseWriter, status int, obj interface{}) {
<a href="#h12-1" id="h12-1" class="h">@@ -31,18 +36,18 @@ func writeError(ctx context.Context, w http.ResponseWriter, status int, code, me
</a> }
 
 func writeQueryError(ctx context.Context, w http.ResponseWriter, err error) {
<a href="#h12-1-3" id="h12-1-3" class="d">-	if qe, ok := err.(client.QueryError); ok {
</a><a href="#h12-1-4" id="h12-1-4" class="i">+	/*	if qe, ok := err.(client.QueryError); ok {
</a> 		writeError(ctx, w, 400, &quot;query_error&quot;, qe.Err)
<a href="#h12-1-6" id="h12-1-6" class="d">-	} else {
</a><a href="#h12-1-7" id="h12-1-7" class="d">-		writeError(ctx, w, 500, &quot;internal_error&quot;,
</a><a href="#h12-1-8" id="h12-1-8" class="d">-			fmt.Sprintf(&quot;Talking to backend: %s&quot;, err.Error()))
</a><a href="#h12-1-9" id="h12-1-9" class="d">-	}
</a><a href="#h12-1-10" id="h12-1-10" class="d">-	return
</a><a href="#h12-1-11" id="h12-1-11" class="i">+	} else { */
</a><a href="#h12-1-12" id="h12-1-12" class="i">+	writeError(ctx, w, 500, &quot;internal_error&quot;,
</a><a href="#h12-1-13" id="h12-1-13" class="i">+		fmt.Sprintf(&quot;Talking to backend: %s&quot;, err.Error()))
</a><a href="#h12-1-14" id="h12-1-14" class="i">+	/*	}
</a><a href="#h12-1-15" id="h12-1-15" class="i">+		return */
</a> }
 
<a href="#h12-1-18" id="h12-1-18" class="d">-func extractQuery(ctx context.Context, r *http.Request) (client.Query, error) {
</a><a href="#h12-1-19" id="h12-1-19" class="i">+func extractQuery(ctx context.Context, r *http.Request) (pb.Query, error) {
</a> 	params := r.URL.Query()
<a href="#h12-1-21" id="h12-1-21" class="d">-	var query client.Query
</a><a href="#h12-1-22" id="h12-1-22" class="i">+	var query pb.Query
</a> 	var err error
 	if q, ok := params[&quot;q&quot;]; ok {
 		query, err = ParseQuery(q[0])
<a href="#h12-2" id="h12-2" class="h">@@ -69,33 +74,55 @@ var (
</a> 	ErrTimedOut = errors.New(&quot;timed out talking to backend&quot;)
 )
 
<a href="#h12-2-3" id="h12-2-3" class="d">-func (s *server) doSearch(ctx context.Context, backend *Backend, q *client.Query) (*api.ReplySearch, error) {
</a><a href="#h12-2-4" id="h12-2-4" class="d">-	var cl client.Client
</a><a href="#h12-2-5" id="h12-2-5" class="d">-	var search client.Search
</a><a href="#h12-2-6" id="h12-2-6" class="i">+func stringSlice(ss []string) []string {
</a><a href="#h12-2-7" id="h12-2-7" class="i">+	if ss != nil {
</a><a href="#h12-2-8" id="h12-2-8" class="i">+		return ss
</a><a href="#h12-2-9" id="h12-2-9" class="i">+	}
</a><a href="#h12-2-10" id="h12-2-10" class="i">+	return []string{}
</a><a href="#h12-2-11" id="h12-2-11" class="i">+}
</a><a href="#h12-2-12" id="h12-2-12" class="i">+
</a><a href="#h12-2-13" id="h12-2-13" class="i">+func (s *server) doSearch(ctx context.Context, backend *Backend, q *pb.Query) (*api.ReplySearch, error) {
</a><a href="#h12-2-14" id="h12-2-14" class="i">+	var search *pb.CodeSearchResult
</a> 	var err error
 
<a href="#h12-2-17" id="h12-2-17" class="d">-	select {
</a><a href="#h12-2-18" id="h12-2-18" class="d">-	case cl = &lt;-backend.Clients:
</a><a href="#h12-2-19" id="h12-2-19" class="d">-	case &lt;-ctx.Done():
</a><a href="#h12-2-20" id="h12-2-20" class="d">-		return nil, ErrTimedOut
</a><a href="#h12-2-21" id="h12-2-21" class="i">+	ctx, cancel := context.WithTimeout(ctx, 30*time.Second)
</a><a href="#h12-2-22" id="h12-2-22" class="i">+	defer cancel()
</a><a href="#h12-2-23" id="h12-2-23" class="i">+
</a><a href="#h12-2-24" id="h12-2-24" class="i">+	if id, ok := reqid.FromContext(ctx); ok {
</a><a href="#h12-2-25" id="h12-2-25" class="i">+		ctx = metadata.NewContext(ctx, metadata.Pairs(&quot;Request-Id&quot;, string(id)))
</a> 	}
<a href="#h12-2-27" id="h12-2-27" class="d">-	defer backend.CheckIn(cl)
</a> 
<a href="#h12-2-29" id="h12-2-29" class="d">-	search, err = cl.Query(q)
</a><a href="#h12-2-30" id="h12-2-30" class="i">+	search, err = backend.Codesearch.Search(
</a><a href="#h12-2-31" id="h12-2-31" class="i">+		ctx, q,
</a><a href="#h12-2-32" id="h12-2-32" class="i">+		grpc.FailFast(false),
</a><a href="#h12-2-33" id="h12-2-33" class="i">+	)
</a> 	if err != nil {
 		log.Printf(ctx, &quot;error talking to backend err=%s&quot;, err)
 		return nil, err
 	}
 
<a href="#h12-2-39" id="h12-2-39" class="d">-	reply := &amp;api.ReplySearch{Results: make([]*client.Result, 0)}
</a><a href="#h12-2-40" id="h12-2-40" class="i">+	reply := &amp;api.ReplySearch{Results: make([]*api.Result, 0)}
</a> 
<a href="#h12-2-42" id="h12-2-42" class="d">-	for r := range search.Results() {
</a><a href="#h12-2-43" id="h12-2-43" class="d">-		reply.Results = append(reply.Results, r)
</a><a href="#h12-2-44" id="h12-2-44" class="i">+	for _, r := range search.Results {
</a><a href="#h12-2-45" id="h12-2-45" class="i">+		reply.Results = append(reply.Results, &amp;api.Result{
</a><a href="#h12-2-46" id="h12-2-46" class="i">+			Tree:          r.Tree,
</a><a href="#h12-2-47" id="h12-2-47" class="i">+			Version:       r.Version,
</a><a href="#h12-2-48" id="h12-2-48" class="i">+			Path:          r.Path,
</a><a href="#h12-2-49" id="h12-2-49" class="i">+			LineNumber:    int(r.LineNumber),
</a><a href="#h12-2-50" id="h12-2-50" class="i">+			ContextBefore: stringSlice(r.ContextBefore),
</a><a href="#h12-2-51" id="h12-2-51" class="i">+			ContextAfter:  stringSlice(r.ContextAfter),
</a><a href="#h12-2-52" id="h12-2-52" class="i">+			Bounds:        [2]int{int(r.Bounds.Left), int(r.Bounds.Right)},
</a><a href="#h12-2-53" id="h12-2-53" class="i">+			Line:          r.Line,
</a><a href="#h12-2-54" id="h12-2-54" class="i">+		})
</a> 	}
 
<a href="#h12-2-57" id="h12-2-57" class="d">-	reply.Info, err = search.Close()
</a><a href="#h12-2-58" id="h12-2-58" class="d">-	if err != nil {
</a><a href="#h12-2-59" id="h12-2-59" class="d">-		return nil, err
</a><a href="#h12-2-60" id="h12-2-60" class="i">+	reply.Info = &amp;api.Stats{
</a><a href="#h12-2-61" id="h12-2-61" class="i">+		RE2Time:     search.Stats.Re2Time,
</a><a href="#h12-2-62" id="h12-2-62" class="i">+		GitTime:     search.Stats.GitTime,
</a><a href="#h12-2-63" id="h12-2-63" class="i">+		SortTime:    search.Stats.SortTime,
</a><a href="#h12-2-64" id="h12-2-64" class="i">+		IndexTime:   search.Stats.IndexTime,
</a><a href="#h12-2-65" id="h12-2-65" class="i">+		AnalyzeTime: search.Stats.AnalyzeTime,
</a><a href="#h12-2-66" id="h12-2-66" class="i">+		ExitReason:  search.Stats.ExitReason.String(),
</a> 	}
 	return reply, nil
 }
<a href="#h12-3" id="h12-3" class="h">@@ -139,9 +166,6 @@ func (s *server) ServeAPISearch(ctx context.Context, w http.ResponseWriter, r *h
</a> 		if err == ErrTimedOut {
 			break
 		}
<a href="#h12-3-3" id="h12-3-3" class="d">-		if _, ok := err.(client.QueryError); ok {
</a><a href="#h12-3-4" id="h12-3-4" class="d">-			break
</a><a href="#h12-3-5" id="h12-3-5" class="d">-		}
</a> 		log.Printf(ctx, &quot;error querying try=%d err=%q&quot;, tries, err)
 	}
 
<a href="#h12-4" id="h12-4" class="h">@@ -162,8 +186,8 @@ func (s *server) ServeAPISearch(ctx context.Context, w http.ResponseWriter, r *h
</a> 		e.AddField(&quot;query_file&quot;, q.File)
 		e.AddField(&quot;query_repo&quot;, q.Repo)
 		e.AddField(&quot;query_foldcase&quot;, q.FoldCase)
<a href="#h12-4-3" id="h12-4-3" class="d">-		e.AddField(&quot;query_not_file&quot;, q.Not.File)
</a><a href="#h12-4-4" id="h12-4-4" class="d">-		e.AddField(&quot;query_not_repo&quot;, q.Not.Repo)
</a><a href="#h12-4-5" id="h12-4-5" class="i">+		e.AddField(&quot;query_not_file&quot;, q.NotFile)
</a><a href="#h12-4-6" id="h12-4-6" class="i">+		e.AddField(&quot;query_not_repo&quot;, q.NotRepo)
</a> 
 		e.AddField(&quot;result_count&quot;, len(reply.Results))
 		e.AddField(&quot;re2_time&quot;, reply.Info.RE2Time)
<b>diff --git a/<a id="h13" href="../file/server/api/BUILD">server/api/BUILD</a> b/<a href="../file/server/api/BUILD">server/api/BUILD</a></b>
<a href="#h13-0" id="h13-0" class="h">@@ -11,9 +11,6 @@ name = &quot;go_default_library&quot;,
</a>     &quot;types.go&quot;,
   ],
   deps = [
<a href="#h13-0-3" id="h13-0-3" class="d">-    &quot;//client:go_default_library&quot;,
</a>   ],
   visibility = [&quot;//visibility:public&quot;],
 )
<a href="#h13-0-7" id="h13-0-7" class="d">-
</a><a href="#h13-0-8" id="h13-0-8" class="d">-
</a><b>diff --git a/<a id="h14" href="../file/server/api/types.go">server/api/types.go</a> b/<a href="../file/server/api/types.go">server/api/types.go</a></b>
<a href="#h14-0" id="h14-0" class="h">@@ -1,7 +1,5 @@
</a> package api
 
<a href="#h14-0-2" id="h14-0-2" class="d">-import &quot;github.com/livegrep/livegrep/client&quot;
</a><a href="#h14-0-3" id="h14-0-3" class="d">-
</a> type InnerError struct {
 	Code    string `json:&quot;code&quot;`
 	Message string `json:&quot;message&quot;`
<a href="#h14-1" id="h14-1" class="h">@@ -14,6 +12,26 @@ type ReplyError struct {
</a> 
 // ReplySearch is returned to /api/v1/search/:backend
 type ReplySearch struct {
<a href="#h14-1-3" id="h14-1-3" class="d">-	Info    *client.Stats    `json:&quot;info&quot;`
</a><a href="#h14-1-4" id="h14-1-4" class="d">-	Results []*client.Result `json:&quot;results&quot;`
</a><a href="#h14-1-5" id="h14-1-5" class="i">+	Info    *Stats    `json:&quot;info&quot;`
</a><a href="#h14-1-6" id="h14-1-6" class="i">+	Results []*Result `json:&quot;results&quot;`
</a><a href="#h14-1-7" id="h14-1-7" class="i">+}
</a><a href="#h14-1-8" id="h14-1-8" class="i">+
</a><a href="#h14-1-9" id="h14-1-9" class="i">+type Stats struct {
</a><a href="#h14-1-10" id="h14-1-10" class="i">+	RE2Time     int64  `json:&quot;re2_time&quot;`
</a><a href="#h14-1-11" id="h14-1-11" class="i">+	GitTime     int64  `json:&quot;git_time&quot;`
</a><a href="#h14-1-12" id="h14-1-12" class="i">+	SortTime    int64  `json:&quot;sort_time&quot;`
</a><a href="#h14-1-13" id="h14-1-13" class="i">+	IndexTime   int64  `json:&quot;index_time&quot;`
</a><a href="#h14-1-14" id="h14-1-14" class="i">+	AnalyzeTime int64  `json:&quot;analyze_time&quot;`
</a><a href="#h14-1-15" id="h14-1-15" class="i">+	ExitReason  string `json:&quot;why&quot;`
</a><a href="#h14-1-16" id="h14-1-16" class="i">+}
</a><a href="#h14-1-17" id="h14-1-17" class="i">+
</a><a href="#h14-1-18" id="h14-1-18" class="i">+type Result struct {
</a><a href="#h14-1-19" id="h14-1-19" class="i">+	Tree          string   `json:&quot;tree&quot;`
</a><a href="#h14-1-20" id="h14-1-20" class="i">+	Version       string   `json:&quot;version&quot;`
</a><a href="#h14-1-21" id="h14-1-21" class="i">+	Path          string   `json:&quot;path&quot;`
</a><a href="#h14-1-22" id="h14-1-22" class="i">+	LineNumber    int      `json:&quot;lno&quot;`
</a><a href="#h14-1-23" id="h14-1-23" class="i">+	ContextBefore []string `json:&quot;context_before&quot;`
</a><a href="#h14-1-24" id="h14-1-24" class="i">+	ContextAfter  []string `json:&quot;context_after&quot;`
</a><a href="#h14-1-25" id="h14-1-25" class="i">+	Bounds        [2]int   `json:&quot;bounds&quot;`
</a><a href="#h14-1-26" id="h14-1-26" class="i">+	Line          string   `json:&quot;line&quot;`
</a> }
<b>diff --git a/<a id="h15" href="../file/server/backend.go">server/backend.go</a> b/<a href="../file/server/backend.go">server/backend.go</a></b>
<a href="#h15-0" id="h15-0" class="h">@@ -1,23 +1,14 @@
</a> package server
 
 import (
<a href="#h15-0-3" id="h15-0-3" class="i">+	&quot;context&quot;
</a> 	&quot;log&quot;
 	&quot;net/url&quot;
 	&quot;sync&quot;
 	&quot;time&quot;
 
<a href="#h15-0-9" id="h15-0-9" class="d">-	&quot;github.com/livegrep/livegrep/client&quot;
</a><a href="#h15-0-10" id="h15-0-10" class="d">-)
</a><a href="#h15-0-11" id="h15-0-11" class="d">-
</a><a href="#h15-0-12" id="h15-0-12" class="d">-const (
</a><a href="#h15-0-13" id="h15-0-13" class="d">-	defaultPoolSize = 8
</a><a href="#h15-0-14" id="h15-0-14" class="d">-)
</a><a href="#h15-0-15" id="h15-0-15" class="d">-
</a><a href="#h15-0-16" id="h15-0-16" class="d">-var (
</a><a href="#h15-0-17" id="h15-0-17" class="d">-	// maximum time to wait after a failed connection
</a><a href="#h15-0-18" id="h15-0-18" class="d">-	// attempt. `var` not `const` so it can be retried by the
</a><a href="#h15-0-19" id="h15-0-19" class="d">-	// tests.
</a><a href="#h15-0-20" id="h15-0-20" class="d">-	maxBackoff = 10 * time.Second
</a><a href="#h15-0-21" id="h15-0-21" class="i">+	pb &quot;github.com/livegrep/livegrep/src/proto/go_proto&quot;
</a><a href="#h15-0-22" id="h15-0-22" class="i">+	&quot;google.golang.org/grpc&quot;
</a> )
 
 type Tree struct {
<a href="#h15-1" id="h15-1" class="h">@@ -33,85 +24,45 @@ type I struct {
</a> }
 
 type Backend struct {
<a href="#h15-1-3" id="h15-1-3" class="d">-	Id       string
</a><a href="#h15-1-4" id="h15-1-4" class="d">-	Dial     func() (client.Client, error)
</a><a href="#h15-1-5" id="h15-1-5" class="d">-	PoolSize int
</a><a href="#h15-1-6" id="h15-1-6" class="d">-	I        *I
</a><a href="#h15-1-7" id="h15-1-7" class="d">-	Clients  chan client.Client
</a><a href="#h15-1-8" id="h15-1-8" class="i">+	Id         string
</a><a href="#h15-1-9" id="h15-1-9" class="i">+	Addr       string
</a><a href="#h15-1-10" id="h15-1-10" class="i">+	I          *I
</a><a href="#h15-1-11" id="h15-1-11" class="i">+	Codesearch pb.CodeSearchClient
</a><a href="#h15-1-12" id="h15-1-12" class="i">+}
</a> 
<a href="#h15-1-14" id="h15-1-14" class="d">-	pending chan struct{}
</a><a href="#h15-1-15" id="h15-1-15" class="d">-	backoff time.Duration
</a><a href="#h15-1-16" id="h15-1-16" class="i">+func NewBackend(id string, addr string) (*Backend, error) {
</a><a href="#h15-1-17" id="h15-1-17" class="i">+	client, err := grpc.Dial(addr, grpc.WithInsecure())
</a><a href="#h15-1-18" id="h15-1-18" class="i">+	if err != nil {
</a><a href="#h15-1-19" id="h15-1-19" class="i">+		return nil, err
</a><a href="#h15-1-20" id="h15-1-20" class="i">+	}
</a><a href="#h15-1-21" id="h15-1-21" class="i">+	bk := &amp;Backend{
</a><a href="#h15-1-22" id="h15-1-22" class="i">+		Id:         id,
</a><a href="#h15-1-23" id="h15-1-23" class="i">+		I:          &amp;I{Name: id},
</a><a href="#h15-1-24" id="h15-1-24" class="i">+		Codesearch: pb.NewCodeSearchClient(client),
</a><a href="#h15-1-25" id="h15-1-25" class="i">+	}
</a><a href="#h15-1-26" id="h15-1-26" class="i">+	return bk, nil
</a> }
 
 func (bk *Backend) Start() {
<a href="#h15-1-30" id="h15-1-30" class="d">-	if bk.PoolSize == 0 {
</a><a href="#h15-1-31" id="h15-1-31" class="d">-		bk.PoolSize = defaultPoolSize
</a><a href="#h15-1-32" id="h15-1-32" class="d">-	}
</a><a href="#h15-1-33" id="h15-1-33" class="d">-	bk.Clients = make(chan client.Client, bk.PoolSize)
</a><a href="#h15-1-34" id="h15-1-34" class="d">-	bk.pending = make(chan struct{}, bk.PoolSize)
</a><a href="#h15-1-35" id="h15-1-35" class="d">-	bk.backoff = 10 * time.Millisecond
</a> 	if bk.I == nil {
 		bk.I = &amp;I{Name: bk.Id}
 	}
<a href="#h15-1-39" id="h15-1-39" class="d">-	for i := 0; i &lt; bk.PoolSize; i++ {
</a><a href="#h15-1-40" id="h15-1-40" class="d">-		bk.pending &lt;- struct{}{}
</a><a href="#h15-1-41" id="h15-1-41" class="d">-	}
</a><a href="#h15-1-42" id="h15-1-42" class="d">-	go bk.connectLoop()
</a><a href="#h15-1-43" id="h15-1-43" class="i">+	go bk.poll()
</a> }
 
<a href="#h15-1-46" id="h15-1-46" class="d">-func (bk *Backend) CheckIn(c client.Client) {
</a><a href="#h15-1-47" id="h15-1-47" class="d">-	if c.Err() != nil {
</a><a href="#h15-1-48" id="h15-1-48" class="d">-		c.Close()
</a><a href="#h15-1-49" id="h15-1-49" class="d">-		bk.pending &lt;- struct{}{}
</a><a href="#h15-1-50" id="h15-1-50" class="d">-		return
</a><a href="#h15-1-51" id="h15-1-51" class="d">-	}
</a><a href="#h15-1-52" id="h15-1-52" class="d">-
</a><a href="#h15-1-53" id="h15-1-53" class="d">-	bk.Clients &lt;- c
</a><a href="#h15-1-54" id="h15-1-54" class="d">-}
</a><a href="#h15-1-55" id="h15-1-55" class="d">-
</a><a href="#h15-1-56" id="h15-1-56" class="d">-func (bk *Backend) Close() {
</a><a href="#h15-1-57" id="h15-1-57" class="d">-drain:
</a><a href="#h15-1-58" id="h15-1-58" class="i">+func (bk *Backend) poll() {
</a> 	for {
<a href="#h15-1-60" id="h15-1-60" class="d">-		select {
</a><a href="#h15-1-61" id="h15-1-61" class="d">-		case &lt;-bk.pending:
</a><a href="#h15-1-62" id="h15-1-62" class="d">-		default:
</a><a href="#h15-1-63" id="h15-1-63" class="d">-			break drain
</a><a href="#h15-1-64" id="h15-1-64" class="d">-		}
</a><a href="#h15-1-65" id="h15-1-65" class="d">-	}
</a><a href="#h15-1-66" id="h15-1-66" class="d">-	close(bk.pending)
</a><a href="#h15-1-67" id="h15-1-67" class="d">-	for c := range bk.Clients {
</a><a href="#h15-1-68" id="h15-1-68" class="d">-		c.Close()
</a><a href="#h15-1-69" id="h15-1-69" class="d">-	}
</a><a href="#h15-1-70" id="h15-1-70" class="d">-}
</a><a href="#h15-1-71" id="h15-1-71" class="d">-
</a><a href="#h15-1-72" id="h15-1-72" class="d">-func (bk *Backend) connectLoop() {
</a><a href="#h15-1-73" id="h15-1-73" class="d">-	for _ = range bk.pending {
</a><a href="#h15-1-74" id="h15-1-74" class="d">-	retry:
</a><a href="#h15-1-75" id="h15-1-75" class="d">-		cl, err := bk.Dial()
</a><a href="#h15-1-76" id="h15-1-76" class="d">-		if err != nil {
</a><a href="#h15-1-77" id="h15-1-77" class="d">-			log.Printf(&quot;Connection error: backend=%s error=%s&quot;,
</a><a href="#h15-1-78" id="h15-1-78" class="d">-				bk.Id, err.Error())
</a><a href="#h15-1-79" id="h15-1-79" class="d">-			bk.backoff *= 2
</a><a href="#h15-1-80" id="h15-1-80" class="d">-			if bk.backoff &gt; maxBackoff {
</a><a href="#h15-1-81" id="h15-1-81" class="d">-				bk.backoff = maxBackoff
</a><a href="#h15-1-82" id="h15-1-82" class="d">-			}
</a><a href="#h15-1-83" id="h15-1-83" class="d">-			time.Sleep(bk.backoff)
</a><a href="#h15-1-84" id="h15-1-84" class="d">-			goto retry
</a><a href="#h15-1-85" id="h15-1-85" class="d">-		}
</a><a href="#h15-1-86" id="h15-1-86" class="d">-
</a><a href="#h15-1-87" id="h15-1-87" class="d">-		log.Printf(&quot;Connected: backend=%s&quot;, bk.Id)
</a><a href="#h15-1-88" id="h15-1-88" class="d">-		bk.backoff = 10 * time.Millisecond
</a><a href="#h15-1-89" id="h15-1-89" class="d">-
</a><a href="#h15-1-90" id="h15-1-90" class="d">-		if info := cl.Info(); info != nil {
</a><a href="#h15-1-91" id="h15-1-91" class="i">+		info, e := bk.Codesearch.Info(context.Background(), &amp;pb.InfoRequest{}, grpc.FailFast(false))
</a><a href="#h15-1-92" id="h15-1-92" class="i">+		if e == nil {
</a> 			bk.refresh(info)
<a href="#h15-1-94" id="h15-1-94" class="i">+		} else {
</a><a href="#h15-1-95" id="h15-1-95" class="i">+			log.Printf(&quot;refresh %s: %v&quot;, bk.Id, e)
</a> 		}
<a href="#h15-1-97" id="h15-1-97" class="d">-		bk.Clients &lt;- cl
</a><a href="#h15-1-98" id="h15-1-98" class="d">-
</a><a href="#h15-1-99" id="h15-1-99" class="i">+		time.Sleep(60 * time.Second)
</a> 	}
<a href="#h15-1-101" id="h15-1-101" class="d">-	close(bk.Clients)
</a> }
 
<a href="#h15-1-104" id="h15-1-104" class="d">-func (bk *Backend) refresh(info *client.ServerInfo) {
</a><a href="#h15-1-105" id="h15-1-105" class="i">+func (bk *Backend) refresh(info *pb.ServerInfo) {
</a> 	bk.I.Lock()
 	defer bk.I.Unlock()
 
<a href="#h15-2" id="h15-2" class="h">@@ -123,10 +74,10 @@ func (bk *Backend) refresh(info *client.ServerInfo) {
</a> 		for _, r := range info.Trees {
 			pattern := &quot;&quot;
 			if v, ok := r.Metadata[&quot;url-pattern&quot;]; ok {
<a href="#h15-2-3" id="h15-2-3" class="d">-				pattern = v.(string)
</a><a href="#h15-2-4" id="h15-2-4" class="i">+				pattern = v
</a> 			}
 			if v, ok := r.Metadata[&quot;github&quot;]; ok {
<a href="#h15-2-7" id="h15-2-7" class="d">-				value := v.(string)
</a><a href="#h15-2-8" id="h15-2-8" class="i">+				value := v
</a> 				base := &quot;&quot;
 				_, err := url.ParseRequestURI(value)
 				if err != nil {
<b>diff --git a/<a id="h16" href="../file/server/backend_test.go">server/backend_test.go</a> b/<a href="../file/server/backend_test.go">server/backend_test.go</a></b>
<a href="#h16-0" id="h16-0" class="h">@@ -1,102 +0,0 @@
</a><a href="#h16-0-0" id="h16-0-0" class="d">-package server
</a><a href="#h16-0-1" id="h16-0-1" class="d">-
</a><a href="#h16-0-2" id="h16-0-2" class="d">-import (
</a><a href="#h16-0-3" id="h16-0-3" class="d">-	&quot;errors&quot;
</a><a href="#h16-0-4" id="h16-0-4" class="d">-	&quot;testing&quot;
</a><a href="#h16-0-5" id="h16-0-5" class="d">-	&quot;time&quot;
</a><a href="#h16-0-6" id="h16-0-6" class="d">-
</a><a href="#h16-0-7" id="h16-0-7" class="d">-	&quot;github.com/livegrep/livegrep/client&quot;
</a><a href="#h16-0-8" id="h16-0-8" class="d">-	&quot;github.com/livegrep/livegrep/client/test&quot;
</a><a href="#h16-0-9" id="h16-0-9" class="d">-)
</a><a href="#h16-0-10" id="h16-0-10" class="d">-
</a><a href="#h16-0-11" id="h16-0-11" class="d">-func init() {
</a><a href="#h16-0-12" id="h16-0-12" class="d">-	maxBackoff = 1 * time.Millisecond
</a><a href="#h16-0-13" id="h16-0-13" class="d">-}
</a><a href="#h16-0-14" id="h16-0-14" class="d">-
</a><a href="#h16-0-15" id="h16-0-15" class="d">-func TestFailedDial(t *testing.T) {
</a><a href="#h16-0-16" id="h16-0-16" class="d">-	tries := 0
</a><a href="#h16-0-17" id="h16-0-17" class="d">-	dial := func() (client.Client, error) {
</a><a href="#h16-0-18" id="h16-0-18" class="d">-		tries++
</a><a href="#h16-0-19" id="h16-0-19" class="d">-		if tries &lt; 10 {
</a><a href="#h16-0-20" id="h16-0-20" class="d">-			return nil, errors.New(&quot;connect error&quot;)
</a><a href="#h16-0-21" id="h16-0-21" class="d">-		}
</a><a href="#h16-0-22" id="h16-0-22" class="d">-		return &amp;test.MockClient{
</a><a href="#h16-0-23" id="h16-0-23" class="d">-			QueryError: errors.New(&quot;query failed&quot;),
</a><a href="#h16-0-24" id="h16-0-24" class="d">-		}, nil
</a><a href="#h16-0-25" id="h16-0-25" class="d">-	}
</a><a href="#h16-0-26" id="h16-0-26" class="d">-
</a><a href="#h16-0-27" id="h16-0-27" class="d">-	bk := &amp;Backend{
</a><a href="#h16-0-28" id="h16-0-28" class="d">-		Id:       &quot;search&quot;,
</a><a href="#h16-0-29" id="h16-0-29" class="d">-		Dial:     dial,
</a><a href="#h16-0-30" id="h16-0-30" class="d">-		PoolSize: 2,
</a><a href="#h16-0-31" id="h16-0-31" class="d">-	}
</a><a href="#h16-0-32" id="h16-0-32" class="d">-
</a><a href="#h16-0-33" id="h16-0-33" class="d">-	bk.Start()
</a><a href="#h16-0-34" id="h16-0-34" class="d">-	defer bk.Close()
</a><a href="#h16-0-35" id="h16-0-35" class="d">-
</a><a href="#h16-0-36" id="h16-0-36" class="d">-	select {
</a><a href="#h16-0-37" id="h16-0-37" class="d">-	case &lt;-time.After(1 * time.Second):
</a><a href="#h16-0-38" id="h16-0-38" class="d">-		t.Fatal(&quot;timed out waiting for dial&quot;)
</a><a href="#h16-0-39" id="h16-0-39" class="d">-	case &lt;-bk.Clients:
</a><a href="#h16-0-40" id="h16-0-40" class="d">-	}
</a><a href="#h16-0-41" id="h16-0-41" class="d">-
</a><a href="#h16-0-42" id="h16-0-42" class="d">-}
</a><a href="#h16-0-43" id="h16-0-43" class="d">-
</a><a href="#h16-0-44" id="h16-0-44" class="d">-func assertClosed(t *testing.T, bk *Backend) {
</a><a href="#h16-0-45" id="h16-0-45" class="d">-	select {
</a><a href="#h16-0-46" id="h16-0-46" class="d">-	case _, ok := &lt;-bk.pending:
</a><a href="#h16-0-47" id="h16-0-47" class="d">-		if ok {
</a><a href="#h16-0-48" id="h16-0-48" class="d">-			t.Fatal(&quot;pending data&quot;)
</a><a href="#h16-0-49" id="h16-0-49" class="d">-		}
</a><a href="#h16-0-50" id="h16-0-50" class="d">-	default:
</a><a href="#h16-0-51" id="h16-0-51" class="d">-		t.Fatal(&quot;pending not closed&quot;)
</a><a href="#h16-0-52" id="h16-0-52" class="d">-	}
</a><a href="#h16-0-53" id="h16-0-53" class="d">-	select {
</a><a href="#h16-0-54" id="h16-0-54" class="d">-	case _, ok := &lt;-bk.Clients:
</a><a href="#h16-0-55" id="h16-0-55" class="d">-		if ok {
</a><a href="#h16-0-56" id="h16-0-56" class="d">-			t.Fatal(&quot;clients data&quot;)
</a><a href="#h16-0-57" id="h16-0-57" class="d">-		}
</a><a href="#h16-0-58" id="h16-0-58" class="d">-	default:
</a><a href="#h16-0-59" id="h16-0-59" class="d">-		t.Fatal(&quot;clients not closed&quot;)
</a><a href="#h16-0-60" id="h16-0-60" class="d">-	}
</a><a href="#h16-0-61" id="h16-0-61" class="d">-}
</a><a href="#h16-0-62" id="h16-0-62" class="d">-
</a><a href="#h16-0-63" id="h16-0-63" class="d">-func TestCloseClients(t *testing.T) {
</a><a href="#h16-0-64" id="h16-0-64" class="d">-	var clients []*test.MockClient
</a><a href="#h16-0-65" id="h16-0-65" class="d">-	dial := func() (client.Client, error) {
</a><a href="#h16-0-66" id="h16-0-66" class="d">-		cl := &amp;test.MockClient{
</a><a href="#h16-0-67" id="h16-0-67" class="d">-			QueryError: errors.New(&quot;query failed&quot;),
</a><a href="#h16-0-68" id="h16-0-68" class="d">-		}
</a><a href="#h16-0-69" id="h16-0-69" class="d">-		clients = append(clients, cl)
</a><a href="#h16-0-70" id="h16-0-70" class="d">-		return cl, nil
</a><a href="#h16-0-71" id="h16-0-71" class="d">-	}
</a><a href="#h16-0-72" id="h16-0-72" class="d">-	bk := &amp;Backend{
</a><a href="#h16-0-73" id="h16-0-73" class="d">-		Dial: dial,
</a><a href="#h16-0-74" id="h16-0-74" class="d">-		Id:   &quot;q&quot;,
</a><a href="#h16-0-75" id="h16-0-75" class="d">-	}
</a><a href="#h16-0-76" id="h16-0-76" class="d">-	bk.Start()
</a><a href="#h16-0-77" id="h16-0-77" class="d">-	for i := 0; i &lt; bk.PoolSize; i++ {
</a><a href="#h16-0-78" id="h16-0-78" class="d">-		cl := &lt;-bk.Clients
</a><a href="#h16-0-79" id="h16-0-79" class="d">-		bk.CheckIn(cl)
</a><a href="#h16-0-80" id="h16-0-80" class="d">-	}
</a><a href="#h16-0-81" id="h16-0-81" class="d">-	bk.Close()
</a><a href="#h16-0-82" id="h16-0-82" class="d">-	for i, cl := range clients {
</a><a href="#h16-0-83" id="h16-0-83" class="d">-		if !cl.Closed {
</a><a href="#h16-0-84" id="h16-0-84" class="d">-			t.Fatal(&quot;failed to close&quot;, i)
</a><a href="#h16-0-85" id="h16-0-85" class="d">-		}
</a><a href="#h16-0-86" id="h16-0-86" class="d">-	}
</a><a href="#h16-0-87" id="h16-0-87" class="d">-	assertClosed(t, bk)
</a><a href="#h16-0-88" id="h16-0-88" class="d">-}
</a><a href="#h16-0-89" id="h16-0-89" class="d">-
</a><a href="#h16-0-90" id="h16-0-90" class="d">-func TestCloseNoClients(t *testing.T) {
</a><a href="#h16-0-91" id="h16-0-91" class="d">-	dial := func() (client.Client, error) {
</a><a href="#h16-0-92" id="h16-0-92" class="d">-		return nil, errors.New(&quot;error&quot;)
</a><a href="#h16-0-93" id="h16-0-93" class="d">-	}
</a><a href="#h16-0-94" id="h16-0-94" class="d">-	bk := &amp;Backend{
</a><a href="#h16-0-95" id="h16-0-95" class="d">-		Dial: dial,
</a><a href="#h16-0-96" id="h16-0-96" class="d">-		Id:   &quot;q&quot;,
</a><a href="#h16-0-97" id="h16-0-97" class="d">-	}
</a><a href="#h16-0-98" id="h16-0-98" class="d">-	bk.Start()
</a><a href="#h16-0-99" id="h16-0-99" class="d">-	bk.Close()
</a><a href="#h16-0-100" id="h16-0-100" class="d">-	assertClosed(t, bk)
</a><a href="#h16-0-101" id="h16-0-101" class="d">-}
</a><b>diff --git a/<a id="h17" href="../file/server/log/BUILD">server/log/BUILD</a> b/<a href="../file/server/log/BUILD">server/log/BUILD</a></b>
<a href="#h17-0" id="h17-0" class="h">@@ -12,9 +12,7 @@ name = &quot;go_default_library&quot;,
</a>   ],
   deps = [
     &quot;//server/reqid:go_default_library&quot;,
<a href="#h17-0-3" id="h17-0-3" class="d">-    &quot;//vendor/golang.org/x/net/context:go_default_library&quot;,
</a><a href="#h17-0-4" id="h17-0-4" class="i">+    &quot;@org_golang_x_net//context:go_default_library&quot;,
</a>   ],
   visibility = [&quot;//visibility:public&quot;],
 )
<a href="#h17-0-8" id="h17-0-8" class="d">-
</a><a href="#h17-0-9" id="h17-0-9" class="d">-
</a><b>diff --git a/<a id="h18" href="../file/server/query.go">server/query.go</a> b/<a href="../file/server/query.go">server/query.go</a></b>
<a href="#h18-0" id="h18-0" class="h">@@ -7,12 +7,12 @@ import (
</a> 	&quot;strings&quot;
 	&quot;unicode/utf8&quot;
 
<a href="#h18-0-3" id="h18-0-3" class="d">-	&quot;github.com/livegrep/livegrep/client&quot;
</a><a href="#h18-0-4" id="h18-0-4" class="i">+	pb &quot;github.com/livegrep/livegrep/src/proto/go_proto&quot;
</a> )
 
 var pieceRE = regexp.MustCompile(`\(|(?:^([a-zA-Z0-9-]+):|\\.)| `)
 
<a href="#h18-0-9" id="h18-0-9" class="d">-func ParseQuery(query string) (client.Query, error) {
</a><a href="#h18-0-10" id="h18-0-10" class="i">+func ParseQuery(query string) (pb.Query, error) {
</a> 	ops := make(map[string]string)
 	key := &quot;&quot;
 	q := strings.TrimSpace(query)
<a href="#h18-1" id="h18-1" class="h">@@ -78,13 +78,13 @@ func ParseQuery(query string) (client.Query, error) {
</a> 		}
 	}
 
<a href="#h18-1-3" id="h18-1-3" class="d">-	var out client.Query
</a><a href="#h18-1-4" id="h18-1-4" class="i">+	var out pb.Query
</a> 	out.File = ops[&quot;file&quot;]
 	out.Repo = ops[&quot;repo&quot;]
 	out.Tags = ops[&quot;tags&quot;]
<a href="#h18-1-8" id="h18-1-8" class="d">-	out.Not.File = ops[&quot;-file&quot;]
</a><a href="#h18-1-9" id="h18-1-9" class="d">-	out.Not.Repo = ops[&quot;-repo&quot;]
</a><a href="#h18-1-10" id="h18-1-10" class="d">-	out.Not.Tags = ops[&quot;-tags&quot;]
</a><a href="#h18-1-11" id="h18-1-11" class="i">+	out.NotFile = ops[&quot;-file&quot;]
</a><a href="#h18-1-12" id="h18-1-12" class="i">+	out.NotRepo = ops[&quot;-repo&quot;]
</a><a href="#h18-1-13" id="h18-1-13" class="i">+	out.NotTags = ops[&quot;-tags&quot;]
</a> 	var bits []string
 	for _, k := range []string{&quot;&quot;, &quot;case&quot;, &quot;lit&quot;} {
 		bit := strings.TrimSpace(ops[k])
<b>diff --git a/<a id="h19" href="../file/server/query_test.go">server/query_test.go</a> b/<a href="../file/server/query_test.go">server/query_test.go</a></b>
<a href="#h19-0" id="h19-0" class="h">@@ -4,36 +4,25 @@ import (
</a> 	&quot;reflect&quot;
 	&quot;testing&quot;
 
<a href="#h19-0-3" id="h19-0-3" class="d">-	&quot;github.com/livegrep/livegrep/client&quot;
</a><a href="#h19-0-4" id="h19-0-4" class="i">+	pb &quot;github.com/livegrep/livegrep/src/proto/go_proto&quot;
</a> )
 
 func TestParseQuery(t *testing.T) {
<a href="#h19-0-8" id="h19-0-8" class="d">-	Not := func(file, repo, tags string) struct {
</a><a href="#h19-0-9" id="h19-0-9" class="d">-		File string `json:&quot;file&quot;`
</a><a href="#h19-0-10" id="h19-0-10" class="d">-		Repo string `json:&quot;repo&quot;`
</a><a href="#h19-0-11" id="h19-0-11" class="d">-		Tags string `json:&quot;tags&quot;`
</a><a href="#h19-0-12" id="h19-0-12" class="d">-	} {
</a><a href="#h19-0-13" id="h19-0-13" class="d">-		return struct {
</a><a href="#h19-0-14" id="h19-0-14" class="d">-			File string `json:&quot;file&quot;`
</a><a href="#h19-0-15" id="h19-0-15" class="d">-			Repo string `json:&quot;repo&quot;`
</a><a href="#h19-0-16" id="h19-0-16" class="d">-			Tags string `json:&quot;tags&quot;`
</a><a href="#h19-0-17" id="h19-0-17" class="d">-		}{file, repo, tags}
</a><a href="#h19-0-18" id="h19-0-18" class="d">-	}
</a> 	cases := []struct {
 		in  string
<a href="#h19-0-21" id="h19-0-21" class="d">-		out client.Query
</a><a href="#h19-0-22" id="h19-0-22" class="i">+		out pb.Query
</a> 	}{
 		{
 			&quot;hello&quot;,
<a href="#h19-0-26" id="h19-0-26" class="d">-			client.Query{Line: &quot;hello&quot;, FoldCase: true},
</a><a href="#h19-0-27" id="h19-0-27" class="i">+			pb.Query{Line: &quot;hello&quot;, FoldCase: true},
</a> 		},
 		{
 			&quot;a b c&quot;,
<a href="#h19-0-31" id="h19-0-31" class="d">-			client.Query{Line: &quot;a b c&quot;, FoldCase: true},
</a><a href="#h19-0-32" id="h19-0-32" class="i">+			pb.Query{Line: &quot;a b c&quot;, FoldCase: true},
</a> 		},
 		{
 			&quot;line file:.rb&quot;,
<a href="#h19-0-36" id="h19-0-36" class="d">-			client.Query{
</a><a href="#h19-0-37" id="h19-0-37" class="i">+			pb.Query{
</a> 				Line:     &quot;line&quot;,
 				File:     &quot;.rb&quot;,
 				FoldCase: true,
<a href="#h19-1" id="h19-1" class="h">@@ -41,79 +30,79 @@ func TestParseQuery(t *testing.T) {
</a> 		},
 		{
 			&quot; a  &quot;,
<a href="#h19-1-3" id="h19-1-3" class="d">-			client.Query{Line: &quot;a&quot;, FoldCase: true},
</a><a href="#h19-1-4" id="h19-1-4" class="i">+			pb.Query{Line: &quot;a&quot;, FoldCase: true},
</a> 		},
 		{
 			&quot;( a  )&quot;,
<a href="#h19-1-8" id="h19-1-8" class="d">-			client.Query{Line: &quot;( a  )&quot;, FoldCase: true},
</a><a href="#h19-1-9" id="h19-1-9" class="i">+			pb.Query{Line: &quot;( a  )&quot;, FoldCase: true},
</a> 		},
 		{
 			&quot;Aa&quot;,
<a href="#h19-1-13" id="h19-1-13" class="d">-			client.Query{Line: &quot;Aa&quot;, FoldCase: false},
</a><a href="#h19-1-14" id="h19-1-14" class="i">+			pb.Query{Line: &quot;Aa&quot;, FoldCase: false},
</a> 		},
 		{
 			&quot;case:abc&quot;,
<a href="#h19-1-18" id="h19-1-18" class="d">-			client.Query{Line: &quot;abc&quot;, FoldCase: false},
</a><a href="#h19-1-19" id="h19-1-19" class="i">+			pb.Query{Line: &quot;abc&quot;, FoldCase: false},
</a> 		},
 		{
 			&quot;case:abc file:^kernel/&quot;,
<a href="#h19-1-23" id="h19-1-23" class="d">-			client.Query{Line: &quot;abc&quot;, FoldCase: false, File: &quot;^kernel/&quot;},
</a><a href="#h19-1-24" id="h19-1-24" class="i">+			pb.Query{Line: &quot;abc&quot;, FoldCase: false, File: &quot;^kernel/&quot;},
</a> 		},
 		{
 			&quot;case:abc file:( )&quot;,
<a href="#h19-1-28" id="h19-1-28" class="d">-			client.Query{Line: &quot;abc&quot;, FoldCase: false, File: &quot;( )&quot;},
</a><a href="#h19-1-29" id="h19-1-29" class="i">+			pb.Query{Line: &quot;abc&quot;, FoldCase: false, File: &quot;( )&quot;},
</a> 		},
 		{
 			&quot;a file:b c&quot;,
<a href="#h19-1-33" id="h19-1-33" class="d">-			client.Query{Line: &quot;a c&quot;, FoldCase: true, File: &quot;b&quot;},
</a><a href="#h19-1-34" id="h19-1-34" class="i">+			pb.Query{Line: &quot;a c&quot;, FoldCase: true, File: &quot;b&quot;},
</a> 		},
 		{
 			&quot;a file:((abc()())()) c&quot;,
<a href="#h19-1-38" id="h19-1-38" class="d">-			client.Query{Line: &quot;a c&quot;, FoldCase: true, File: &quot;((abc()())())&quot;},
</a><a href="#h19-1-39" id="h19-1-39" class="i">+			pb.Query{Line: &quot;a c&quot;, FoldCase: true, File: &quot;((abc()())())&quot;},
</a> 		},
 		{
 			&quot;(  () (   &quot;,
<a href="#h19-1-43" id="h19-1-43" class="d">-			client.Query{Line: &quot;(  () (&quot;, FoldCase: true},
</a><a href="#h19-1-44" id="h19-1-44" class="i">+			pb.Query{Line: &quot;(  () (&quot;, FoldCase: true},
</a> 		},
 		{
 			`a file:\(`,
<a href="#h19-1-48" id="h19-1-48" class="d">-			client.Query{Line: &quot;a&quot;, File: `\(`, FoldCase: true},
</a><a href="#h19-1-49" id="h19-1-49" class="i">+			pb.Query{Line: &quot;a&quot;, File: `\(`, FoldCase: true},
</a> 		},
 		{
 			`a file:(\()`,
<a href="#h19-1-53" id="h19-1-53" class="d">-			client.Query{Line: &quot;a&quot;, File: `(\()`, FoldCase: true},
</a><a href="#h19-1-54" id="h19-1-54" class="i">+			pb.Query{Line: &quot;a&quot;, File: `(\()`, FoldCase: true},
</a> 		},
 		{
 			`(`,
<a href="#h19-1-58" id="h19-1-58" class="d">-			client.Query{Line: &quot;(&quot;, FoldCase: true},
</a><a href="#h19-1-59" id="h19-1-59" class="i">+			pb.Query{Line: &quot;(&quot;, FoldCase: true},
</a> 		},
 		{
 			`(file:)`,
<a href="#h19-1-63" id="h19-1-63" class="d">-			client.Query{Line: &quot;(file:)&quot;, FoldCase: true},
</a><a href="#h19-1-64" id="h19-1-64" class="i">+			pb.Query{Line: &quot;(file:)&quot;, FoldCase: true},
</a> 		},
 		{
 			`re tags:kind:function`,
<a href="#h19-1-68" id="h19-1-68" class="d">-			client.Query{Line: &quot;re&quot;, FoldCase: true, Tags: &quot;kind:function&quot;},
</a><a href="#h19-1-69" id="h19-1-69" class="i">+			pb.Query{Line: &quot;re&quot;, FoldCase: true, Tags: &quot;kind:function&quot;},
</a> 		},
 		{
 			`-file:Godep re`,
<a href="#h19-1-73" id="h19-1-73" class="d">-			client.Query{Line: &quot;re&quot;, Not: Not(&quot;Godep&quot;, &quot;&quot;, &quot;&quot;), FoldCase: true},
</a><a href="#h19-1-74" id="h19-1-74" class="i">+			pb.Query{Line: &quot;re&quot;, NotFile: &quot;Godep&quot;, FoldCase: true},
</a> 		},
 		{
 			`-file:. -repo:Godep re`,
<a href="#h19-1-78" id="h19-1-78" class="d">-			client.Query{Line: &quot;re&quot;, Not: Not(&quot;.&quot;, &quot;Godep&quot;, &quot;&quot;), FoldCase: true},
</a><a href="#h19-1-79" id="h19-1-79" class="i">+			pb.Query{Line: &quot;re&quot;, NotFile: &quot;.&quot;, NotRepo: &quot;Godep&quot;, FoldCase: true},
</a> 		},
 		{
 			`-tags:kind:class re`,
<a href="#h19-1-83" id="h19-1-83" class="d">-			client.Query{Line: &quot;re&quot;, Not: Not(&quot;&quot;, &quot;&quot;, &quot;kind:class&quot;), FoldCase: true},
</a><a href="#h19-1-84" id="h19-1-84" class="i">+			pb.Query{Line: &quot;re&quot;, NotTags: &quot;kind:class&quot;, FoldCase: true},
</a> 		},
 		{
 			`case:foo:`,
<a href="#h19-1-88" id="h19-1-88" class="d">-			client.Query{Line: &quot;foo:&quot;, FoldCase: false},
</a><a href="#h19-1-89" id="h19-1-89" class="i">+			pb.Query{Line: &quot;foo:&quot;, FoldCase: false},
</a> 		},
 		{
 			`lit:.`,
<a href="#h19-1-93" id="h19-1-93" class="d">-			client.Query{Line: `\.`, FoldCase: false},
</a><a href="#h19-1-94" id="h19-1-94" class="i">+			pb.Query{Line: `\.`, FoldCase: false},
</a> 		},
 	}
 
<b>diff --git a/<a id="h20" href="../file/server/reqid/BUILD">server/reqid/BUILD</a> b/<a href="../file/server/reqid/BUILD">server/reqid/BUILD</a></b>
<a href="#h20-0" id="h20-0" class="h">@@ -11,9 +11,7 @@ name = &quot;go_default_library&quot;,
</a>     &quot;reqid.go&quot;,
   ],
   deps = [
<a href="#h20-0-3" id="h20-0-3" class="d">-    &quot;//vendor/golang.org/x/net/context:go_default_library&quot;,
</a><a href="#h20-0-4" id="h20-0-4" class="i">+    &quot;@org_golang_x_net//context:go_default_library&quot;,
</a>   ],
   visibility = [&quot;//visibility:public&quot;],
 )
<a href="#h20-0-8" id="h20-0-8" class="d">-
</a><a href="#h20-0-9" id="h20-0-9" class="d">-
</a><b>diff --git a/<a id="h21" href="../file/server/request_log.go">server/request_log.go</a> b/<a href="../file/server/request_log.go">server/request_log.go</a></b>
<a href="#h21-0" id="h21-0" class="h">@@ -1,20 +0,0 @@
</a><a href="#h21-0-0" id="h21-0-0" class="d">-package server
</a><a href="#h21-0-1" id="h21-0-1" class="d">-
</a><a href="#h21-0-2" id="h21-0-2" class="d">-import (
</a><a href="#h21-0-3" id="h21-0-3" class="d">-	&quot;log&quot;
</a><a href="#h21-0-4" id="h21-0-4" class="d">-	&quot;net/http&quot;
</a><a href="#h21-0-5" id="h21-0-5" class="d">-)
</a><a href="#h21-0-6" id="h21-0-6" class="d">-
</a><a href="#h21-0-7" id="h21-0-7" class="d">-type requestLogger struct {
</a><a href="#h21-0-8" id="h21-0-8" class="d">-	inner http.Handler
</a><a href="#h21-0-9" id="h21-0-9" class="d">-}
</a><a href="#h21-0-10" id="h21-0-10" class="d">-
</a><a href="#h21-0-11" id="h21-0-11" class="d">-func (s *requestLogger) ServeHTTP(w http.ResponseWriter, r *http.Request) {
</a><a href="#h21-0-12" id="h21-0-12" class="d">-	s.logRequest(r)
</a><a href="#h21-0-13" id="h21-0-13" class="d">-	s.inner.ServeHTTP(w, r)
</a><a href="#h21-0-14" id="h21-0-14" class="d">-}
</a><a href="#h21-0-15" id="h21-0-15" class="d">-
</a><a href="#h21-0-16" id="h21-0-16" class="d">-func (s *requestLogger) logRequest(r *http.Request) {
</a><a href="#h21-0-17" id="h21-0-17" class="d">-	log.Printf(&quot;request: remote=%q method=%q url=%q&quot;,
</a><a href="#h21-0-18" id="h21-0-18" class="d">-		r.RemoteAddr, r.Method, r.URL)
</a><a href="#h21-0-19" id="h21-0-19" class="d">-}
</a><b>diff --git a/<a id="h22" href="../file/server/server.go">server/server.go</a> b/<a href="../file/server/server.go">server/server.go</a></b>
<a href="#h22-0" id="h22-0" class="h">@@ -14,7 +14,6 @@ import (
</a> 	&quot;github.com/bmizerany/pat&quot;
 	libhoney &quot;github.com/honeycombio/libhoney-go&quot;
 
<a href="#h22-0-3" id="h22-0-3" class="d">-	&quot;github.com/livegrep/livegrep/client&quot;
</a> 	&quot;github.com/livegrep/livegrep/server/config&quot;
 	&quot;github.com/livegrep/livegrep/server/log&quot;
 	&quot;github.com/livegrep/livegrep/server/reqid&quot;
<a href="#h22-1" id="h22-1" class="h">@@ -182,10 +181,9 @@ func New(cfg *config.Config) (http.Handler, error) {
</a> 	}
 
 	for _, bk := range srv.config.Backends {
<a href="#h22-1-3" id="h22-1-3" class="d">-		addr := bk.Addr
</a><a href="#h22-1-4" id="h22-1-4" class="d">-		be := &amp;Backend{
</a><a href="#h22-1-5" id="h22-1-5" class="d">-			Id:   bk.Id,
</a><a href="#h22-1-6" id="h22-1-6" class="d">-			Dial: func() (client.Client, error) { return client.Dial(&quot;tcp&quot;, addr) },
</a><a href="#h22-1-7" id="h22-1-7" class="i">+		be, e := NewBackend(bk.Id, bk.Addr)
</a><a href="#h22-1-8" id="h22-1-8" class="i">+		if e != nil {
</a><a href="#h22-1-9" id="h22-1-9" class="i">+			return nil, e
</a> 		}
 		be.Start()
 		srv.bk[be.Id] = be
<b>diff --git a/<a id="h23" href="../file/src/lib/debug.cc">src/lib/debug.cc</a> b/<a href="../file/src/lib/debug.cc">src/lib/debug.cc</a></b>
<a href="#h23-0" id="h23-0" class="h">@@ -90,7 +90,7 @@ void cs_debug(const char *file, int lno, const char *fmt, ...) {
</a>     va_start(ap, fmt);
 
     string buf;
<a href="#h23-0-3" id="h23-0-3" class="d">-    if (trace_id-&gt;empty())
</a><a href="#h23-0-4" id="h23-0-4" class="i">+    if (current_trace_id().empty())
</a>         buf = strprintf(&quot;[%s:%d] %s\n&quot;,
                         file, lno, vstrprintf(fmt, ap).c_str());
     else
<a href="#h23-1" id="h23-1" class="h">@@ -133,11 +133,13 @@ void log(const std::string &amp;trace, const char *fmt, ...) {
</a> void log(const char *fmt, ...) {
     va_list ap;
     va_start(ap, fmt);
<a href="#h23-1-3" id="h23-1-3" class="d">-    vlog(*trace_id, fmt, ap);
</a><a href="#h23-1-4" id="h23-1-4" class="i">+    vlog(current_trace_id(), fmt, ap);
</a>     va_end(ap);
 }
 
 std::string current_trace_id() {
<a href="#h23-1-9" id="h23-1-9" class="i">+    if (trace_id.get() == nullptr)
</a><a href="#h23-1-10" id="h23-1-10" class="i">+        trace_id.put(new std::string());
</a>     return *trace_id.get();
 }
 
<b>diff --git a/<a id="h24" href="../file/src/lib/timer.h">src/lib/timer.h</a> b/<a href="../file/src/lib/timer.h">src/lib/timer.h</a></b>
<a href="#h24-0" id="h24-0" class="h">@@ -141,4 +141,8 @@ protected:
</a> #endif
 };
 
<a href="#h24-0-3" id="h24-0-3" class="i">+inline static long timeval_ms(struct timeval tv) {
</a><a href="#h24-0-4" id="h24-0-4" class="i">+    return tv.tv_sec * 1000 + tv.tv_usec / 1000;
</a><a href="#h24-0-5" id="h24-0-5" class="i">+}
</a><a href="#h24-0-6" id="h24-0-6" class="i">+
</a> #endif
<b>diff --git a/<a id="h25" href="../file/src/proto/BUILD">src/proto/BUILD</a> b/<a href="../file/src/proto/BUILD">src/proto/BUILD</a></b>
<a href="#h25-0" id="h25-0" class="h">@@ -0,0 +1,16 @@
</a><a href="#h25-0-0" id="h25-0-0" class="i">+package(default_visibility = [&quot;//visibility:public&quot;])
</a><a href="#h25-0-1" id="h25-0-1" class="i">+
</a><a href="#h25-0-2" id="h25-0-2" class="i">+load(&quot;@org_pubref_rules_protobuf//go:rules.bzl&quot;, &quot;go_proto_library&quot;)
</a><a href="#h25-0-3" id="h25-0-3" class="i">+load(&quot;@org_pubref_rules_protobuf//cpp:rules.bzl&quot;, &quot;cc_proto_library&quot;)
</a><a href="#h25-0-4" id="h25-0-4" class="i">+
</a><a href="#h25-0-5" id="h25-0-5" class="i">+go_proto_library(
</a><a href="#h25-0-6" id="h25-0-6" class="i">+  name = &quot;go_proto&quot;,
</a><a href="#h25-0-7" id="h25-0-7" class="i">+  protos = [&quot;livegrep.proto&quot;],
</a><a href="#h25-0-8" id="h25-0-8" class="i">+  with_grpc = True,
</a><a href="#h25-0-9" id="h25-0-9" class="i">+)
</a><a href="#h25-0-10" id="h25-0-10" class="i">+
</a><a href="#h25-0-11" id="h25-0-11" class="i">+cc_proto_library(
</a><a href="#h25-0-12" id="h25-0-12" class="i">+  name = &quot;cc_proto&quot;,
</a><a href="#h25-0-13" id="h25-0-13" class="i">+  protos = [&quot;livegrep.proto&quot;],
</a><a href="#h25-0-14" id="h25-0-14" class="i">+  with_grpc = True,
</a><a href="#h25-0-15" id="h25-0-15" class="i">+)
</a><b>diff --git a/<a id="h26" href="../file/src/proto/go_proto">src/proto/go_proto</a> b/<a href="../file/src/proto/go_proto">src/proto/go_proto</a></b>
<a href="#h26-0" id="h26-0" class="h">@@ -0,0 +1 @@
</a><a href="#h26-0-0" id="h26-0-0" class="i">+../../bazel-genfiles/src/proto
</a><a href="#h26-0-1" id="h26-0-1" class="i">+\ No newline at end of file
</a><b>diff --git a/<a id="h27" href="../file/src/proto/livegrep.proto">src/proto/livegrep.proto</a> b/<a href="../file/src/proto/livegrep.proto">src/proto/livegrep.proto</a></b>
<a href="#h27-0" id="h27-0" class="h">@@ -0,0 +1,66 @@
</a><a href="#h27-0-0" id="h27-0-0" class="i">+syntax = &quot;proto3&quot;;
</a><a href="#h27-0-1" id="h27-0-1" class="i">+
</a><a href="#h27-0-2" id="h27-0-2" class="i">+message Query {
</a><a href="#h27-0-3" id="h27-0-3" class="i">+    string line = 1;
</a><a href="#h27-0-4" id="h27-0-4" class="i">+    string file = 2;
</a><a href="#h27-0-5" id="h27-0-5" class="i">+    string repo = 3;
</a><a href="#h27-0-6" id="h27-0-6" class="i">+    string tags = 4;
</a><a href="#h27-0-7" id="h27-0-7" class="i">+    bool fold_case = 5;
</a><a href="#h27-0-8" id="h27-0-8" class="i">+    string not_file = 6;
</a><a href="#h27-0-9" id="h27-0-9" class="i">+    string not_repo = 7;
</a><a href="#h27-0-10" id="h27-0-10" class="i">+    string not_tags = 8;
</a><a href="#h27-0-11" id="h27-0-11" class="i">+}
</a><a href="#h27-0-12" id="h27-0-12" class="i">+
</a><a href="#h27-0-13" id="h27-0-13" class="i">+message Bounds {
</a><a href="#h27-0-14" id="h27-0-14" class="i">+    int32 left = 1;
</a><a href="#h27-0-15" id="h27-0-15" class="i">+    int32 right = 2;
</a><a href="#h27-0-16" id="h27-0-16" class="i">+}
</a><a href="#h27-0-17" id="h27-0-17" class="i">+
</a><a href="#h27-0-18" id="h27-0-18" class="i">+message SearchResult {
</a><a href="#h27-0-19" id="h27-0-19" class="i">+    string tree = 1;
</a><a href="#h27-0-20" id="h27-0-20" class="i">+    string version = 2;
</a><a href="#h27-0-21" id="h27-0-21" class="i">+    string path = 3;
</a><a href="#h27-0-22" id="h27-0-22" class="i">+    int64 line_number = 4;
</a><a href="#h27-0-23" id="h27-0-23" class="i">+    repeated string context_before = 5;
</a><a href="#h27-0-24" id="h27-0-24" class="i">+    repeated string context_after = 6;
</a><a href="#h27-0-25" id="h27-0-25" class="i">+    Bounds bounds = 7;
</a><a href="#h27-0-26" id="h27-0-26" class="i">+    string line = 8;
</a><a href="#h27-0-27" id="h27-0-27" class="i">+}
</a><a href="#h27-0-28" id="h27-0-28" class="i">+
</a><a href="#h27-0-29" id="h27-0-29" class="i">+message SearchStats {
</a><a href="#h27-0-30" id="h27-0-30" class="i">+    int64 re2_time = 1;
</a><a href="#h27-0-31" id="h27-0-31" class="i">+    int64 git_time = 2;
</a><a href="#h27-0-32" id="h27-0-32" class="i">+    int64 sort_time = 3;
</a><a href="#h27-0-33" id="h27-0-33" class="i">+    int64 index_time = 4;
</a><a href="#h27-0-34" id="h27-0-34" class="i">+    int64 analyze_time = 5;
</a><a href="#h27-0-35" id="h27-0-35" class="i">+    enum ExitReason {
</a><a href="#h27-0-36" id="h27-0-36" class="i">+        NONE = 0;
</a><a href="#h27-0-37" id="h27-0-37" class="i">+        TIMEOUT = 1;
</a><a href="#h27-0-38" id="h27-0-38" class="i">+        MATCH_LIMIT = 2;
</a><a href="#h27-0-39" id="h27-0-39" class="i">+    }
</a><a href="#h27-0-40" id="h27-0-40" class="i">+    ExitReason exit_reason = 6;
</a><a href="#h27-0-41" id="h27-0-41" class="i">+}
</a><a href="#h27-0-42" id="h27-0-42" class="i">+
</a><a href="#h27-0-43" id="h27-0-43" class="i">+message ServerInfo {
</a><a href="#h27-0-44" id="h27-0-44" class="i">+    string name = 1;
</a><a href="#h27-0-45" id="h27-0-45" class="i">+    message Tree {
</a><a href="#h27-0-46" id="h27-0-46" class="i">+        string name = 1;
</a><a href="#h27-0-47" id="h27-0-47" class="i">+        string version = 2;
</a><a href="#h27-0-48" id="h27-0-48" class="i">+        map&lt;string, string&gt; metadata = 3;
</a><a href="#h27-0-49" id="h27-0-49" class="i">+    }
</a><a href="#h27-0-50" id="h27-0-50" class="i">+    repeated Tree trees = 2;
</a><a href="#h27-0-51" id="h27-0-51" class="i">+    bool has_tags = 3;
</a><a href="#h27-0-52" id="h27-0-52" class="i">+}
</a><a href="#h27-0-53" id="h27-0-53" class="i">+
</a><a href="#h27-0-54" id="h27-0-54" class="i">+message CodeSearchResult {
</a><a href="#h27-0-55" id="h27-0-55" class="i">+    SearchStats stats = 1;
</a><a href="#h27-0-56" id="h27-0-56" class="i">+    repeated SearchResult results = 2;
</a><a href="#h27-0-57" id="h27-0-57" class="i">+}
</a><a href="#h27-0-58" id="h27-0-58" class="i">+
</a><a href="#h27-0-59" id="h27-0-59" class="i">+message InfoRequest {
</a><a href="#h27-0-60" id="h27-0-60" class="i">+}
</a><a href="#h27-0-61" id="h27-0-61" class="i">+
</a><a href="#h27-0-62" id="h27-0-62" class="i">+service CodeSearch {
</a><a href="#h27-0-63" id="h27-0-63" class="i">+    rpc Info(InfoRequest) returns (ServerInfo);
</a><a href="#h27-0-64" id="h27-0-64" class="i">+    rpc Search(Query) returns (CodeSearchResult);
</a><a href="#h27-0-65" id="h27-0-65" class="i">+}
</a><b>diff --git a/<a id="h28" href="../file/src/tagsearch.cc">src/tagsearch.cc</a> b/<a href="../file/src/tagsearch.cc">src/tagsearch.cc</a></b>
<a href="#h28-0" id="h28-0" class="h">@@ -11,8 +11,10 @@
</a> #include &quot;src/lib/debug.h&quot;
 
 #include &lt;utility&gt;
<a href="#h28-0-3" id="h28-0-3" class="i">+#include &lt;boost/filesystem.hpp&gt;
</a> 
 using re2::RE2;
<a href="#h28-0-6" id="h28-0-6" class="i">+using boost::filesystem::path;
</a> 
 namespace {
 
<a href="#h28-1" id="h28-1" class="h">@@ -40,48 +42,47 @@ std::string create_tag_line_regex(
</a>     const std::string&amp; file,
     const std::string&amp; lno,
     const std::string&amp; tags) {
<a href="#h28-1-3" id="h28-1-3" class="d">-    // full regex match for a tag line created with ctags using format=2.
</a><a href="#h28-1-4" id="h28-1-4" class="d">-    return std::string(&quot;^&quot;) + name + &quot;\\t&quot; + file + &quot;\\t&quot; + lno + &quot;\\;\\\&quot;\\t&quot; + tags + &quot;$&quot;;
</a><a href="#h28-1-5" id="h28-1-5" class="i">+    // full regex match for a tag line created with
</a><a href="#h28-1-6" id="h28-1-6" class="i">+    //  ctags --format=2 -n --fields=+K
</a><a href="#h28-1-7" id="h28-1-7" class="i">+    return std::string(&quot;^&quot;) + name + &quot;\t&quot; + file + &quot;\t&quot; + lno + &quot;;\&quot;\t&quot; + tags + &quot;$&quot;;
</a> }
 
 };
 
<a href="#h28-1-12" id="h28-1-12" class="d">-void tag_searcher::load_index(const string&amp; path) {
</a><a href="#h28-1-13" id="h28-1-13" class="d">-    cs_.load_index(path);
</a><a href="#h28-1-14" id="h28-1-14" class="d">-}
</a><a href="#h28-1-15" id="h28-1-15" class="d">-
</a> void tag_searcher::cache_indexed_files(code_searcher* cs) {
     file_alloc_ = cs-&gt;alloc_;
     for (auto it = cs-&gt;begin_files(); it != cs-&gt;end_files(); ++it) {
         auto file = *it;
<a href="#h28-1-20" id="h28-1-20" class="d">-        auto key = repo_path_pair(file-&gt;tree-&gt;name, file-&gt;path);
</a><a href="#h28-1-21" id="h28-1-21" class="d">-        path_to_file_map_.insert(std::make_pair(key, file));
</a><a href="#h28-1-22" id="h28-1-22" class="i">+        auto key = path(file-&gt;tree-&gt;name) / path(file-&gt;path);
</a><a href="#h28-1-23" id="h28-1-23" class="i">+        path_to_file_map_.insert(std::make_pair(key.string(), file));
</a>     }
 }
 
 bool tag_searcher::transform(query *q, match_result *m) const {
     static const std::string regex = create_tag_line_regex(&quot;(.+)&quot;, &quot;(.+)&quot;, &quot;(\\d+)&quot;, &quot;(.+)&quot;);
<a href="#h28-1-29" id="h28-1-29" class="d">-    StringPiece name, path, tags;
</a><a href="#h28-1-30" id="h28-1-30" class="d">-    if (!RE2::FullMatch(m-&gt;line, regex, &amp;name, &amp;path, &amp;m-&gt;lno, &amp;tags)) {
</a><a href="#h28-1-31" id="h28-1-31" class="i">+    StringPiece name, tags_path, tags;
</a><a href="#h28-1-32" id="h28-1-32" class="i">+    if (!RE2::FullMatch(m-&gt;line, regex, &amp;name, &amp;tags_path, &amp;m-&gt;lno, &amp;tags)) {
</a>         log(q-&gt;trace_id, &quot;unknown ctags format: %s\n&quot;, m-&gt;line.as_string().c_str());
         return false;
     }
 
     // check the negation constraints
     if (q-&gt;negate.file_pat &amp;&amp;
<a href="#h28-1-39" id="h28-1-39" class="d">-        q-&gt;negate.file_pat-&gt;Match(path, 0, path.size(), RE2::UNANCHORED, NULL, 0))
</a><a href="#h28-1-40" id="h28-1-40" class="i">+        q-&gt;negate.file_pat-&gt;Match(tags_path, 0, tags_path.size(), RE2::UNANCHORED, NULL, 0))
</a>         return false;
     if (q-&gt;negate.tags_pat &amp;&amp;
         q-&gt;negate.tags_pat-&gt;Match(tags, 0, tags.size(), RE2::UNANCHORED, NULL, 0))
         return false;
 
     // lookup the indexed_file base on repo and path
<a href="#h28-1-47" id="h28-1-47" class="d">-    auto key = repo_path_pair(m-&gt;file-&gt;tree-&gt;name, path.as_string());
</a><a href="#h28-1-48" id="h28-1-48" class="d">-    auto value = path_to_file_map_.find(key);
</a><a href="#h28-1-49" id="h28-1-49" class="i">+    path lookup = path(m-&gt;file-&gt;tree-&gt;name) /
</a><a href="#h28-1-50" id="h28-1-50" class="i">+        path(m-&gt;file-&gt;path).parent_path() /
</a><a href="#h28-1-51" id="h28-1-51" class="i">+        path(tags_path.as_string());
</a><a href="#h28-1-52" id="h28-1-52" class="i">+    auto value = path_to_file_map_.find(lookup.string());
</a>     if (value == path_to_file_map_.end()) {
         log(q-&gt;trace_id,
<a href="#h28-1-55" id="h28-1-55" class="d">-            &quot;unable to find a file matching %s from repo %s\n&quot;,
</a><a href="#h28-1-56" id="h28-1-56" class="d">-            path.as_string().c_str(), m-&gt;file-&gt;tree-&gt;name.c_str());
</a><a href="#h28-1-57" id="h28-1-57" class="i">+            &quot;unable to find a file matching %s\n&quot;,
</a><a href="#h28-1-58" id="h28-1-58" class="i">+            lookup.string().c_str());
</a>         return false;
     }
     auto file = value-&gt;second;
<b>diff --git a/<a id="h29" href="../file/src/tagsearch.h">src/tagsearch.h</a> b/<a href="../file/src/tagsearch.h">src/tagsearch.h</a></b>
<a href="#h29-0" id="h29-0" class="h">@@ -18,21 +18,15 @@ class chunk_allocator;
</a> 
 class tag_searcher {
 public:
<a href="#h29-0-3" id="h29-0-3" class="d">-    void load_index(const string&amp; path);
</a><a href="#h29-0-4" id="h29-0-4" class="d">-
</a>     void cache_indexed_files(code_searcher *cs);
 
     bool transform(query *q, match_result *m) const;
 
<a href="#h29-0-9" id="h29-0-9" class="d">-    code_searcher* cs() { return &amp;cs_; }
</a><a href="#h29-0-10" id="h29-0-10" class="d">-
</a>     static std::string create_tag_line_regex_from_query(query *q);
 
 protected:
<a href="#h29-0-14" id="h29-0-14" class="d">-    code_searcher cs_;
</a>     chunk_allocator *file_alloc_;
<a href="#h29-0-16" id="h29-0-16" class="d">-    typedef std::pair&lt;std::string, std::string&gt; repo_path_pair;
</a><a href="#h29-0-17" id="h29-0-17" class="d">-    std::map&lt;repo_path_pair, indexed_file*&gt; path_to_file_map_;
</a><a href="#h29-0-18" id="h29-0-18" class="i">+    std::map&lt;std::string, indexed_file*&gt; path_to_file_map_;
</a> };
 
 #endif /* TAGSEARCH_H */
<b>diff --git a/<a id="h30" href="../file/src/tools/BUILD">src/tools/BUILD</a> b/<a href="../file/src/tools/BUILD">src/tools/BUILD</a></b>
<a href="#h30-0" id="h30-0" class="h">@@ -1,12 +1,31 @@
</a><a href="#h30-0-0" id="h30-0-0" class="i">+cc_library(
</a><a href="#h30-0-1" id="h30-0-1" class="i">+  name = &quot;grpc_server&quot;,
</a><a href="#h30-0-2" id="h30-0-2" class="i">+  srcs = [
</a><a href="#h30-0-3" id="h30-0-3" class="i">+    &quot;grpc_server.cc&quot;,
</a><a href="#h30-0-4" id="h30-0-4" class="i">+    &quot;grpc_server.h&quot;,
</a><a href="#h30-0-5" id="h30-0-5" class="i">+    &quot;limits.h&quot;,
</a><a href="#h30-0-6" id="h30-0-6" class="i">+  ],
</a><a href="#h30-0-7" id="h30-0-7" class="i">+  deps = [
</a><a href="#h30-0-8" id="h30-0-8" class="i">+    &quot;//src:codesearch&quot;,
</a><a href="#h30-0-9" id="h30-0-9" class="i">+    &quot;//src/proto:cc_proto&quot;,
</a><a href="#h30-0-10" id="h30-0-10" class="i">+    &quot;@com_github_grpc_grpc//:grpc&quot;,
</a><a href="#h30-0-11" id="h30-0-11" class="i">+  ],
</a><a href="#h30-0-12" id="h30-0-12" class="i">+  visibility = [ &quot;//visibility:public&quot; ],
</a><a href="#h30-0-13" id="h30-0-13" class="i">+)
</a><a href="#h30-0-14" id="h30-0-14" class="i">+
</a> cc_binary(
   name = &quot;codesearch&quot;,
   srcs = [
     &quot;codesearch.cc&quot;,
     &quot;transport.cc&quot;,
     &quot;transport.h&quot;,
<a href="#h30-0-21" id="h30-0-21" class="i">+    &quot;limits.h&quot;,
</a>   ],
   deps = [
<a href="#h30-0-24" id="h30-0-24" class="i">+    &quot;:grpc_server&quot;,
</a>     &quot;//src:codesearch&quot;,
<a href="#h30-0-26" id="h30-0-26" class="i">+    &quot;//src/proto:cc_proto&quot;,
</a><a href="#h30-0-27" id="h30-0-27" class="i">+
</a>     &quot;@boost//:bind&quot;,
     &quot;@com_github_libgit2//:libgit2&quot;,
   ],
<b>diff --git a/<a id="h31" href="../file/src/tools/codesearch.cc">src/tools/codesearch.cc</a> b/<a href="../file/src/tools/codesearch.cc">src/tools/codesearch.cc</a></b>
<a href="#h31-0" id="h31-0" class="h">@@ -16,6 +16,8 @@
</a> #include &quot;src/fs_indexer.h&quot;
 
 #include &quot;src/tools/transport.h&quot;
<a href="#h31-0-3" id="h31-0-3" class="i">+#include &quot;src/tools/limits.h&quot;
</a><a href="#h31-0-4" id="h31-0-4" class="i">+#include &quot;src/tools/grpc_server.h&quot;
</a> 
 #include &lt;stdio.h&gt;
 #include &lt;sys/socket.h&gt;
<a href="#h31-1" id="h31-1" class="h">@@ -38,19 +40,23 @@
</a> 
 #include &lt;json-c/json.h&gt;
 
<a href="#h31-1-3" id="h31-1-3" class="i">+#include &lt;grpc++/server.h&gt;
</a><a href="#h31-1-4" id="h31-1-4" class="i">+#include &lt;grpc++/server_builder.h&gt;
</a><a href="#h31-1-5" id="h31-1-5" class="i">+
</a> DEFINE_int32(concurrency, 16, &quot;Number of concurrent queries to allow.&quot;);
 DEFINE_string(dump_index, &quot;&quot;, &quot;Dump the produced index to a specified file&quot;);
 DEFINE_string(load_index, &quot;&quot;, &quot;Load the index from a file instead of walking the repository&quot;);
 DEFINE_string(load_tags, &quot;&quot;, &quot;Load the index built from a tags file.&quot;);
 DEFINE_bool(quiet, false, &quot;Do the search, but don&#39;t print results.&quot;);
 DEFINE_string(listen, &quot;&quot;, &quot;Listen on a socket for connections. example: -listen tcp://localhost:9999&quot;);
<a href="#h31-1-12" id="h31-1-12" class="i">+DEFINE_string(grpc, &quot;&quot;, &quot;Listen for GRPC clients. example: -grpc localhost:9999&quot;);
</a> DEFINE_string(listen_tags, &quot;&quot;, &quot;Listen on a socket for connections to tag search. example: -listen_tags tcp://localhost:9998&quot;);
 
 using namespace std;
 using namespace re2;
 
<a href="#h31-1-18" id="h31-1-18" class="d">-const int kMaxProgramSize = 4000;
</a><a href="#h31-1-19" id="h31-1-19" class="d">-const int kMaxWidth       = 200;
</a><a href="#h31-1-20" id="h31-1-20" class="i">+using grpc::Server;
</a><a href="#h31-1-21" id="h31-1-21" class="i">+using grpc::ServerBuilder;
</a> 
 sem_t interact_sem;
 
<a href="#h31-2" id="h31-2" class="h">@@ -86,7 +92,9 @@ struct codesearch_matcher {
</a> };
 
 struct tagsearch_matcher {
<a href="#h31-2-3" id="h31-2-3" class="d">-    tagsearch_matcher(tag_searcher* ts) : ts_(ts) {}
</a><a href="#h31-2-4" id="h31-2-4" class="i">+    tagsearch_matcher(code_searcher *cs, code_searcher *tagdata) : tagdata_(tagdata) {
</a><a href="#h31-2-5" id="h31-2-5" class="i">+        ts_.cache_indexed_files(cs);
</a><a href="#h31-2-6" id="h31-2-6" class="i">+    }
</a> 
     match_stats operator()(code_searcher::search_thread *s, query *q, codesearch_transport *tx) {
         match_stats stats;
<a href="#h31-3" id="h31-3" class="h">@@ -105,16 +113,17 @@ struct tagsearch_matcher {
</a>         sem_wait(&amp;interact_sem);
         s-&gt;match(*q,
                  print_match(tx),
<a href="#h31-3-3" id="h31-3-3" class="d">-                 boost::bind(&amp;tag_searcher::transform, ts_, &amp;constraints, _1),
</a><a href="#h31-3-4" id="h31-3-4" class="i">+                 boost::bind(&amp;tag_searcher::transform, &amp;ts_, &amp;constraints, _1),
</a>                  &amp;stats);
         sem_post(&amp;interact_sem);
         return stats;
     }
 protected:
<a href="#h31-3-10" id="h31-3-10" class="d">-    tag_searcher* ts_;
</a><a href="#h31-3-11" id="h31-3-11" class="i">+    code_searcher *tagdata_;
</a><a href="#h31-3-12" id="h31-3-12" class="i">+    tag_searcher ts_;
</a> };
 
<a href="#h31-3-15" id="h31-3-15" class="d">-std::string pat(const std::unique_ptr&lt;RE2&gt; &amp;p) {
</a><a href="#h31-3-16" id="h31-3-16" class="i">+static std::string pat(const std::unique_ptr&lt;RE2&gt; &amp;p) {
</a>     if (p.get() == 0)
         return &quot;&quot;;
     return p-&gt;pattern();
<a href="#h31-4" id="h31-4" class="h">@@ -216,7 +225,7 @@ void build_index(code_searcher *cs, const vector&lt;std::string&gt; &amp;argv) {
</a> }
 
 void initialize_search(code_searcher *search,
<a href="#h31-4-3" id="h31-4-3" class="d">-                       tag_searcher *tags,
</a><a href="#h31-4-4" id="h31-4-4" class="i">+                       code_searcher *tags,
</a>                        int argc, char **argv) {
     if (FLAGS_load_index.size() == 0) {
         if (FLAGS_dump_index.size())
<a href="#h31-5" id="h31-5" class="h">@@ -242,7 +251,6 @@ void initialize_search(code_searcher *search,
</a>     }
     if (FLAGS_load_tags.size() != 0) {
         tags-&gt;load_index(FLAGS_load_tags);
<a href="#h31-5-3" id="h31-5-3" class="d">-        tags-&gt;cache_indexed_files(search);
</a>     }
     if (FLAGS_dump_index.size() &amp;&amp; FLAGS_load_index.size())
         search-&gt;dump_index(FLAGS_dump_index);
<a href="#h31-6" id="h31-6" class="h">@@ -369,6 +377,16 @@ void listen(code_searcher *search, const string&amp; path, const match_func&amp; match) 
</a>     }
 }
 
<a href="#h31-6-3" id="h31-6-3" class="i">+void listen_grpc(code_searcher *search, code_searcher *tags, const string&amp; addr) {
</a><a href="#h31-6-4" id="h31-6-4" class="i">+    CodeSearchImpl service(search, tags);
</a><a href="#h31-6-5" id="h31-6-5" class="i">+
</a><a href="#h31-6-6" id="h31-6-6" class="i">+    ServerBuilder builder;
</a><a href="#h31-6-7" id="h31-6-7" class="i">+    builder.AddListeningPort(addr, grpc::InsecureServerCredentials());
</a><a href="#h31-6-8" id="h31-6-8" class="i">+    builder.RegisterService(&amp;service);
</a><a href="#h31-6-9" id="h31-6-9" class="i">+    std::unique_ptr&lt;Server&gt; server(builder.BuildAndStart());
</a><a href="#h31-6-10" id="h31-6-10" class="i">+    server-&gt;Wait();
</a><a href="#h31-6-11" id="h31-6-11" class="i">+}
</a><a href="#h31-6-12" id="h31-6-12" class="i">+
</a> int main(int argc, char **argv) {
     gflags::SetUsageMessage(&quot;Usage: &quot; + string(argv[0]) + &quot; &lt;options&gt; REFS&quot;);
     gflags::ParseCommandLineFlags(&amp;argc, &amp;argv, true);
<a href="#h31-7" id="h31-7" class="h">@@ -376,7 +394,7 @@ int main(int argc, char **argv) {
</a>     prctl(PR_SET_PDEATHSIG, SIGINT);
 
     code_searcher search;
<a href="#h31-7-3" id="h31-7-3" class="d">-    tag_searcher tags;
</a><a href="#h31-7-4" id="h31-7-4" class="i">+    code_searcher tags;
</a> 
     signal(SIGPIPE, SIG_IGN);
 
<a href="#h31-8" id="h31-8" class="h">@@ -386,15 +404,19 @@ int main(int argc, char **argv) {
</a>         die_errno(&quot;sem_init&quot;);
 
     std::vector&lt;std::thread&gt; listeners;
<a href="#h31-8-3" id="h31-8-3" class="i">+    if (FLAGS_grpc.size()) {
</a><a href="#h31-8-4" id="h31-8-4" class="i">+        listeners.emplace_back(
</a><a href="#h31-8-5" id="h31-8-5" class="i">+            std::thread(boost::bind(&amp;listen_grpc, &amp;search, &amp;tags, FLAGS_grpc)));
</a><a href="#h31-8-6" id="h31-8-6" class="i">+    }
</a>     if (FLAGS_listen.size()) {
         codesearch_matcher matcher;
         listeners.emplace_back(
             std::thread(boost::bind(&amp;listen, &amp;search, FLAGS_listen, matcher)));
     }
     if (FLAGS_listen_tags.size()) {
<a href="#h31-8-13" id="h31-8-13" class="d">-        tagsearch_matcher matcher(&amp;tags);
</a><a href="#h31-8-14" id="h31-8-14" class="i">+        tagsearch_matcher matcher(&amp;search, &amp;tags);
</a>         listeners.emplace_back(
<a href="#h31-8-16" id="h31-8-16" class="d">-            std::thread(boost::bind(&amp;listen, tags.cs(), FLAGS_listen_tags, matcher)));
</a><a href="#h31-8-17" id="h31-8-17" class="i">+            std::thread(boost::bind(&amp;listen, &amp;tags, FLAGS_listen_tags, matcher)));
</a>     }
     for (auto&amp; listener : listeners) {
         listener.join();
<b>diff --git a/<a id="h32" href="../file/src/tools/grpc_server.cc">src/tools/grpc_server.cc</a> b/<a href="../file/src/tools/grpc_server.cc">src/tools/grpc_server.cc</a></b>
<a href="#h32-0" id="h32-0" class="h">@@ -0,0 +1,231 @@
</a><a href="#h32-0-0" id="h32-0-0" class="i">+#include &quot;src/lib/debug.h&quot;
</a><a href="#h32-0-1" id="h32-0-1" class="i">+#include &quot;src/lib/timer.h&quot;
</a><a href="#h32-0-2" id="h32-0-2" class="i">+
</a><a href="#h32-0-3" id="h32-0-3" class="i">+#include &quot;src/codesearch.h&quot;
</a><a href="#h32-0-4" id="h32-0-4" class="i">+#include &quot;src/tagsearch.h&quot;
</a><a href="#h32-0-5" id="h32-0-5" class="i">+#include &quot;src/re_width.h&quot;
</a><a href="#h32-0-6" id="h32-0-6" class="i">+
</a><a href="#h32-0-7" id="h32-0-7" class="i">+#include &quot;src/tools/limits.h&quot;
</a><a href="#h32-0-8" id="h32-0-8" class="i">+#include &quot;src/tools/grpc_server.h&quot;
</a><a href="#h32-0-9" id="h32-0-9" class="i">+
</a><a href="#h32-0-10" id="h32-0-10" class="i">+#include &lt;json-c/json.h&gt;
</a><a href="#h32-0-11" id="h32-0-11" class="i">+
</a><a href="#h32-0-12" id="h32-0-12" class="i">+#include &lt;string&gt;
</a><a href="#h32-0-13" id="h32-0-13" class="i">+#include &lt;algorithm&gt;
</a><a href="#h32-0-14" id="h32-0-14" class="i">+#include &lt;functional&gt;
</a><a href="#h32-0-15" id="h32-0-15" class="i">+
</a><a href="#h32-0-16" id="h32-0-16" class="i">+#include &lt;boost/bind.hpp&gt;
</a><a href="#h32-0-17" id="h32-0-17" class="i">+
</a><a href="#h32-0-18" id="h32-0-18" class="i">+using grpc::ServerContext;
</a><a href="#h32-0-19" id="h32-0-19" class="i">+using grpc::Status;
</a><a href="#h32-0-20" id="h32-0-20" class="i">+using grpc::StatusCode;
</a><a href="#h32-0-21" id="h32-0-21" class="i">+
</a><a href="#h32-0-22" id="h32-0-22" class="i">+using std::string;
</a><a href="#h32-0-23" id="h32-0-23" class="i">+
</a><a href="#h32-0-24" id="h32-0-24" class="i">+CodeSearchImpl::CodeSearchImpl(code_searcher *cs, code_searcher *tagdata)
</a><a href="#h32-0-25" id="h32-0-25" class="i">+    : cs_(cs), tagdata_(tagdata), tagmatch_(nullptr) {
</a><a href="#h32-0-26" id="h32-0-26" class="i">+    if (tagdata != nullptr) {
</a><a href="#h32-0-27" id="h32-0-27" class="i">+        tagmatch_ = new tag_searcher;
</a><a href="#h32-0-28" id="h32-0-28" class="i">+        tagmatch_-&gt;cache_indexed_files(cs_);
</a><a href="#h32-0-29" id="h32-0-29" class="i">+    }
</a><a href="#h32-0-30" id="h32-0-30" class="i">+}
</a><a href="#h32-0-31" id="h32-0-31" class="i">+
</a><a href="#h32-0-32" id="h32-0-32" class="i">+CodeSearchImpl::~CodeSearchImpl() {
</a><a href="#h32-0-33" id="h32-0-33" class="i">+    delete tagmatch_;
</a><a href="#h32-0-34" id="h32-0-34" class="i">+}
</a><a href="#h32-0-35" id="h32-0-35" class="i">+
</a><a href="#h32-0-36" id="h32-0-36" class="i">+string trace_id_from_request(ServerContext *ctx) {
</a><a href="#h32-0-37" id="h32-0-37" class="i">+    auto it = ctx-&gt;client_metadata().find(&quot;request-id&quot;);
</a><a href="#h32-0-38" id="h32-0-38" class="i">+    if (it == ctx-&gt;client_metadata().end())
</a><a href="#h32-0-39" id="h32-0-39" class="i">+        return string(&quot;&quot;);
</a><a href="#h32-0-40" id="h32-0-40" class="i">+    return string(it-&gt;second.data(), it-&gt;second.size());
</a><a href="#h32-0-41" id="h32-0-41" class="i">+}
</a><a href="#h32-0-42" id="h32-0-42" class="i">+
</a><a href="#h32-0-43" id="h32-0-43" class="i">+Status CodeSearchImpl::Info(ServerContext* context, const ::InfoRequest* request, ::ServerInfo* response) {
</a><a href="#h32-0-44" id="h32-0-44" class="i">+    scoped_trace_id trace(trace_id_from_request(context));
</a><a href="#h32-0-45" id="h32-0-45" class="i">+    log(&quot;Info()&quot;);
</a><a href="#h32-0-46" id="h32-0-46" class="i">+
</a><a href="#h32-0-47" id="h32-0-47" class="i">+    response-&gt;set_name(cs_-&gt;name());
</a><a href="#h32-0-48" id="h32-0-48" class="i">+    std::vector&lt;indexed_tree&gt; trees = cs_-&gt;trees();
</a><a href="#h32-0-49" id="h32-0-49" class="i">+    for (auto it = trees.begin(); it != trees.end(); ++it) {
</a><a href="#h32-0-50" id="h32-0-50" class="i">+        auto insert = response-&gt;add_trees();
</a><a href="#h32-0-51" id="h32-0-51" class="i">+        insert-&gt;set_name(it-&gt;name);
</a><a href="#h32-0-52" id="h32-0-52" class="i">+        insert-&gt;set_version(it-&gt;version);
</a><a href="#h32-0-53" id="h32-0-53" class="i">+        if (it-&gt;metadata == NULL)
</a><a href="#h32-0-54" id="h32-0-54" class="i">+            continue;
</a><a href="#h32-0-55" id="h32-0-55" class="i">+        auto metadata = insert-&gt;mutable_metadata();
</a><a href="#h32-0-56" id="h32-0-56" class="i">+        json_object_object_foreach(it-&gt;metadata, key, val) {
</a><a href="#h32-0-57" id="h32-0-57" class="i">+            switch (json_object_get_type(val)) {
</a><a href="#h32-0-58" id="h32-0-58" class="i">+            case json_type_null:
</a><a href="#h32-0-59" id="h32-0-59" class="i">+            case json_type_array:
</a><a href="#h32-0-60" id="h32-0-60" class="i">+            case json_type_object:
</a><a href="#h32-0-61" id="h32-0-61" class="i">+                break;
</a><a href="#h32-0-62" id="h32-0-62" class="i">+            case json_type_boolean:
</a><a href="#h32-0-63" id="h32-0-63" class="i">+            case json_type_double:
</a><a href="#h32-0-64" id="h32-0-64" class="i">+            case json_type_int:
</a><a href="#h32-0-65" id="h32-0-65" class="i">+                (*metadata)[string(key)] = string(json_object_to_json_string(val));
</a><a href="#h32-0-66" id="h32-0-66" class="i">+                break;
</a><a href="#h32-0-67" id="h32-0-67" class="i">+            case json_type_string:
</a><a href="#h32-0-68" id="h32-0-68" class="i">+                (*metadata)[string(key)] = string(json_object_get_string(val));
</a><a href="#h32-0-69" id="h32-0-69" class="i">+                break;
</a><a href="#h32-0-70" id="h32-0-70" class="i">+            }
</a><a href="#h32-0-71" id="h32-0-71" class="i">+        }
</a><a href="#h32-0-72" id="h32-0-72" class="i">+    }
</a><a href="#h32-0-73" id="h32-0-73" class="i">+    response-&gt;set_has_tags(tagdata_ != nullptr);
</a><a href="#h32-0-74" id="h32-0-74" class="i">+    return Status::OK;
</a><a href="#h32-0-75" id="h32-0-75" class="i">+}
</a><a href="#h32-0-76" id="h32-0-76" class="i">+
</a><a href="#h32-0-77" id="h32-0-77" class="i">+Status extract_regex(std::unique_ptr&lt;RE2&gt; *out,
</a><a href="#h32-0-78" id="h32-0-78" class="i">+                     const std::string &amp;label,
</a><a href="#h32-0-79" id="h32-0-79" class="i">+                     const std::string &amp;input,
</a><a href="#h32-0-80" id="h32-0-80" class="i">+                     RE2::Options &amp;opts) {
</a><a href="#h32-0-81" id="h32-0-81" class="i">+
</a><a href="#h32-0-82" id="h32-0-82" class="i">+    if (input.empty()) {
</a><a href="#h32-0-83" id="h32-0-83" class="i">+        out-&gt;reset(nullptr);
</a><a href="#h32-0-84" id="h32-0-84" class="i">+        return Status::OK;
</a><a href="#h32-0-85" id="h32-0-85" class="i">+    }
</a><a href="#h32-0-86" id="h32-0-86" class="i">+    std::unique_ptr&lt;RE2&gt; re(new RE2(input, opts));
</a><a href="#h32-0-87" id="h32-0-87" class="i">+    if (!re-&gt;ok()) {
</a><a href="#h32-0-88" id="h32-0-88" class="i">+        return Status(StatusCode::INVALID_ARGUMENT, label + &quot;: &quot; + re-&gt;error());
</a><a href="#h32-0-89" id="h32-0-89" class="i">+    }
</a><a href="#h32-0-90" id="h32-0-90" class="i">+    *out = std::move(re);
</a><a href="#h32-0-91" id="h32-0-91" class="i">+    return Status::OK;
</a><a href="#h32-0-92" id="h32-0-92" class="i">+}
</a><a href="#h32-0-93" id="h32-0-93" class="i">+
</a><a href="#h32-0-94" id="h32-0-94" class="i">+Status parse_query(query *q, const ::Query* request, ::CodeSearchResult* response) {
</a><a href="#h32-0-95" id="h32-0-95" class="i">+    RE2::Options opts;
</a><a href="#h32-0-96" id="h32-0-96" class="i">+    default_re2_options(opts);
</a><a href="#h32-0-97" id="h32-0-97" class="i">+    opts.set_case_sensitive(!request-&gt;fold_case());
</a><a href="#h32-0-98" id="h32-0-98" class="i">+
</a><a href="#h32-0-99" id="h32-0-99" class="i">+    Status status = Status::OK;
</a><a href="#h32-0-100" id="h32-0-100" class="i">+    status = extract_regex(&amp;q-&gt;line_pat, &quot;line&quot;, request-&gt;line(), opts);
</a><a href="#h32-0-101" id="h32-0-101" class="i">+    if (status.ok())
</a><a href="#h32-0-102" id="h32-0-102" class="i">+        status = extract_regex(&amp;q-&gt;file_pat, &quot;file&quot;, request-&gt;file(), opts);
</a><a href="#h32-0-103" id="h32-0-103" class="i">+    if (status.ok())
</a><a href="#h32-0-104" id="h32-0-104" class="i">+        status = extract_regex(&amp;q-&gt;tree_pat, &quot;repo&quot;, request-&gt;repo(), opts);
</a><a href="#h32-0-105" id="h32-0-105" class="i">+    if (status.ok())
</a><a href="#h32-0-106" id="h32-0-106" class="i">+        status = extract_regex(&amp;q-&gt;tags_pat, &quot;tags&quot;, request-&gt;tags(), opts);
</a><a href="#h32-0-107" id="h32-0-107" class="i">+    if (status.ok())
</a><a href="#h32-0-108" id="h32-0-108" class="i">+        status = extract_regex(&amp;q-&gt;negate.file_pat, &quot;-file&quot;, request-&gt;not_file(), opts);
</a><a href="#h32-0-109" id="h32-0-109" class="i">+    if (status.ok())
</a><a href="#h32-0-110" id="h32-0-110" class="i">+        status = extract_regex(&amp;q-&gt;negate.tree_pat, &quot;-repo&quot;, request-&gt;not_repo(), opts);
</a><a href="#h32-0-111" id="h32-0-111" class="i">+    if (status.ok())
</a><a href="#h32-0-112" id="h32-0-112" class="i">+        status = extract_regex(&amp;q-&gt;negate.tags_pat, &quot;-tags&quot;, request-&gt;not_tags(), opts);
</a><a href="#h32-0-113" id="h32-0-113" class="i">+    return Status::OK;
</a><a href="#h32-0-114" id="h32-0-114" class="i">+}
</a><a href="#h32-0-115" id="h32-0-115" class="i">+
</a><a href="#h32-0-116" id="h32-0-116" class="i">+class add_match {
</a><a href="#h32-0-117" id="h32-0-117" class="i">+public:
</a><a href="#h32-0-118" id="h32-0-118" class="i">+    add_match(CodeSearchResult* response) : response_(response) {}
</a><a href="#h32-0-119" id="h32-0-119" class="i">+
</a><a href="#h32-0-120" id="h32-0-120" class="i">+    void operator()(const match_result *m) const {
</a><a href="#h32-0-121" id="h32-0-121" class="i">+        auto result = response_-&gt;add_results();
</a><a href="#h32-0-122" id="h32-0-122" class="i">+        result-&gt;set_tree(m-&gt;file-&gt;tree-&gt;name);
</a><a href="#h32-0-123" id="h32-0-123" class="i">+        result-&gt;set_version(m-&gt;file-&gt;tree-&gt;version);
</a><a href="#h32-0-124" id="h32-0-124" class="i">+        result-&gt;set_path(m-&gt;file-&gt;path);
</a><a href="#h32-0-125" id="h32-0-125" class="i">+        result-&gt;set_line_number(m-&gt;lno);
</a><a href="#h32-0-126" id="h32-0-126" class="i">+        std::transform(m-&gt;context_before.begin(), m-&gt;context_before.end(),
</a><a href="#h32-0-127" id="h32-0-127" class="i">+                       RepeatedPtrFieldBackInserter(result-&gt;mutable_context_before()),
</a><a href="#h32-0-128" id="h32-0-128" class="i">+                       mem_fun_ref(&amp;re2::StringPiece::ToString));
</a><a href="#h32-0-129" id="h32-0-129" class="i">+
</a><a href="#h32-0-130" id="h32-0-130" class="i">+        std::transform(m-&gt;context_after.begin(), m-&gt;context_after.end(),
</a><a href="#h32-0-131" id="h32-0-131" class="i">+                       RepeatedPtrFieldBackInserter(result-&gt;mutable_context_after()),
</a><a href="#h32-0-132" id="h32-0-132" class="i">+                       mem_fun_ref(&amp;re2::StringPiece::ToString));
</a><a href="#h32-0-133" id="h32-0-133" class="i">+        result-&gt;mutable_bounds()-&gt;set_left(m-&gt;matchleft);
</a><a href="#h32-0-134" id="h32-0-134" class="i">+        result-&gt;mutable_bounds()-&gt;set_right(m-&gt;matchright);
</a><a href="#h32-0-135" id="h32-0-135" class="i">+        result-&gt;set_line(m-&gt;line.ToString());
</a><a href="#h32-0-136" id="h32-0-136" class="i">+    }
</a><a href="#h32-0-137" id="h32-0-137" class="i">+
</a><a href="#h32-0-138" id="h32-0-138" class="i">+private:
</a><a href="#h32-0-139" id="h32-0-139" class="i">+    CodeSearchResult* response_;
</a><a href="#h32-0-140" id="h32-0-140" class="i">+};
</a><a href="#h32-0-141" id="h32-0-141" class="i">+
</a><a href="#h32-0-142" id="h32-0-142" class="i">+static std::string pat(const std::unique_ptr&lt;RE2&gt; &amp;p) {
</a><a href="#h32-0-143" id="h32-0-143" class="i">+    if (p.get() == 0)
</a><a href="#h32-0-144" id="h32-0-144" class="i">+        return &quot;&quot;;
</a><a href="#h32-0-145" id="h32-0-145" class="i">+    return p-&gt;pattern();
</a><a href="#h32-0-146" id="h32-0-146" class="i">+}
</a><a href="#h32-0-147" id="h32-0-147" class="i">+
</a><a href="#h32-0-148" id="h32-0-148" class="i">+Status CodeSearchImpl::Search(ServerContext* context, const ::Query* request, ::CodeSearchResult* response) {
</a><a href="#h32-0-149" id="h32-0-149" class="i">+    WidthWalker width;
</a><a href="#h32-0-150" id="h32-0-150" class="i">+
</a><a href="#h32-0-151" id="h32-0-151" class="i">+    scoped_trace_id trace(trace_id_from_request(context));
</a><a href="#h32-0-152" id="h32-0-152" class="i">+
</a><a href="#h32-0-153" id="h32-0-153" class="i">+    query q;
</a><a href="#h32-0-154" id="h32-0-154" class="i">+    Status st;
</a><a href="#h32-0-155" id="h32-0-155" class="i">+    st = parse_query(&amp;q, request, response);
</a><a href="#h32-0-156" id="h32-0-156" class="i">+    if (!st.ok())
</a><a href="#h32-0-157" id="h32-0-157" class="i">+        return st;
</a><a href="#h32-0-158" id="h32-0-158" class="i">+
</a><a href="#h32-0-159" id="h32-0-159" class="i">+    q.trace_id = current_trace_id();
</a><a href="#h32-0-160" id="h32-0-160" class="i">+
</a><a href="#h32-0-161" id="h32-0-161" class="i">+    log(q.trace_id,
</a><a href="#h32-0-162" id="h32-0-162" class="i">+        &quot;processing query line=&#39;%s&#39; file=&#39;%s&#39; tree=&#39;%s&#39; tags=&#39;%s&#39; &quot;
</a><a href="#h32-0-163" id="h32-0-163" class="i">+        &quot;not_file=&#39;%s&#39; not_tree=&#39;%s&#39; not_tags=&#39;%s&#39;&quot;,
</a><a href="#h32-0-164" id="h32-0-164" class="i">+        pat(q.line_pat).c_str(),
</a><a href="#h32-0-165" id="h32-0-165" class="i">+        pat(q.file_pat).c_str(),
</a><a href="#h32-0-166" id="h32-0-166" class="i">+        pat(q.tree_pat).c_str(),
</a><a href="#h32-0-167" id="h32-0-167" class="i">+        pat(q.tags_pat).c_str(),
</a><a href="#h32-0-168" id="h32-0-168" class="i">+        pat(q.negate.file_pat).c_str(),
</a><a href="#h32-0-169" id="h32-0-169" class="i">+        pat(q.negate.tree_pat).c_str(),
</a><a href="#h32-0-170" id="h32-0-170" class="i">+        pat(q.negate.tags_pat).c_str());
</a><a href="#h32-0-171" id="h32-0-171" class="i">+
</a><a href="#h32-0-172" id="h32-0-172" class="i">+    if (q.line_pat-&gt;ProgramSize() &gt; kMaxProgramSize) {
</a><a href="#h32-0-173" id="h32-0-173" class="i">+        log(&quot;program too large size=%d&quot;, q.line_pat-&gt;ProgramSize());
</a><a href="#h32-0-174" id="h32-0-174" class="i">+        return Status(StatusCode::INVALID_ARGUMENT, &quot;Parse error&quot;);
</a><a href="#h32-0-175" id="h32-0-175" class="i">+    }
</a><a href="#h32-0-176" id="h32-0-176" class="i">+
</a><a href="#h32-0-177" id="h32-0-177" class="i">+    int w = width.Walk(q.line_pat-&gt;Regexp(), 0);
</a><a href="#h32-0-178" id="h32-0-178" class="i">+    if (w &gt; kMaxWidth) {
</a><a href="#h32-0-179" id="h32-0-179" class="i">+        log(&quot;program too wide width=%d&quot;, w);
</a><a href="#h32-0-180" id="h32-0-180" class="i">+        return Status(StatusCode::INVALID_ARGUMENT, &quot;Parse error&quot;);
</a><a href="#h32-0-181" id="h32-0-181" class="i">+    }
</a><a href="#h32-0-182" id="h32-0-182" class="i">+
</a><a href="#h32-0-183" id="h32-0-183" class="i">+    match_stats stats;
</a><a href="#h32-0-184" id="h32-0-184" class="i">+    if (q.tags_pat == NULL) {
</a><a href="#h32-0-185" id="h32-0-185" class="i">+        code_searcher::search_thread search(cs_);
</a><a href="#h32-0-186" id="h32-0-186" class="i">+        search.match(q, add_match(response), &amp;stats);
</a><a href="#h32-0-187" id="h32-0-187" class="i">+    } else {
</a><a href="#h32-0-188" id="h32-0-188" class="i">+        if (tagdata_ == NULL)
</a><a href="#h32-0-189" id="h32-0-189" class="i">+            return Status(StatusCode::FAILED_PRECONDITION, &quot;No tags file available.&quot;);
</a><a href="#h32-0-190" id="h32-0-190" class="i">+
</a><a href="#h32-0-191" id="h32-0-191" class="i">+        code_searcher::search_thread search(tagdata_);
</a><a href="#h32-0-192" id="h32-0-192" class="i">+
</a><a href="#h32-0-193" id="h32-0-193" class="i">+        // the negation constraints will be checked when we transform the match
</a><a href="#h32-0-194" id="h32-0-194" class="i">+        // (unfortunately, we can&#39;t construct a line query that checks these)
</a><a href="#h32-0-195" id="h32-0-195" class="i">+        query constraints;
</a><a href="#h32-0-196" id="h32-0-196" class="i">+        constraints.negate.file_pat.swap(q.negate.file_pat);
</a><a href="#h32-0-197" id="h32-0-197" class="i">+        constraints.negate.tags_pat.swap(q.negate.tags_pat);
</a><a href="#h32-0-198" id="h32-0-198" class="i">+
</a><a href="#h32-0-199" id="h32-0-199" class="i">+        // modify the line pattern to match the constraints that we can handle now
</a><a href="#h32-0-200" id="h32-0-200" class="i">+        std::string regex = tag_searcher::create_tag_line_regex_from_query(&amp;q);
</a><a href="#h32-0-201" id="h32-0-201" class="i">+        q.line_pat.reset(new RE2(regex, q.line_pat-&gt;options()));
</a><a href="#h32-0-202" id="h32-0-202" class="i">+        q.file_pat.reset();
</a><a href="#h32-0-203" id="h32-0-203" class="i">+        q.tags_pat.reset();
</a><a href="#h32-0-204" id="h32-0-204" class="i">+
</a><a href="#h32-0-205" id="h32-0-205" class="i">+        search.match(q,
</a><a href="#h32-0-206" id="h32-0-206" class="i">+                     add_match(response),
</a><a href="#h32-0-207" id="h32-0-207" class="i">+                     boost::bind(&amp;tag_searcher::transform, tagmatch_, &amp;constraints, _1),
</a><a href="#h32-0-208" id="h32-0-208" class="i">+                     &amp;stats);
</a><a href="#h32-0-209" id="h32-0-209" class="i">+    }
</a><a href="#h32-0-210" id="h32-0-210" class="i">+
</a><a href="#h32-0-211" id="h32-0-211" class="i">+    auto out_stats = response-&gt;mutable_stats();
</a><a href="#h32-0-212" id="h32-0-212" class="i">+    out_stats-&gt;set_re2_time(timeval_ms(stats.re2_time));
</a><a href="#h32-0-213" id="h32-0-213" class="i">+    out_stats-&gt;set_git_time(timeval_ms(stats.git_time));
</a><a href="#h32-0-214" id="h32-0-214" class="i">+    out_stats-&gt;set_sort_time(timeval_ms(stats.sort_time));
</a><a href="#h32-0-215" id="h32-0-215" class="i">+    out_stats-&gt;set_index_time(timeval_ms(stats.index_time));
</a><a href="#h32-0-216" id="h32-0-216" class="i">+    out_stats-&gt;set_analyze_time(timeval_ms(stats.analyze_time));
</a><a href="#h32-0-217" id="h32-0-217" class="i">+    switch (stats.why) {
</a><a href="#h32-0-218" id="h32-0-218" class="i">+    case kExitNone:
</a><a href="#h32-0-219" id="h32-0-219" class="i">+        out_stats-&gt;set_exit_reason(SearchStats::NONE);
</a><a href="#h32-0-220" id="h32-0-220" class="i">+        break;
</a><a href="#h32-0-221" id="h32-0-221" class="i">+    case kExitMatchLimit:
</a><a href="#h32-0-222" id="h32-0-222" class="i">+        out_stats-&gt;set_exit_reason(SearchStats::MATCH_LIMIT);
</a><a href="#h32-0-223" id="h32-0-223" class="i">+        break;
</a><a href="#h32-0-224" id="h32-0-224" class="i">+    case kExitTimeout:
</a><a href="#h32-0-225" id="h32-0-225" class="i">+        out_stats-&gt;set_exit_reason(SearchStats::TIMEOUT);
</a><a href="#h32-0-226" id="h32-0-226" class="i">+        break;
</a><a href="#h32-0-227" id="h32-0-227" class="i">+    }
</a><a href="#h32-0-228" id="h32-0-228" class="i">+
</a><a href="#h32-0-229" id="h32-0-229" class="i">+    return Status::OK;
</a><a href="#h32-0-230" id="h32-0-230" class="i">+}
</a><b>diff --git a/<a id="h33" href="../file/src/tools/grpc_server.h">src/tools/grpc_server.h</a> b/<a href="../file/src/tools/grpc_server.h">src/tools/grpc_server.h</a></b>
<a href="#h33-0" id="h33-0" class="h">@@ -0,0 +1,23 @@
</a><a href="#h33-0-0" id="h33-0-0" class="i">+#ifndef CODESEARCH_GRPC_SERVER_H
</a><a href="#h33-0-1" id="h33-0-1" class="i">+#define CODESEARCH_GRPC_SERVER_H
</a><a href="#h33-0-2" id="h33-0-2" class="i">+
</a><a href="#h33-0-3" id="h33-0-3" class="i">+#include &quot;src/proto/livegrep.grpc.pb.h&quot;
</a><a href="#h33-0-4" id="h33-0-4" class="i">+
</a><a href="#h33-0-5" id="h33-0-5" class="i">+class code_searcher;
</a><a href="#h33-0-6" id="h33-0-6" class="i">+class tag_searcher;
</a><a href="#h33-0-7" id="h33-0-7" class="i">+
</a><a href="#h33-0-8" id="h33-0-8" class="i">+class CodeSearchImpl final : public CodeSearch::Service {
</a><a href="#h33-0-9" id="h33-0-9" class="i">+ public:
</a><a href="#h33-0-10" id="h33-0-10" class="i">+    explicit CodeSearchImpl(code_searcher *cs, code_searcher *tagdata);
</a><a href="#h33-0-11" id="h33-0-11" class="i">+    virtual ~CodeSearchImpl();
</a><a href="#h33-0-12" id="h33-0-12" class="i">+
</a><a href="#h33-0-13" id="h33-0-13" class="i">+    virtual grpc::Status Info(grpc::ServerContext* context, const ::InfoRequest* request, ::ServerInfo* response);
</a><a href="#h33-0-14" id="h33-0-14" class="i">+    virtual grpc::Status Search(grpc::ServerContext* context, const ::Query* request, ::CodeSearchResult* response);
</a><a href="#h33-0-15" id="h33-0-15" class="i">+
</a><a href="#h33-0-16" id="h33-0-16" class="i">+ private:
</a><a href="#h33-0-17" id="h33-0-17" class="i">+    code_searcher *cs_;
</a><a href="#h33-0-18" id="h33-0-18" class="i">+    code_searcher *tagdata_;
</a><a href="#h33-0-19" id="h33-0-19" class="i">+    tag_searcher *tagmatch_;
</a><a href="#h33-0-20" id="h33-0-20" class="i">+};
</a><a href="#h33-0-21" id="h33-0-21" class="i">+
</a><a href="#h33-0-22" id="h33-0-22" class="i">+#endif /* CODESEARCH_GRPC_SERVER_H */
</a><b>diff --git a/<a id="h34" href="../file/src/tools/limits.h">src/tools/limits.h</a> b/<a href="../file/src/tools/limits.h">src/tools/limits.h</a></b>
<a href="#h34-0" id="h34-0" class="h">@@ -0,0 +1,7 @@
</a><a href="#h34-0-0" id="h34-0-0" class="i">+#ifndef CODESEARCH_LIMITS_H
</a><a href="#h34-0-1" id="h34-0-1" class="i">+#define CODESEARCH_LIMITS_H
</a><a href="#h34-0-2" id="h34-0-2" class="i">+
</a><a href="#h34-0-3" id="h34-0-3" class="i">+const int kMaxProgramSize = 4000;
</a><a href="#h34-0-4" id="h34-0-4" class="i">+const int kMaxWidth       = 200;
</a><a href="#h34-0-5" id="h34-0-5" class="i">+
</a><a href="#h34-0-6" id="h34-0-6" class="i">+#endif
</a><b>diff --git a/<a id="h35" href="../file/src/tools/transport.cc">src/tools/transport.cc</a> b/<a href="../file/src/tools/transport.cc">src/tools/transport.cc</a></b>
<a href="#h35-0" id="h35-0" class="h">@@ -6,6 +6,7 @@
</a>  * modify it under the terms listed in the COPYING file.
  ********************************************************************/
 #include &quot;src/lib/debug.h&quot;
<a href="#h35-0-3" id="h35-0-3" class="i">+#include &quot;src/lib/timer.h&quot;
</a> 
 #include &quot;src/codesearch.h&quot;
 #include &quot;src/tools/transport.h&quot;
<a href="#h35-1" id="h35-1" class="h">@@ -255,10 +256,6 @@ json_parse_error parse_object(json_object *js, repo_spec *r) {
</a> 
 };
 
<a href="#h35-1-3" id="h35-1-3" class="d">-long timeval_ms (struct timeval tv) {
</a><a href="#h35-1-4" id="h35-1-4" class="d">-    return tv.tv_sec * 1000 + tv.tv_usec / 1000;
</a><a href="#h35-1-5" id="h35-1-5" class="d">-}
</a><a href="#h35-1-6" id="h35-1-6" class="d">-
</a> codesearch_transport::codesearch_transport(FILE *in, FILE *out) : in_(in), out_(out) {
     assert(!setvbuf(in_,  NULL, _IOFBF, 4096*4));
     assert(!setvbuf(out_, NULL, _IOLBF, 4096));
<b>diff --git a/<a id="h36" href="../file/src/tools/transport.h">src/tools/transport.h</a> b/<a href="../file/src/tools/transport.h">src/tools/transport.h</a></b>
<a href="#h36-0" id="h36-0" class="h">@@ -42,8 +42,6 @@ struct index_spec {
</a>     std::vector&lt;repo_spec&gt; repos;
 };
 
<a href="#h36-0-3" id="h36-0-3" class="d">-long timeval_ms (struct timeval tv);
</a><a href="#h36-0-4" id="h36-0-4" class="d">-
</a> class codesearch_transport {
 public:
     codesearch_transport(FILE *in, FILE *out);
<b>diff --git a/<a id="h37" href="../file/test/BUILD">test/BUILD</a> b/<a href="../file/test/BUILD">test/BUILD</a></b>
<a href="#h37-0" id="h37-0" class="h">@@ -1,10 +1,13 @@
</a> cc_test(
     name = &quot;codesearch_test&quot;,
<a href="#h37-0-2" id="h37-0-2" class="d">-    srcs = [ &quot;codesearch_test.cc&quot; ],
</a><a href="#h37-0-3" id="h37-0-3" class="i">+    srcs = [
</a><a href="#h37-0-4" id="h37-0-4" class="i">+      &quot;codesearch_test.cc&quot;,
</a><a href="#h37-0-5" id="h37-0-5" class="i">+      &quot;main.cc&quot;,
</a><a href="#h37-0-6" id="h37-0-6" class="i">+    ],
</a>     deps = [
<a href="#h37-0-8" id="h37-0-8" class="d">-        &quot;@gtest//:main&quot;,
</a><a href="#h37-0-9" id="h37-0-9" class="d">-        &quot;//src:codesearch&quot;,
</a><a href="#h37-0-10" id="h37-0-10" class="d">-      &quot;@com_github_libgit2//:libgit2&quot;,
</a><a href="#h37-0-11" id="h37-0-11" class="i">+      &quot;//src:codesearch&quot;,
</a><a href="#h37-0-12" id="h37-0-12" class="i">+      &quot;//src/tools:grpc_server&quot;,
</a><a href="#h37-0-13" id="h37-0-13" class="i">+      &quot;@gtest//:gtest&quot;,
</a>     ],
     defines = [
         &quot;GTEST_HAS_TR1_TUPLE&quot;,
<b>diff --git a/<a id="h38" href="../file/test/codesearch_test.cc">test/codesearch_test.cc</a> b/<a href="../file/test/codesearch_test.cc">test/codesearch_test.cc</a></b>
<a href="#h38-0" id="h38-0" class="h">@@ -3,12 +3,13 @@
</a> 
 #include &quot;src/codesearch.h&quot;
 #include &quot;src/content.h&quot;
<a href="#h38-0-3" id="h38-0-3" class="i">+#include &quot;src/tools/grpc_server.h&quot;
</a> 
 class codesearch_test : public ::testing::Test {
 protected:
     codesearch_test() {
         cs_.set_alloc(make_mem_allocator());
<a href="#h38-0-9" id="h38-0-9" class="d">-        tree_ = cs_.open_tree(&quot;REPO&quot;, 0, &quot;REV0&quot;);
</a><a href="#h38-0-10" id="h38-0-10" class="i">+        tree_ = cs_.open_tree(&quot;repo&quot;, 0, &quot;REV0&quot;);
</a>     }
 
     code_searcher cs_;
<a href="#h38-1" id="h38-1" class="h">@@ -61,17 +62,6 @@ TEST_F(codesearch_test, NoTrailingNewLine) {
</a>     EXPECT_EQ(string(&quot;no newline\n&quot;), content);
 }
 
<a href="#h38-1-3" id="h38-1-3" class="d">-struct accumulate_matches {
</a><a href="#h38-1-4" id="h38-1-4" class="d">-    vector&lt;match_result&gt; *results_;
</a><a href="#h38-1-5" id="h38-1-5" class="d">-    accumulate_matches(vector&lt;match_result&gt; *results) : results_(results) {
</a><a href="#h38-1-6" id="h38-1-6" class="d">-        results_-&gt;clear();
</a><a href="#h38-1-7" id="h38-1-7" class="d">-    }
</a><a href="#h38-1-8" id="h38-1-8" class="d">-
</a><a href="#h38-1-9" id="h38-1-9" class="d">-    void operator()(const match_result *m) {
</a><a href="#h38-1-10" id="h38-1-10" class="d">-        results_-&gt;push_back(*m);
</a><a href="#h38-1-11" id="h38-1-11" class="d">-    }
</a><a href="#h38-1-12" id="h38-1-12" class="d">-};
</a><a href="#h38-1-13" id="h38-1-13" class="d">-
</a> TEST_F(codesearch_test, DuplicateLinesInFile) {
     cs_.index_file(tree_, &quot;/data/file1&quot;,
                    &quot;line 1\n&quot;
<a href="#h38-2" id="h38-2" class="h">@@ -79,18 +69,19 @@ TEST_F(codesearch_test, DuplicateLinesInFile) {
</a>                    &quot;line 2\n&quot;);
     cs_.finalize();
 
<a href="#h38-2-3" id="h38-2-3" class="d">-    code_searcher::search_thread search(&amp;cs_);
</a><a href="#h38-2-4" id="h38-2-4" class="d">-    match_stats stats;
</a><a href="#h38-2-5" id="h38-2-5" class="d">-    query q;
</a><a href="#h38-2-6" id="h38-2-6" class="d">-    RE2::Options opts;
</a><a href="#h38-2-7" id="h38-2-7" class="d">-    default_re2_options(opts);
</a><a href="#h38-2-8" id="h38-2-8" class="d">-    q.line_pat.reset(new RE2(&quot;line 1&quot;, opts));
</a><a href="#h38-2-9" id="h38-2-9" class="d">-    vector&lt;match_result&gt; results;
</a><a href="#h38-2-10" id="h38-2-10" class="d">-    search.match(q, accumulate_matches(&amp;results), &amp;stats);
</a><a href="#h38-2-11" id="h38-2-11" class="d">-
</a><a href="#h38-2-12" id="h38-2-12" class="d">-    ASSERT_EQ(2, results.size());
</a><a href="#h38-2-13" id="h38-2-13" class="d">-    EXPECT_EQ(1, results[0].lno);
</a><a href="#h38-2-14" id="h38-2-14" class="d">-    EXPECT_EQ(2, results[1].lno);
</a><a href="#h38-2-15" id="h38-2-15" class="i">+    CodeSearchImpl srv(&amp;cs_, nullptr);
</a><a href="#h38-2-16" id="h38-2-16" class="i">+    Query request;
</a><a href="#h38-2-17" id="h38-2-17" class="i">+    CodeSearchResult matches;
</a><a href="#h38-2-18" id="h38-2-18" class="i">+    request.set_line(&quot;line 1&quot;);
</a><a href="#h38-2-19" id="h38-2-19" class="i">+
</a><a href="#h38-2-20" id="h38-2-20" class="i">+    grpc::ServerContext ctx;
</a><a href="#h38-2-21" id="h38-2-21" class="i">+
</a><a href="#h38-2-22" id="h38-2-22" class="i">+    grpc::Status st = srv.Search(&amp;ctx, &amp;request, &amp;matches);
</a><a href="#h38-2-23" id="h38-2-23" class="i">+    ASSERT_TRUE(st.ok());
</a><a href="#h38-2-24" id="h38-2-24" class="i">+
</a><a href="#h38-2-25" id="h38-2-25" class="i">+    ASSERT_EQ(2, matches.results_size());
</a><a href="#h38-2-26" id="h38-2-26" class="i">+    EXPECT_EQ(1, matches.results(0).line_number());
</a><a href="#h38-2-27" id="h38-2-27" class="i">+    EXPECT_EQ(2, matches.results(1).line_number());
</a> }
 
 TEST_F(codesearch_test, LongLines) {
<a href="#h38-3" id="h38-3" class="h">@@ -105,22 +96,23 @@ TEST_F(codesearch_test, LongLines) {
</a>                    string(&quot;NEEDLE\n&quot;));
     cs_.finalize();
 
<a href="#h38-3-3" id="h38-3-3" class="d">-    code_searcher::search_thread search(&amp;cs_);
</a><a href="#h38-3-4" id="h38-3-4" class="d">-    match_stats stats;
</a><a href="#h38-3-5" id="h38-3-5" class="d">-    query q;
</a><a href="#h38-3-6" id="h38-3-6" class="d">-    RE2::Options opts;
</a><a href="#h38-3-7" id="h38-3-7" class="d">-    default_re2_options(opts);
</a><a href="#h38-3-8" id="h38-3-8" class="d">-    q.line_pat.reset(new RE2(&quot;NEEDLE&quot;, opts));
</a><a href="#h38-3-9" id="h38-3-9" class="d">-    vector&lt;match_result&gt; results;
</a><a href="#h38-3-10" id="h38-3-10" class="d">-    search.match(q, accumulate_matches(&amp;results), &amp;stats);
</a><a href="#h38-3-11" id="h38-3-11" class="d">-
</a><a href="#h38-3-12" id="h38-3-12" class="d">-    ASSERT_EQ(1, results.size());
</a><a href="#h38-3-13" id="h38-3-13" class="d">-    EXPECT_EQ(4, results[0].lno);
</a><a href="#h38-3-14" id="h38-3-14" class="i">+    CodeSearchImpl srv(&amp;cs_, nullptr);
</a><a href="#h38-3-15" id="h38-3-15" class="i">+    Query request;
</a><a href="#h38-3-16" id="h38-3-16" class="i">+    CodeSearchResult matches;
</a><a href="#h38-3-17" id="h38-3-17" class="i">+    request.set_line(&quot;NEEDLE&quot;);
</a><a href="#h38-3-18" id="h38-3-18" class="i">+
</a><a href="#h38-3-19" id="h38-3-19" class="i">+    grpc::ServerContext ctx;
</a><a href="#h38-3-20" id="h38-3-20" class="i">+
</a><a href="#h38-3-21" id="h38-3-21" class="i">+    grpc::Status st = srv.Search(&amp;ctx, &amp;request, &amp;matches);
</a><a href="#h38-3-22" id="h38-3-22" class="i">+    ASSERT_TRUE(st.ok());
</a><a href="#h38-3-23" id="h38-3-23" class="i">+
</a><a href="#h38-3-24" id="h38-3-24" class="i">+    ASSERT_EQ(1, matches.results_size());
</a><a href="#h38-3-25" id="h38-3-25" class="i">+    EXPECT_EQ(4, matches.results(0).line_number());
</a> }
 
 
 TEST_F(codesearch_test, RestrictFiles) {
<a href="#h38-3-30" id="h38-3-30" class="d">-    // tree_ is &quot;REPO&quot;
</a><a href="#h38-3-31" id="h38-3-31" class="i">+    // tree_ is &quot;repo&quot;
</a>     cs_.index_file(tree_, &quot;/file1&quot;, &quot;contents&quot;);
     cs_.index_file(tree_, &quot;/file2&quot;, &quot;contents&quot;);
     // other is &quot;OTHER&quot;
<a href="#h38-4" id="h38-4" class="h">@@ -129,32 +121,73 @@ TEST_F(codesearch_test, RestrictFiles) {
</a>     cs_.index_file(other, &quot;/file2&quot;, &quot;contents&quot;);
     cs_.finalize();
 
<a href="#h38-4-3" id="h38-4-3" class="d">-    code_searcher::search_thread search(&amp;cs_);
</a><a href="#h38-4-4" id="h38-4-4" class="d">-    match_stats stats;
</a><a href="#h38-4-5" id="h38-4-5" class="d">-    query q;
</a><a href="#h38-4-6" id="h38-4-6" class="d">-    vector&lt;match_result&gt; results;
</a><a href="#h38-4-7" id="h38-4-7" class="d">-    RE2::Options opts;
</a><a href="#h38-4-8" id="h38-4-8" class="d">-    default_re2_options(opts);
</a><a href="#h38-4-9" id="h38-4-9" class="d">-
</a><a href="#h38-4-10" id="h38-4-10" class="d">-    q.line_pat.reset(new RE2(&quot;contents&quot;, opts));
</a><a href="#h38-4-11" id="h38-4-11" class="d">-    q.file_pat.reset(new RE2(&quot;file1&quot;, opts));
</a><a href="#h38-4-12" id="h38-4-12" class="d">-
</a><a href="#h38-4-13" id="h38-4-13" class="d">-    search.match(q, accumulate_matches(&amp;results), &amp;stats);
</a><a href="#h38-4-14" id="h38-4-14" class="d">-    ASSERT_EQ(2, results.size());
</a><a href="#h38-4-15" id="h38-4-15" class="d">-    EXPECT_EQ(&quot;/file1&quot;, results[0].file-&gt;path);
</a><a href="#h38-4-16" id="h38-4-16" class="d">-    EXPECT_EQ(&quot;/file1&quot;, results[1].file-&gt;path);
</a><a href="#h38-4-17" id="h38-4-17" class="d">-
</a><a href="#h38-4-18" id="h38-4-18" class="d">-    q.file_pat.reset();
</a><a href="#h38-4-19" id="h38-4-19" class="d">-    q.tree_pat.reset(new RE2(&quot;REPO&quot;, opts));
</a><a href="#h38-4-20" id="h38-4-20" class="d">-    search.match(q, accumulate_matches(&amp;results), &amp;stats);
</a><a href="#h38-4-21" id="h38-4-21" class="d">-    ASSERT_EQ(2, results.size());
</a><a href="#h38-4-22" id="h38-4-22" class="d">-    EXPECT_EQ(&quot;REPO&quot;, results[0].file-&gt;tree-&gt;name);
</a><a href="#h38-4-23" id="h38-4-23" class="d">-    EXPECT_EQ(&quot;REPO&quot;, results[1].file-&gt;tree-&gt;name);
</a><a href="#h38-4-24" id="h38-4-24" class="d">-
</a><a href="#h38-4-25" id="h38-4-25" class="d">-    q.tree_pat.reset();
</a><a href="#h38-4-26" id="h38-4-26" class="d">-    q.negate.file_pat.reset(new RE2(&quot;file1&quot;, opts));
</a><a href="#h38-4-27" id="h38-4-27" class="d">-    search.match(q, accumulate_matches(&amp;results), &amp;stats);
</a><a href="#h38-4-28" id="h38-4-28" class="d">-    ASSERT_EQ(2, results.size());
</a><a href="#h38-4-29" id="h38-4-29" class="d">-    EXPECT_EQ(&quot;/file2&quot;, results[0].file-&gt;path);
</a><a href="#h38-4-30" id="h38-4-30" class="d">-    EXPECT_EQ(&quot;/file2&quot;, results[1].file-&gt;path);
</a><a href="#h38-4-31" id="h38-4-31" class="i">+    CodeSearchImpl srv(&amp;cs_, nullptr);
</a><a href="#h38-4-32" id="h38-4-32" class="i">+    Query request;
</a><a href="#h38-4-33" id="h38-4-33" class="i">+    CodeSearchResult matches;
</a><a href="#h38-4-34" id="h38-4-34" class="i">+    grpc::ServerContext ctx;
</a><a href="#h38-4-35" id="h38-4-35" class="i">+    grpc::Status st;
</a><a href="#h38-4-36" id="h38-4-36" class="i">+
</a><a href="#h38-4-37" id="h38-4-37" class="i">+    request.set_line(&quot;contents&quot;);
</a><a href="#h38-4-38" id="h38-4-38" class="i">+    request.set_file(&quot;file1&quot;);
</a><a href="#h38-4-39" id="h38-4-39" class="i">+
</a><a href="#h38-4-40" id="h38-4-40" class="i">+    st = srv.Search(&amp;ctx, &amp;request, &amp;matches);
</a><a href="#h38-4-41" id="h38-4-41" class="i">+    ASSERT_TRUE(st.ok());
</a><a href="#h38-4-42" id="h38-4-42" class="i">+
</a><a href="#h38-4-43" id="h38-4-43" class="i">+    ASSERT_EQ(2, matches.results_size());
</a><a href="#h38-4-44" id="h38-4-44" class="i">+    EXPECT_EQ(&quot;/file1&quot;, matches.results(0).path());
</a><a href="#h38-4-45" id="h38-4-45" class="i">+    EXPECT_EQ(&quot;/file1&quot;, matches.results(1).path());
</a><a href="#h38-4-46" id="h38-4-46" class="i">+
</a><a href="#h38-4-47" id="h38-4-47" class="i">+    request.clear_file();
</a><a href="#h38-4-48" id="h38-4-48" class="i">+    request.set_repo(&quot;repo&quot;);
</a><a href="#h38-4-49" id="h38-4-49" class="i">+
</a><a href="#h38-4-50" id="h38-4-50" class="i">+    matches.Clear();
</a><a href="#h38-4-51" id="h38-4-51" class="i">+    st = srv.Search(&amp;ctx, &amp;request, &amp;matches);
</a><a href="#h38-4-52" id="h38-4-52" class="i">+    ASSERT_TRUE(st.ok());
</a><a href="#h38-4-53" id="h38-4-53" class="i">+
</a><a href="#h38-4-54" id="h38-4-54" class="i">+    ASSERT_EQ(2, matches.results_size());
</a><a href="#h38-4-55" id="h38-4-55" class="i">+    EXPECT_EQ(&quot;repo&quot;, matches.results(0).tree());
</a><a href="#h38-4-56" id="h38-4-56" class="i">+    EXPECT_EQ(&quot;repo&quot;, matches.results(1).tree());
</a><a href="#h38-4-57" id="h38-4-57" class="i">+
</a><a href="#h38-4-58" id="h38-4-58" class="i">+    request.clear_repo();
</a><a href="#h38-4-59" id="h38-4-59" class="i">+    request.set_not_file(&quot;file1&quot;);
</a><a href="#h38-4-60" id="h38-4-60" class="i">+
</a><a href="#h38-4-61" id="h38-4-61" class="i">+    matches.Clear();
</a><a href="#h38-4-62" id="h38-4-62" class="i">+    st = srv.Search(&amp;ctx, &amp;request, &amp;matches);
</a><a href="#h38-4-63" id="h38-4-63" class="i">+    ASSERT_TRUE(st.ok());
</a><a href="#h38-4-64" id="h38-4-64" class="i">+
</a><a href="#h38-4-65" id="h38-4-65" class="i">+    ASSERT_EQ(2, matches.results_size());
</a><a href="#h38-4-66" id="h38-4-66" class="i">+    EXPECT_EQ(&quot;/file2&quot;, matches.results(0).path());
</a><a href="#h38-4-67" id="h38-4-67" class="i">+    EXPECT_EQ(&quot;/file2&quot;, matches.results(1).path());
</a><a href="#h38-4-68" id="h38-4-68" class="i">+}
</a><a href="#h38-4-69" id="h38-4-69" class="i">+
</a><a href="#h38-4-70" id="h38-4-70" class="i">+
</a><a href="#h38-4-71" id="h38-4-71" class="i">+TEST_F(codesearch_test, Tags) {
</a><a href="#h38-4-72" id="h38-4-72" class="i">+    cs_.index_file(tree_,
</a><a href="#h38-4-73" id="h38-4-73" class="i">+                   &quot;file.c&quot;,
</a><a href="#h38-4-74" id="h38-4-74" class="i">+                   &quot;void do_the_thing(void) {\n&quot;
</a><a href="#h38-4-75" id="h38-4-75" class="i">+                   &quot;}\n&quot;
</a><a href="#h38-4-76" id="h38-4-76" class="i">+                   &quot;do_the_thing()\n&quot;);
</a><a href="#h38-4-77" id="h38-4-77" class="i">+    cs_.finalize();
</a><a href="#h38-4-78" id="h38-4-78" class="i">+
</a><a href="#h38-4-79" id="h38-4-79" class="i">+    code_searcher tags;
</a><a href="#h38-4-80" id="h38-4-80" class="i">+    tags.set_alloc(make_mem_allocator());
</a><a href="#h38-4-81" id="h38-4-81" class="i">+    const indexed_tree *tag_tree = cs_.open_tree(&quot;&quot;, 0, &quot;HEAD&quot;);
</a><a href="#h38-4-82" id="h38-4-82" class="i">+    tags.index_file(tag_tree,
</a><a href="#h38-4-83" id="h38-4-83" class="i">+                    &quot;tags&quot;,
</a><a href="#h38-4-84" id="h38-4-84" class="i">+                    &quot;do_the_thing\trepo/file.c\t1;\&quot;\tfunction\n&quot;);
</a><a href="#h38-4-85" id="h38-4-85" class="i">+    tags.finalize();
</a><a href="#h38-4-86" id="h38-4-86" class="i">+
</a><a href="#h38-4-87" id="h38-4-87" class="i">+    CodeSearchImpl srv(&amp;cs_, &amp;tags);
</a><a href="#h38-4-88" id="h38-4-88" class="i">+    Query request;
</a><a href="#h38-4-89" id="h38-4-89" class="i">+    CodeSearchResult matches;
</a><a href="#h38-4-90" id="h38-4-90" class="i">+    grpc::ServerContext ctx;
</a><a href="#h38-4-91" id="h38-4-91" class="i">+    grpc::Status st;
</a><a href="#h38-4-92" id="h38-4-92" class="i">+
</a><a href="#h38-4-93" id="h38-4-93" class="i">+    request.set_line(&quot;do_the_thing&quot;);
</a><a href="#h38-4-94" id="h38-4-94" class="i">+    request.set_tags(&quot;func&quot;);
</a><a href="#h38-4-95" id="h38-4-95" class="i">+
</a><a href="#h38-4-96" id="h38-4-96" class="i">+    st = srv.Search(&amp;ctx, &amp;request, &amp;matches);
</a><a href="#h38-4-97" id="h38-4-97" class="i">+    ASSERT_TRUE(st.ok());
</a><a href="#h38-4-98" id="h38-4-98" class="i">+
</a><a href="#h38-4-99" id="h38-4-99" class="i">+    ASSERT_EQ(1, matches.results_size());
</a> }
<b>diff --git a/<a id="h39" href="../file/test/main.cc">test/main.cc</a> b/<a href="../file/test/main.cc">test/main.cc</a></b>
<a href="#h39-0" id="h39-0" class="h">@@ -0,0 +1,6 @@
</a><a href="#h39-0-0" id="h39-0-0" class="i">+#include &quot;gtest/gtest.h&quot;
</a><a href="#h39-0-1" id="h39-0-1" class="i">+
</a><a href="#h39-0-2" id="h39-0-2" class="i">+int main(int ac, char* av[]) {
</a><a href="#h39-0-3" id="h39-0-3" class="i">+  testing::InitGoogleTest(&amp;ac, av);
</a><a href="#h39-0-4" id="h39-0-4" class="i">+  return RUN_ALL_TESTS();
</a><a href="#h39-0-5" id="h39-0-5" class="i">+}
</a><b>diff --git a/<a id="h40" href="../file/vendor/golang.org/x/net/LICENSE">vendor/golang.org/x/net/LICENSE</a> b/<a href="../file/vendor/golang.org/x/net/LICENSE">vendor/golang.org/x/net/LICENSE</a></b>
<a href="#h40-0" id="h40-0" class="h">@@ -1,27 +0,0 @@
</a><a href="#h40-0-0" id="h40-0-0" class="d">-Copyright (c) 2009 The Go Authors. All rights reserved.
</a><a href="#h40-0-1" id="h40-0-1" class="d">-
</a><a href="#h40-0-2" id="h40-0-2" class="d">-Redistribution and use in source and binary forms, with or without
</a><a href="#h40-0-3" id="h40-0-3" class="d">-modification, are permitted provided that the following conditions are
</a><a href="#h40-0-4" id="h40-0-4" class="d">-met:
</a><a href="#h40-0-5" id="h40-0-5" class="d">-
</a><a href="#h40-0-6" id="h40-0-6" class="d">-   * Redistributions of source code must retain the above copyright
</a><a href="#h40-0-7" id="h40-0-7" class="d">-notice, this list of conditions and the following disclaimer.
</a><a href="#h40-0-8" id="h40-0-8" class="d">-   * Redistributions in binary form must reproduce the above
</a><a href="#h40-0-9" id="h40-0-9" class="d">-copyright notice, this list of conditions and the following disclaimer
</a><a href="#h40-0-10" id="h40-0-10" class="d">-in the documentation and/or other materials provided with the
</a><a href="#h40-0-11" id="h40-0-11" class="d">-distribution.
</a><a href="#h40-0-12" id="h40-0-12" class="d">-   * Neither the name of Google Inc. nor the names of its
</a><a href="#h40-0-13" id="h40-0-13" class="d">-contributors may be used to endorse or promote products derived from
</a><a href="#h40-0-14" id="h40-0-14" class="d">-this software without specific prior written permission.
</a><a href="#h40-0-15" id="h40-0-15" class="d">-
</a><a href="#h40-0-16" id="h40-0-16" class="d">-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
</a><a href="#h40-0-17" id="h40-0-17" class="d">-&quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
</a><a href="#h40-0-18" id="h40-0-18" class="d">-LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
</a><a href="#h40-0-19" id="h40-0-19" class="d">-A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
</a><a href="#h40-0-20" id="h40-0-20" class="d">-OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
</a><a href="#h40-0-21" id="h40-0-21" class="d">-SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
</a><a href="#h40-0-22" id="h40-0-22" class="d">-LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
</a><a href="#h40-0-23" id="h40-0-23" class="d">-DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
</a><a href="#h40-0-24" id="h40-0-24" class="d">-THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
</a><a href="#h40-0-25" id="h40-0-25" class="d">-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
</a><a href="#h40-0-26" id="h40-0-26" class="d">-OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
</a><b>diff --git a/<a id="h41" href="../file/vendor/golang.org/x/net/PATENTS">vendor/golang.org/x/net/PATENTS</a> b/<a href="../file/vendor/golang.org/x/net/PATENTS">vendor/golang.org/x/net/PATENTS</a></b>
<a href="#h41-0" id="h41-0" class="h">@@ -1,22 +0,0 @@
</a><a href="#h41-0-0" id="h41-0-0" class="d">-Additional IP Rights Grant (Patents)
</a><a href="#h41-0-1" id="h41-0-1" class="d">-
</a><a href="#h41-0-2" id="h41-0-2" class="d">-&quot;This implementation&quot; means the copyrightable works distributed by
</a><a href="#h41-0-3" id="h41-0-3" class="d">-Google as part of the Go project.
</a><a href="#h41-0-4" id="h41-0-4" class="d">-
</a><a href="#h41-0-5" id="h41-0-5" class="d">-Google hereby grants to You a perpetual, worldwide, non-exclusive,
</a><a href="#h41-0-6" id="h41-0-6" class="d">-no-charge, royalty-free, irrevocable (except as stated in this section)
</a><a href="#h41-0-7" id="h41-0-7" class="d">-patent license to make, have made, use, offer to sell, sell, import,
</a><a href="#h41-0-8" id="h41-0-8" class="d">-transfer and otherwise run, modify and propagate the contents of this
</a><a href="#h41-0-9" id="h41-0-9" class="d">-implementation of Go, where such license applies only to those patent
</a><a href="#h41-0-10" id="h41-0-10" class="d">-claims, both currently owned or controlled by Google and acquired in
</a><a href="#h41-0-11" id="h41-0-11" class="d">-the future, licensable by Google that are necessarily infringed by this
</a><a href="#h41-0-12" id="h41-0-12" class="d">-implementation of Go.  This grant does not include claims that would be
</a><a href="#h41-0-13" id="h41-0-13" class="d">-infringed only as a consequence of further modification of this
</a><a href="#h41-0-14" id="h41-0-14" class="d">-implementation.  If you or your agent or exclusive licensee institute or
</a><a href="#h41-0-15" id="h41-0-15" class="d">-order or agree to the institution of patent litigation against any
</a><a href="#h41-0-16" id="h41-0-16" class="d">-entity (including a cross-claim or counterclaim in a lawsuit) alleging
</a><a href="#h41-0-17" id="h41-0-17" class="d">-that this implementation of Go or any code incorporated within this
</a><a href="#h41-0-18" id="h41-0-18" class="d">-implementation of Go constitutes direct or contributory patent
</a><a href="#h41-0-19" id="h41-0-19" class="d">-infringement, or inducement of patent infringement, then any patent
</a><a href="#h41-0-20" id="h41-0-20" class="d">-rights granted to you under this License for this implementation of Go
</a><a href="#h41-0-21" id="h41-0-21" class="d">-shall terminate as of the date such litigation is filed.
</a><b>diff --git a/<a id="h42" href="../file/vendor/golang.org/x/net/context/BUILD">vendor/golang.org/x/net/context/BUILD</a> b/<a href="../file/vendor/golang.org/x/net/context/BUILD">vendor/golang.org/x/net/context/BUILD</a></b>
<a href="#h42-0" id="h42-0" class="h">@@ -1,19 +0,0 @@
</a><a href="#h42-0-0" id="h42-0-0" class="d">-
</a><a href="#h42-0-1" id="h42-0-1" class="d">-load(&quot;@io_bazel_rules_go//go:def.bzl&quot;,
</a><a href="#h42-0-2" id="h42-0-2" class="d">-  &quot;go_binary&quot;,
</a><a href="#h42-0-3" id="h42-0-3" class="d">-  &quot;go_library&quot;,
</a><a href="#h42-0-4" id="h42-0-4" class="d">-  &quot;go_test&quot;,
</a><a href="#h42-0-5" id="h42-0-5" class="d">-)
</a><a href="#h42-0-6" id="h42-0-6" class="d">-
</a><a href="#h42-0-7" id="h42-0-7" class="d">-go_library(
</a><a href="#h42-0-8" id="h42-0-8" class="d">-name = &quot;go_default_library&quot;,
</a><a href="#h42-0-9" id="h42-0-9" class="d">-  srcs = [
</a><a href="#h42-0-10" id="h42-0-10" class="d">-    &quot;context.go&quot;,
</a><a href="#h42-0-11" id="h42-0-11" class="d">-    &quot;go17.go&quot;,
</a><a href="#h42-0-12" id="h42-0-12" class="d">-  ],
</a><a href="#h42-0-13" id="h42-0-13" class="d">-  deps = [
</a><a href="#h42-0-14" id="h42-0-14" class="d">-  ],
</a><a href="#h42-0-15" id="h42-0-15" class="d">-  visibility = [&quot;//visibility:public&quot;],
</a><a href="#h42-0-16" id="h42-0-16" class="d">-)
</a><a href="#h42-0-17" id="h42-0-17" class="d">-
</a><a href="#h42-0-18" id="h42-0-18" class="d">-
</a><b>diff --git a/<a id="h43" href="../file/vendor/golang.org/x/net/context/context.go">vendor/golang.org/x/net/context/context.go</a> b/<a href="../file/vendor/golang.org/x/net/context/context.go">vendor/golang.org/x/net/context/context.go</a></b>
<a href="#h43-0" id="h43-0" class="h">@@ -1,156 +0,0 @@
</a><a href="#h43-0-0" id="h43-0-0" class="d">-// Copyright 2014 The Go Authors. All rights reserved.
</a><a href="#h43-0-1" id="h43-0-1" class="d">-// Use of this source code is governed by a BSD-style
</a><a href="#h43-0-2" id="h43-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h43-0-3" id="h43-0-3" class="d">-
</a><a href="#h43-0-4" id="h43-0-4" class="d">-// Package context defines the Context type, which carries deadlines,
</a><a href="#h43-0-5" id="h43-0-5" class="d">-// cancelation signals, and other request-scoped values across API boundaries
</a><a href="#h43-0-6" id="h43-0-6" class="d">-// and between processes.
</a><a href="#h43-0-7" id="h43-0-7" class="d">-//
</a><a href="#h43-0-8" id="h43-0-8" class="d">-// Incoming requests to a server should create a Context, and outgoing calls to
</a><a href="#h43-0-9" id="h43-0-9" class="d">-// servers should accept a Context.  The chain of function calls between must
</a><a href="#h43-0-10" id="h43-0-10" class="d">-// propagate the Context, optionally replacing it with a modified copy created
</a><a href="#h43-0-11" id="h43-0-11" class="d">-// using WithDeadline, WithTimeout, WithCancel, or WithValue.
</a><a href="#h43-0-12" id="h43-0-12" class="d">-//
</a><a href="#h43-0-13" id="h43-0-13" class="d">-// Programs that use Contexts should follow these rules to keep interfaces
</a><a href="#h43-0-14" id="h43-0-14" class="d">-// consistent across packages and enable static analysis tools to check context
</a><a href="#h43-0-15" id="h43-0-15" class="d">-// propagation:
</a><a href="#h43-0-16" id="h43-0-16" class="d">-//
</a><a href="#h43-0-17" id="h43-0-17" class="d">-// Do not store Contexts inside a struct type; instead, pass a Context
</a><a href="#h43-0-18" id="h43-0-18" class="d">-// explicitly to each function that needs it.  The Context should be the first
</a><a href="#h43-0-19" id="h43-0-19" class="d">-// parameter, typically named ctx:
</a><a href="#h43-0-20" id="h43-0-20" class="d">-//
</a><a href="#h43-0-21" id="h43-0-21" class="d">-// 	func DoSomething(ctx context.Context, arg Arg) error {
</a><a href="#h43-0-22" id="h43-0-22" class="d">-// 		// ... use ctx ...
</a><a href="#h43-0-23" id="h43-0-23" class="d">-// 	}
</a><a href="#h43-0-24" id="h43-0-24" class="d">-//
</a><a href="#h43-0-25" id="h43-0-25" class="d">-// Do not pass a nil Context, even if a function permits it.  Pass context.TODO
</a><a href="#h43-0-26" id="h43-0-26" class="d">-// if you are unsure about which Context to use.
</a><a href="#h43-0-27" id="h43-0-27" class="d">-//
</a><a href="#h43-0-28" id="h43-0-28" class="d">-// Use context Values only for request-scoped data that transits processes and
</a><a href="#h43-0-29" id="h43-0-29" class="d">-// APIs, not for passing optional parameters to functions.
</a><a href="#h43-0-30" id="h43-0-30" class="d">-//
</a><a href="#h43-0-31" id="h43-0-31" class="d">-// The same Context may be passed to functions running in different goroutines;
</a><a href="#h43-0-32" id="h43-0-32" class="d">-// Contexts are safe for simultaneous use by multiple goroutines.
</a><a href="#h43-0-33" id="h43-0-33" class="d">-//
</a><a href="#h43-0-34" id="h43-0-34" class="d">-// See http://blog.golang.org/context for example code for a server that uses
</a><a href="#h43-0-35" id="h43-0-35" class="d">-// Contexts.
</a><a href="#h43-0-36" id="h43-0-36" class="d">-package context // import &quot;golang.org/x/net/context&quot;
</a><a href="#h43-0-37" id="h43-0-37" class="d">-
</a><a href="#h43-0-38" id="h43-0-38" class="d">-import &quot;time&quot;
</a><a href="#h43-0-39" id="h43-0-39" class="d">-
</a><a href="#h43-0-40" id="h43-0-40" class="d">-// A Context carries a deadline, a cancelation signal, and other values across
</a><a href="#h43-0-41" id="h43-0-41" class="d">-// API boundaries.
</a><a href="#h43-0-42" id="h43-0-42" class="d">-//
</a><a href="#h43-0-43" id="h43-0-43" class="d">-// Context&#39;s methods may be called by multiple goroutines simultaneously.
</a><a href="#h43-0-44" id="h43-0-44" class="d">-type Context interface {
</a><a href="#h43-0-45" id="h43-0-45" class="d">-	// Deadline returns the time when work done on behalf of this context
</a><a href="#h43-0-46" id="h43-0-46" class="d">-	// should be canceled.  Deadline returns ok==false when no deadline is
</a><a href="#h43-0-47" id="h43-0-47" class="d">-	// set.  Successive calls to Deadline return the same results.
</a><a href="#h43-0-48" id="h43-0-48" class="d">-	Deadline() (deadline time.Time, ok bool)
</a><a href="#h43-0-49" id="h43-0-49" class="d">-
</a><a href="#h43-0-50" id="h43-0-50" class="d">-	// Done returns a channel that&#39;s closed when work done on behalf of this
</a><a href="#h43-0-51" id="h43-0-51" class="d">-	// context should be canceled.  Done may return nil if this context can
</a><a href="#h43-0-52" id="h43-0-52" class="d">-	// never be canceled.  Successive calls to Done return the same value.
</a><a href="#h43-0-53" id="h43-0-53" class="d">-	//
</a><a href="#h43-0-54" id="h43-0-54" class="d">-	// WithCancel arranges for Done to be closed when cancel is called;
</a><a href="#h43-0-55" id="h43-0-55" class="d">-	// WithDeadline arranges for Done to be closed when the deadline
</a><a href="#h43-0-56" id="h43-0-56" class="d">-	// expires; WithTimeout arranges for Done to be closed when the timeout
</a><a href="#h43-0-57" id="h43-0-57" class="d">-	// elapses.
</a><a href="#h43-0-58" id="h43-0-58" class="d">-	//
</a><a href="#h43-0-59" id="h43-0-59" class="d">-	// Done is provided for use in select statements:
</a><a href="#h43-0-60" id="h43-0-60" class="d">-	//
</a><a href="#h43-0-61" id="h43-0-61" class="d">-	//  // Stream generates values with DoSomething and sends them to out
</a><a href="#h43-0-62" id="h43-0-62" class="d">-	//  // until DoSomething returns an error or ctx.Done is closed.
</a><a href="#h43-0-63" id="h43-0-63" class="d">-	//  func Stream(ctx context.Context, out &lt;-chan Value) error {
</a><a href="#h43-0-64" id="h43-0-64" class="d">-	//  	for {
</a><a href="#h43-0-65" id="h43-0-65" class="d">-	//  		v, err := DoSomething(ctx)
</a><a href="#h43-0-66" id="h43-0-66" class="d">-	//  		if err != nil {
</a><a href="#h43-0-67" id="h43-0-67" class="d">-	//  			return err
</a><a href="#h43-0-68" id="h43-0-68" class="d">-	//  		}
</a><a href="#h43-0-69" id="h43-0-69" class="d">-	//  		select {
</a><a href="#h43-0-70" id="h43-0-70" class="d">-	//  		case &lt;-ctx.Done():
</a><a href="#h43-0-71" id="h43-0-71" class="d">-	//  			return ctx.Err()
</a><a href="#h43-0-72" id="h43-0-72" class="d">-	//  		case out &lt;- v:
</a><a href="#h43-0-73" id="h43-0-73" class="d">-	//  		}
</a><a href="#h43-0-74" id="h43-0-74" class="d">-	//  	}
</a><a href="#h43-0-75" id="h43-0-75" class="d">-	//  }
</a><a href="#h43-0-76" id="h43-0-76" class="d">-	//
</a><a href="#h43-0-77" id="h43-0-77" class="d">-	// See http://blog.golang.org/pipelines for more examples of how to use
</a><a href="#h43-0-78" id="h43-0-78" class="d">-	// a Done channel for cancelation.
</a><a href="#h43-0-79" id="h43-0-79" class="d">-	Done() &lt;-chan struct{}
</a><a href="#h43-0-80" id="h43-0-80" class="d">-
</a><a href="#h43-0-81" id="h43-0-81" class="d">-	// Err returns a non-nil error value after Done is closed.  Err returns
</a><a href="#h43-0-82" id="h43-0-82" class="d">-	// Canceled if the context was canceled or DeadlineExceeded if the
</a><a href="#h43-0-83" id="h43-0-83" class="d">-	// context&#39;s deadline passed.  No other values for Err are defined.
</a><a href="#h43-0-84" id="h43-0-84" class="d">-	// After Done is closed, successive calls to Err return the same value.
</a><a href="#h43-0-85" id="h43-0-85" class="d">-	Err() error
</a><a href="#h43-0-86" id="h43-0-86" class="d">-
</a><a href="#h43-0-87" id="h43-0-87" class="d">-	// Value returns the value associated with this context for key, or nil
</a><a href="#h43-0-88" id="h43-0-88" class="d">-	// if no value is associated with key.  Successive calls to Value with
</a><a href="#h43-0-89" id="h43-0-89" class="d">-	// the same key returns the same result.
</a><a href="#h43-0-90" id="h43-0-90" class="d">-	//
</a><a href="#h43-0-91" id="h43-0-91" class="d">-	// Use context values only for request-scoped data that transits
</a><a href="#h43-0-92" id="h43-0-92" class="d">-	// processes and API boundaries, not for passing optional parameters to
</a><a href="#h43-0-93" id="h43-0-93" class="d">-	// functions.
</a><a href="#h43-0-94" id="h43-0-94" class="d">-	//
</a><a href="#h43-0-95" id="h43-0-95" class="d">-	// A key identifies a specific value in a Context.  Functions that wish
</a><a href="#h43-0-96" id="h43-0-96" class="d">-	// to store values in Context typically allocate a key in a global
</a><a href="#h43-0-97" id="h43-0-97" class="d">-	// variable then use that key as the argument to context.WithValue and
</a><a href="#h43-0-98" id="h43-0-98" class="d">-	// Context.Value.  A key can be any type that supports equality;
</a><a href="#h43-0-99" id="h43-0-99" class="d">-	// packages should define keys as an unexported type to avoid
</a><a href="#h43-0-100" id="h43-0-100" class="d">-	// collisions.
</a><a href="#h43-0-101" id="h43-0-101" class="d">-	//
</a><a href="#h43-0-102" id="h43-0-102" class="d">-	// Packages that define a Context key should provide type-safe accessors
</a><a href="#h43-0-103" id="h43-0-103" class="d">-	// for the values stores using that key:
</a><a href="#h43-0-104" id="h43-0-104" class="d">-	//
</a><a href="#h43-0-105" id="h43-0-105" class="d">-	// 	// Package user defines a User type that&#39;s stored in Contexts.
</a><a href="#h43-0-106" id="h43-0-106" class="d">-	// 	package user
</a><a href="#h43-0-107" id="h43-0-107" class="d">-	//
</a><a href="#h43-0-108" id="h43-0-108" class="d">-	// 	import &quot;golang.org/x/net/context&quot;
</a><a href="#h43-0-109" id="h43-0-109" class="d">-	//
</a><a href="#h43-0-110" id="h43-0-110" class="d">-	// 	// User is the type of value stored in the Contexts.
</a><a href="#h43-0-111" id="h43-0-111" class="d">-	// 	type User struct {...}
</a><a href="#h43-0-112" id="h43-0-112" class="d">-	//
</a><a href="#h43-0-113" id="h43-0-113" class="d">-	// 	// key is an unexported type for keys defined in this package.
</a><a href="#h43-0-114" id="h43-0-114" class="d">-	// 	// This prevents collisions with keys defined in other packages.
</a><a href="#h43-0-115" id="h43-0-115" class="d">-	// 	type key int
</a><a href="#h43-0-116" id="h43-0-116" class="d">-	//
</a><a href="#h43-0-117" id="h43-0-117" class="d">-	// 	// userKey is the key for user.User values in Contexts.  It is
</a><a href="#h43-0-118" id="h43-0-118" class="d">-	// 	// unexported; clients use user.NewContext and user.FromContext
</a><a href="#h43-0-119" id="h43-0-119" class="d">-	// 	// instead of using this key directly.
</a><a href="#h43-0-120" id="h43-0-120" class="d">-	// 	var userKey key = 0
</a><a href="#h43-0-121" id="h43-0-121" class="d">-	//
</a><a href="#h43-0-122" id="h43-0-122" class="d">-	// 	// NewContext returns a new Context that carries value u.
</a><a href="#h43-0-123" id="h43-0-123" class="d">-	// 	func NewContext(ctx context.Context, u *User) context.Context {
</a><a href="#h43-0-124" id="h43-0-124" class="d">-	// 		return context.WithValue(ctx, userKey, u)
</a><a href="#h43-0-125" id="h43-0-125" class="d">-	// 	}
</a><a href="#h43-0-126" id="h43-0-126" class="d">-	//
</a><a href="#h43-0-127" id="h43-0-127" class="d">-	// 	// FromContext returns the User value stored in ctx, if any.
</a><a href="#h43-0-128" id="h43-0-128" class="d">-	// 	func FromContext(ctx context.Context) (*User, bool) {
</a><a href="#h43-0-129" id="h43-0-129" class="d">-	// 		u, ok := ctx.Value(userKey).(*User)
</a><a href="#h43-0-130" id="h43-0-130" class="d">-	// 		return u, ok
</a><a href="#h43-0-131" id="h43-0-131" class="d">-	// 	}
</a><a href="#h43-0-132" id="h43-0-132" class="d">-	Value(key interface{}) interface{}
</a><a href="#h43-0-133" id="h43-0-133" class="d">-}
</a><a href="#h43-0-134" id="h43-0-134" class="d">-
</a><a href="#h43-0-135" id="h43-0-135" class="d">-// Background returns a non-nil, empty Context. It is never canceled, has no
</a><a href="#h43-0-136" id="h43-0-136" class="d">-// values, and has no deadline.  It is typically used by the main function,
</a><a href="#h43-0-137" id="h43-0-137" class="d">-// initialization, and tests, and as the top-level Context for incoming
</a><a href="#h43-0-138" id="h43-0-138" class="d">-// requests.
</a><a href="#h43-0-139" id="h43-0-139" class="d">-func Background() Context {
</a><a href="#h43-0-140" id="h43-0-140" class="d">-	return background
</a><a href="#h43-0-141" id="h43-0-141" class="d">-}
</a><a href="#h43-0-142" id="h43-0-142" class="d">-
</a><a href="#h43-0-143" id="h43-0-143" class="d">-// TODO returns a non-nil, empty Context.  Code should use context.TODO when
</a><a href="#h43-0-144" id="h43-0-144" class="d">-// it&#39;s unclear which Context to use or it is not yet available (because the
</a><a href="#h43-0-145" id="h43-0-145" class="d">-// surrounding function has not yet been extended to accept a Context
</a><a href="#h43-0-146" id="h43-0-146" class="d">-// parameter).  TODO is recognized by static analysis tools that determine
</a><a href="#h43-0-147" id="h43-0-147" class="d">-// whether Contexts are propagated correctly in a program.
</a><a href="#h43-0-148" id="h43-0-148" class="d">-func TODO() Context {
</a><a href="#h43-0-149" id="h43-0-149" class="d">-	return todo
</a><a href="#h43-0-150" id="h43-0-150" class="d">-}
</a><a href="#h43-0-151" id="h43-0-151" class="d">-
</a><a href="#h43-0-152" id="h43-0-152" class="d">-// A CancelFunc tells an operation to abandon its work.
</a><a href="#h43-0-153" id="h43-0-153" class="d">-// A CancelFunc does not wait for the work to stop.
</a><a href="#h43-0-154" id="h43-0-154" class="d">-// After the first call, subsequent calls to a CancelFunc do nothing.
</a><a href="#h43-0-155" id="h43-0-155" class="d">-type CancelFunc func()
</a><b>diff --git a/<a id="h44" href="../file/vendor/golang.org/x/net/context/go17.go">vendor/golang.org/x/net/context/go17.go</a> b/<a href="../file/vendor/golang.org/x/net/context/go17.go">vendor/golang.org/x/net/context/go17.go</a></b>
<a href="#h44-0" id="h44-0" class="h">@@ -1,72 +0,0 @@
</a><a href="#h44-0-0" id="h44-0-0" class="d">-// Copyright 2016 The Go Authors. All rights reserved.
</a><a href="#h44-0-1" id="h44-0-1" class="d">-// Use of this source code is governed by a BSD-style
</a><a href="#h44-0-2" id="h44-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h44-0-3" id="h44-0-3" class="d">-
</a><a href="#h44-0-4" id="h44-0-4" class="d">-// +build go1.7
</a><a href="#h44-0-5" id="h44-0-5" class="d">-
</a><a href="#h44-0-6" id="h44-0-6" class="d">-package context
</a><a href="#h44-0-7" id="h44-0-7" class="d">-
</a><a href="#h44-0-8" id="h44-0-8" class="d">-import (
</a><a href="#h44-0-9" id="h44-0-9" class="d">-	&quot;context&quot; // standard library&#39;s context, as of Go 1.7
</a><a href="#h44-0-10" id="h44-0-10" class="d">-	&quot;time&quot;
</a><a href="#h44-0-11" id="h44-0-11" class="d">-)
</a><a href="#h44-0-12" id="h44-0-12" class="d">-
</a><a href="#h44-0-13" id="h44-0-13" class="d">-var (
</a><a href="#h44-0-14" id="h44-0-14" class="d">-	todo       = context.TODO()
</a><a href="#h44-0-15" id="h44-0-15" class="d">-	background = context.Background()
</a><a href="#h44-0-16" id="h44-0-16" class="d">-)
</a><a href="#h44-0-17" id="h44-0-17" class="d">-
</a><a href="#h44-0-18" id="h44-0-18" class="d">-// Canceled is the error returned by Context.Err when the context is canceled.
</a><a href="#h44-0-19" id="h44-0-19" class="d">-var Canceled = context.Canceled
</a><a href="#h44-0-20" id="h44-0-20" class="d">-
</a><a href="#h44-0-21" id="h44-0-21" class="d">-// DeadlineExceeded is the error returned by Context.Err when the context&#39;s
</a><a href="#h44-0-22" id="h44-0-22" class="d">-// deadline passes.
</a><a href="#h44-0-23" id="h44-0-23" class="d">-var DeadlineExceeded = context.DeadlineExceeded
</a><a href="#h44-0-24" id="h44-0-24" class="d">-
</a><a href="#h44-0-25" id="h44-0-25" class="d">-// WithCancel returns a copy of parent with a new Done channel. The returned
</a><a href="#h44-0-26" id="h44-0-26" class="d">-// context&#39;s Done channel is closed when the returned cancel function is called
</a><a href="#h44-0-27" id="h44-0-27" class="d">-// or when the parent context&#39;s Done channel is closed, whichever happens first.
</a><a href="#h44-0-28" id="h44-0-28" class="d">-//
</a><a href="#h44-0-29" id="h44-0-29" class="d">-// Canceling this context releases resources associated with it, so code should
</a><a href="#h44-0-30" id="h44-0-30" class="d">-// call cancel as soon as the operations running in this Context complete.
</a><a href="#h44-0-31" id="h44-0-31" class="d">-func WithCancel(parent Context) (ctx Context, cancel CancelFunc) {
</a><a href="#h44-0-32" id="h44-0-32" class="d">-	ctx, f := context.WithCancel(parent)
</a><a href="#h44-0-33" id="h44-0-33" class="d">-	return ctx, CancelFunc(f)
</a><a href="#h44-0-34" id="h44-0-34" class="d">-}
</a><a href="#h44-0-35" id="h44-0-35" class="d">-
</a><a href="#h44-0-36" id="h44-0-36" class="d">-// WithDeadline returns a copy of the parent context with the deadline adjusted
</a><a href="#h44-0-37" id="h44-0-37" class="d">-// to be no later than d.  If the parent&#39;s deadline is already earlier than d,
</a><a href="#h44-0-38" id="h44-0-38" class="d">-// WithDeadline(parent, d) is semantically equivalent to parent.  The returned
</a><a href="#h44-0-39" id="h44-0-39" class="d">-// context&#39;s Done channel is closed when the deadline expires, when the returned
</a><a href="#h44-0-40" id="h44-0-40" class="d">-// cancel function is called, or when the parent context&#39;s Done channel is
</a><a href="#h44-0-41" id="h44-0-41" class="d">-// closed, whichever happens first.
</a><a href="#h44-0-42" id="h44-0-42" class="d">-//
</a><a href="#h44-0-43" id="h44-0-43" class="d">-// Canceling this context releases resources associated with it, so code should
</a><a href="#h44-0-44" id="h44-0-44" class="d">-// call cancel as soon as the operations running in this Context complete.
</a><a href="#h44-0-45" id="h44-0-45" class="d">-func WithDeadline(parent Context, deadline time.Time) (Context, CancelFunc) {
</a><a href="#h44-0-46" id="h44-0-46" class="d">-	ctx, f := context.WithDeadline(parent, deadline)
</a><a href="#h44-0-47" id="h44-0-47" class="d">-	return ctx, CancelFunc(f)
</a><a href="#h44-0-48" id="h44-0-48" class="d">-}
</a><a href="#h44-0-49" id="h44-0-49" class="d">-
</a><a href="#h44-0-50" id="h44-0-50" class="d">-// WithTimeout returns WithDeadline(parent, time.Now().Add(timeout)).
</a><a href="#h44-0-51" id="h44-0-51" class="d">-//
</a><a href="#h44-0-52" id="h44-0-52" class="d">-// Canceling this context releases resources associated with it, so code should
</a><a href="#h44-0-53" id="h44-0-53" class="d">-// call cancel as soon as the operations running in this Context complete:
</a><a href="#h44-0-54" id="h44-0-54" class="d">-//
</a><a href="#h44-0-55" id="h44-0-55" class="d">-// 	func slowOperationWithTimeout(ctx context.Context) (Result, error) {
</a><a href="#h44-0-56" id="h44-0-56" class="d">-// 		ctx, cancel := context.WithTimeout(ctx, 100*time.Millisecond)
</a><a href="#h44-0-57" id="h44-0-57" class="d">-// 		defer cancel()  // releases resources if slowOperation completes before timeout elapses
</a><a href="#h44-0-58" id="h44-0-58" class="d">-// 		return slowOperation(ctx)
</a><a href="#h44-0-59" id="h44-0-59" class="d">-// 	}
</a><a href="#h44-0-60" id="h44-0-60" class="d">-func WithTimeout(parent Context, timeout time.Duration) (Context, CancelFunc) {
</a><a href="#h44-0-61" id="h44-0-61" class="d">-	return WithDeadline(parent, time.Now().Add(timeout))
</a><a href="#h44-0-62" id="h44-0-62" class="d">-}
</a><a href="#h44-0-63" id="h44-0-63" class="d">-
</a><a href="#h44-0-64" id="h44-0-64" class="d">-// WithValue returns a copy of parent in which the value associated with key is
</a><a href="#h44-0-65" id="h44-0-65" class="d">-// val.
</a><a href="#h44-0-66" id="h44-0-66" class="d">-//
</a><a href="#h44-0-67" id="h44-0-67" class="d">-// Use context Values only for request-scoped data that transits processes and
</a><a href="#h44-0-68" id="h44-0-68" class="d">-// APIs, not for passing optional parameters to functions.
</a><a href="#h44-0-69" id="h44-0-69" class="d">-func WithValue(parent Context, key interface{}, val interface{}) Context {
</a><a href="#h44-0-70" id="h44-0-70" class="d">-	return context.WithValue(parent, key, val)
</a><a href="#h44-0-71" id="h44-0-71" class="d">-}
</a><b>diff --git a/<a id="h45" href="../file/vendor/golang.org/x/net/context/pre_go17.go">vendor/golang.org/x/net/context/pre_go17.go</a> b/<a href="../file/vendor/golang.org/x/net/context/pre_go17.go">vendor/golang.org/x/net/context/pre_go17.go</a></b>
<a href="#h45-0" id="h45-0" class="h">@@ -1,300 +0,0 @@
</a><a href="#h45-0-0" id="h45-0-0" class="d">-// Copyright 2014 The Go Authors. All rights reserved.
</a><a href="#h45-0-1" id="h45-0-1" class="d">-// Use of this source code is governed by a BSD-style
</a><a href="#h45-0-2" id="h45-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h45-0-3" id="h45-0-3" class="d">-
</a><a href="#h45-0-4" id="h45-0-4" class="d">-// +build !go1.7
</a><a href="#h45-0-5" id="h45-0-5" class="d">-
</a><a href="#h45-0-6" id="h45-0-6" class="d">-package context
</a><a href="#h45-0-7" id="h45-0-7" class="d">-
</a><a href="#h45-0-8" id="h45-0-8" class="d">-import (
</a><a href="#h45-0-9" id="h45-0-9" class="d">-	&quot;errors&quot;
</a><a href="#h45-0-10" id="h45-0-10" class="d">-	&quot;fmt&quot;
</a><a href="#h45-0-11" id="h45-0-11" class="d">-	&quot;sync&quot;
</a><a href="#h45-0-12" id="h45-0-12" class="d">-	&quot;time&quot;
</a><a href="#h45-0-13" id="h45-0-13" class="d">-)
</a><a href="#h45-0-14" id="h45-0-14" class="d">-
</a><a href="#h45-0-15" id="h45-0-15" class="d">-// An emptyCtx is never canceled, has no values, and has no deadline.  It is not
</a><a href="#h45-0-16" id="h45-0-16" class="d">-// struct{}, since vars of this type must have distinct addresses.
</a><a href="#h45-0-17" id="h45-0-17" class="d">-type emptyCtx int
</a><a href="#h45-0-18" id="h45-0-18" class="d">-
</a><a href="#h45-0-19" id="h45-0-19" class="d">-func (*emptyCtx) Deadline() (deadline time.Time, ok bool) {
</a><a href="#h45-0-20" id="h45-0-20" class="d">-	return
</a><a href="#h45-0-21" id="h45-0-21" class="d">-}
</a><a href="#h45-0-22" id="h45-0-22" class="d">-
</a><a href="#h45-0-23" id="h45-0-23" class="d">-func (*emptyCtx) Done() &lt;-chan struct{} {
</a><a href="#h45-0-24" id="h45-0-24" class="d">-	return nil
</a><a href="#h45-0-25" id="h45-0-25" class="d">-}
</a><a href="#h45-0-26" id="h45-0-26" class="d">-
</a><a href="#h45-0-27" id="h45-0-27" class="d">-func (*emptyCtx) Err() error {
</a><a href="#h45-0-28" id="h45-0-28" class="d">-	return nil
</a><a href="#h45-0-29" id="h45-0-29" class="d">-}
</a><a href="#h45-0-30" id="h45-0-30" class="d">-
</a><a href="#h45-0-31" id="h45-0-31" class="d">-func (*emptyCtx) Value(key interface{}) interface{} {
</a><a href="#h45-0-32" id="h45-0-32" class="d">-	return nil
</a><a href="#h45-0-33" id="h45-0-33" class="d">-}
</a><a href="#h45-0-34" id="h45-0-34" class="d">-
</a><a href="#h45-0-35" id="h45-0-35" class="d">-func (e *emptyCtx) String() string {
</a><a href="#h45-0-36" id="h45-0-36" class="d">-	switch e {
</a><a href="#h45-0-37" id="h45-0-37" class="d">-	case background:
</a><a href="#h45-0-38" id="h45-0-38" class="d">-		return &quot;context.Background&quot;
</a><a href="#h45-0-39" id="h45-0-39" class="d">-	case todo:
</a><a href="#h45-0-40" id="h45-0-40" class="d">-		return &quot;context.TODO&quot;
</a><a href="#h45-0-41" id="h45-0-41" class="d">-	}
</a><a href="#h45-0-42" id="h45-0-42" class="d">-	return &quot;unknown empty Context&quot;
</a><a href="#h45-0-43" id="h45-0-43" class="d">-}
</a><a href="#h45-0-44" id="h45-0-44" class="d">-
</a><a href="#h45-0-45" id="h45-0-45" class="d">-var (
</a><a href="#h45-0-46" id="h45-0-46" class="d">-	background = new(emptyCtx)
</a><a href="#h45-0-47" id="h45-0-47" class="d">-	todo       = new(emptyCtx)
</a><a href="#h45-0-48" id="h45-0-48" class="d">-)
</a><a href="#h45-0-49" id="h45-0-49" class="d">-
</a><a href="#h45-0-50" id="h45-0-50" class="d">-// Canceled is the error returned by Context.Err when the context is canceled.
</a><a href="#h45-0-51" id="h45-0-51" class="d">-var Canceled = errors.New(&quot;context canceled&quot;)
</a><a href="#h45-0-52" id="h45-0-52" class="d">-
</a><a href="#h45-0-53" id="h45-0-53" class="d">-// DeadlineExceeded is the error returned by Context.Err when the context&#39;s
</a><a href="#h45-0-54" id="h45-0-54" class="d">-// deadline passes.
</a><a href="#h45-0-55" id="h45-0-55" class="d">-var DeadlineExceeded = errors.New(&quot;context deadline exceeded&quot;)
</a><a href="#h45-0-56" id="h45-0-56" class="d">-
</a><a href="#h45-0-57" id="h45-0-57" class="d">-// WithCancel returns a copy of parent with a new Done channel. The returned
</a><a href="#h45-0-58" id="h45-0-58" class="d">-// context&#39;s Done channel is closed when the returned cancel function is called
</a><a href="#h45-0-59" id="h45-0-59" class="d">-// or when the parent context&#39;s Done channel is closed, whichever happens first.
</a><a href="#h45-0-60" id="h45-0-60" class="d">-//
</a><a href="#h45-0-61" id="h45-0-61" class="d">-// Canceling this context releases resources associated with it, so code should
</a><a href="#h45-0-62" id="h45-0-62" class="d">-// call cancel as soon as the operations running in this Context complete.
</a><a href="#h45-0-63" id="h45-0-63" class="d">-func WithCancel(parent Context) (ctx Context, cancel CancelFunc) {
</a><a href="#h45-0-64" id="h45-0-64" class="d">-	c := newCancelCtx(parent)
</a><a href="#h45-0-65" id="h45-0-65" class="d">-	propagateCancel(parent, c)
</a><a href="#h45-0-66" id="h45-0-66" class="d">-	return c, func() { c.cancel(true, Canceled) }
</a><a href="#h45-0-67" id="h45-0-67" class="d">-}
</a><a href="#h45-0-68" id="h45-0-68" class="d">-
</a><a href="#h45-0-69" id="h45-0-69" class="d">-// newCancelCtx returns an initialized cancelCtx.
</a><a href="#h45-0-70" id="h45-0-70" class="d">-func newCancelCtx(parent Context) *cancelCtx {
</a><a href="#h45-0-71" id="h45-0-71" class="d">-	return &amp;cancelCtx{
</a><a href="#h45-0-72" id="h45-0-72" class="d">-		Context: parent,
</a><a href="#h45-0-73" id="h45-0-73" class="d">-		done:    make(chan struct{}),
</a><a href="#h45-0-74" id="h45-0-74" class="d">-	}
</a><a href="#h45-0-75" id="h45-0-75" class="d">-}
</a><a href="#h45-0-76" id="h45-0-76" class="d">-
</a><a href="#h45-0-77" id="h45-0-77" class="d">-// propagateCancel arranges for child to be canceled when parent is.
</a><a href="#h45-0-78" id="h45-0-78" class="d">-func propagateCancel(parent Context, child canceler) {
</a><a href="#h45-0-79" id="h45-0-79" class="d">-	if parent.Done() == nil {
</a><a href="#h45-0-80" id="h45-0-80" class="d">-		return // parent is never canceled
</a><a href="#h45-0-81" id="h45-0-81" class="d">-	}
</a><a href="#h45-0-82" id="h45-0-82" class="d">-	if p, ok := parentCancelCtx(parent); ok {
</a><a href="#h45-0-83" id="h45-0-83" class="d">-		p.mu.Lock()
</a><a href="#h45-0-84" id="h45-0-84" class="d">-		if p.err != nil {
</a><a href="#h45-0-85" id="h45-0-85" class="d">-			// parent has already been canceled
</a><a href="#h45-0-86" id="h45-0-86" class="d">-			child.cancel(false, p.err)
</a><a href="#h45-0-87" id="h45-0-87" class="d">-		} else {
</a><a href="#h45-0-88" id="h45-0-88" class="d">-			if p.children == nil {
</a><a href="#h45-0-89" id="h45-0-89" class="d">-				p.children = make(map[canceler]bool)
</a><a href="#h45-0-90" id="h45-0-90" class="d">-			}
</a><a href="#h45-0-91" id="h45-0-91" class="d">-			p.children[child] = true
</a><a href="#h45-0-92" id="h45-0-92" class="d">-		}
</a><a href="#h45-0-93" id="h45-0-93" class="d">-		p.mu.Unlock()
</a><a href="#h45-0-94" id="h45-0-94" class="d">-	} else {
</a><a href="#h45-0-95" id="h45-0-95" class="d">-		go func() {
</a><a href="#h45-0-96" id="h45-0-96" class="d">-			select {
</a><a href="#h45-0-97" id="h45-0-97" class="d">-			case &lt;-parent.Done():
</a><a href="#h45-0-98" id="h45-0-98" class="d">-				child.cancel(false, parent.Err())
</a><a href="#h45-0-99" id="h45-0-99" class="d">-			case &lt;-child.Done():
</a><a href="#h45-0-100" id="h45-0-100" class="d">-			}
</a><a href="#h45-0-101" id="h45-0-101" class="d">-		}()
</a><a href="#h45-0-102" id="h45-0-102" class="d">-	}
</a><a href="#h45-0-103" id="h45-0-103" class="d">-}
</a><a href="#h45-0-104" id="h45-0-104" class="d">-
</a><a href="#h45-0-105" id="h45-0-105" class="d">-// parentCancelCtx follows a chain of parent references until it finds a
</a><a href="#h45-0-106" id="h45-0-106" class="d">-// *cancelCtx.  This function understands how each of the concrete types in this
</a><a href="#h45-0-107" id="h45-0-107" class="d">-// package represents its parent.
</a><a href="#h45-0-108" id="h45-0-108" class="d">-func parentCancelCtx(parent Context) (*cancelCtx, bool) {
</a><a href="#h45-0-109" id="h45-0-109" class="d">-	for {
</a><a href="#h45-0-110" id="h45-0-110" class="d">-		switch c := parent.(type) {
</a><a href="#h45-0-111" id="h45-0-111" class="d">-		case *cancelCtx:
</a><a href="#h45-0-112" id="h45-0-112" class="d">-			return c, true
</a><a href="#h45-0-113" id="h45-0-113" class="d">-		case *timerCtx:
</a><a href="#h45-0-114" id="h45-0-114" class="d">-			return c.cancelCtx, true
</a><a href="#h45-0-115" id="h45-0-115" class="d">-		case *valueCtx:
</a><a href="#h45-0-116" id="h45-0-116" class="d">-			parent = c.Context
</a><a href="#h45-0-117" id="h45-0-117" class="d">-		default:
</a><a href="#h45-0-118" id="h45-0-118" class="d">-			return nil, false
</a><a href="#h45-0-119" id="h45-0-119" class="d">-		}
</a><a href="#h45-0-120" id="h45-0-120" class="d">-	}
</a><a href="#h45-0-121" id="h45-0-121" class="d">-}
</a><a href="#h45-0-122" id="h45-0-122" class="d">-
</a><a href="#h45-0-123" id="h45-0-123" class="d">-// removeChild removes a context from its parent.
</a><a href="#h45-0-124" id="h45-0-124" class="d">-func removeChild(parent Context, child canceler) {
</a><a href="#h45-0-125" id="h45-0-125" class="d">-	p, ok := parentCancelCtx(parent)
</a><a href="#h45-0-126" id="h45-0-126" class="d">-	if !ok {
</a><a href="#h45-0-127" id="h45-0-127" class="d">-		return
</a><a href="#h45-0-128" id="h45-0-128" class="d">-	}
</a><a href="#h45-0-129" id="h45-0-129" class="d">-	p.mu.Lock()
</a><a href="#h45-0-130" id="h45-0-130" class="d">-	if p.children != nil {
</a><a href="#h45-0-131" id="h45-0-131" class="d">-		delete(p.children, child)
</a><a href="#h45-0-132" id="h45-0-132" class="d">-	}
</a><a href="#h45-0-133" id="h45-0-133" class="d">-	p.mu.Unlock()
</a><a href="#h45-0-134" id="h45-0-134" class="d">-}
</a><a href="#h45-0-135" id="h45-0-135" class="d">-
</a><a href="#h45-0-136" id="h45-0-136" class="d">-// A canceler is a context type that can be canceled directly.  The
</a><a href="#h45-0-137" id="h45-0-137" class="d">-// implementations are *cancelCtx and *timerCtx.
</a><a href="#h45-0-138" id="h45-0-138" class="d">-type canceler interface {
</a><a href="#h45-0-139" id="h45-0-139" class="d">-	cancel(removeFromParent bool, err error)
</a><a href="#h45-0-140" id="h45-0-140" class="d">-	Done() &lt;-chan struct{}
</a><a href="#h45-0-141" id="h45-0-141" class="d">-}
</a><a href="#h45-0-142" id="h45-0-142" class="d">-
</a><a href="#h45-0-143" id="h45-0-143" class="d">-// A cancelCtx can be canceled.  When canceled, it also cancels any children
</a><a href="#h45-0-144" id="h45-0-144" class="d">-// that implement canceler.
</a><a href="#h45-0-145" id="h45-0-145" class="d">-type cancelCtx struct {
</a><a href="#h45-0-146" id="h45-0-146" class="d">-	Context
</a><a href="#h45-0-147" id="h45-0-147" class="d">-
</a><a href="#h45-0-148" id="h45-0-148" class="d">-	done chan struct{} // closed by the first cancel call.
</a><a href="#h45-0-149" id="h45-0-149" class="d">-
</a><a href="#h45-0-150" id="h45-0-150" class="d">-	mu       sync.Mutex
</a><a href="#h45-0-151" id="h45-0-151" class="d">-	children map[canceler]bool // set to nil by the first cancel call
</a><a href="#h45-0-152" id="h45-0-152" class="d">-	err      error             // set to non-nil by the first cancel call
</a><a href="#h45-0-153" id="h45-0-153" class="d">-}
</a><a href="#h45-0-154" id="h45-0-154" class="d">-
</a><a href="#h45-0-155" id="h45-0-155" class="d">-func (c *cancelCtx) Done() &lt;-chan struct{} {
</a><a href="#h45-0-156" id="h45-0-156" class="d">-	return c.done
</a><a href="#h45-0-157" id="h45-0-157" class="d">-}
</a><a href="#h45-0-158" id="h45-0-158" class="d">-
</a><a href="#h45-0-159" id="h45-0-159" class="d">-func (c *cancelCtx) Err() error {
</a><a href="#h45-0-160" id="h45-0-160" class="d">-	c.mu.Lock()
</a><a href="#h45-0-161" id="h45-0-161" class="d">-	defer c.mu.Unlock()
</a><a href="#h45-0-162" id="h45-0-162" class="d">-	return c.err
</a><a href="#h45-0-163" id="h45-0-163" class="d">-}
</a><a href="#h45-0-164" id="h45-0-164" class="d">-
</a><a href="#h45-0-165" id="h45-0-165" class="d">-func (c *cancelCtx) String() string {
</a><a href="#h45-0-166" id="h45-0-166" class="d">-	return fmt.Sprintf(&quot;%v.WithCancel&quot;, c.Context)
</a><a href="#h45-0-167" id="h45-0-167" class="d">-}
</a><a href="#h45-0-168" id="h45-0-168" class="d">-
</a><a href="#h45-0-169" id="h45-0-169" class="d">-// cancel closes c.done, cancels each of c&#39;s children, and, if
</a><a href="#h45-0-170" id="h45-0-170" class="d">-// removeFromParent is true, removes c from its parent&#39;s children.
</a><a href="#h45-0-171" id="h45-0-171" class="d">-func (c *cancelCtx) cancel(removeFromParent bool, err error) {
</a><a href="#h45-0-172" id="h45-0-172" class="d">-	if err == nil {
</a><a href="#h45-0-173" id="h45-0-173" class="d">-		panic(&quot;context: internal error: missing cancel error&quot;)
</a><a href="#h45-0-174" id="h45-0-174" class="d">-	}
</a><a href="#h45-0-175" id="h45-0-175" class="d">-	c.mu.Lock()
</a><a href="#h45-0-176" id="h45-0-176" class="d">-	if c.err != nil {
</a><a href="#h45-0-177" id="h45-0-177" class="d">-		c.mu.Unlock()
</a><a href="#h45-0-178" id="h45-0-178" class="d">-		return // already canceled
</a><a href="#h45-0-179" id="h45-0-179" class="d">-	}
</a><a href="#h45-0-180" id="h45-0-180" class="d">-	c.err = err
</a><a href="#h45-0-181" id="h45-0-181" class="d">-	close(c.done)
</a><a href="#h45-0-182" id="h45-0-182" class="d">-	for child := range c.children {
</a><a href="#h45-0-183" id="h45-0-183" class="d">-		// NOTE: acquiring the child&#39;s lock while holding parent&#39;s lock.
</a><a href="#h45-0-184" id="h45-0-184" class="d">-		child.cancel(false, err)
</a><a href="#h45-0-185" id="h45-0-185" class="d">-	}
</a><a href="#h45-0-186" id="h45-0-186" class="d">-	c.children = nil
</a><a href="#h45-0-187" id="h45-0-187" class="d">-	c.mu.Unlock()
</a><a href="#h45-0-188" id="h45-0-188" class="d">-
</a><a href="#h45-0-189" id="h45-0-189" class="d">-	if removeFromParent {
</a><a href="#h45-0-190" id="h45-0-190" class="d">-		removeChild(c.Context, c)
</a><a href="#h45-0-191" id="h45-0-191" class="d">-	}
</a><a href="#h45-0-192" id="h45-0-192" class="d">-}
</a><a href="#h45-0-193" id="h45-0-193" class="d">-
</a><a href="#h45-0-194" id="h45-0-194" class="d">-// WithDeadline returns a copy of the parent context with the deadline adjusted
</a><a href="#h45-0-195" id="h45-0-195" class="d">-// to be no later than d.  If the parent&#39;s deadline is already earlier than d,
</a><a href="#h45-0-196" id="h45-0-196" class="d">-// WithDeadline(parent, d) is semantically equivalent to parent.  The returned
</a><a href="#h45-0-197" id="h45-0-197" class="d">-// context&#39;s Done channel is closed when the deadline expires, when the returned
</a><a href="#h45-0-198" id="h45-0-198" class="d">-// cancel function is called, or when the parent context&#39;s Done channel is
</a><a href="#h45-0-199" id="h45-0-199" class="d">-// closed, whichever happens first.
</a><a href="#h45-0-200" id="h45-0-200" class="d">-//
</a><a href="#h45-0-201" id="h45-0-201" class="d">-// Canceling this context releases resources associated with it, so code should
</a><a href="#h45-0-202" id="h45-0-202" class="d">-// call cancel as soon as the operations running in this Context complete.
</a><a href="#h45-0-203" id="h45-0-203" class="d">-func WithDeadline(parent Context, deadline time.Time) (Context, CancelFunc) {
</a><a href="#h45-0-204" id="h45-0-204" class="d">-	if cur, ok := parent.Deadline(); ok &amp;&amp; cur.Before(deadline) {
</a><a href="#h45-0-205" id="h45-0-205" class="d">-		// The current deadline is already sooner than the new one.
</a><a href="#h45-0-206" id="h45-0-206" class="d">-		return WithCancel(parent)
</a><a href="#h45-0-207" id="h45-0-207" class="d">-	}
</a><a href="#h45-0-208" id="h45-0-208" class="d">-	c := &amp;timerCtx{
</a><a href="#h45-0-209" id="h45-0-209" class="d">-		cancelCtx: newCancelCtx(parent),
</a><a href="#h45-0-210" id="h45-0-210" class="d">-		deadline:  deadline,
</a><a href="#h45-0-211" id="h45-0-211" class="d">-	}
</a><a href="#h45-0-212" id="h45-0-212" class="d">-	propagateCancel(parent, c)
</a><a href="#h45-0-213" id="h45-0-213" class="d">-	d := deadline.Sub(time.Now())
</a><a href="#h45-0-214" id="h45-0-214" class="d">-	if d &lt;= 0 {
</a><a href="#h45-0-215" id="h45-0-215" class="d">-		c.cancel(true, DeadlineExceeded) // deadline has already passed
</a><a href="#h45-0-216" id="h45-0-216" class="d">-		return c, func() { c.cancel(true, Canceled) }
</a><a href="#h45-0-217" id="h45-0-217" class="d">-	}
</a><a href="#h45-0-218" id="h45-0-218" class="d">-	c.mu.Lock()
</a><a href="#h45-0-219" id="h45-0-219" class="d">-	defer c.mu.Unlock()
</a><a href="#h45-0-220" id="h45-0-220" class="d">-	if c.err == nil {
</a><a href="#h45-0-221" id="h45-0-221" class="d">-		c.timer = time.AfterFunc(d, func() {
</a><a href="#h45-0-222" id="h45-0-222" class="d">-			c.cancel(true, DeadlineExceeded)
</a><a href="#h45-0-223" id="h45-0-223" class="d">-		})
</a><a href="#h45-0-224" id="h45-0-224" class="d">-	}
</a><a href="#h45-0-225" id="h45-0-225" class="d">-	return c, func() { c.cancel(true, Canceled) }
</a><a href="#h45-0-226" id="h45-0-226" class="d">-}
</a><a href="#h45-0-227" id="h45-0-227" class="d">-
</a><a href="#h45-0-228" id="h45-0-228" class="d">-// A timerCtx carries a timer and a deadline.  It embeds a cancelCtx to
</a><a href="#h45-0-229" id="h45-0-229" class="d">-// implement Done and Err.  It implements cancel by stopping its timer then
</a><a href="#h45-0-230" id="h45-0-230" class="d">-// delegating to cancelCtx.cancel.
</a><a href="#h45-0-231" id="h45-0-231" class="d">-type timerCtx struct {
</a><a href="#h45-0-232" id="h45-0-232" class="d">-	*cancelCtx
</a><a href="#h45-0-233" id="h45-0-233" class="d">-	timer *time.Timer // Under cancelCtx.mu.
</a><a href="#h45-0-234" id="h45-0-234" class="d">-
</a><a href="#h45-0-235" id="h45-0-235" class="d">-	deadline time.Time
</a><a href="#h45-0-236" id="h45-0-236" class="d">-}
</a><a href="#h45-0-237" id="h45-0-237" class="d">-
</a><a href="#h45-0-238" id="h45-0-238" class="d">-func (c *timerCtx) Deadline() (deadline time.Time, ok bool) {
</a><a href="#h45-0-239" id="h45-0-239" class="d">-	return c.deadline, true
</a><a href="#h45-0-240" id="h45-0-240" class="d">-}
</a><a href="#h45-0-241" id="h45-0-241" class="d">-
</a><a href="#h45-0-242" id="h45-0-242" class="d">-func (c *timerCtx) String() string {
</a><a href="#h45-0-243" id="h45-0-243" class="d">-	return fmt.Sprintf(&quot;%v.WithDeadline(%s [%s])&quot;, c.cancelCtx.Context, c.deadline, c.deadline.Sub(time.Now()))
</a><a href="#h45-0-244" id="h45-0-244" class="d">-}
</a><a href="#h45-0-245" id="h45-0-245" class="d">-
</a><a href="#h45-0-246" id="h45-0-246" class="d">-func (c *timerCtx) cancel(removeFromParent bool, err error) {
</a><a href="#h45-0-247" id="h45-0-247" class="d">-	c.cancelCtx.cancel(false, err)
</a><a href="#h45-0-248" id="h45-0-248" class="d">-	if removeFromParent {
</a><a href="#h45-0-249" id="h45-0-249" class="d">-		// Remove this timerCtx from its parent cancelCtx&#39;s children.
</a><a href="#h45-0-250" id="h45-0-250" class="d">-		removeChild(c.cancelCtx.Context, c)
</a><a href="#h45-0-251" id="h45-0-251" class="d">-	}
</a><a href="#h45-0-252" id="h45-0-252" class="d">-	c.mu.Lock()
</a><a href="#h45-0-253" id="h45-0-253" class="d">-	if c.timer != nil {
</a><a href="#h45-0-254" id="h45-0-254" class="d">-		c.timer.Stop()
</a><a href="#h45-0-255" id="h45-0-255" class="d">-		c.timer = nil
</a><a href="#h45-0-256" id="h45-0-256" class="d">-	}
</a><a href="#h45-0-257" id="h45-0-257" class="d">-	c.mu.Unlock()
</a><a href="#h45-0-258" id="h45-0-258" class="d">-}
</a><a href="#h45-0-259" id="h45-0-259" class="d">-
</a><a href="#h45-0-260" id="h45-0-260" class="d">-// WithTimeout returns WithDeadline(parent, time.Now().Add(timeout)).
</a><a href="#h45-0-261" id="h45-0-261" class="d">-//
</a><a href="#h45-0-262" id="h45-0-262" class="d">-// Canceling this context releases resources associated with it, so code should
</a><a href="#h45-0-263" id="h45-0-263" class="d">-// call cancel as soon as the operations running in this Context complete:
</a><a href="#h45-0-264" id="h45-0-264" class="d">-//
</a><a href="#h45-0-265" id="h45-0-265" class="d">-// 	func slowOperationWithTimeout(ctx context.Context) (Result, error) {
</a><a href="#h45-0-266" id="h45-0-266" class="d">-// 		ctx, cancel := context.WithTimeout(ctx, 100*time.Millisecond)
</a><a href="#h45-0-267" id="h45-0-267" class="d">-// 		defer cancel()  // releases resources if slowOperation completes before timeout elapses
</a><a href="#h45-0-268" id="h45-0-268" class="d">-// 		return slowOperation(ctx)
</a><a href="#h45-0-269" id="h45-0-269" class="d">-// 	}
</a><a href="#h45-0-270" id="h45-0-270" class="d">-func WithTimeout(parent Context, timeout time.Duration) (Context, CancelFunc) {
</a><a href="#h45-0-271" id="h45-0-271" class="d">-	return WithDeadline(parent, time.Now().Add(timeout))
</a><a href="#h45-0-272" id="h45-0-272" class="d">-}
</a><a href="#h45-0-273" id="h45-0-273" class="d">-
</a><a href="#h45-0-274" id="h45-0-274" class="d">-// WithValue returns a copy of parent in which the value associated with key is
</a><a href="#h45-0-275" id="h45-0-275" class="d">-// val.
</a><a href="#h45-0-276" id="h45-0-276" class="d">-//
</a><a href="#h45-0-277" id="h45-0-277" class="d">-// Use context Values only for request-scoped data that transits processes and
</a><a href="#h45-0-278" id="h45-0-278" class="d">-// APIs, not for passing optional parameters to functions.
</a><a href="#h45-0-279" id="h45-0-279" class="d">-func WithValue(parent Context, key interface{}, val interface{}) Context {
</a><a href="#h45-0-280" id="h45-0-280" class="d">-	return &amp;valueCtx{parent, key, val}
</a><a href="#h45-0-281" id="h45-0-281" class="d">-}
</a><a href="#h45-0-282" id="h45-0-282" class="d">-
</a><a href="#h45-0-283" id="h45-0-283" class="d">-// A valueCtx carries a key-value pair.  It implements Value for that key and
</a><a href="#h45-0-284" id="h45-0-284" class="d">-// delegates all other calls to the embedded Context.
</a><a href="#h45-0-285" id="h45-0-285" class="d">-type valueCtx struct {
</a><a href="#h45-0-286" id="h45-0-286" class="d">-	Context
</a><a href="#h45-0-287" id="h45-0-287" class="d">-	key, val interface{}
</a><a href="#h45-0-288" id="h45-0-288" class="d">-}
</a><a href="#h45-0-289" id="h45-0-289" class="d">-
</a><a href="#h45-0-290" id="h45-0-290" class="d">-func (c *valueCtx) String() string {
</a><a href="#h45-0-291" id="h45-0-291" class="d">-	return fmt.Sprintf(&quot;%v.WithValue(%#v, %#v)&quot;, c.Context, c.key, c.val)
</a><a href="#h45-0-292" id="h45-0-292" class="d">-}
</a><a href="#h45-0-293" id="h45-0-293" class="d">-
</a><a href="#h45-0-294" id="h45-0-294" class="d">-func (c *valueCtx) Value(key interface{}) interface{} {
</a><a href="#h45-0-295" id="h45-0-295" class="d">-	if c.key == key {
</a><a href="#h45-0-296" id="h45-0-296" class="d">-		return c.val
</a><a href="#h45-0-297" id="h45-0-297" class="d">-	}
</a><a href="#h45-0-298" id="h45-0-298" class="d">-	return c.Context.Value(key)
</a><a href="#h45-0-299" id="h45-0-299" class="d">-}
</a><b>diff --git a/<a id="h46" href="../file/vendor/golang.org/x/oauth2/AUTHORS">vendor/golang.org/x/oauth2/AUTHORS</a> b/<a href="../file/vendor/golang.org/x/oauth2/AUTHORS">vendor/golang.org/x/oauth2/AUTHORS</a></b>
<a href="#h46-0" id="h46-0" class="h">@@ -1,3 +0,0 @@
</a><a href="#h46-0-0" id="h46-0-0" class="d">-# This source code refers to The Go Authors for copyright purposes.
</a><a href="#h46-0-1" id="h46-0-1" class="d">-# The master list of authors is in the main Go distribution,
</a><a href="#h46-0-2" id="h46-0-2" class="d">-# visible at http://tip.golang.org/AUTHORS.
</a><b>diff --git a/<a id="h47" href="../file/vendor/golang.org/x/oauth2/BUILD">vendor/golang.org/x/oauth2/BUILD</a> b/<a href="../file/vendor/golang.org/x/oauth2/BUILD">vendor/golang.org/x/oauth2/BUILD</a></b>
<a href="#h47-0" id="h47-0" class="h">@@ -1,22 +0,0 @@
</a><a href="#h47-0-0" id="h47-0-0" class="d">-
</a><a href="#h47-0-1" id="h47-0-1" class="d">-load(&quot;@io_bazel_rules_go//go:def.bzl&quot;,
</a><a href="#h47-0-2" id="h47-0-2" class="d">-  &quot;go_binary&quot;,
</a><a href="#h47-0-3" id="h47-0-3" class="d">-  &quot;go_library&quot;,
</a><a href="#h47-0-4" id="h47-0-4" class="d">-  &quot;go_test&quot;,
</a><a href="#h47-0-5" id="h47-0-5" class="d">-)
</a><a href="#h47-0-6" id="h47-0-6" class="d">-
</a><a href="#h47-0-7" id="h47-0-7" class="d">-go_library(
</a><a href="#h47-0-8" id="h47-0-8" class="d">-name = &quot;go_default_library&quot;,
</a><a href="#h47-0-9" id="h47-0-9" class="d">-  srcs = [
</a><a href="#h47-0-10" id="h47-0-10" class="d">-    &quot;oauth2.go&quot;,
</a><a href="#h47-0-11" id="h47-0-11" class="d">-    &quot;token.go&quot;,
</a><a href="#h47-0-12" id="h47-0-12" class="d">-    &quot;transport.go&quot;,
</a><a href="#h47-0-13" id="h47-0-13" class="d">-  ],
</a><a href="#h47-0-14" id="h47-0-14" class="d">-  deps = [
</a><a href="#h47-0-15" id="h47-0-15" class="d">-    &quot;//vendor/golang.org/x/net/context:go_default_library&quot;,
</a><a href="#h47-0-16" id="h47-0-16" class="d">-    &quot;//vendor/golang.org/x/oauth2/internal:go_default_library&quot;,
</a><a href="#h47-0-17" id="h47-0-17" class="d">-  ],
</a><a href="#h47-0-18" id="h47-0-18" class="d">-  visibility = [&quot;//visibility:public&quot;],
</a><a href="#h47-0-19" id="h47-0-19" class="d">-)
</a><a href="#h47-0-20" id="h47-0-20" class="d">-
</a><a href="#h47-0-21" id="h47-0-21" class="d">-
</a><b>diff --git a/<a id="h48" href="../file/vendor/golang.org/x/oauth2/CONTRIBUTING.md">vendor/golang.org/x/oauth2/CONTRIBUTING.md</a> b/<a href="../file/vendor/golang.org/x/oauth2/CONTRIBUTING.md">vendor/golang.org/x/oauth2/CONTRIBUTING.md</a></b>
<a href="#h48-0" id="h48-0" class="h">@@ -1,31 +0,0 @@
</a><a href="#h48-0-0" id="h48-0-0" class="d">-# Contributing to Go
</a><a href="#h48-0-1" id="h48-0-1" class="d">-
</a><a href="#h48-0-2" id="h48-0-2" class="d">-Go is an open source project.
</a><a href="#h48-0-3" id="h48-0-3" class="d">-
</a><a href="#h48-0-4" id="h48-0-4" class="d">-It is the work of hundreds of contributors. We appreciate your help!
</a><a href="#h48-0-5" id="h48-0-5" class="d">-
</a><a href="#h48-0-6" id="h48-0-6" class="d">-
</a><a href="#h48-0-7" id="h48-0-7" class="d">-## Filing issues
</a><a href="#h48-0-8" id="h48-0-8" class="d">-
</a><a href="#h48-0-9" id="h48-0-9" class="d">-When [filing an issue](https://github.com/golang/oauth2/issues), make sure to answer these five questions:
</a><a href="#h48-0-10" id="h48-0-10" class="d">-
</a><a href="#h48-0-11" id="h48-0-11" class="d">-1. What version of Go are you using (`go version`)?
</a><a href="#h48-0-12" id="h48-0-12" class="d">-2. What operating system and processor architecture are you using?
</a><a href="#h48-0-13" id="h48-0-13" class="d">-3. What did you do?
</a><a href="#h48-0-14" id="h48-0-14" class="d">-4. What did you expect to see?
</a><a href="#h48-0-15" id="h48-0-15" class="d">-5. What did you see instead?
</a><a href="#h48-0-16" id="h48-0-16" class="d">-
</a><a href="#h48-0-17" id="h48-0-17" class="d">-General questions should go to the [golang-nuts mailing list](https://groups.google.com/group/golang-nuts) instead of the issue tracker.
</a><a href="#h48-0-18" id="h48-0-18" class="d">-The gophers there will answer or ask you to file an issue if you&#39;ve tripped over a bug.
</a><a href="#h48-0-19" id="h48-0-19" class="d">-
</a><a href="#h48-0-20" id="h48-0-20" class="d">-## Contributing code
</a><a href="#h48-0-21" id="h48-0-21" class="d">-
</a><a href="#h48-0-22" id="h48-0-22" class="d">-Please read the [Contribution Guidelines](https://golang.org/doc/contribute.html)
</a><a href="#h48-0-23" id="h48-0-23" class="d">-before sending patches.
</a><a href="#h48-0-24" id="h48-0-24" class="d">-
</a><a href="#h48-0-25" id="h48-0-25" class="d">-**We do not accept GitHub pull requests**
</a><a href="#h48-0-26" id="h48-0-26" class="d">-(we use [Gerrit](https://code.google.com/p/gerrit/) instead for code review).
</a><a href="#h48-0-27" id="h48-0-27" class="d">-
</a><a href="#h48-0-28" id="h48-0-28" class="d">-Unless otherwise noted, the Go source files are distributed under
</a><a href="#h48-0-29" id="h48-0-29" class="d">-the BSD-style license found in the LICENSE file.
</a><a href="#h48-0-30" id="h48-0-30" class="d">-
</a><b>diff --git a/<a id="h49" href="../file/vendor/golang.org/x/oauth2/CONTRIBUTORS">vendor/golang.org/x/oauth2/CONTRIBUTORS</a> b/<a href="../file/vendor/golang.org/x/oauth2/CONTRIBUTORS">vendor/golang.org/x/oauth2/CONTRIBUTORS</a></b>
<a href="#h49-0" id="h49-0" class="h">@@ -1,3 +0,0 @@
</a><a href="#h49-0-0" id="h49-0-0" class="d">-# This source code was written by the Go contributors.
</a><a href="#h49-0-1" id="h49-0-1" class="d">-# The master list of contributors is in the main Go distribution,
</a><a href="#h49-0-2" id="h49-0-2" class="d">-# visible at http://tip.golang.org/CONTRIBUTORS.
</a><b>diff --git a/<a id="h50" href="../file/vendor/golang.org/x/oauth2/LICENSE">vendor/golang.org/x/oauth2/LICENSE</a> b/<a href="../file/vendor/golang.org/x/oauth2/LICENSE">vendor/golang.org/x/oauth2/LICENSE</a></b>
<a href="#h50-0" id="h50-0" class="h">@@ -1,27 +0,0 @@
</a><a href="#h50-0-0" id="h50-0-0" class="d">-Copyright (c) 2009 The oauth2 Authors. All rights reserved.
</a><a href="#h50-0-1" id="h50-0-1" class="d">-
</a><a href="#h50-0-2" id="h50-0-2" class="d">-Redistribution and use in source and binary forms, with or without
</a><a href="#h50-0-3" id="h50-0-3" class="d">-modification, are permitted provided that the following conditions are
</a><a href="#h50-0-4" id="h50-0-4" class="d">-met:
</a><a href="#h50-0-5" id="h50-0-5" class="d">-
</a><a href="#h50-0-6" id="h50-0-6" class="d">-   * Redistributions of source code must retain the above copyright
</a><a href="#h50-0-7" id="h50-0-7" class="d">-notice, this list of conditions and the following disclaimer.
</a><a href="#h50-0-8" id="h50-0-8" class="d">-   * Redistributions in binary form must reproduce the above
</a><a href="#h50-0-9" id="h50-0-9" class="d">-copyright notice, this list of conditions and the following disclaimer
</a><a href="#h50-0-10" id="h50-0-10" class="d">-in the documentation and/or other materials provided with the
</a><a href="#h50-0-11" id="h50-0-11" class="d">-distribution.
</a><a href="#h50-0-12" id="h50-0-12" class="d">-   * Neither the name of Google Inc. nor the names of its
</a><a href="#h50-0-13" id="h50-0-13" class="d">-contributors may be used to endorse or promote products derived from
</a><a href="#h50-0-14" id="h50-0-14" class="d">-this software without specific prior written permission.
</a><a href="#h50-0-15" id="h50-0-15" class="d">-
</a><a href="#h50-0-16" id="h50-0-16" class="d">-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
</a><a href="#h50-0-17" id="h50-0-17" class="d">-&quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
</a><a href="#h50-0-18" id="h50-0-18" class="d">-LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
</a><a href="#h50-0-19" id="h50-0-19" class="d">-A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
</a><a href="#h50-0-20" id="h50-0-20" class="d">-OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
</a><a href="#h50-0-21" id="h50-0-21" class="d">-SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
</a><a href="#h50-0-22" id="h50-0-22" class="d">-LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
</a><a href="#h50-0-23" id="h50-0-23" class="d">-DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
</a><a href="#h50-0-24" id="h50-0-24" class="d">-THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
</a><a href="#h50-0-25" id="h50-0-25" class="d">-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
</a><a href="#h50-0-26" id="h50-0-26" class="d">-OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
</a><b>diff --git a/<a id="h51" href="../file/vendor/golang.org/x/oauth2/README.md">vendor/golang.org/x/oauth2/README.md</a> b/<a href="../file/vendor/golang.org/x/oauth2/README.md">vendor/golang.org/x/oauth2/README.md</a></b>
<a href="#h51-0" id="h51-0" class="h">@@ -1,64 +0,0 @@
</a><a href="#h51-0-0" id="h51-0-0" class="d">-# OAuth2 for Go
</a><a href="#h51-0-1" id="h51-0-1" class="d">-
</a><a href="#h51-0-2" id="h51-0-2" class="d">-[![Build Status](https://travis-ci.org/golang/oauth2.svg?branch=master)](https://travis-ci.org/golang/oauth2)
</a><a href="#h51-0-3" id="h51-0-3" class="d">-
</a><a href="#h51-0-4" id="h51-0-4" class="d">-oauth2 package contains a client implementation for OAuth 2.0 spec.
</a><a href="#h51-0-5" id="h51-0-5" class="d">-
</a><a href="#h51-0-6" id="h51-0-6" class="d">-## Installation
</a><a href="#h51-0-7" id="h51-0-7" class="d">-
</a><a href="#h51-0-8" id="h51-0-8" class="d">-~~~~
</a><a href="#h51-0-9" id="h51-0-9" class="d">-go get golang.org/x/oauth2
</a><a href="#h51-0-10" id="h51-0-10" class="d">-~~~~
</a><a href="#h51-0-11" id="h51-0-11" class="d">-
</a><a href="#h51-0-12" id="h51-0-12" class="d">-See godoc for further documentation and examples.
</a><a href="#h51-0-13" id="h51-0-13" class="d">-
</a><a href="#h51-0-14" id="h51-0-14" class="d">-* [godoc.org/golang.org/x/oauth2](http://godoc.org/golang.org/x/oauth2)
</a><a href="#h51-0-15" id="h51-0-15" class="d">-* [godoc.org/golang.org/x/oauth2/google](http://godoc.org/golang.org/x/oauth2/google)
</a><a href="#h51-0-16" id="h51-0-16" class="d">-
</a><a href="#h51-0-17" id="h51-0-17" class="d">-
</a><a href="#h51-0-18" id="h51-0-18" class="d">-## App Engine
</a><a href="#h51-0-19" id="h51-0-19" class="d">-
</a><a href="#h51-0-20" id="h51-0-20" class="d">-In change 96e89be (March 2015) we removed the `oauth2.Context2` type in favor
</a><a href="#h51-0-21" id="h51-0-21" class="d">-of the [`context.Context`](https://golang.org/x/net/context#Context) type from
</a><a href="#h51-0-22" id="h51-0-22" class="d">-the `golang.org/x/net/context` package
</a><a href="#h51-0-23" id="h51-0-23" class="d">-
</a><a href="#h51-0-24" id="h51-0-24" class="d">-This means its no longer possible to use the &quot;Classic App Engine&quot;
</a><a href="#h51-0-25" id="h51-0-25" class="d">-`appengine.Context` type with the `oauth2` package. (You&#39;re using
</a><a href="#h51-0-26" id="h51-0-26" class="d">-Classic App Engine if you import the package `&quot;appengine&quot;`.)
</a><a href="#h51-0-27" id="h51-0-27" class="d">-
</a><a href="#h51-0-28" id="h51-0-28" class="d">-To work around this, you may use the new `&quot;google.golang.org/appengine&quot;`
</a><a href="#h51-0-29" id="h51-0-29" class="d">-package. This package has almost the same API as the `&quot;appengine&quot;` package,
</a><a href="#h51-0-30" id="h51-0-30" class="d">-but it can be fetched with `go get` and used on &quot;Managed VMs&quot; and well as
</a><a href="#h51-0-31" id="h51-0-31" class="d">-Classic App Engine.
</a><a href="#h51-0-32" id="h51-0-32" class="d">-
</a><a href="#h51-0-33" id="h51-0-33" class="d">-See the [new `appengine` package&#39;s readme](https://github.com/golang/appengine#updating-a-go-app-engine-app)
</a><a href="#h51-0-34" id="h51-0-34" class="d">-for information on updating your app.
</a><a href="#h51-0-35" id="h51-0-35" class="d">-
</a><a href="#h51-0-36" id="h51-0-36" class="d">-If you don&#39;t want to update your entire app to use the new App Engine packages,
</a><a href="#h51-0-37" id="h51-0-37" class="d">-you may use both sets of packages in parallel, using only the new packages
</a><a href="#h51-0-38" id="h51-0-38" class="d">-with the `oauth2` package.
</a><a href="#h51-0-39" id="h51-0-39" class="d">-
</a><a href="#h51-0-40" id="h51-0-40" class="d">-	import (
</a><a href="#h51-0-41" id="h51-0-41" class="d">-		&quot;golang.org/x/net/context&quot;
</a><a href="#h51-0-42" id="h51-0-42" class="d">-		&quot;golang.org/x/oauth2&quot;
</a><a href="#h51-0-43" id="h51-0-43" class="d">-		&quot;golang.org/x/oauth2/google&quot;
</a><a href="#h51-0-44" id="h51-0-44" class="d">-		newappengine &quot;google.golang.org/appengine&quot;
</a><a href="#h51-0-45" id="h51-0-45" class="d">-		newurlfetch &quot;google.golang.org/appengine/urlfetch&quot;
</a><a href="#h51-0-46" id="h51-0-46" class="d">-
</a><a href="#h51-0-47" id="h51-0-47" class="d">-		&quot;appengine&quot;
</a><a href="#h51-0-48" id="h51-0-48" class="d">-	)
</a><a href="#h51-0-49" id="h51-0-49" class="d">-
</a><a href="#h51-0-50" id="h51-0-50" class="d">-	func handler(w http.ResponseWriter, r *http.Request) {
</a><a href="#h51-0-51" id="h51-0-51" class="d">-		var c appengine.Context = appengine.NewContext(r)
</a><a href="#h51-0-52" id="h51-0-52" class="d">-		c.Infof(&quot;Logging a message with the old package&quot;)
</a><a href="#h51-0-53" id="h51-0-53" class="d">-
</a><a href="#h51-0-54" id="h51-0-54" class="d">-		var ctx context.Context = newappengine.NewContext(r)
</a><a href="#h51-0-55" id="h51-0-55" class="d">-		client := &amp;http.Client{
</a><a href="#h51-0-56" id="h51-0-56" class="d">-			Transport: &amp;oauth2.Transport{
</a><a href="#h51-0-57" id="h51-0-57" class="d">-				Source: google.AppEngineTokenSource(ctx, &quot;scope&quot;),
</a><a href="#h51-0-58" id="h51-0-58" class="d">-				Base:   &amp;newurlfetch.Transport{Context: ctx},
</a><a href="#h51-0-59" id="h51-0-59" class="d">-			},
</a><a href="#h51-0-60" id="h51-0-60" class="d">-		}
</a><a href="#h51-0-61" id="h51-0-61" class="d">-		client.Get(&quot;...&quot;)
</a><a href="#h51-0-62" id="h51-0-62" class="d">-	}
</a><a href="#h51-0-63" id="h51-0-63" class="d">-
</a><b>diff --git a/<a id="h52" href="../file/vendor/golang.org/x/oauth2/client_appengine.go">vendor/golang.org/x/oauth2/client_appengine.go</a> b/<a href="../file/vendor/golang.org/x/oauth2/client_appengine.go">vendor/golang.org/x/oauth2/client_appengine.go</a></b>
<a href="#h52-0" id="h52-0" class="h">@@ -1,25 +0,0 @@
</a><a href="#h52-0-0" id="h52-0-0" class="d">-// Copyright 2014 The Go Authors. All rights reserved.
</a><a href="#h52-0-1" id="h52-0-1" class="d">-// Use of this source code is governed by a BSD-style
</a><a href="#h52-0-2" id="h52-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h52-0-3" id="h52-0-3" class="d">-
</a><a href="#h52-0-4" id="h52-0-4" class="d">-// +build appengine
</a><a href="#h52-0-5" id="h52-0-5" class="d">-
</a><a href="#h52-0-6" id="h52-0-6" class="d">-// App Engine hooks.
</a><a href="#h52-0-7" id="h52-0-7" class="d">-
</a><a href="#h52-0-8" id="h52-0-8" class="d">-package oauth2
</a><a href="#h52-0-9" id="h52-0-9" class="d">-
</a><a href="#h52-0-10" id="h52-0-10" class="d">-import (
</a><a href="#h52-0-11" id="h52-0-11" class="d">-	&quot;net/http&quot;
</a><a href="#h52-0-12" id="h52-0-12" class="d">-
</a><a href="#h52-0-13" id="h52-0-13" class="d">-	&quot;golang.org/x/net/context&quot;
</a><a href="#h52-0-14" id="h52-0-14" class="d">-	&quot;golang.org/x/oauth2/internal&quot;
</a><a href="#h52-0-15" id="h52-0-15" class="d">-	&quot;google.golang.org/appengine/urlfetch&quot;
</a><a href="#h52-0-16" id="h52-0-16" class="d">-)
</a><a href="#h52-0-17" id="h52-0-17" class="d">-
</a><a href="#h52-0-18" id="h52-0-18" class="d">-func init() {
</a><a href="#h52-0-19" id="h52-0-19" class="d">-	internal.RegisterContextClientFunc(contextClientAppEngine)
</a><a href="#h52-0-20" id="h52-0-20" class="d">-}
</a><a href="#h52-0-21" id="h52-0-21" class="d">-
</a><a href="#h52-0-22" id="h52-0-22" class="d">-func contextClientAppEngine(ctx context.Context) (*http.Client, error) {
</a><a href="#h52-0-23" id="h52-0-23" class="d">-	return urlfetch.Client(ctx), nil
</a><a href="#h52-0-24" id="h52-0-24" class="d">-}
</a><b>diff --git a/<a id="h53" href="../file/vendor/golang.org/x/oauth2/internal/BUILD">vendor/golang.org/x/oauth2/internal/BUILD</a> b/<a href="../file/vendor/golang.org/x/oauth2/internal/BUILD">vendor/golang.org/x/oauth2/internal/BUILD</a></b>
<a href="#h53-0" id="h53-0" class="h">@@ -1,21 +0,0 @@
</a><a href="#h53-0-0" id="h53-0-0" class="d">-
</a><a href="#h53-0-1" id="h53-0-1" class="d">-load(&quot;@io_bazel_rules_go//go:def.bzl&quot;,
</a><a href="#h53-0-2" id="h53-0-2" class="d">-  &quot;go_binary&quot;,
</a><a href="#h53-0-3" id="h53-0-3" class="d">-  &quot;go_library&quot;,
</a><a href="#h53-0-4" id="h53-0-4" class="d">-  &quot;go_test&quot;,
</a><a href="#h53-0-5" id="h53-0-5" class="d">-)
</a><a href="#h53-0-6" id="h53-0-6" class="d">-
</a><a href="#h53-0-7" id="h53-0-7" class="d">-go_library(
</a><a href="#h53-0-8" id="h53-0-8" class="d">-name = &quot;go_default_library&quot;,
</a><a href="#h53-0-9" id="h53-0-9" class="d">-  srcs = [
</a><a href="#h53-0-10" id="h53-0-10" class="d">-    &quot;oauth2.go&quot;,
</a><a href="#h53-0-11" id="h53-0-11" class="d">-    &quot;token.go&quot;,
</a><a href="#h53-0-12" id="h53-0-12" class="d">-    &quot;transport.go&quot;,
</a><a href="#h53-0-13" id="h53-0-13" class="d">-  ],
</a><a href="#h53-0-14" id="h53-0-14" class="d">-  deps = [
</a><a href="#h53-0-15" id="h53-0-15" class="d">-    &quot;//vendor/golang.org/x/net/context:go_default_library&quot;,
</a><a href="#h53-0-16" id="h53-0-16" class="d">-  ],
</a><a href="#h53-0-17" id="h53-0-17" class="d">-  visibility = [&quot;//visibility:public&quot;],
</a><a href="#h53-0-18" id="h53-0-18" class="d">-)
</a><a href="#h53-0-19" id="h53-0-19" class="d">-
</a><a href="#h53-0-20" id="h53-0-20" class="d">-
</a><b>diff --git a/<a id="h54" href="../file/vendor/golang.org/x/oauth2/internal/oauth2.go">vendor/golang.org/x/oauth2/internal/oauth2.go</a> b/<a href="../file/vendor/golang.org/x/oauth2/internal/oauth2.go">vendor/golang.org/x/oauth2/internal/oauth2.go</a></b>
<a href="#h54-0" id="h54-0" class="h">@@ -1,76 +0,0 @@
</a><a href="#h54-0-0" id="h54-0-0" class="d">-// Copyright 2014 The Go Authors. All rights reserved.
</a><a href="#h54-0-1" id="h54-0-1" class="d">-// Use of this source code is governed by a BSD-style
</a><a href="#h54-0-2" id="h54-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h54-0-3" id="h54-0-3" class="d">-
</a><a href="#h54-0-4" id="h54-0-4" class="d">-// Package internal contains support packages for oauth2 package.
</a><a href="#h54-0-5" id="h54-0-5" class="d">-package internal
</a><a href="#h54-0-6" id="h54-0-6" class="d">-
</a><a href="#h54-0-7" id="h54-0-7" class="d">-import (
</a><a href="#h54-0-8" id="h54-0-8" class="d">-	&quot;bufio&quot;
</a><a href="#h54-0-9" id="h54-0-9" class="d">-	&quot;crypto/rsa&quot;
</a><a href="#h54-0-10" id="h54-0-10" class="d">-	&quot;crypto/x509&quot;
</a><a href="#h54-0-11" id="h54-0-11" class="d">-	&quot;encoding/pem&quot;
</a><a href="#h54-0-12" id="h54-0-12" class="d">-	&quot;errors&quot;
</a><a href="#h54-0-13" id="h54-0-13" class="d">-	&quot;fmt&quot;
</a><a href="#h54-0-14" id="h54-0-14" class="d">-	&quot;io&quot;
</a><a href="#h54-0-15" id="h54-0-15" class="d">-	&quot;strings&quot;
</a><a href="#h54-0-16" id="h54-0-16" class="d">-)
</a><a href="#h54-0-17" id="h54-0-17" class="d">-
</a><a href="#h54-0-18" id="h54-0-18" class="d">-// ParseKey converts the binary contents of a private key file
</a><a href="#h54-0-19" id="h54-0-19" class="d">-// to an *rsa.PrivateKey. It detects whether the private key is in a
</a><a href="#h54-0-20" id="h54-0-20" class="d">-// PEM container or not. If so, it extracts the the private key
</a><a href="#h54-0-21" id="h54-0-21" class="d">-// from PEM container before conversion. It only supports PEM
</a><a href="#h54-0-22" id="h54-0-22" class="d">-// containers with no passphrase.
</a><a href="#h54-0-23" id="h54-0-23" class="d">-func ParseKey(key []byte) (*rsa.PrivateKey, error) {
</a><a href="#h54-0-24" id="h54-0-24" class="d">-	block, _ := pem.Decode(key)
</a><a href="#h54-0-25" id="h54-0-25" class="d">-	if block != nil {
</a><a href="#h54-0-26" id="h54-0-26" class="d">-		key = block.Bytes
</a><a href="#h54-0-27" id="h54-0-27" class="d">-	}
</a><a href="#h54-0-28" id="h54-0-28" class="d">-	parsedKey, err := x509.ParsePKCS8PrivateKey(key)
</a><a href="#h54-0-29" id="h54-0-29" class="d">-	if err != nil {
</a><a href="#h54-0-30" id="h54-0-30" class="d">-		parsedKey, err = x509.ParsePKCS1PrivateKey(key)
</a><a href="#h54-0-31" id="h54-0-31" class="d">-		if err != nil {
</a><a href="#h54-0-32" id="h54-0-32" class="d">-			return nil, fmt.Errorf(&quot;private key should be a PEM or plain PKSC1 or PKCS8; parse error: %v&quot;, err)
</a><a href="#h54-0-33" id="h54-0-33" class="d">-		}
</a><a href="#h54-0-34" id="h54-0-34" class="d">-	}
</a><a href="#h54-0-35" id="h54-0-35" class="d">-	parsed, ok := parsedKey.(*rsa.PrivateKey)
</a><a href="#h54-0-36" id="h54-0-36" class="d">-	if !ok {
</a><a href="#h54-0-37" id="h54-0-37" class="d">-		return nil, errors.New(&quot;private key is invalid&quot;)
</a><a href="#h54-0-38" id="h54-0-38" class="d">-	}
</a><a href="#h54-0-39" id="h54-0-39" class="d">-	return parsed, nil
</a><a href="#h54-0-40" id="h54-0-40" class="d">-}
</a><a href="#h54-0-41" id="h54-0-41" class="d">-
</a><a href="#h54-0-42" id="h54-0-42" class="d">-func ParseINI(ini io.Reader) (map[string]map[string]string, error) {
</a><a href="#h54-0-43" id="h54-0-43" class="d">-	result := map[string]map[string]string{
</a><a href="#h54-0-44" id="h54-0-44" class="d">-		&quot;&quot;: map[string]string{}, // root section
</a><a href="#h54-0-45" id="h54-0-45" class="d">-	}
</a><a href="#h54-0-46" id="h54-0-46" class="d">-	scanner := bufio.NewScanner(ini)
</a><a href="#h54-0-47" id="h54-0-47" class="d">-	currentSection := &quot;&quot;
</a><a href="#h54-0-48" id="h54-0-48" class="d">-	for scanner.Scan() {
</a><a href="#h54-0-49" id="h54-0-49" class="d">-		line := strings.TrimSpace(scanner.Text())
</a><a href="#h54-0-50" id="h54-0-50" class="d">-		if strings.HasPrefix(line, &quot;;&quot;) {
</a><a href="#h54-0-51" id="h54-0-51" class="d">-			// comment.
</a><a href="#h54-0-52" id="h54-0-52" class="d">-			continue
</a><a href="#h54-0-53" id="h54-0-53" class="d">-		}
</a><a href="#h54-0-54" id="h54-0-54" class="d">-		if strings.HasPrefix(line, &quot;[&quot;) &amp;&amp; strings.HasSuffix(line, &quot;]&quot;) {
</a><a href="#h54-0-55" id="h54-0-55" class="d">-			currentSection = strings.TrimSpace(line[1 : len(line)-1])
</a><a href="#h54-0-56" id="h54-0-56" class="d">-			result[currentSection] = map[string]string{}
</a><a href="#h54-0-57" id="h54-0-57" class="d">-			continue
</a><a href="#h54-0-58" id="h54-0-58" class="d">-		}
</a><a href="#h54-0-59" id="h54-0-59" class="d">-		parts := strings.SplitN(line, &quot;=&quot;, 2)
</a><a href="#h54-0-60" id="h54-0-60" class="d">-		if len(parts) == 2 &amp;&amp; parts[0] != &quot;&quot; {
</a><a href="#h54-0-61" id="h54-0-61" class="d">-			result[currentSection][strings.TrimSpace(parts[0])] = strings.TrimSpace(parts[1])
</a><a href="#h54-0-62" id="h54-0-62" class="d">-		}
</a><a href="#h54-0-63" id="h54-0-63" class="d">-	}
</a><a href="#h54-0-64" id="h54-0-64" class="d">-	if err := scanner.Err(); err != nil {
</a><a href="#h54-0-65" id="h54-0-65" class="d">-		return nil, fmt.Errorf(&quot;error scanning ini: %v&quot;, err)
</a><a href="#h54-0-66" id="h54-0-66" class="d">-	}
</a><a href="#h54-0-67" id="h54-0-67" class="d">-	return result, nil
</a><a href="#h54-0-68" id="h54-0-68" class="d">-}
</a><a href="#h54-0-69" id="h54-0-69" class="d">-
</a><a href="#h54-0-70" id="h54-0-70" class="d">-func CondVal(v string) []string {
</a><a href="#h54-0-71" id="h54-0-71" class="d">-	if v == &quot;&quot; {
</a><a href="#h54-0-72" id="h54-0-72" class="d">-		return nil
</a><a href="#h54-0-73" id="h54-0-73" class="d">-	}
</a><a href="#h54-0-74" id="h54-0-74" class="d">-	return []string{v}
</a><a href="#h54-0-75" id="h54-0-75" class="d">-}
</a><b>diff --git a/<a id="h55" href="../file/vendor/golang.org/x/oauth2/internal/token.go">vendor/golang.org/x/oauth2/internal/token.go</a> b/<a href="../file/vendor/golang.org/x/oauth2/internal/token.go">vendor/golang.org/x/oauth2/internal/token.go</a></b>
<a href="#h55-0" id="h55-0" class="h">@@ -1,225 +0,0 @@
</a><a href="#h55-0-0" id="h55-0-0" class="d">-// Copyright 2014 The Go Authors. All rights reserved.
</a><a href="#h55-0-1" id="h55-0-1" class="d">-// Use of this source code is governed by a BSD-style
</a><a href="#h55-0-2" id="h55-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h55-0-3" id="h55-0-3" class="d">-
</a><a href="#h55-0-4" id="h55-0-4" class="d">-// Package internal contains support packages for oauth2 package.
</a><a href="#h55-0-5" id="h55-0-5" class="d">-package internal
</a><a href="#h55-0-6" id="h55-0-6" class="d">-
</a><a href="#h55-0-7" id="h55-0-7" class="d">-import (
</a><a href="#h55-0-8" id="h55-0-8" class="d">-	&quot;encoding/json&quot;
</a><a href="#h55-0-9" id="h55-0-9" class="d">-	&quot;fmt&quot;
</a><a href="#h55-0-10" id="h55-0-10" class="d">-	&quot;io&quot;
</a><a href="#h55-0-11" id="h55-0-11" class="d">-	&quot;io/ioutil&quot;
</a><a href="#h55-0-12" id="h55-0-12" class="d">-	&quot;mime&quot;
</a><a href="#h55-0-13" id="h55-0-13" class="d">-	&quot;net/http&quot;
</a><a href="#h55-0-14" id="h55-0-14" class="d">-	&quot;net/url&quot;
</a><a href="#h55-0-15" id="h55-0-15" class="d">-	&quot;strconv&quot;
</a><a href="#h55-0-16" id="h55-0-16" class="d">-	&quot;strings&quot;
</a><a href="#h55-0-17" id="h55-0-17" class="d">-	&quot;time&quot;
</a><a href="#h55-0-18" id="h55-0-18" class="d">-
</a><a href="#h55-0-19" id="h55-0-19" class="d">-	&quot;golang.org/x/net/context&quot;
</a><a href="#h55-0-20" id="h55-0-20" class="d">-)
</a><a href="#h55-0-21" id="h55-0-21" class="d">-
</a><a href="#h55-0-22" id="h55-0-22" class="d">-// Token represents the crendentials used to authorize
</a><a href="#h55-0-23" id="h55-0-23" class="d">-// the requests to access protected resources on the OAuth 2.0
</a><a href="#h55-0-24" id="h55-0-24" class="d">-// provider&#39;s backend.
</a><a href="#h55-0-25" id="h55-0-25" class="d">-//
</a><a href="#h55-0-26" id="h55-0-26" class="d">-// This type is a mirror of oauth2.Token and exists to break
</a><a href="#h55-0-27" id="h55-0-27" class="d">-// an otherwise-circular dependency. Other internal packages
</a><a href="#h55-0-28" id="h55-0-28" class="d">-// should convert this Token into an oauth2.Token before use.
</a><a href="#h55-0-29" id="h55-0-29" class="d">-type Token struct {
</a><a href="#h55-0-30" id="h55-0-30" class="d">-	// AccessToken is the token that authorizes and authenticates
</a><a href="#h55-0-31" id="h55-0-31" class="d">-	// the requests.
</a><a href="#h55-0-32" id="h55-0-32" class="d">-	AccessToken string
</a><a href="#h55-0-33" id="h55-0-33" class="d">-
</a><a href="#h55-0-34" id="h55-0-34" class="d">-	// TokenType is the type of token.
</a><a href="#h55-0-35" id="h55-0-35" class="d">-	// The Type method returns either this or &quot;Bearer&quot;, the default.
</a><a href="#h55-0-36" id="h55-0-36" class="d">-	TokenType string
</a><a href="#h55-0-37" id="h55-0-37" class="d">-
</a><a href="#h55-0-38" id="h55-0-38" class="d">-	// RefreshToken is a token that&#39;s used by the application
</a><a href="#h55-0-39" id="h55-0-39" class="d">-	// (as opposed to the user) to refresh the access token
</a><a href="#h55-0-40" id="h55-0-40" class="d">-	// if it expires.
</a><a href="#h55-0-41" id="h55-0-41" class="d">-	RefreshToken string
</a><a href="#h55-0-42" id="h55-0-42" class="d">-
</a><a href="#h55-0-43" id="h55-0-43" class="d">-	// Expiry is the optional expiration time of the access token.
</a><a href="#h55-0-44" id="h55-0-44" class="d">-	//
</a><a href="#h55-0-45" id="h55-0-45" class="d">-	// If zero, TokenSource implementations will reuse the same
</a><a href="#h55-0-46" id="h55-0-46" class="d">-	// token forever and RefreshToken or equivalent
</a><a href="#h55-0-47" id="h55-0-47" class="d">-	// mechanisms for that TokenSource will not be used.
</a><a href="#h55-0-48" id="h55-0-48" class="d">-	Expiry time.Time
</a><a href="#h55-0-49" id="h55-0-49" class="d">-
</a><a href="#h55-0-50" id="h55-0-50" class="d">-	// Raw optionally contains extra metadata from the server
</a><a href="#h55-0-51" id="h55-0-51" class="d">-	// when updating a token.
</a><a href="#h55-0-52" id="h55-0-52" class="d">-	Raw interface{}
</a><a href="#h55-0-53" id="h55-0-53" class="d">-}
</a><a href="#h55-0-54" id="h55-0-54" class="d">-
</a><a href="#h55-0-55" id="h55-0-55" class="d">-// tokenJSON is the struct representing the HTTP response from OAuth2
</a><a href="#h55-0-56" id="h55-0-56" class="d">-// providers returning a token in JSON form.
</a><a href="#h55-0-57" id="h55-0-57" class="d">-type tokenJSON struct {
</a><a href="#h55-0-58" id="h55-0-58" class="d">-	AccessToken  string         `json:&quot;access_token&quot;`
</a><a href="#h55-0-59" id="h55-0-59" class="d">-	TokenType    string         `json:&quot;token_type&quot;`
</a><a href="#h55-0-60" id="h55-0-60" class="d">-	RefreshToken string         `json:&quot;refresh_token&quot;`
</a><a href="#h55-0-61" id="h55-0-61" class="d">-	ExpiresIn    expirationTime `json:&quot;expires_in&quot;` // at least PayPal returns string, while most return number
</a><a href="#h55-0-62" id="h55-0-62" class="d">-	Expires      expirationTime `json:&quot;expires&quot;`    // broken Facebook spelling of expires_in
</a><a href="#h55-0-63" id="h55-0-63" class="d">-}
</a><a href="#h55-0-64" id="h55-0-64" class="d">-
</a><a href="#h55-0-65" id="h55-0-65" class="d">-func (e *tokenJSON) expiry() (t time.Time) {
</a><a href="#h55-0-66" id="h55-0-66" class="d">-	if v := e.ExpiresIn; v != 0 {
</a><a href="#h55-0-67" id="h55-0-67" class="d">-		return time.Now().Add(time.Duration(v) * time.Second)
</a><a href="#h55-0-68" id="h55-0-68" class="d">-	}
</a><a href="#h55-0-69" id="h55-0-69" class="d">-	if v := e.Expires; v != 0 {
</a><a href="#h55-0-70" id="h55-0-70" class="d">-		return time.Now().Add(time.Duration(v) * time.Second)
</a><a href="#h55-0-71" id="h55-0-71" class="d">-	}
</a><a href="#h55-0-72" id="h55-0-72" class="d">-	return
</a><a href="#h55-0-73" id="h55-0-73" class="d">-}
</a><a href="#h55-0-74" id="h55-0-74" class="d">-
</a><a href="#h55-0-75" id="h55-0-75" class="d">-type expirationTime int32
</a><a href="#h55-0-76" id="h55-0-76" class="d">-
</a><a href="#h55-0-77" id="h55-0-77" class="d">-func (e *expirationTime) UnmarshalJSON(b []byte) error {
</a><a href="#h55-0-78" id="h55-0-78" class="d">-	var n json.Number
</a><a href="#h55-0-79" id="h55-0-79" class="d">-	err := json.Unmarshal(b, &amp;n)
</a><a href="#h55-0-80" id="h55-0-80" class="d">-	if err != nil {
</a><a href="#h55-0-81" id="h55-0-81" class="d">-		return err
</a><a href="#h55-0-82" id="h55-0-82" class="d">-	}
</a><a href="#h55-0-83" id="h55-0-83" class="d">-	i, err := n.Int64()
</a><a href="#h55-0-84" id="h55-0-84" class="d">-	if err != nil {
</a><a href="#h55-0-85" id="h55-0-85" class="d">-		return err
</a><a href="#h55-0-86" id="h55-0-86" class="d">-	}
</a><a href="#h55-0-87" id="h55-0-87" class="d">-	*e = expirationTime(i)
</a><a href="#h55-0-88" id="h55-0-88" class="d">-	return nil
</a><a href="#h55-0-89" id="h55-0-89" class="d">-}
</a><a href="#h55-0-90" id="h55-0-90" class="d">-
</a><a href="#h55-0-91" id="h55-0-91" class="d">-var brokenAuthHeaderProviders = []string{
</a><a href="#h55-0-92" id="h55-0-92" class="d">-	&quot;https://accounts.google.com/&quot;,
</a><a href="#h55-0-93" id="h55-0-93" class="d">-	&quot;https://api.dropbox.com/&quot;,
</a><a href="#h55-0-94" id="h55-0-94" class="d">-	&quot;https://api.dropboxapi.com/&quot;,
</a><a href="#h55-0-95" id="h55-0-95" class="d">-	&quot;https://api.instagram.com/&quot;,
</a><a href="#h55-0-96" id="h55-0-96" class="d">-	&quot;https://api.netatmo.net/&quot;,
</a><a href="#h55-0-97" id="h55-0-97" class="d">-	&quot;https://api.odnoklassniki.ru/&quot;,
</a><a href="#h55-0-98" id="h55-0-98" class="d">-	&quot;https://api.pushbullet.com/&quot;,
</a><a href="#h55-0-99" id="h55-0-99" class="d">-	&quot;https://api.soundcloud.com/&quot;,
</a><a href="#h55-0-100" id="h55-0-100" class="d">-	&quot;https://api.twitch.tv/&quot;,
</a><a href="#h55-0-101" id="h55-0-101" class="d">-	&quot;https://app.box.com/&quot;,
</a><a href="#h55-0-102" id="h55-0-102" class="d">-	&quot;https://connect.stripe.com/&quot;,
</a><a href="#h55-0-103" id="h55-0-103" class="d">-	&quot;https://login.microsoftonline.com/&quot;,
</a><a href="#h55-0-104" id="h55-0-104" class="d">-	&quot;https://login.salesforce.com/&quot;,
</a><a href="#h55-0-105" id="h55-0-105" class="d">-	&quot;https://oauth.sandbox.trainingpeaks.com/&quot;,
</a><a href="#h55-0-106" id="h55-0-106" class="d">-	&quot;https://oauth.trainingpeaks.com/&quot;,
</a><a href="#h55-0-107" id="h55-0-107" class="d">-	&quot;https://oauth.vk.com/&quot;,
</a><a href="#h55-0-108" id="h55-0-108" class="d">-	&quot;https://openapi.baidu.com/&quot;,
</a><a href="#h55-0-109" id="h55-0-109" class="d">-	&quot;https://slack.com/&quot;,
</a><a href="#h55-0-110" id="h55-0-110" class="d">-	&quot;https://test-sandbox.auth.corp.google.com&quot;,
</a><a href="#h55-0-111" id="h55-0-111" class="d">-	&quot;https://test.salesforce.com/&quot;,
</a><a href="#h55-0-112" id="h55-0-112" class="d">-	&quot;https://user.gini.net/&quot;,
</a><a href="#h55-0-113" id="h55-0-113" class="d">-	&quot;https://www.douban.com/&quot;,
</a><a href="#h55-0-114" id="h55-0-114" class="d">-	&quot;https://www.googleapis.com/&quot;,
</a><a href="#h55-0-115" id="h55-0-115" class="d">-	&quot;https://www.linkedin.com/&quot;,
</a><a href="#h55-0-116" id="h55-0-116" class="d">-	&quot;https://www.strava.com/oauth/&quot;,
</a><a href="#h55-0-117" id="h55-0-117" class="d">-	&quot;https://www.wunderlist.com/oauth/&quot;,
</a><a href="#h55-0-118" id="h55-0-118" class="d">-	&quot;https://api.patreon.com/&quot;,
</a><a href="#h55-0-119" id="h55-0-119" class="d">-}
</a><a href="#h55-0-120" id="h55-0-120" class="d">-
</a><a href="#h55-0-121" id="h55-0-121" class="d">-func RegisterBrokenAuthHeaderProvider(tokenURL string) {
</a><a href="#h55-0-122" id="h55-0-122" class="d">-	brokenAuthHeaderProviders = append(brokenAuthHeaderProviders, tokenURL)
</a><a href="#h55-0-123" id="h55-0-123" class="d">-}
</a><a href="#h55-0-124" id="h55-0-124" class="d">-
</a><a href="#h55-0-125" id="h55-0-125" class="d">-// providerAuthHeaderWorks reports whether the OAuth2 server identified by the tokenURL
</a><a href="#h55-0-126" id="h55-0-126" class="d">-// implements the OAuth2 spec correctly
</a><a href="#h55-0-127" id="h55-0-127" class="d">-// See https://code.google.com/p/goauth2/issues/detail?id=31 for background.
</a><a href="#h55-0-128" id="h55-0-128" class="d">-// In summary:
</a><a href="#h55-0-129" id="h55-0-129" class="d">-// - Reddit only accepts client secret in the Authorization header
</a><a href="#h55-0-130" id="h55-0-130" class="d">-// - Dropbox accepts either it in URL param or Auth header, but not both.
</a><a href="#h55-0-131" id="h55-0-131" class="d">-// - Google only accepts URL param (not spec compliant?), not Auth header
</a><a href="#h55-0-132" id="h55-0-132" class="d">-// - Stripe only accepts client secret in Auth header with Bearer method, not Basic
</a><a href="#h55-0-133" id="h55-0-133" class="d">-func providerAuthHeaderWorks(tokenURL string) bool {
</a><a href="#h55-0-134" id="h55-0-134" class="d">-	for _, s := range brokenAuthHeaderProviders {
</a><a href="#h55-0-135" id="h55-0-135" class="d">-		if strings.HasPrefix(tokenURL, s) {
</a><a href="#h55-0-136" id="h55-0-136" class="d">-			// Some sites fail to implement the OAuth2 spec fully.
</a><a href="#h55-0-137" id="h55-0-137" class="d">-			return false
</a><a href="#h55-0-138" id="h55-0-138" class="d">-		}
</a><a href="#h55-0-139" id="h55-0-139" class="d">-	}
</a><a href="#h55-0-140" id="h55-0-140" class="d">-
</a><a href="#h55-0-141" id="h55-0-141" class="d">-	// Assume the provider implements the spec properly
</a><a href="#h55-0-142" id="h55-0-142" class="d">-	// otherwise. We can add more exceptions as they&#39;re
</a><a href="#h55-0-143" id="h55-0-143" class="d">-	// discovered. We will _not_ be adding configurable hooks
</a><a href="#h55-0-144" id="h55-0-144" class="d">-	// to this package to let users select server bugs.
</a><a href="#h55-0-145" id="h55-0-145" class="d">-	return true
</a><a href="#h55-0-146" id="h55-0-146" class="d">-}
</a><a href="#h55-0-147" id="h55-0-147" class="d">-
</a><a href="#h55-0-148" id="h55-0-148" class="d">-func RetrieveToken(ctx context.Context, ClientID, ClientSecret, TokenURL string, v url.Values) (*Token, error) {
</a><a href="#h55-0-149" id="h55-0-149" class="d">-	hc, err := ContextClient(ctx)
</a><a href="#h55-0-150" id="h55-0-150" class="d">-	if err != nil {
</a><a href="#h55-0-151" id="h55-0-151" class="d">-		return nil, err
</a><a href="#h55-0-152" id="h55-0-152" class="d">-	}
</a><a href="#h55-0-153" id="h55-0-153" class="d">-	v.Set(&quot;client_id&quot;, ClientID)
</a><a href="#h55-0-154" id="h55-0-154" class="d">-	bustedAuth := !providerAuthHeaderWorks(TokenURL)
</a><a href="#h55-0-155" id="h55-0-155" class="d">-	if bustedAuth &amp;&amp; ClientSecret != &quot;&quot; {
</a><a href="#h55-0-156" id="h55-0-156" class="d">-		v.Set(&quot;client_secret&quot;, ClientSecret)
</a><a href="#h55-0-157" id="h55-0-157" class="d">-	}
</a><a href="#h55-0-158" id="h55-0-158" class="d">-	req, err := http.NewRequest(&quot;POST&quot;, TokenURL, strings.NewReader(v.Encode()))
</a><a href="#h55-0-159" id="h55-0-159" class="d">-	if err != nil {
</a><a href="#h55-0-160" id="h55-0-160" class="d">-		return nil, err
</a><a href="#h55-0-161" id="h55-0-161" class="d">-	}
</a><a href="#h55-0-162" id="h55-0-162" class="d">-	req.Header.Set(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;)
</a><a href="#h55-0-163" id="h55-0-163" class="d">-	if !bustedAuth {
</a><a href="#h55-0-164" id="h55-0-164" class="d">-		req.SetBasicAuth(ClientID, ClientSecret)
</a><a href="#h55-0-165" id="h55-0-165" class="d">-	}
</a><a href="#h55-0-166" id="h55-0-166" class="d">-	r, err := hc.Do(req)
</a><a href="#h55-0-167" id="h55-0-167" class="d">-	if err != nil {
</a><a href="#h55-0-168" id="h55-0-168" class="d">-		return nil, err
</a><a href="#h55-0-169" id="h55-0-169" class="d">-	}
</a><a href="#h55-0-170" id="h55-0-170" class="d">-	defer r.Body.Close()
</a><a href="#h55-0-171" id="h55-0-171" class="d">-	body, err := ioutil.ReadAll(io.LimitReader(r.Body, 1&lt;&lt;20))
</a><a href="#h55-0-172" id="h55-0-172" class="d">-	if err != nil {
</a><a href="#h55-0-173" id="h55-0-173" class="d">-		return nil, fmt.Errorf(&quot;oauth2: cannot fetch token: %v&quot;, err)
</a><a href="#h55-0-174" id="h55-0-174" class="d">-	}
</a><a href="#h55-0-175" id="h55-0-175" class="d">-	if code := r.StatusCode; code &lt; 200 || code &gt; 299 {
</a><a href="#h55-0-176" id="h55-0-176" class="d">-		return nil, fmt.Errorf(&quot;oauth2: cannot fetch token: %v\nResponse: %s&quot;, r.Status, body)
</a><a href="#h55-0-177" id="h55-0-177" class="d">-	}
</a><a href="#h55-0-178" id="h55-0-178" class="d">-
</a><a href="#h55-0-179" id="h55-0-179" class="d">-	var token *Token
</a><a href="#h55-0-180" id="h55-0-180" class="d">-	content, _, _ := mime.ParseMediaType(r.Header.Get(&quot;Content-Type&quot;))
</a><a href="#h55-0-181" id="h55-0-181" class="d">-	switch content {
</a><a href="#h55-0-182" id="h55-0-182" class="d">-	case &quot;application/x-www-form-urlencoded&quot;, &quot;text/plain&quot;:
</a><a href="#h55-0-183" id="h55-0-183" class="d">-		vals, err := url.ParseQuery(string(body))
</a><a href="#h55-0-184" id="h55-0-184" class="d">-		if err != nil {
</a><a href="#h55-0-185" id="h55-0-185" class="d">-			return nil, err
</a><a href="#h55-0-186" id="h55-0-186" class="d">-		}
</a><a href="#h55-0-187" id="h55-0-187" class="d">-		token = &amp;Token{
</a><a href="#h55-0-188" id="h55-0-188" class="d">-			AccessToken:  vals.Get(&quot;access_token&quot;),
</a><a href="#h55-0-189" id="h55-0-189" class="d">-			TokenType:    vals.Get(&quot;token_type&quot;),
</a><a href="#h55-0-190" id="h55-0-190" class="d">-			RefreshToken: vals.Get(&quot;refresh_token&quot;),
</a><a href="#h55-0-191" id="h55-0-191" class="d">-			Raw:          vals,
</a><a href="#h55-0-192" id="h55-0-192" class="d">-		}
</a><a href="#h55-0-193" id="h55-0-193" class="d">-		e := vals.Get(&quot;expires_in&quot;)
</a><a href="#h55-0-194" id="h55-0-194" class="d">-		if e == &quot;&quot; {
</a><a href="#h55-0-195" id="h55-0-195" class="d">-			// TODO(jbd): Facebook&#39;s OAuth2 implementation is broken and
</a><a href="#h55-0-196" id="h55-0-196" class="d">-			// returns expires_in field in expires. Remove the fallback to expires,
</a><a href="#h55-0-197" id="h55-0-197" class="d">-			// when Facebook fixes their implementation.
</a><a href="#h55-0-198" id="h55-0-198" class="d">-			e = vals.Get(&quot;expires&quot;)
</a><a href="#h55-0-199" id="h55-0-199" class="d">-		}
</a><a href="#h55-0-200" id="h55-0-200" class="d">-		expires, _ := strconv.Atoi(e)
</a><a href="#h55-0-201" id="h55-0-201" class="d">-		if expires != 0 {
</a><a href="#h55-0-202" id="h55-0-202" class="d">-			token.Expiry = time.Now().Add(time.Duration(expires) * time.Second)
</a><a href="#h55-0-203" id="h55-0-203" class="d">-		}
</a><a href="#h55-0-204" id="h55-0-204" class="d">-	default:
</a><a href="#h55-0-205" id="h55-0-205" class="d">-		var tj tokenJSON
</a><a href="#h55-0-206" id="h55-0-206" class="d">-		if err = json.Unmarshal(body, &amp;tj); err != nil {
</a><a href="#h55-0-207" id="h55-0-207" class="d">-			return nil, err
</a><a href="#h55-0-208" id="h55-0-208" class="d">-		}
</a><a href="#h55-0-209" id="h55-0-209" class="d">-		token = &amp;Token{
</a><a href="#h55-0-210" id="h55-0-210" class="d">-			AccessToken:  tj.AccessToken,
</a><a href="#h55-0-211" id="h55-0-211" class="d">-			TokenType:    tj.TokenType,
</a><a href="#h55-0-212" id="h55-0-212" class="d">-			RefreshToken: tj.RefreshToken,
</a><a href="#h55-0-213" id="h55-0-213" class="d">-			Expiry:       tj.expiry(),
</a><a href="#h55-0-214" id="h55-0-214" class="d">-			Raw:          make(map[string]interface{}),
</a><a href="#h55-0-215" id="h55-0-215" class="d">-		}
</a><a href="#h55-0-216" id="h55-0-216" class="d">-		json.Unmarshal(body, &amp;token.Raw) // no error checks for optional fields
</a><a href="#h55-0-217" id="h55-0-217" class="d">-	}
</a><a href="#h55-0-218" id="h55-0-218" class="d">-	// Don&#39;t overwrite `RefreshToken` with an empty value
</a><a href="#h55-0-219" id="h55-0-219" class="d">-	// if this was a token refreshing request.
</a><a href="#h55-0-220" id="h55-0-220" class="d">-	if token.RefreshToken == &quot;&quot; {
</a><a href="#h55-0-221" id="h55-0-221" class="d">-		token.RefreshToken = v.Get(&quot;refresh_token&quot;)
</a><a href="#h55-0-222" id="h55-0-222" class="d">-	}
</a><a href="#h55-0-223" id="h55-0-223" class="d">-	return token, nil
</a><a href="#h55-0-224" id="h55-0-224" class="d">-}
</a><b>diff --git a/<a id="h56" href="../file/vendor/golang.org/x/oauth2/internal/transport.go">vendor/golang.org/x/oauth2/internal/transport.go</a> b/<a href="../file/vendor/golang.org/x/oauth2/internal/transport.go">vendor/golang.org/x/oauth2/internal/transport.go</a></b>
<a href="#h56-0" id="h56-0" class="h">@@ -1,69 +0,0 @@
</a><a href="#h56-0-0" id="h56-0-0" class="d">-// Copyright 2014 The Go Authors. All rights reserved.
</a><a href="#h56-0-1" id="h56-0-1" class="d">-// Use of this source code is governed by a BSD-style
</a><a href="#h56-0-2" id="h56-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h56-0-3" id="h56-0-3" class="d">-
</a><a href="#h56-0-4" id="h56-0-4" class="d">-// Package internal contains support packages for oauth2 package.
</a><a href="#h56-0-5" id="h56-0-5" class="d">-package internal
</a><a href="#h56-0-6" id="h56-0-6" class="d">-
</a><a href="#h56-0-7" id="h56-0-7" class="d">-import (
</a><a href="#h56-0-8" id="h56-0-8" class="d">-	&quot;net/http&quot;
</a><a href="#h56-0-9" id="h56-0-9" class="d">-
</a><a href="#h56-0-10" id="h56-0-10" class="d">-	&quot;golang.org/x/net/context&quot;
</a><a href="#h56-0-11" id="h56-0-11" class="d">-)
</a><a href="#h56-0-12" id="h56-0-12" class="d">-
</a><a href="#h56-0-13" id="h56-0-13" class="d">-// HTTPClient is the context key to use with golang.org/x/net/context&#39;s
</a><a href="#h56-0-14" id="h56-0-14" class="d">-// WithValue function to associate an *http.Client value with a context.
</a><a href="#h56-0-15" id="h56-0-15" class="d">-var HTTPClient ContextKey
</a><a href="#h56-0-16" id="h56-0-16" class="d">-
</a><a href="#h56-0-17" id="h56-0-17" class="d">-// ContextKey is just an empty struct. It exists so HTTPClient can be
</a><a href="#h56-0-18" id="h56-0-18" class="d">-// an immutable public variable with a unique type. It&#39;s immutable
</a><a href="#h56-0-19" id="h56-0-19" class="d">-// because nobody else can create a ContextKey, being unexported.
</a><a href="#h56-0-20" id="h56-0-20" class="d">-type ContextKey struct{}
</a><a href="#h56-0-21" id="h56-0-21" class="d">-
</a><a href="#h56-0-22" id="h56-0-22" class="d">-// ContextClientFunc is a func which tries to return an *http.Client
</a><a href="#h56-0-23" id="h56-0-23" class="d">-// given a Context value. If it returns an error, the search stops
</a><a href="#h56-0-24" id="h56-0-24" class="d">-// with that error.  If it returns (nil, nil), the search continues
</a><a href="#h56-0-25" id="h56-0-25" class="d">-// down the list of registered funcs.
</a><a href="#h56-0-26" id="h56-0-26" class="d">-type ContextClientFunc func(context.Context) (*http.Client, error)
</a><a href="#h56-0-27" id="h56-0-27" class="d">-
</a><a href="#h56-0-28" id="h56-0-28" class="d">-var contextClientFuncs []ContextClientFunc
</a><a href="#h56-0-29" id="h56-0-29" class="d">-
</a><a href="#h56-0-30" id="h56-0-30" class="d">-func RegisterContextClientFunc(fn ContextClientFunc) {
</a><a href="#h56-0-31" id="h56-0-31" class="d">-	contextClientFuncs = append(contextClientFuncs, fn)
</a><a href="#h56-0-32" id="h56-0-32" class="d">-}
</a><a href="#h56-0-33" id="h56-0-33" class="d">-
</a><a href="#h56-0-34" id="h56-0-34" class="d">-func ContextClient(ctx context.Context) (*http.Client, error) {
</a><a href="#h56-0-35" id="h56-0-35" class="d">-	if ctx != nil {
</a><a href="#h56-0-36" id="h56-0-36" class="d">-		if hc, ok := ctx.Value(HTTPClient).(*http.Client); ok {
</a><a href="#h56-0-37" id="h56-0-37" class="d">-			return hc, nil
</a><a href="#h56-0-38" id="h56-0-38" class="d">-		}
</a><a href="#h56-0-39" id="h56-0-39" class="d">-	}
</a><a href="#h56-0-40" id="h56-0-40" class="d">-	for _, fn := range contextClientFuncs {
</a><a href="#h56-0-41" id="h56-0-41" class="d">-		c, err := fn(ctx)
</a><a href="#h56-0-42" id="h56-0-42" class="d">-		if err != nil {
</a><a href="#h56-0-43" id="h56-0-43" class="d">-			return nil, err
</a><a href="#h56-0-44" id="h56-0-44" class="d">-		}
</a><a href="#h56-0-45" id="h56-0-45" class="d">-		if c != nil {
</a><a href="#h56-0-46" id="h56-0-46" class="d">-			return c, nil
</a><a href="#h56-0-47" id="h56-0-47" class="d">-		}
</a><a href="#h56-0-48" id="h56-0-48" class="d">-	}
</a><a href="#h56-0-49" id="h56-0-49" class="d">-	return http.DefaultClient, nil
</a><a href="#h56-0-50" id="h56-0-50" class="d">-}
</a><a href="#h56-0-51" id="h56-0-51" class="d">-
</a><a href="#h56-0-52" id="h56-0-52" class="d">-func ContextTransport(ctx context.Context) http.RoundTripper {
</a><a href="#h56-0-53" id="h56-0-53" class="d">-	hc, err := ContextClient(ctx)
</a><a href="#h56-0-54" id="h56-0-54" class="d">-	// This is a rare error case (somebody using nil on App Engine).
</a><a href="#h56-0-55" id="h56-0-55" class="d">-	if err != nil {
</a><a href="#h56-0-56" id="h56-0-56" class="d">-		return ErrorTransport{err}
</a><a href="#h56-0-57" id="h56-0-57" class="d">-	}
</a><a href="#h56-0-58" id="h56-0-58" class="d">-	return hc.Transport
</a><a href="#h56-0-59" id="h56-0-59" class="d">-}
</a><a href="#h56-0-60" id="h56-0-60" class="d">-
</a><a href="#h56-0-61" id="h56-0-61" class="d">-// ErrorTransport returns the specified error on RoundTrip.
</a><a href="#h56-0-62" id="h56-0-62" class="d">-// This RoundTripper should be used in rare error cases where
</a><a href="#h56-0-63" id="h56-0-63" class="d">-// error handling can be postponed to response handling time.
</a><a href="#h56-0-64" id="h56-0-64" class="d">-type ErrorTransport struct{ Err error }
</a><a href="#h56-0-65" id="h56-0-65" class="d">-
</a><a href="#h56-0-66" id="h56-0-66" class="d">-func (t ErrorTransport) RoundTrip(*http.Request) (*http.Response, error) {
</a><a href="#h56-0-67" id="h56-0-67" class="d">-	return nil, t.Err
</a><a href="#h56-0-68" id="h56-0-68" class="d">-}
</a><b>diff --git a/<a id="h57" href="../file/vendor/golang.org/x/oauth2/oauth2.go">vendor/golang.org/x/oauth2/oauth2.go</a> b/<a href="../file/vendor/golang.org/x/oauth2/oauth2.go">vendor/golang.org/x/oauth2/oauth2.go</a></b>
<a href="#h57-0" id="h57-0" class="h">@@ -1,337 +0,0 @@
</a><a href="#h57-0-0" id="h57-0-0" class="d">-// Copyright 2014 The Go Authors. All rights reserved.
</a><a href="#h57-0-1" id="h57-0-1" class="d">-// Use of this source code is governed by a BSD-style
</a><a href="#h57-0-2" id="h57-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h57-0-3" id="h57-0-3" class="d">-
</a><a href="#h57-0-4" id="h57-0-4" class="d">-// Package oauth2 provides support for making
</a><a href="#h57-0-5" id="h57-0-5" class="d">-// OAuth2 authorized and authenticated HTTP requests.
</a><a href="#h57-0-6" id="h57-0-6" class="d">-// It can additionally grant authorization with Bearer JWT.
</a><a href="#h57-0-7" id="h57-0-7" class="d">-package oauth2 // import &quot;golang.org/x/oauth2&quot;
</a><a href="#h57-0-8" id="h57-0-8" class="d">-
</a><a href="#h57-0-9" id="h57-0-9" class="d">-import (
</a><a href="#h57-0-10" id="h57-0-10" class="d">-	&quot;bytes&quot;
</a><a href="#h57-0-11" id="h57-0-11" class="d">-	&quot;errors&quot;
</a><a href="#h57-0-12" id="h57-0-12" class="d">-	&quot;net/http&quot;
</a><a href="#h57-0-13" id="h57-0-13" class="d">-	&quot;net/url&quot;
</a><a href="#h57-0-14" id="h57-0-14" class="d">-	&quot;strings&quot;
</a><a href="#h57-0-15" id="h57-0-15" class="d">-	&quot;sync&quot;
</a><a href="#h57-0-16" id="h57-0-16" class="d">-
</a><a href="#h57-0-17" id="h57-0-17" class="d">-	&quot;golang.org/x/net/context&quot;
</a><a href="#h57-0-18" id="h57-0-18" class="d">-	&quot;golang.org/x/oauth2/internal&quot;
</a><a href="#h57-0-19" id="h57-0-19" class="d">-)
</a><a href="#h57-0-20" id="h57-0-20" class="d">-
</a><a href="#h57-0-21" id="h57-0-21" class="d">-// NoContext is the default context you should supply if not using
</a><a href="#h57-0-22" id="h57-0-22" class="d">-// your own context.Context (see https://golang.org/x/net/context).
</a><a href="#h57-0-23" id="h57-0-23" class="d">-var NoContext = context.TODO()
</a><a href="#h57-0-24" id="h57-0-24" class="d">-
</a><a href="#h57-0-25" id="h57-0-25" class="d">-// RegisterBrokenAuthHeaderProvider registers an OAuth2 server
</a><a href="#h57-0-26" id="h57-0-26" class="d">-// identified by the tokenURL prefix as an OAuth2 implementation
</a><a href="#h57-0-27" id="h57-0-27" class="d">-// which doesn&#39;t support the HTTP Basic authentication
</a><a href="#h57-0-28" id="h57-0-28" class="d">-// scheme to authenticate with the authorization server.
</a><a href="#h57-0-29" id="h57-0-29" class="d">-// Once a server is registered, credentials (client_id and client_secret)
</a><a href="#h57-0-30" id="h57-0-30" class="d">-// will be passed as query parameters rather than being present
</a><a href="#h57-0-31" id="h57-0-31" class="d">-// in the Authorization header.
</a><a href="#h57-0-32" id="h57-0-32" class="d">-// See https://code.google.com/p/goauth2/issues/detail?id=31 for background.
</a><a href="#h57-0-33" id="h57-0-33" class="d">-func RegisterBrokenAuthHeaderProvider(tokenURL string) {
</a><a href="#h57-0-34" id="h57-0-34" class="d">-	internal.RegisterBrokenAuthHeaderProvider(tokenURL)
</a><a href="#h57-0-35" id="h57-0-35" class="d">-}
</a><a href="#h57-0-36" id="h57-0-36" class="d">-
</a><a href="#h57-0-37" id="h57-0-37" class="d">-// Config describes a typical 3-legged OAuth2 flow, with both the
</a><a href="#h57-0-38" id="h57-0-38" class="d">-// client application information and the server&#39;s endpoint URLs.
</a><a href="#h57-0-39" id="h57-0-39" class="d">-type Config struct {
</a><a href="#h57-0-40" id="h57-0-40" class="d">-	// ClientID is the application&#39;s ID.
</a><a href="#h57-0-41" id="h57-0-41" class="d">-	ClientID string
</a><a href="#h57-0-42" id="h57-0-42" class="d">-
</a><a href="#h57-0-43" id="h57-0-43" class="d">-	// ClientSecret is the application&#39;s secret.
</a><a href="#h57-0-44" id="h57-0-44" class="d">-	ClientSecret string
</a><a href="#h57-0-45" id="h57-0-45" class="d">-
</a><a href="#h57-0-46" id="h57-0-46" class="d">-	// Endpoint contains the resource server&#39;s token endpoint
</a><a href="#h57-0-47" id="h57-0-47" class="d">-	// URLs. These are constants specific to each server and are
</a><a href="#h57-0-48" id="h57-0-48" class="d">-	// often available via site-specific packages, such as
</a><a href="#h57-0-49" id="h57-0-49" class="d">-	// google.Endpoint or github.Endpoint.
</a><a href="#h57-0-50" id="h57-0-50" class="d">-	Endpoint Endpoint
</a><a href="#h57-0-51" id="h57-0-51" class="d">-
</a><a href="#h57-0-52" id="h57-0-52" class="d">-	// RedirectURL is the URL to redirect users going through
</a><a href="#h57-0-53" id="h57-0-53" class="d">-	// the OAuth flow, after the resource owner&#39;s URLs.
</a><a href="#h57-0-54" id="h57-0-54" class="d">-	RedirectURL string
</a><a href="#h57-0-55" id="h57-0-55" class="d">-
</a><a href="#h57-0-56" id="h57-0-56" class="d">-	// Scope specifies optional requested permissions.
</a><a href="#h57-0-57" id="h57-0-57" class="d">-	Scopes []string
</a><a href="#h57-0-58" id="h57-0-58" class="d">-}
</a><a href="#h57-0-59" id="h57-0-59" class="d">-
</a><a href="#h57-0-60" id="h57-0-60" class="d">-// A TokenSource is anything that can return a token.
</a><a href="#h57-0-61" id="h57-0-61" class="d">-type TokenSource interface {
</a><a href="#h57-0-62" id="h57-0-62" class="d">-	// Token returns a token or an error.
</a><a href="#h57-0-63" id="h57-0-63" class="d">-	// Token must be safe for concurrent use by multiple goroutines.
</a><a href="#h57-0-64" id="h57-0-64" class="d">-	// The returned Token must not be modified.
</a><a href="#h57-0-65" id="h57-0-65" class="d">-	Token() (*Token, error)
</a><a href="#h57-0-66" id="h57-0-66" class="d">-}
</a><a href="#h57-0-67" id="h57-0-67" class="d">-
</a><a href="#h57-0-68" id="h57-0-68" class="d">-// Endpoint contains the OAuth 2.0 provider&#39;s authorization and token
</a><a href="#h57-0-69" id="h57-0-69" class="d">-// endpoint URLs.
</a><a href="#h57-0-70" id="h57-0-70" class="d">-type Endpoint struct {
</a><a href="#h57-0-71" id="h57-0-71" class="d">-	AuthURL  string
</a><a href="#h57-0-72" id="h57-0-72" class="d">-	TokenURL string
</a><a href="#h57-0-73" id="h57-0-73" class="d">-}
</a><a href="#h57-0-74" id="h57-0-74" class="d">-
</a><a href="#h57-0-75" id="h57-0-75" class="d">-var (
</a><a href="#h57-0-76" id="h57-0-76" class="d">-	// AccessTypeOnline and AccessTypeOffline are options passed
</a><a href="#h57-0-77" id="h57-0-77" class="d">-	// to the Options.AuthCodeURL method. They modify the
</a><a href="#h57-0-78" id="h57-0-78" class="d">-	// &quot;access_type&quot; field that gets sent in the URL returned by
</a><a href="#h57-0-79" id="h57-0-79" class="d">-	// AuthCodeURL.
</a><a href="#h57-0-80" id="h57-0-80" class="d">-	//
</a><a href="#h57-0-81" id="h57-0-81" class="d">-	// Online is the default if neither is specified. If your
</a><a href="#h57-0-82" id="h57-0-82" class="d">-	// application needs to refresh access tokens when the user
</a><a href="#h57-0-83" id="h57-0-83" class="d">-	// is not present at the browser, then use offline. This will
</a><a href="#h57-0-84" id="h57-0-84" class="d">-	// result in your application obtaining a refresh token the
</a><a href="#h57-0-85" id="h57-0-85" class="d">-	// first time your application exchanges an authorization
</a><a href="#h57-0-86" id="h57-0-86" class="d">-	// code for a user.
</a><a href="#h57-0-87" id="h57-0-87" class="d">-	AccessTypeOnline  AuthCodeOption = SetAuthURLParam(&quot;access_type&quot;, &quot;online&quot;)
</a><a href="#h57-0-88" id="h57-0-88" class="d">-	AccessTypeOffline AuthCodeOption = SetAuthURLParam(&quot;access_type&quot;, &quot;offline&quot;)
</a><a href="#h57-0-89" id="h57-0-89" class="d">-
</a><a href="#h57-0-90" id="h57-0-90" class="d">-	// ApprovalForce forces the users to view the consent dialog
</a><a href="#h57-0-91" id="h57-0-91" class="d">-	// and confirm the permissions request at the URL returned
</a><a href="#h57-0-92" id="h57-0-92" class="d">-	// from AuthCodeURL, even if they&#39;ve already done so.
</a><a href="#h57-0-93" id="h57-0-93" class="d">-	ApprovalForce AuthCodeOption = SetAuthURLParam(&quot;approval_prompt&quot;, &quot;force&quot;)
</a><a href="#h57-0-94" id="h57-0-94" class="d">-)
</a><a href="#h57-0-95" id="h57-0-95" class="d">-
</a><a href="#h57-0-96" id="h57-0-96" class="d">-// An AuthCodeOption is passed to Config.AuthCodeURL.
</a><a href="#h57-0-97" id="h57-0-97" class="d">-type AuthCodeOption interface {
</a><a href="#h57-0-98" id="h57-0-98" class="d">-	setValue(url.Values)
</a><a href="#h57-0-99" id="h57-0-99" class="d">-}
</a><a href="#h57-0-100" id="h57-0-100" class="d">-
</a><a href="#h57-0-101" id="h57-0-101" class="d">-type setParam struct{ k, v string }
</a><a href="#h57-0-102" id="h57-0-102" class="d">-
</a><a href="#h57-0-103" id="h57-0-103" class="d">-func (p setParam) setValue(m url.Values) { m.Set(p.k, p.v) }
</a><a href="#h57-0-104" id="h57-0-104" class="d">-
</a><a href="#h57-0-105" id="h57-0-105" class="d">-// SetAuthURLParam builds an AuthCodeOption which passes key/value parameters
</a><a href="#h57-0-106" id="h57-0-106" class="d">-// to a provider&#39;s authorization endpoint.
</a><a href="#h57-0-107" id="h57-0-107" class="d">-func SetAuthURLParam(key, value string) AuthCodeOption {
</a><a href="#h57-0-108" id="h57-0-108" class="d">-	return setParam{key, value}
</a><a href="#h57-0-109" id="h57-0-109" class="d">-}
</a><a href="#h57-0-110" id="h57-0-110" class="d">-
</a><a href="#h57-0-111" id="h57-0-111" class="d">-// AuthCodeURL returns a URL to OAuth 2.0 provider&#39;s consent page
</a><a href="#h57-0-112" id="h57-0-112" class="d">-// that asks for permissions for the required scopes explicitly.
</a><a href="#h57-0-113" id="h57-0-113" class="d">-//
</a><a href="#h57-0-114" id="h57-0-114" class="d">-// State is a token to protect the user from CSRF attacks. You must
</a><a href="#h57-0-115" id="h57-0-115" class="d">-// always provide a non-zero string and validate that it matches the
</a><a href="#h57-0-116" id="h57-0-116" class="d">-// the state query parameter on your redirect callback.
</a><a href="#h57-0-117" id="h57-0-117" class="d">-// See http://tools.ietf.org/html/rfc6749#section-10.12 for more info.
</a><a href="#h57-0-118" id="h57-0-118" class="d">-//
</a><a href="#h57-0-119" id="h57-0-119" class="d">-// Opts may include AccessTypeOnline or AccessTypeOffline, as well
</a><a href="#h57-0-120" id="h57-0-120" class="d">-// as ApprovalForce.
</a><a href="#h57-0-121" id="h57-0-121" class="d">-func (c *Config) AuthCodeURL(state string, opts ...AuthCodeOption) string {
</a><a href="#h57-0-122" id="h57-0-122" class="d">-	var buf bytes.Buffer
</a><a href="#h57-0-123" id="h57-0-123" class="d">-	buf.WriteString(c.Endpoint.AuthURL)
</a><a href="#h57-0-124" id="h57-0-124" class="d">-	v := url.Values{
</a><a href="#h57-0-125" id="h57-0-125" class="d">-		&quot;response_type&quot;: {&quot;code&quot;},
</a><a href="#h57-0-126" id="h57-0-126" class="d">-		&quot;client_id&quot;:     {c.ClientID},
</a><a href="#h57-0-127" id="h57-0-127" class="d">-		&quot;redirect_uri&quot;:  internal.CondVal(c.RedirectURL),
</a><a href="#h57-0-128" id="h57-0-128" class="d">-		&quot;scope&quot;:         internal.CondVal(strings.Join(c.Scopes, &quot; &quot;)),
</a><a href="#h57-0-129" id="h57-0-129" class="d">-		&quot;state&quot;:         internal.CondVal(state),
</a><a href="#h57-0-130" id="h57-0-130" class="d">-	}
</a><a href="#h57-0-131" id="h57-0-131" class="d">-	for _, opt := range opts {
</a><a href="#h57-0-132" id="h57-0-132" class="d">-		opt.setValue(v)
</a><a href="#h57-0-133" id="h57-0-133" class="d">-	}
</a><a href="#h57-0-134" id="h57-0-134" class="d">-	if strings.Contains(c.Endpoint.AuthURL, &quot;?&quot;) {
</a><a href="#h57-0-135" id="h57-0-135" class="d">-		buf.WriteByte(&#39;&amp;&#39;)
</a><a href="#h57-0-136" id="h57-0-136" class="d">-	} else {
</a><a href="#h57-0-137" id="h57-0-137" class="d">-		buf.WriteByte(&#39;?&#39;)
</a><a href="#h57-0-138" id="h57-0-138" class="d">-	}
</a><a href="#h57-0-139" id="h57-0-139" class="d">-	buf.WriteString(v.Encode())
</a><a href="#h57-0-140" id="h57-0-140" class="d">-	return buf.String()
</a><a href="#h57-0-141" id="h57-0-141" class="d">-}
</a><a href="#h57-0-142" id="h57-0-142" class="d">-
</a><a href="#h57-0-143" id="h57-0-143" class="d">-// PasswordCredentialsToken converts a resource owner username and password
</a><a href="#h57-0-144" id="h57-0-144" class="d">-// pair into a token.
</a><a href="#h57-0-145" id="h57-0-145" class="d">-//
</a><a href="#h57-0-146" id="h57-0-146" class="d">-// Per the RFC, this grant type should only be used &quot;when there is a high
</a><a href="#h57-0-147" id="h57-0-147" class="d">-// degree of trust between the resource owner and the client (e.g., the client
</a><a href="#h57-0-148" id="h57-0-148" class="d">-// is part of the device operating system or a highly privileged application),
</a><a href="#h57-0-149" id="h57-0-149" class="d">-// and when other authorization grant types are not available.&quot;
</a><a href="#h57-0-150" id="h57-0-150" class="d">-// See https://tools.ietf.org/html/rfc6749#section-4.3 for more info.
</a><a href="#h57-0-151" id="h57-0-151" class="d">-//
</a><a href="#h57-0-152" id="h57-0-152" class="d">-// The HTTP client to use is derived from the context.
</a><a href="#h57-0-153" id="h57-0-153" class="d">-// If nil, http.DefaultClient is used.
</a><a href="#h57-0-154" id="h57-0-154" class="d">-func (c *Config) PasswordCredentialsToken(ctx context.Context, username, password string) (*Token, error) {
</a><a href="#h57-0-155" id="h57-0-155" class="d">-	return retrieveToken(ctx, c, url.Values{
</a><a href="#h57-0-156" id="h57-0-156" class="d">-		&quot;grant_type&quot;: {&quot;password&quot;},
</a><a href="#h57-0-157" id="h57-0-157" class="d">-		&quot;username&quot;:   {username},
</a><a href="#h57-0-158" id="h57-0-158" class="d">-		&quot;password&quot;:   {password},
</a><a href="#h57-0-159" id="h57-0-159" class="d">-		&quot;scope&quot;:      internal.CondVal(strings.Join(c.Scopes, &quot; &quot;)),
</a><a href="#h57-0-160" id="h57-0-160" class="d">-	})
</a><a href="#h57-0-161" id="h57-0-161" class="d">-}
</a><a href="#h57-0-162" id="h57-0-162" class="d">-
</a><a href="#h57-0-163" id="h57-0-163" class="d">-// Exchange converts an authorization code into a token.
</a><a href="#h57-0-164" id="h57-0-164" class="d">-//
</a><a href="#h57-0-165" id="h57-0-165" class="d">-// It is used after a resource provider redirects the user back
</a><a href="#h57-0-166" id="h57-0-166" class="d">-// to the Redirect URI (the URL obtained from AuthCodeURL).
</a><a href="#h57-0-167" id="h57-0-167" class="d">-//
</a><a href="#h57-0-168" id="h57-0-168" class="d">-// The HTTP client to use is derived from the context.
</a><a href="#h57-0-169" id="h57-0-169" class="d">-// If a client is not provided via the context, http.DefaultClient is used.
</a><a href="#h57-0-170" id="h57-0-170" class="d">-//
</a><a href="#h57-0-171" id="h57-0-171" class="d">-// The code will be in the *http.Request.FormValue(&quot;code&quot;). Before
</a><a href="#h57-0-172" id="h57-0-172" class="d">-// calling Exchange, be sure to validate FormValue(&quot;state&quot;).
</a><a href="#h57-0-173" id="h57-0-173" class="d">-func (c *Config) Exchange(ctx context.Context, code string) (*Token, error) {
</a><a href="#h57-0-174" id="h57-0-174" class="d">-	return retrieveToken(ctx, c, url.Values{
</a><a href="#h57-0-175" id="h57-0-175" class="d">-		&quot;grant_type&quot;:   {&quot;authorization_code&quot;},
</a><a href="#h57-0-176" id="h57-0-176" class="d">-		&quot;code&quot;:         {code},
</a><a href="#h57-0-177" id="h57-0-177" class="d">-		&quot;redirect_uri&quot;: internal.CondVal(c.RedirectURL),
</a><a href="#h57-0-178" id="h57-0-178" class="d">-		&quot;scope&quot;:        internal.CondVal(strings.Join(c.Scopes, &quot; &quot;)),
</a><a href="#h57-0-179" id="h57-0-179" class="d">-	})
</a><a href="#h57-0-180" id="h57-0-180" class="d">-}
</a><a href="#h57-0-181" id="h57-0-181" class="d">-
</a><a href="#h57-0-182" id="h57-0-182" class="d">-// Client returns an HTTP client using the provided token.
</a><a href="#h57-0-183" id="h57-0-183" class="d">-// The token will auto-refresh as necessary. The underlying
</a><a href="#h57-0-184" id="h57-0-184" class="d">-// HTTP transport will be obtained using the provided context.
</a><a href="#h57-0-185" id="h57-0-185" class="d">-// The returned client and its Transport should not be modified.
</a><a href="#h57-0-186" id="h57-0-186" class="d">-func (c *Config) Client(ctx context.Context, t *Token) *http.Client {
</a><a href="#h57-0-187" id="h57-0-187" class="d">-	return NewClient(ctx, c.TokenSource(ctx, t))
</a><a href="#h57-0-188" id="h57-0-188" class="d">-}
</a><a href="#h57-0-189" id="h57-0-189" class="d">-
</a><a href="#h57-0-190" id="h57-0-190" class="d">-// TokenSource returns a TokenSource that returns t until t expires,
</a><a href="#h57-0-191" id="h57-0-191" class="d">-// automatically refreshing it as necessary using the provided context.
</a><a href="#h57-0-192" id="h57-0-192" class="d">-//
</a><a href="#h57-0-193" id="h57-0-193" class="d">-// Most users will use Config.Client instead.
</a><a href="#h57-0-194" id="h57-0-194" class="d">-func (c *Config) TokenSource(ctx context.Context, t *Token) TokenSource {
</a><a href="#h57-0-195" id="h57-0-195" class="d">-	tkr := &amp;tokenRefresher{
</a><a href="#h57-0-196" id="h57-0-196" class="d">-		ctx:  ctx,
</a><a href="#h57-0-197" id="h57-0-197" class="d">-		conf: c,
</a><a href="#h57-0-198" id="h57-0-198" class="d">-	}
</a><a href="#h57-0-199" id="h57-0-199" class="d">-	if t != nil {
</a><a href="#h57-0-200" id="h57-0-200" class="d">-		tkr.refreshToken = t.RefreshToken
</a><a href="#h57-0-201" id="h57-0-201" class="d">-	}
</a><a href="#h57-0-202" id="h57-0-202" class="d">-	return &amp;reuseTokenSource{
</a><a href="#h57-0-203" id="h57-0-203" class="d">-		t:   t,
</a><a href="#h57-0-204" id="h57-0-204" class="d">-		new: tkr,
</a><a href="#h57-0-205" id="h57-0-205" class="d">-	}
</a><a href="#h57-0-206" id="h57-0-206" class="d">-}
</a><a href="#h57-0-207" id="h57-0-207" class="d">-
</a><a href="#h57-0-208" id="h57-0-208" class="d">-// tokenRefresher is a TokenSource that makes &quot;grant_type&quot;==&quot;refresh_token&quot;
</a><a href="#h57-0-209" id="h57-0-209" class="d">-// HTTP requests to renew a token using a RefreshToken.
</a><a href="#h57-0-210" id="h57-0-210" class="d">-type tokenRefresher struct {
</a><a href="#h57-0-211" id="h57-0-211" class="d">-	ctx          context.Context // used to get HTTP requests
</a><a href="#h57-0-212" id="h57-0-212" class="d">-	conf         *Config
</a><a href="#h57-0-213" id="h57-0-213" class="d">-	refreshToken string
</a><a href="#h57-0-214" id="h57-0-214" class="d">-}
</a><a href="#h57-0-215" id="h57-0-215" class="d">-
</a><a href="#h57-0-216" id="h57-0-216" class="d">-// WARNING: Token is not safe for concurrent access, as it
</a><a href="#h57-0-217" id="h57-0-217" class="d">-// updates the tokenRefresher&#39;s refreshToken field.
</a><a href="#h57-0-218" id="h57-0-218" class="d">-// Within this package, it is used by reuseTokenSource which
</a><a href="#h57-0-219" id="h57-0-219" class="d">-// synchronizes calls to this method with its own mutex.
</a><a href="#h57-0-220" id="h57-0-220" class="d">-func (tf *tokenRefresher) Token() (*Token, error) {
</a><a href="#h57-0-221" id="h57-0-221" class="d">-	if tf.refreshToken == &quot;&quot; {
</a><a href="#h57-0-222" id="h57-0-222" class="d">-		return nil, errors.New(&quot;oauth2: token expired and refresh token is not set&quot;)
</a><a href="#h57-0-223" id="h57-0-223" class="d">-	}
</a><a href="#h57-0-224" id="h57-0-224" class="d">-
</a><a href="#h57-0-225" id="h57-0-225" class="d">-	tk, err := retrieveToken(tf.ctx, tf.conf, url.Values{
</a><a href="#h57-0-226" id="h57-0-226" class="d">-		&quot;grant_type&quot;:    {&quot;refresh_token&quot;},
</a><a href="#h57-0-227" id="h57-0-227" class="d">-		&quot;refresh_token&quot;: {tf.refreshToken},
</a><a href="#h57-0-228" id="h57-0-228" class="d">-	})
</a><a href="#h57-0-229" id="h57-0-229" class="d">-
</a><a href="#h57-0-230" id="h57-0-230" class="d">-	if err != nil {
</a><a href="#h57-0-231" id="h57-0-231" class="d">-		return nil, err
</a><a href="#h57-0-232" id="h57-0-232" class="d">-	}
</a><a href="#h57-0-233" id="h57-0-233" class="d">-	if tf.refreshToken != tk.RefreshToken {
</a><a href="#h57-0-234" id="h57-0-234" class="d">-		tf.refreshToken = tk.RefreshToken
</a><a href="#h57-0-235" id="h57-0-235" class="d">-	}
</a><a href="#h57-0-236" id="h57-0-236" class="d">-	return tk, err
</a><a href="#h57-0-237" id="h57-0-237" class="d">-}
</a><a href="#h57-0-238" id="h57-0-238" class="d">-
</a><a href="#h57-0-239" id="h57-0-239" class="d">-// reuseTokenSource is a TokenSource that holds a single token in memory
</a><a href="#h57-0-240" id="h57-0-240" class="d">-// and validates its expiry before each call to retrieve it with
</a><a href="#h57-0-241" id="h57-0-241" class="d">-// Token. If it&#39;s expired, it will be auto-refreshed using the
</a><a href="#h57-0-242" id="h57-0-242" class="d">-// new TokenSource.
</a><a href="#h57-0-243" id="h57-0-243" class="d">-type reuseTokenSource struct {
</a><a href="#h57-0-244" id="h57-0-244" class="d">-	new TokenSource // called when t is expired.
</a><a href="#h57-0-245" id="h57-0-245" class="d">-
</a><a href="#h57-0-246" id="h57-0-246" class="d">-	mu sync.Mutex // guards t
</a><a href="#h57-0-247" id="h57-0-247" class="d">-	t  *Token
</a><a href="#h57-0-248" id="h57-0-248" class="d">-}
</a><a href="#h57-0-249" id="h57-0-249" class="d">-
</a><a href="#h57-0-250" id="h57-0-250" class="d">-// Token returns the current token if it&#39;s still valid, else will
</a><a href="#h57-0-251" id="h57-0-251" class="d">-// refresh the current token (using r.Context for HTTP client
</a><a href="#h57-0-252" id="h57-0-252" class="d">-// information) and return the new one.
</a><a href="#h57-0-253" id="h57-0-253" class="d">-func (s *reuseTokenSource) Token() (*Token, error) {
</a><a href="#h57-0-254" id="h57-0-254" class="d">-	s.mu.Lock()
</a><a href="#h57-0-255" id="h57-0-255" class="d">-	defer s.mu.Unlock()
</a><a href="#h57-0-256" id="h57-0-256" class="d">-	if s.t.Valid() {
</a><a href="#h57-0-257" id="h57-0-257" class="d">-		return s.t, nil
</a><a href="#h57-0-258" id="h57-0-258" class="d">-	}
</a><a href="#h57-0-259" id="h57-0-259" class="d">-	t, err := s.new.Token()
</a><a href="#h57-0-260" id="h57-0-260" class="d">-	if err != nil {
</a><a href="#h57-0-261" id="h57-0-261" class="d">-		return nil, err
</a><a href="#h57-0-262" id="h57-0-262" class="d">-	}
</a><a href="#h57-0-263" id="h57-0-263" class="d">-	s.t = t
</a><a href="#h57-0-264" id="h57-0-264" class="d">-	return t, nil
</a><a href="#h57-0-265" id="h57-0-265" class="d">-}
</a><a href="#h57-0-266" id="h57-0-266" class="d">-
</a><a href="#h57-0-267" id="h57-0-267" class="d">-// StaticTokenSource returns a TokenSource that always returns the same token.
</a><a href="#h57-0-268" id="h57-0-268" class="d">-// Because the provided token t is never refreshed, StaticTokenSource is only
</a><a href="#h57-0-269" id="h57-0-269" class="d">-// useful for tokens that never expire.
</a><a href="#h57-0-270" id="h57-0-270" class="d">-func StaticTokenSource(t *Token) TokenSource {
</a><a href="#h57-0-271" id="h57-0-271" class="d">-	return staticTokenSource{t}
</a><a href="#h57-0-272" id="h57-0-272" class="d">-}
</a><a href="#h57-0-273" id="h57-0-273" class="d">-
</a><a href="#h57-0-274" id="h57-0-274" class="d">-// staticTokenSource is a TokenSource that always returns the same Token.
</a><a href="#h57-0-275" id="h57-0-275" class="d">-type staticTokenSource struct {
</a><a href="#h57-0-276" id="h57-0-276" class="d">-	t *Token
</a><a href="#h57-0-277" id="h57-0-277" class="d">-}
</a><a href="#h57-0-278" id="h57-0-278" class="d">-
</a><a href="#h57-0-279" id="h57-0-279" class="d">-func (s staticTokenSource) Token() (*Token, error) {
</a><a href="#h57-0-280" id="h57-0-280" class="d">-	return s.t, nil
</a><a href="#h57-0-281" id="h57-0-281" class="d">-}
</a><a href="#h57-0-282" id="h57-0-282" class="d">-
</a><a href="#h57-0-283" id="h57-0-283" class="d">-// HTTPClient is the context key to use with golang.org/x/net/context&#39;s
</a><a href="#h57-0-284" id="h57-0-284" class="d">-// WithValue function to associate an *http.Client value with a context.
</a><a href="#h57-0-285" id="h57-0-285" class="d">-var HTTPClient internal.ContextKey
</a><a href="#h57-0-286" id="h57-0-286" class="d">-
</a><a href="#h57-0-287" id="h57-0-287" class="d">-// NewClient creates an *http.Client from a Context and TokenSource.
</a><a href="#h57-0-288" id="h57-0-288" class="d">-// The returned client is not valid beyond the lifetime of the context.
</a><a href="#h57-0-289" id="h57-0-289" class="d">-//
</a><a href="#h57-0-290" id="h57-0-290" class="d">-// As a special case, if src is nil, a non-OAuth2 client is returned
</a><a href="#h57-0-291" id="h57-0-291" class="d">-// using the provided context. This exists to support related OAuth2
</a><a href="#h57-0-292" id="h57-0-292" class="d">-// packages.
</a><a href="#h57-0-293" id="h57-0-293" class="d">-func NewClient(ctx context.Context, src TokenSource) *http.Client {
</a><a href="#h57-0-294" id="h57-0-294" class="d">-	if src == nil {
</a><a href="#h57-0-295" id="h57-0-295" class="d">-		c, err := internal.ContextClient(ctx)
</a><a href="#h57-0-296" id="h57-0-296" class="d">-		if err != nil {
</a><a href="#h57-0-297" id="h57-0-297" class="d">-			return &amp;http.Client{Transport: internal.ErrorTransport{err}}
</a><a href="#h57-0-298" id="h57-0-298" class="d">-		}
</a><a href="#h57-0-299" id="h57-0-299" class="d">-		return c
</a><a href="#h57-0-300" id="h57-0-300" class="d">-	}
</a><a href="#h57-0-301" id="h57-0-301" class="d">-	return &amp;http.Client{
</a><a href="#h57-0-302" id="h57-0-302" class="d">-		Transport: &amp;Transport{
</a><a href="#h57-0-303" id="h57-0-303" class="d">-			Base:   internal.ContextTransport(ctx),
</a><a href="#h57-0-304" id="h57-0-304" class="d">-			Source: ReuseTokenSource(nil, src),
</a><a href="#h57-0-305" id="h57-0-305" class="d">-		},
</a><a href="#h57-0-306" id="h57-0-306" class="d">-	}
</a><a href="#h57-0-307" id="h57-0-307" class="d">-}
</a><a href="#h57-0-308" id="h57-0-308" class="d">-
</a><a href="#h57-0-309" id="h57-0-309" class="d">-// ReuseTokenSource returns a TokenSource which repeatedly returns the
</a><a href="#h57-0-310" id="h57-0-310" class="d">-// same token as long as it&#39;s valid, starting with t.
</a><a href="#h57-0-311" id="h57-0-311" class="d">-// When its cached token is invalid, a new token is obtained from src.
</a><a href="#h57-0-312" id="h57-0-312" class="d">-//
</a><a href="#h57-0-313" id="h57-0-313" class="d">-// ReuseTokenSource is typically used to reuse tokens from a cache
</a><a href="#h57-0-314" id="h57-0-314" class="d">-// (such as a file on disk) between runs of a program, rather than
</a><a href="#h57-0-315" id="h57-0-315" class="d">-// obtaining new tokens unnecessarily.
</a><a href="#h57-0-316" id="h57-0-316" class="d">-//
</a><a href="#h57-0-317" id="h57-0-317" class="d">-// The initial token t may be nil, in which case the TokenSource is
</a><a href="#h57-0-318" id="h57-0-318" class="d">-// wrapped in a caching version if it isn&#39;t one already. This also
</a><a href="#h57-0-319" id="h57-0-319" class="d">-// means it&#39;s always safe to wrap ReuseTokenSource around any other
</a><a href="#h57-0-320" id="h57-0-320" class="d">-// TokenSource without adverse effects.
</a><a href="#h57-0-321" id="h57-0-321" class="d">-func ReuseTokenSource(t *Token, src TokenSource) TokenSource {
</a><a href="#h57-0-322" id="h57-0-322" class="d">-	// Don&#39;t wrap a reuseTokenSource in itself. That would work,
</a><a href="#h57-0-323" id="h57-0-323" class="d">-	// but cause an unnecessary number of mutex operations.
</a><a href="#h57-0-324" id="h57-0-324" class="d">-	// Just build the equivalent one.
</a><a href="#h57-0-325" id="h57-0-325" class="d">-	if rt, ok := src.(*reuseTokenSource); ok {
</a><a href="#h57-0-326" id="h57-0-326" class="d">-		if t == nil {
</a><a href="#h57-0-327" id="h57-0-327" class="d">-			// Just use it directly.
</a><a href="#h57-0-328" id="h57-0-328" class="d">-			return rt
</a><a href="#h57-0-329" id="h57-0-329" class="d">-		}
</a><a href="#h57-0-330" id="h57-0-330" class="d">-		src = rt.new
</a><a href="#h57-0-331" id="h57-0-331" class="d">-	}
</a><a href="#h57-0-332" id="h57-0-332" class="d">-	return &amp;reuseTokenSource{
</a><a href="#h57-0-333" id="h57-0-333" class="d">-		t:   t,
</a><a href="#h57-0-334" id="h57-0-334" class="d">-		new: src,
</a><a href="#h57-0-335" id="h57-0-335" class="d">-	}
</a><a href="#h57-0-336" id="h57-0-336" class="d">-}
</a><b>diff --git a/<a id="h58" href="../file/vendor/golang.org/x/oauth2/token.go">vendor/golang.org/x/oauth2/token.go</a> b/<a href="../file/vendor/golang.org/x/oauth2/token.go">vendor/golang.org/x/oauth2/token.go</a></b>
<a href="#h58-0" id="h58-0" class="h">@@ -1,158 +0,0 @@
</a><a href="#h58-0-0" id="h58-0-0" class="d">-// Copyright 2014 The Go Authors. All rights reserved.
</a><a href="#h58-0-1" id="h58-0-1" class="d">-// Use of this source code is governed by a BSD-style
</a><a href="#h58-0-2" id="h58-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h58-0-3" id="h58-0-3" class="d">-
</a><a href="#h58-0-4" id="h58-0-4" class="d">-package oauth2
</a><a href="#h58-0-5" id="h58-0-5" class="d">-
</a><a href="#h58-0-6" id="h58-0-6" class="d">-import (
</a><a href="#h58-0-7" id="h58-0-7" class="d">-	&quot;net/http&quot;
</a><a href="#h58-0-8" id="h58-0-8" class="d">-	&quot;net/url&quot;
</a><a href="#h58-0-9" id="h58-0-9" class="d">-	&quot;strconv&quot;
</a><a href="#h58-0-10" id="h58-0-10" class="d">-	&quot;strings&quot;
</a><a href="#h58-0-11" id="h58-0-11" class="d">-	&quot;time&quot;
</a><a href="#h58-0-12" id="h58-0-12" class="d">-
</a><a href="#h58-0-13" id="h58-0-13" class="d">-	&quot;golang.org/x/net/context&quot;
</a><a href="#h58-0-14" id="h58-0-14" class="d">-	&quot;golang.org/x/oauth2/internal&quot;
</a><a href="#h58-0-15" id="h58-0-15" class="d">-)
</a><a href="#h58-0-16" id="h58-0-16" class="d">-
</a><a href="#h58-0-17" id="h58-0-17" class="d">-// expiryDelta determines how earlier a token should be considered
</a><a href="#h58-0-18" id="h58-0-18" class="d">-// expired than its actual expiration time. It is used to avoid late
</a><a href="#h58-0-19" id="h58-0-19" class="d">-// expirations due to client-server time mismatches.
</a><a href="#h58-0-20" id="h58-0-20" class="d">-const expiryDelta = 10 * time.Second
</a><a href="#h58-0-21" id="h58-0-21" class="d">-
</a><a href="#h58-0-22" id="h58-0-22" class="d">-// Token represents the crendentials used to authorize
</a><a href="#h58-0-23" id="h58-0-23" class="d">-// the requests to access protected resources on the OAuth 2.0
</a><a href="#h58-0-24" id="h58-0-24" class="d">-// provider&#39;s backend.
</a><a href="#h58-0-25" id="h58-0-25" class="d">-//
</a><a href="#h58-0-26" id="h58-0-26" class="d">-// Most users of this package should not access fields of Token
</a><a href="#h58-0-27" id="h58-0-27" class="d">-// directly. They&#39;re exported mostly for use by related packages
</a><a href="#h58-0-28" id="h58-0-28" class="d">-// implementing derivative OAuth2 flows.
</a><a href="#h58-0-29" id="h58-0-29" class="d">-type Token struct {
</a><a href="#h58-0-30" id="h58-0-30" class="d">-	// AccessToken is the token that authorizes and authenticates
</a><a href="#h58-0-31" id="h58-0-31" class="d">-	// the requests.
</a><a href="#h58-0-32" id="h58-0-32" class="d">-	AccessToken string `json:&quot;access_token&quot;`
</a><a href="#h58-0-33" id="h58-0-33" class="d">-
</a><a href="#h58-0-34" id="h58-0-34" class="d">-	// TokenType is the type of token.
</a><a href="#h58-0-35" id="h58-0-35" class="d">-	// The Type method returns either this or &quot;Bearer&quot;, the default.
</a><a href="#h58-0-36" id="h58-0-36" class="d">-	TokenType string `json:&quot;token_type,omitempty&quot;`
</a><a href="#h58-0-37" id="h58-0-37" class="d">-
</a><a href="#h58-0-38" id="h58-0-38" class="d">-	// RefreshToken is a token that&#39;s used by the application
</a><a href="#h58-0-39" id="h58-0-39" class="d">-	// (as opposed to the user) to refresh the access token
</a><a href="#h58-0-40" id="h58-0-40" class="d">-	// if it expires.
</a><a href="#h58-0-41" id="h58-0-41" class="d">-	RefreshToken string `json:&quot;refresh_token,omitempty&quot;`
</a><a href="#h58-0-42" id="h58-0-42" class="d">-
</a><a href="#h58-0-43" id="h58-0-43" class="d">-	// Expiry is the optional expiration time of the access token.
</a><a href="#h58-0-44" id="h58-0-44" class="d">-	//
</a><a href="#h58-0-45" id="h58-0-45" class="d">-	// If zero, TokenSource implementations will reuse the same
</a><a href="#h58-0-46" id="h58-0-46" class="d">-	// token forever and RefreshToken or equivalent
</a><a href="#h58-0-47" id="h58-0-47" class="d">-	// mechanisms for that TokenSource will not be used.
</a><a href="#h58-0-48" id="h58-0-48" class="d">-	Expiry time.Time `json:&quot;expiry,omitempty&quot;`
</a><a href="#h58-0-49" id="h58-0-49" class="d">-
</a><a href="#h58-0-50" id="h58-0-50" class="d">-	// raw optionally contains extra metadata from the server
</a><a href="#h58-0-51" id="h58-0-51" class="d">-	// when updating a token.
</a><a href="#h58-0-52" id="h58-0-52" class="d">-	raw interface{}
</a><a href="#h58-0-53" id="h58-0-53" class="d">-}
</a><a href="#h58-0-54" id="h58-0-54" class="d">-
</a><a href="#h58-0-55" id="h58-0-55" class="d">-// Type returns t.TokenType if non-empty, else &quot;Bearer&quot;.
</a><a href="#h58-0-56" id="h58-0-56" class="d">-func (t *Token) Type() string {
</a><a href="#h58-0-57" id="h58-0-57" class="d">-	if strings.EqualFold(t.TokenType, &quot;bearer&quot;) {
</a><a href="#h58-0-58" id="h58-0-58" class="d">-		return &quot;Bearer&quot;
</a><a href="#h58-0-59" id="h58-0-59" class="d">-	}
</a><a href="#h58-0-60" id="h58-0-60" class="d">-	if strings.EqualFold(t.TokenType, &quot;mac&quot;) {
</a><a href="#h58-0-61" id="h58-0-61" class="d">-		return &quot;MAC&quot;
</a><a href="#h58-0-62" id="h58-0-62" class="d">-	}
</a><a href="#h58-0-63" id="h58-0-63" class="d">-	if strings.EqualFold(t.TokenType, &quot;basic&quot;) {
</a><a href="#h58-0-64" id="h58-0-64" class="d">-		return &quot;Basic&quot;
</a><a href="#h58-0-65" id="h58-0-65" class="d">-	}
</a><a href="#h58-0-66" id="h58-0-66" class="d">-	if t.TokenType != &quot;&quot; {
</a><a href="#h58-0-67" id="h58-0-67" class="d">-		return t.TokenType
</a><a href="#h58-0-68" id="h58-0-68" class="d">-	}
</a><a href="#h58-0-69" id="h58-0-69" class="d">-	return &quot;Bearer&quot;
</a><a href="#h58-0-70" id="h58-0-70" class="d">-}
</a><a href="#h58-0-71" id="h58-0-71" class="d">-
</a><a href="#h58-0-72" id="h58-0-72" class="d">-// SetAuthHeader sets the Authorization header to r using the access
</a><a href="#h58-0-73" id="h58-0-73" class="d">-// token in t.
</a><a href="#h58-0-74" id="h58-0-74" class="d">-//
</a><a href="#h58-0-75" id="h58-0-75" class="d">-// This method is unnecessary when using Transport or an HTTP Client
</a><a href="#h58-0-76" id="h58-0-76" class="d">-// returned by this package.
</a><a href="#h58-0-77" id="h58-0-77" class="d">-func (t *Token) SetAuthHeader(r *http.Request) {
</a><a href="#h58-0-78" id="h58-0-78" class="d">-	r.Header.Set(&quot;Authorization&quot;, t.Type()+&quot; &quot;+t.AccessToken)
</a><a href="#h58-0-79" id="h58-0-79" class="d">-}
</a><a href="#h58-0-80" id="h58-0-80" class="d">-
</a><a href="#h58-0-81" id="h58-0-81" class="d">-// WithExtra returns a new Token that&#39;s a clone of t, but using the
</a><a href="#h58-0-82" id="h58-0-82" class="d">-// provided raw extra map. This is only intended for use by packages
</a><a href="#h58-0-83" id="h58-0-83" class="d">-// implementing derivative OAuth2 flows.
</a><a href="#h58-0-84" id="h58-0-84" class="d">-func (t *Token) WithExtra(extra interface{}) *Token {
</a><a href="#h58-0-85" id="h58-0-85" class="d">-	t2 := new(Token)
</a><a href="#h58-0-86" id="h58-0-86" class="d">-	*t2 = *t
</a><a href="#h58-0-87" id="h58-0-87" class="d">-	t2.raw = extra
</a><a href="#h58-0-88" id="h58-0-88" class="d">-	return t2
</a><a href="#h58-0-89" id="h58-0-89" class="d">-}
</a><a href="#h58-0-90" id="h58-0-90" class="d">-
</a><a href="#h58-0-91" id="h58-0-91" class="d">-// Extra returns an extra field.
</a><a href="#h58-0-92" id="h58-0-92" class="d">-// Extra fields are key-value pairs returned by the server as a
</a><a href="#h58-0-93" id="h58-0-93" class="d">-// part of the token retrieval response.
</a><a href="#h58-0-94" id="h58-0-94" class="d">-func (t *Token) Extra(key string) interface{} {
</a><a href="#h58-0-95" id="h58-0-95" class="d">-	if raw, ok := t.raw.(map[string]interface{}); ok {
</a><a href="#h58-0-96" id="h58-0-96" class="d">-		return raw[key]
</a><a href="#h58-0-97" id="h58-0-97" class="d">-	}
</a><a href="#h58-0-98" id="h58-0-98" class="d">-
</a><a href="#h58-0-99" id="h58-0-99" class="d">-	vals, ok := t.raw.(url.Values)
</a><a href="#h58-0-100" id="h58-0-100" class="d">-	if !ok {
</a><a href="#h58-0-101" id="h58-0-101" class="d">-		return nil
</a><a href="#h58-0-102" id="h58-0-102" class="d">-	}
</a><a href="#h58-0-103" id="h58-0-103" class="d">-
</a><a href="#h58-0-104" id="h58-0-104" class="d">-	v := vals.Get(key)
</a><a href="#h58-0-105" id="h58-0-105" class="d">-	switch s := strings.TrimSpace(v); strings.Count(s, &quot;.&quot;) {
</a><a href="#h58-0-106" id="h58-0-106" class="d">-	case 0: // Contains no &quot;.&quot;; try to parse as int
</a><a href="#h58-0-107" id="h58-0-107" class="d">-		if i, err := strconv.ParseInt(s, 10, 64); err == nil {
</a><a href="#h58-0-108" id="h58-0-108" class="d">-			return i
</a><a href="#h58-0-109" id="h58-0-109" class="d">-		}
</a><a href="#h58-0-110" id="h58-0-110" class="d">-	case 1: // Contains a single &quot;.&quot;; try to parse as float
</a><a href="#h58-0-111" id="h58-0-111" class="d">-		if f, err := strconv.ParseFloat(s, 64); err == nil {
</a><a href="#h58-0-112" id="h58-0-112" class="d">-			return f
</a><a href="#h58-0-113" id="h58-0-113" class="d">-		}
</a><a href="#h58-0-114" id="h58-0-114" class="d">-	}
</a><a href="#h58-0-115" id="h58-0-115" class="d">-
</a><a href="#h58-0-116" id="h58-0-116" class="d">-	return v
</a><a href="#h58-0-117" id="h58-0-117" class="d">-}
</a><a href="#h58-0-118" id="h58-0-118" class="d">-
</a><a href="#h58-0-119" id="h58-0-119" class="d">-// expired reports whether the token is expired.
</a><a href="#h58-0-120" id="h58-0-120" class="d">-// t must be non-nil.
</a><a href="#h58-0-121" id="h58-0-121" class="d">-func (t *Token) expired() bool {
</a><a href="#h58-0-122" id="h58-0-122" class="d">-	if t.Expiry.IsZero() {
</a><a href="#h58-0-123" id="h58-0-123" class="d">-		return false
</a><a href="#h58-0-124" id="h58-0-124" class="d">-	}
</a><a href="#h58-0-125" id="h58-0-125" class="d">-	return t.Expiry.Add(-expiryDelta).Before(time.Now())
</a><a href="#h58-0-126" id="h58-0-126" class="d">-}
</a><a href="#h58-0-127" id="h58-0-127" class="d">-
</a><a href="#h58-0-128" id="h58-0-128" class="d">-// Valid reports whether t is non-nil, has an AccessToken, and is not expired.
</a><a href="#h58-0-129" id="h58-0-129" class="d">-func (t *Token) Valid() bool {
</a><a href="#h58-0-130" id="h58-0-130" class="d">-	return t != nil &amp;&amp; t.AccessToken != &quot;&quot; &amp;&amp; !t.expired()
</a><a href="#h58-0-131" id="h58-0-131" class="d">-}
</a><a href="#h58-0-132" id="h58-0-132" class="d">-
</a><a href="#h58-0-133" id="h58-0-133" class="d">-// tokenFromInternal maps an *internal.Token struct into
</a><a href="#h58-0-134" id="h58-0-134" class="d">-// a *Token struct.
</a><a href="#h58-0-135" id="h58-0-135" class="d">-func tokenFromInternal(t *internal.Token) *Token {
</a><a href="#h58-0-136" id="h58-0-136" class="d">-	if t == nil {
</a><a href="#h58-0-137" id="h58-0-137" class="d">-		return nil
</a><a href="#h58-0-138" id="h58-0-138" class="d">-	}
</a><a href="#h58-0-139" id="h58-0-139" class="d">-	return &amp;Token{
</a><a href="#h58-0-140" id="h58-0-140" class="d">-		AccessToken:  t.AccessToken,
</a><a href="#h58-0-141" id="h58-0-141" class="d">-		TokenType:    t.TokenType,
</a><a href="#h58-0-142" id="h58-0-142" class="d">-		RefreshToken: t.RefreshToken,
</a><a href="#h58-0-143" id="h58-0-143" class="d">-		Expiry:       t.Expiry,
</a><a href="#h58-0-144" id="h58-0-144" class="d">-		raw:          t.Raw,
</a><a href="#h58-0-145" id="h58-0-145" class="d">-	}
</a><a href="#h58-0-146" id="h58-0-146" class="d">-}
</a><a href="#h58-0-147" id="h58-0-147" class="d">-
</a><a href="#h58-0-148" id="h58-0-148" class="d">-// retrieveToken takes a *Config and uses that to retrieve an *internal.Token.
</a><a href="#h58-0-149" id="h58-0-149" class="d">-// This token is then mapped from *internal.Token into an *oauth2.Token which is returned along
</a><a href="#h58-0-150" id="h58-0-150" class="d">-// with an error..
</a><a href="#h58-0-151" id="h58-0-151" class="d">-func retrieveToken(ctx context.Context, c *Config, v url.Values) (*Token, error) {
</a><a href="#h58-0-152" id="h58-0-152" class="d">-	tk, err := internal.RetrieveToken(ctx, c.ClientID, c.ClientSecret, c.Endpoint.TokenURL, v)
</a><a href="#h58-0-153" id="h58-0-153" class="d">-	if err != nil {
</a><a href="#h58-0-154" id="h58-0-154" class="d">-		return nil, err
</a><a href="#h58-0-155" id="h58-0-155" class="d">-	}
</a><a href="#h58-0-156" id="h58-0-156" class="d">-	return tokenFromInternal(tk), nil
</a><a href="#h58-0-157" id="h58-0-157" class="d">-}
</a><b>diff --git a/<a id="h59" href="../file/vendor/golang.org/x/oauth2/transport.go">vendor/golang.org/x/oauth2/transport.go</a> b/<a href="../file/vendor/golang.org/x/oauth2/transport.go">vendor/golang.org/x/oauth2/transport.go</a></b>
<a href="#h59-0" id="h59-0" class="h">@@ -1,132 +0,0 @@
</a><a href="#h59-0-0" id="h59-0-0" class="d">-// Copyright 2014 The Go Authors. All rights reserved.
</a><a href="#h59-0-1" id="h59-0-1" class="d">-// Use of this source code is governed by a BSD-style
</a><a href="#h59-0-2" id="h59-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h59-0-3" id="h59-0-3" class="d">-
</a><a href="#h59-0-4" id="h59-0-4" class="d">-package oauth2
</a><a href="#h59-0-5" id="h59-0-5" class="d">-
</a><a href="#h59-0-6" id="h59-0-6" class="d">-import (
</a><a href="#h59-0-7" id="h59-0-7" class="d">-	&quot;errors&quot;
</a><a href="#h59-0-8" id="h59-0-8" class="d">-	&quot;io&quot;
</a><a href="#h59-0-9" id="h59-0-9" class="d">-	&quot;net/http&quot;
</a><a href="#h59-0-10" id="h59-0-10" class="d">-	&quot;sync&quot;
</a><a href="#h59-0-11" id="h59-0-11" class="d">-)
</a><a href="#h59-0-12" id="h59-0-12" class="d">-
</a><a href="#h59-0-13" id="h59-0-13" class="d">-// Transport is an http.RoundTripper that makes OAuth 2.0 HTTP requests,
</a><a href="#h59-0-14" id="h59-0-14" class="d">-// wrapping a base RoundTripper and adding an Authorization header
</a><a href="#h59-0-15" id="h59-0-15" class="d">-// with a token from the supplied Sources.
</a><a href="#h59-0-16" id="h59-0-16" class="d">-//
</a><a href="#h59-0-17" id="h59-0-17" class="d">-// Transport is a low-level mechanism. Most code will use the
</a><a href="#h59-0-18" id="h59-0-18" class="d">-// higher-level Config.Client method instead.
</a><a href="#h59-0-19" id="h59-0-19" class="d">-type Transport struct {
</a><a href="#h59-0-20" id="h59-0-20" class="d">-	// Source supplies the token to add to outgoing requests&#39;
</a><a href="#h59-0-21" id="h59-0-21" class="d">-	// Authorization headers.
</a><a href="#h59-0-22" id="h59-0-22" class="d">-	Source TokenSource
</a><a href="#h59-0-23" id="h59-0-23" class="d">-
</a><a href="#h59-0-24" id="h59-0-24" class="d">-	// Base is the base RoundTripper used to make HTTP requests.
</a><a href="#h59-0-25" id="h59-0-25" class="d">-	// If nil, http.DefaultTransport is used.
</a><a href="#h59-0-26" id="h59-0-26" class="d">-	Base http.RoundTripper
</a><a href="#h59-0-27" id="h59-0-27" class="d">-
</a><a href="#h59-0-28" id="h59-0-28" class="d">-	mu     sync.Mutex                      // guards modReq
</a><a href="#h59-0-29" id="h59-0-29" class="d">-	modReq map[*http.Request]*http.Request // original -&gt; modified
</a><a href="#h59-0-30" id="h59-0-30" class="d">-}
</a><a href="#h59-0-31" id="h59-0-31" class="d">-
</a><a href="#h59-0-32" id="h59-0-32" class="d">-// RoundTrip authorizes and authenticates the request with an
</a><a href="#h59-0-33" id="h59-0-33" class="d">-// access token. If no token exists or token is expired,
</a><a href="#h59-0-34" id="h59-0-34" class="d">-// tries to refresh/fetch a new token.
</a><a href="#h59-0-35" id="h59-0-35" class="d">-func (t *Transport) RoundTrip(req *http.Request) (*http.Response, error) {
</a><a href="#h59-0-36" id="h59-0-36" class="d">-	if t.Source == nil {
</a><a href="#h59-0-37" id="h59-0-37" class="d">-		return nil, errors.New(&quot;oauth2: Transport&#39;s Source is nil&quot;)
</a><a href="#h59-0-38" id="h59-0-38" class="d">-	}
</a><a href="#h59-0-39" id="h59-0-39" class="d">-	token, err := t.Source.Token()
</a><a href="#h59-0-40" id="h59-0-40" class="d">-	if err != nil {
</a><a href="#h59-0-41" id="h59-0-41" class="d">-		return nil, err
</a><a href="#h59-0-42" id="h59-0-42" class="d">-	}
</a><a href="#h59-0-43" id="h59-0-43" class="d">-
</a><a href="#h59-0-44" id="h59-0-44" class="d">-	req2 := cloneRequest(req) // per RoundTripper contract
</a><a href="#h59-0-45" id="h59-0-45" class="d">-	token.SetAuthHeader(req2)
</a><a href="#h59-0-46" id="h59-0-46" class="d">-	t.setModReq(req, req2)
</a><a href="#h59-0-47" id="h59-0-47" class="d">-	res, err := t.base().RoundTrip(req2)
</a><a href="#h59-0-48" id="h59-0-48" class="d">-	if err != nil {
</a><a href="#h59-0-49" id="h59-0-49" class="d">-		t.setModReq(req, nil)
</a><a href="#h59-0-50" id="h59-0-50" class="d">-		return nil, err
</a><a href="#h59-0-51" id="h59-0-51" class="d">-	}
</a><a href="#h59-0-52" id="h59-0-52" class="d">-	res.Body = &amp;onEOFReader{
</a><a href="#h59-0-53" id="h59-0-53" class="d">-		rc: res.Body,
</a><a href="#h59-0-54" id="h59-0-54" class="d">-		fn: func() { t.setModReq(req, nil) },
</a><a href="#h59-0-55" id="h59-0-55" class="d">-	}
</a><a href="#h59-0-56" id="h59-0-56" class="d">-	return res, nil
</a><a href="#h59-0-57" id="h59-0-57" class="d">-}
</a><a href="#h59-0-58" id="h59-0-58" class="d">-
</a><a href="#h59-0-59" id="h59-0-59" class="d">-// CancelRequest cancels an in-flight request by closing its connection.
</a><a href="#h59-0-60" id="h59-0-60" class="d">-func (t *Transport) CancelRequest(req *http.Request) {
</a><a href="#h59-0-61" id="h59-0-61" class="d">-	type canceler interface {
</a><a href="#h59-0-62" id="h59-0-62" class="d">-		CancelRequest(*http.Request)
</a><a href="#h59-0-63" id="h59-0-63" class="d">-	}
</a><a href="#h59-0-64" id="h59-0-64" class="d">-	if cr, ok := t.base().(canceler); ok {
</a><a href="#h59-0-65" id="h59-0-65" class="d">-		t.mu.Lock()
</a><a href="#h59-0-66" id="h59-0-66" class="d">-		modReq := t.modReq[req]
</a><a href="#h59-0-67" id="h59-0-67" class="d">-		delete(t.modReq, req)
</a><a href="#h59-0-68" id="h59-0-68" class="d">-		t.mu.Unlock()
</a><a href="#h59-0-69" id="h59-0-69" class="d">-		cr.CancelRequest(modReq)
</a><a href="#h59-0-70" id="h59-0-70" class="d">-	}
</a><a href="#h59-0-71" id="h59-0-71" class="d">-}
</a><a href="#h59-0-72" id="h59-0-72" class="d">-
</a><a href="#h59-0-73" id="h59-0-73" class="d">-func (t *Transport) base() http.RoundTripper {
</a><a href="#h59-0-74" id="h59-0-74" class="d">-	if t.Base != nil {
</a><a href="#h59-0-75" id="h59-0-75" class="d">-		return t.Base
</a><a href="#h59-0-76" id="h59-0-76" class="d">-	}
</a><a href="#h59-0-77" id="h59-0-77" class="d">-	return http.DefaultTransport
</a><a href="#h59-0-78" id="h59-0-78" class="d">-}
</a><a href="#h59-0-79" id="h59-0-79" class="d">-
</a><a href="#h59-0-80" id="h59-0-80" class="d">-func (t *Transport) setModReq(orig, mod *http.Request) {
</a><a href="#h59-0-81" id="h59-0-81" class="d">-	t.mu.Lock()
</a><a href="#h59-0-82" id="h59-0-82" class="d">-	defer t.mu.Unlock()
</a><a href="#h59-0-83" id="h59-0-83" class="d">-	if t.modReq == nil {
</a><a href="#h59-0-84" id="h59-0-84" class="d">-		t.modReq = make(map[*http.Request]*http.Request)
</a><a href="#h59-0-85" id="h59-0-85" class="d">-	}
</a><a href="#h59-0-86" id="h59-0-86" class="d">-	if mod == nil {
</a><a href="#h59-0-87" id="h59-0-87" class="d">-		delete(t.modReq, orig)
</a><a href="#h59-0-88" id="h59-0-88" class="d">-	} else {
</a><a href="#h59-0-89" id="h59-0-89" class="d">-		t.modReq[orig] = mod
</a><a href="#h59-0-90" id="h59-0-90" class="d">-	}
</a><a href="#h59-0-91" id="h59-0-91" class="d">-}
</a><a href="#h59-0-92" id="h59-0-92" class="d">-
</a><a href="#h59-0-93" id="h59-0-93" class="d">-// cloneRequest returns a clone of the provided *http.Request.
</a><a href="#h59-0-94" id="h59-0-94" class="d">-// The clone is a shallow copy of the struct and its Header map.
</a><a href="#h59-0-95" id="h59-0-95" class="d">-func cloneRequest(r *http.Request) *http.Request {
</a><a href="#h59-0-96" id="h59-0-96" class="d">-	// shallow copy of the struct
</a><a href="#h59-0-97" id="h59-0-97" class="d">-	r2 := new(http.Request)
</a><a href="#h59-0-98" id="h59-0-98" class="d">-	*r2 = *r
</a><a href="#h59-0-99" id="h59-0-99" class="d">-	// deep copy of the Header
</a><a href="#h59-0-100" id="h59-0-100" class="d">-	r2.Header = make(http.Header, len(r.Header))
</a><a href="#h59-0-101" id="h59-0-101" class="d">-	for k, s := range r.Header {
</a><a href="#h59-0-102" id="h59-0-102" class="d">-		r2.Header[k] = append([]string(nil), s...)
</a><a href="#h59-0-103" id="h59-0-103" class="d">-	}
</a><a href="#h59-0-104" id="h59-0-104" class="d">-	return r2
</a><a href="#h59-0-105" id="h59-0-105" class="d">-}
</a><a href="#h59-0-106" id="h59-0-106" class="d">-
</a><a href="#h59-0-107" id="h59-0-107" class="d">-type onEOFReader struct {
</a><a href="#h59-0-108" id="h59-0-108" class="d">-	rc io.ReadCloser
</a><a href="#h59-0-109" id="h59-0-109" class="d">-	fn func()
</a><a href="#h59-0-110" id="h59-0-110" class="d">-}
</a><a href="#h59-0-111" id="h59-0-111" class="d">-
</a><a href="#h59-0-112" id="h59-0-112" class="d">-func (r *onEOFReader) Read(p []byte) (n int, err error) {
</a><a href="#h59-0-113" id="h59-0-113" class="d">-	n, err = r.rc.Read(p)
</a><a href="#h59-0-114" id="h59-0-114" class="d">-	if err == io.EOF {
</a><a href="#h59-0-115" id="h59-0-115" class="d">-		r.runFunc()
</a><a href="#h59-0-116" id="h59-0-116" class="d">-	}
</a><a href="#h59-0-117" id="h59-0-117" class="d">-	return
</a><a href="#h59-0-118" id="h59-0-118" class="d">-}
</a><a href="#h59-0-119" id="h59-0-119" class="d">-
</a><a href="#h59-0-120" id="h59-0-120" class="d">-func (r *onEOFReader) Close() error {
</a><a href="#h59-0-121" id="h59-0-121" class="d">-	err := r.rc.Close()
</a><a href="#h59-0-122" id="h59-0-122" class="d">-	r.runFunc()
</a><a href="#h59-0-123" id="h59-0-123" class="d">-	return err
</a><a href="#h59-0-124" id="h59-0-124" class="d">-}
</a><a href="#h59-0-125" id="h59-0-125" class="d">-
</a><a href="#h59-0-126" id="h59-0-126" class="d">-func (r *onEOFReader) runFunc() {
</a><a href="#h59-0-127" id="h59-0-127" class="d">-	if fn := r.fn; fn != nil {
</a><a href="#h59-0-128" id="h59-0-128" class="d">-		fn()
</a><a href="#h59-0-129" id="h59-0-129" class="d">-		r.fn = nil
</a><a href="#h59-0-130" id="h59-0-130" class="d">-	}
</a><a href="#h59-0-131" id="h59-0-131" class="d">-}
</a><b>diff --git a/<a id="h60" href="../file/vendor/google.golang.org/appengine/LICENSE">vendor/google.golang.org/appengine/LICENSE</a> b/<a href="../file/vendor/google.golang.org/appengine/LICENSE">vendor/google.golang.org/appengine/LICENSE</a></b>
<a href="#h60-0" id="h60-0" class="h">@@ -1,202 +0,0 @@
</a><a href="#h60-0-0" id="h60-0-0" class="d">-
</a><a href="#h60-0-1" id="h60-0-1" class="d">-                                 Apache License
</a><a href="#h60-0-2" id="h60-0-2" class="d">-                           Version 2.0, January 2004
</a><a href="#h60-0-3" id="h60-0-3" class="d">-                        http://www.apache.org/licenses/
</a><a href="#h60-0-4" id="h60-0-4" class="d">-
</a><a href="#h60-0-5" id="h60-0-5" class="d">-   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
</a><a href="#h60-0-6" id="h60-0-6" class="d">-
</a><a href="#h60-0-7" id="h60-0-7" class="d">-   1. Definitions.
</a><a href="#h60-0-8" id="h60-0-8" class="d">-
</a><a href="#h60-0-9" id="h60-0-9" class="d">-      &quot;License&quot; shall mean the terms and conditions for use, reproduction,
</a><a href="#h60-0-10" id="h60-0-10" class="d">-      and distribution as defined by Sections 1 through 9 of this document.
</a><a href="#h60-0-11" id="h60-0-11" class="d">-
</a><a href="#h60-0-12" id="h60-0-12" class="d">-      &quot;Licensor&quot; shall mean the copyright owner or entity authorized by
</a><a href="#h60-0-13" id="h60-0-13" class="d">-      the copyright owner that is granting the License.
</a><a href="#h60-0-14" id="h60-0-14" class="d">-
</a><a href="#h60-0-15" id="h60-0-15" class="d">-      &quot;Legal Entity&quot; shall mean the union of the acting entity and all
</a><a href="#h60-0-16" id="h60-0-16" class="d">-      other entities that control, are controlled by, or are under common
</a><a href="#h60-0-17" id="h60-0-17" class="d">-      control with that entity. For the purposes of this definition,
</a><a href="#h60-0-18" id="h60-0-18" class="d">-      &quot;control&quot; means (i) the power, direct or indirect, to cause the
</a><a href="#h60-0-19" id="h60-0-19" class="d">-      direction or management of such entity, whether by contract or
</a><a href="#h60-0-20" id="h60-0-20" class="d">-      otherwise, or (ii) ownership of fifty percent (50%) or more of the
</a><a href="#h60-0-21" id="h60-0-21" class="d">-      outstanding shares, or (iii) beneficial ownership of such entity.
</a><a href="#h60-0-22" id="h60-0-22" class="d">-
</a><a href="#h60-0-23" id="h60-0-23" class="d">-      &quot;You&quot; (or &quot;Your&quot;) shall mean an individual or Legal Entity
</a><a href="#h60-0-24" id="h60-0-24" class="d">-      exercising permissions granted by this License.
</a><a href="#h60-0-25" id="h60-0-25" class="d">-
</a><a href="#h60-0-26" id="h60-0-26" class="d">-      &quot;Source&quot; form shall mean the preferred form for making modifications,
</a><a href="#h60-0-27" id="h60-0-27" class="d">-      including but not limited to software source code, documentation
</a><a href="#h60-0-28" id="h60-0-28" class="d">-      source, and configuration files.
</a><a href="#h60-0-29" id="h60-0-29" class="d">-
</a><a href="#h60-0-30" id="h60-0-30" class="d">-      &quot;Object&quot; form shall mean any form resulting from mechanical
</a><a href="#h60-0-31" id="h60-0-31" class="d">-      transformation or translation of a Source form, including but
</a><a href="#h60-0-32" id="h60-0-32" class="d">-      not limited to compiled object code, generated documentation,
</a><a href="#h60-0-33" id="h60-0-33" class="d">-      and conversions to other media types.
</a><a href="#h60-0-34" id="h60-0-34" class="d">-
</a><a href="#h60-0-35" id="h60-0-35" class="d">-      &quot;Work&quot; shall mean the work of authorship, whether in Source or
</a><a href="#h60-0-36" id="h60-0-36" class="d">-      Object form, made available under the License, as indicated by a
</a><a href="#h60-0-37" id="h60-0-37" class="d">-      copyright notice that is included in or attached to the work
</a><a href="#h60-0-38" id="h60-0-38" class="d">-      (an example is provided in the Appendix below).
</a><a href="#h60-0-39" id="h60-0-39" class="d">-
</a><a href="#h60-0-40" id="h60-0-40" class="d">-      &quot;Derivative Works&quot; shall mean any work, whether in Source or Object
</a><a href="#h60-0-41" id="h60-0-41" class="d">-      form, that is based on (or derived from) the Work and for which the
</a><a href="#h60-0-42" id="h60-0-42" class="d">-      editorial revisions, annotations, elaborations, or other modifications
</a><a href="#h60-0-43" id="h60-0-43" class="d">-      represent, as a whole, an original work of authorship. For the purposes
</a><a href="#h60-0-44" id="h60-0-44" class="d">-      of this License, Derivative Works shall not include works that remain
</a><a href="#h60-0-45" id="h60-0-45" class="d">-      separable from, or merely link (or bind by name) to the interfaces of,
</a><a href="#h60-0-46" id="h60-0-46" class="d">-      the Work and Derivative Works thereof.
</a><a href="#h60-0-47" id="h60-0-47" class="d">-
</a><a href="#h60-0-48" id="h60-0-48" class="d">-      &quot;Contribution&quot; shall mean any work of authorship, including
</a><a href="#h60-0-49" id="h60-0-49" class="d">-      the original version of the Work and any modifications or additions
</a><a href="#h60-0-50" id="h60-0-50" class="d">-      to that Work or Derivative Works thereof, that is intentionally
</a><a href="#h60-0-51" id="h60-0-51" class="d">-      submitted to Licensor for inclusion in the Work by the copyright owner
</a><a href="#h60-0-52" id="h60-0-52" class="d">-      or by an individual or Legal Entity authorized to submit on behalf of
</a><a href="#h60-0-53" id="h60-0-53" class="d">-      the copyright owner. For the purposes of this definition, &quot;submitted&quot;
</a><a href="#h60-0-54" id="h60-0-54" class="d">-      means any form of electronic, verbal, or written communication sent
</a><a href="#h60-0-55" id="h60-0-55" class="d">-      to the Licensor or its representatives, including but not limited to
</a><a href="#h60-0-56" id="h60-0-56" class="d">-      communication on electronic mailing lists, source code control systems,
</a><a href="#h60-0-57" id="h60-0-57" class="d">-      and issue tracking systems that are managed by, or on behalf of, the
</a><a href="#h60-0-58" id="h60-0-58" class="d">-      Licensor for the purpose of discussing and improving the Work, but
</a><a href="#h60-0-59" id="h60-0-59" class="d">-      excluding communication that is conspicuously marked or otherwise
</a><a href="#h60-0-60" id="h60-0-60" class="d">-      designated in writing by the copyright owner as &quot;Not a Contribution.&quot;
</a><a href="#h60-0-61" id="h60-0-61" class="d">-
</a><a href="#h60-0-62" id="h60-0-62" class="d">-      &quot;Contributor&quot; shall mean Licensor and any individual or Legal Entity
</a><a href="#h60-0-63" id="h60-0-63" class="d">-      on behalf of whom a Contribution has been received by Licensor and
</a><a href="#h60-0-64" id="h60-0-64" class="d">-      subsequently incorporated within the Work.
</a><a href="#h60-0-65" id="h60-0-65" class="d">-
</a><a href="#h60-0-66" id="h60-0-66" class="d">-   2. Grant of Copyright License. Subject to the terms and conditions of
</a><a href="#h60-0-67" id="h60-0-67" class="d">-      this License, each Contributor hereby grants to You a perpetual,
</a><a href="#h60-0-68" id="h60-0-68" class="d">-      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
</a><a href="#h60-0-69" id="h60-0-69" class="d">-      copyright license to reproduce, prepare Derivative Works of,
</a><a href="#h60-0-70" id="h60-0-70" class="d">-      publicly display, publicly perform, sublicense, and distribute the
</a><a href="#h60-0-71" id="h60-0-71" class="d">-      Work and such Derivative Works in Source or Object form.
</a><a href="#h60-0-72" id="h60-0-72" class="d">-
</a><a href="#h60-0-73" id="h60-0-73" class="d">-   3. Grant of Patent License. Subject to the terms and conditions of
</a><a href="#h60-0-74" id="h60-0-74" class="d">-      this License, each Contributor hereby grants to You a perpetual,
</a><a href="#h60-0-75" id="h60-0-75" class="d">-      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
</a><a href="#h60-0-76" id="h60-0-76" class="d">-      (except as stated in this section) patent license to make, have made,
</a><a href="#h60-0-77" id="h60-0-77" class="d">-      use, offer to sell, sell, import, and otherwise transfer the Work,
</a><a href="#h60-0-78" id="h60-0-78" class="d">-      where such license applies only to those patent claims licensable
</a><a href="#h60-0-79" id="h60-0-79" class="d">-      by such Contributor that are necessarily infringed by their
</a><a href="#h60-0-80" id="h60-0-80" class="d">-      Contribution(s) alone or by combination of their Contribution(s)
</a><a href="#h60-0-81" id="h60-0-81" class="d">-      with the Work to which such Contribution(s) was submitted. If You
</a><a href="#h60-0-82" id="h60-0-82" class="d">-      institute patent litigation against any entity (including a
</a><a href="#h60-0-83" id="h60-0-83" class="d">-      cross-claim or counterclaim in a lawsuit) alleging that the Work
</a><a href="#h60-0-84" id="h60-0-84" class="d">-      or a Contribution incorporated within the Work constitutes direct
</a><a href="#h60-0-85" id="h60-0-85" class="d">-      or contributory patent infringement, then any patent licenses
</a><a href="#h60-0-86" id="h60-0-86" class="d">-      granted to You under this License for that Work shall terminate
</a><a href="#h60-0-87" id="h60-0-87" class="d">-      as of the date such litigation is filed.
</a><a href="#h60-0-88" id="h60-0-88" class="d">-
</a><a href="#h60-0-89" id="h60-0-89" class="d">-   4. Redistribution. You may reproduce and distribute copies of the
</a><a href="#h60-0-90" id="h60-0-90" class="d">-      Work or Derivative Works thereof in any medium, with or without
</a><a href="#h60-0-91" id="h60-0-91" class="d">-      modifications, and in Source or Object form, provided that You
</a><a href="#h60-0-92" id="h60-0-92" class="d">-      meet the following conditions:
</a><a href="#h60-0-93" id="h60-0-93" class="d">-
</a><a href="#h60-0-94" id="h60-0-94" class="d">-      (a) You must give any other recipients of the Work or
</a><a href="#h60-0-95" id="h60-0-95" class="d">-          Derivative Works a copy of this License; and
</a><a href="#h60-0-96" id="h60-0-96" class="d">-
</a><a href="#h60-0-97" id="h60-0-97" class="d">-      (b) You must cause any modified files to carry prominent notices
</a><a href="#h60-0-98" id="h60-0-98" class="d">-          stating that You changed the files; and
</a><a href="#h60-0-99" id="h60-0-99" class="d">-
</a><a href="#h60-0-100" id="h60-0-100" class="d">-      (c) You must retain, in the Source form of any Derivative Works
</a><a href="#h60-0-101" id="h60-0-101" class="d">-          that You distribute, all copyright, patent, trademark, and
</a><a href="#h60-0-102" id="h60-0-102" class="d">-          attribution notices from the Source form of the Work,
</a><a href="#h60-0-103" id="h60-0-103" class="d">-          excluding those notices that do not pertain to any part of
</a><a href="#h60-0-104" id="h60-0-104" class="d">-          the Derivative Works; and
</a><a href="#h60-0-105" id="h60-0-105" class="d">-
</a><a href="#h60-0-106" id="h60-0-106" class="d">-      (d) If the Work includes a &quot;NOTICE&quot; text file as part of its
</a><a href="#h60-0-107" id="h60-0-107" class="d">-          distribution, then any Derivative Works that You distribute must
</a><a href="#h60-0-108" id="h60-0-108" class="d">-          include a readable copy of the attribution notices contained
</a><a href="#h60-0-109" id="h60-0-109" class="d">-          within such NOTICE file, excluding those notices that do not
</a><a href="#h60-0-110" id="h60-0-110" class="d">-          pertain to any part of the Derivative Works, in at least one
</a><a href="#h60-0-111" id="h60-0-111" class="d">-          of the following places: within a NOTICE text file distributed
</a><a href="#h60-0-112" id="h60-0-112" class="d">-          as part of the Derivative Works; within the Source form or
</a><a href="#h60-0-113" id="h60-0-113" class="d">-          documentation, if provided along with the Derivative Works; or,
</a><a href="#h60-0-114" id="h60-0-114" class="d">-          within a display generated by the Derivative Works, if and
</a><a href="#h60-0-115" id="h60-0-115" class="d">-          wherever such third-party notices normally appear. The contents
</a><a href="#h60-0-116" id="h60-0-116" class="d">-          of the NOTICE file are for informational purposes only and
</a><a href="#h60-0-117" id="h60-0-117" class="d">-          do not modify the License. You may add Your own attribution
</a><a href="#h60-0-118" id="h60-0-118" class="d">-          notices within Derivative Works that You distribute, alongside
</a><a href="#h60-0-119" id="h60-0-119" class="d">-          or as an addendum to the NOTICE text from the Work, provided
</a><a href="#h60-0-120" id="h60-0-120" class="d">-          that such additional attribution notices cannot be construed
</a><a href="#h60-0-121" id="h60-0-121" class="d">-          as modifying the License.
</a><a href="#h60-0-122" id="h60-0-122" class="d">-
</a><a href="#h60-0-123" id="h60-0-123" class="d">-      You may add Your own copyright statement to Your modifications and
</a><a href="#h60-0-124" id="h60-0-124" class="d">-      may provide additional or different license terms and conditions
</a><a href="#h60-0-125" id="h60-0-125" class="d">-      for use, reproduction, or distribution of Your modifications, or
</a><a href="#h60-0-126" id="h60-0-126" class="d">-      for any such Derivative Works as a whole, provided Your use,
</a><a href="#h60-0-127" id="h60-0-127" class="d">-      reproduction, and distribution of the Work otherwise complies with
</a><a href="#h60-0-128" id="h60-0-128" class="d">-      the conditions stated in this License.
</a><a href="#h60-0-129" id="h60-0-129" class="d">-
</a><a href="#h60-0-130" id="h60-0-130" class="d">-   5. Submission of Contributions. Unless You explicitly state otherwise,
</a><a href="#h60-0-131" id="h60-0-131" class="d">-      any Contribution intentionally submitted for inclusion in the Work
</a><a href="#h60-0-132" id="h60-0-132" class="d">-      by You to the Licensor shall be under the terms and conditions of
</a><a href="#h60-0-133" id="h60-0-133" class="d">-      this License, without any additional terms or conditions.
</a><a href="#h60-0-134" id="h60-0-134" class="d">-      Notwithstanding the above, nothing herein shall supersede or modify
</a><a href="#h60-0-135" id="h60-0-135" class="d">-      the terms of any separate license agreement you may have executed
</a><a href="#h60-0-136" id="h60-0-136" class="d">-      with Licensor regarding such Contributions.
</a><a href="#h60-0-137" id="h60-0-137" class="d">-
</a><a href="#h60-0-138" id="h60-0-138" class="d">-   6. Trademarks. This License does not grant permission to use the trade
</a><a href="#h60-0-139" id="h60-0-139" class="d">-      names, trademarks, service marks, or product names of the Licensor,
</a><a href="#h60-0-140" id="h60-0-140" class="d">-      except as required for reasonable and customary use in describing the
</a><a href="#h60-0-141" id="h60-0-141" class="d">-      origin of the Work and reproducing the content of the NOTICE file.
</a><a href="#h60-0-142" id="h60-0-142" class="d">-
</a><a href="#h60-0-143" id="h60-0-143" class="d">-   7. Disclaimer of Warranty. Unless required by applicable law or
</a><a href="#h60-0-144" id="h60-0-144" class="d">-      agreed to in writing, Licensor provides the Work (and each
</a><a href="#h60-0-145" id="h60-0-145" class="d">-      Contributor provides its Contributions) on an &quot;AS IS&quot; BASIS,
</a><a href="#h60-0-146" id="h60-0-146" class="d">-      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
</a><a href="#h60-0-147" id="h60-0-147" class="d">-      implied, including, without limitation, any warranties or conditions
</a><a href="#h60-0-148" id="h60-0-148" class="d">-      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
</a><a href="#h60-0-149" id="h60-0-149" class="d">-      PARTICULAR PURPOSE. You are solely responsible for determining the
</a><a href="#h60-0-150" id="h60-0-150" class="d">-      appropriateness of using or redistributing the Work and assume any
</a><a href="#h60-0-151" id="h60-0-151" class="d">-      risks associated with Your exercise of permissions under this License.
</a><a href="#h60-0-152" id="h60-0-152" class="d">-
</a><a href="#h60-0-153" id="h60-0-153" class="d">-   8. Limitation of Liability. In no event and under no legal theory,
</a><a href="#h60-0-154" id="h60-0-154" class="d">-      whether in tort (including negligence), contract, or otherwise,
</a><a href="#h60-0-155" id="h60-0-155" class="d">-      unless required by applicable law (such as deliberate and grossly
</a><a href="#h60-0-156" id="h60-0-156" class="d">-      negligent acts) or agreed to in writing, shall any Contributor be
</a><a href="#h60-0-157" id="h60-0-157" class="d">-      liable to You for damages, including any direct, indirect, special,
</a><a href="#h60-0-158" id="h60-0-158" class="d">-      incidental, or consequential damages of any character arising as a
</a><a href="#h60-0-159" id="h60-0-159" class="d">-      result of this License or out of the use or inability to use the
</a><a href="#h60-0-160" id="h60-0-160" class="d">-      Work (including but not limited to damages for loss of goodwill,
</a><a href="#h60-0-161" id="h60-0-161" class="d">-      work stoppage, computer failure or malfunction, or any and all
</a><a href="#h60-0-162" id="h60-0-162" class="d">-      other commercial damages or losses), even if such Contributor
</a><a href="#h60-0-163" id="h60-0-163" class="d">-      has been advised of the possibility of such damages.
</a><a href="#h60-0-164" id="h60-0-164" class="d">-
</a><a href="#h60-0-165" id="h60-0-165" class="d">-   9. Accepting Warranty or Additional Liability. While redistributing
</a><a href="#h60-0-166" id="h60-0-166" class="d">-      the Work or Derivative Works thereof, You may choose to offer,
</a><a href="#h60-0-167" id="h60-0-167" class="d">-      and charge a fee for, acceptance of support, warranty, indemnity,
</a><a href="#h60-0-168" id="h60-0-168" class="d">-      or other liability obligations and/or rights consistent with this
</a><a href="#h60-0-169" id="h60-0-169" class="d">-      License. However, in accepting such obligations, You may act only
</a><a href="#h60-0-170" id="h60-0-170" class="d">-      on Your own behalf and on Your sole responsibility, not on behalf
</a><a href="#h60-0-171" id="h60-0-171" class="d">-      of any other Contributor, and only if You agree to indemnify,
</a><a href="#h60-0-172" id="h60-0-172" class="d">-      defend, and hold each Contributor harmless for any liability
</a><a href="#h60-0-173" id="h60-0-173" class="d">-      incurred by, or claims asserted against, such Contributor by reason
</a><a href="#h60-0-174" id="h60-0-174" class="d">-      of your accepting any such warranty or additional liability.
</a><a href="#h60-0-175" id="h60-0-175" class="d">-
</a><a href="#h60-0-176" id="h60-0-176" class="d">-   END OF TERMS AND CONDITIONS
</a><a href="#h60-0-177" id="h60-0-177" class="d">-
</a><a href="#h60-0-178" id="h60-0-178" class="d">-   APPENDIX: How to apply the Apache License to your work.
</a><a href="#h60-0-179" id="h60-0-179" class="d">-
</a><a href="#h60-0-180" id="h60-0-180" class="d">-      To apply the Apache License to your work, attach the following
</a><a href="#h60-0-181" id="h60-0-181" class="d">-      boilerplate notice, with the fields enclosed by brackets &quot;[]&quot;
</a><a href="#h60-0-182" id="h60-0-182" class="d">-      replaced with your own identifying information. (Don&#39;t include
</a><a href="#h60-0-183" id="h60-0-183" class="d">-      the brackets!)  The text should be enclosed in the appropriate
</a><a href="#h60-0-184" id="h60-0-184" class="d">-      comment syntax for the file format. We also recommend that a
</a><a href="#h60-0-185" id="h60-0-185" class="d">-      file or class name and description of purpose be included on the
</a><a href="#h60-0-186" id="h60-0-186" class="d">-      same &quot;printed page&quot; as the copyright notice for easier
</a><a href="#h60-0-187" id="h60-0-187" class="d">-      identification within third-party archives.
</a><a href="#h60-0-188" id="h60-0-188" class="d">-
</a><a href="#h60-0-189" id="h60-0-189" class="d">-   Copyright [yyyy] [name of copyright owner]
</a><a href="#h60-0-190" id="h60-0-190" class="d">-
</a><a href="#h60-0-191" id="h60-0-191" class="d">-   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
</a><a href="#h60-0-192" id="h60-0-192" class="d">-   you may not use this file except in compliance with the License.
</a><a href="#h60-0-193" id="h60-0-193" class="d">-   You may obtain a copy of the License at
</a><a href="#h60-0-194" id="h60-0-194" class="d">-
</a><a href="#h60-0-195" id="h60-0-195" class="d">-       http://www.apache.org/licenses/LICENSE-2.0
</a><a href="#h60-0-196" id="h60-0-196" class="d">-
</a><a href="#h60-0-197" id="h60-0-197" class="d">-   Unless required by applicable law or agreed to in writing, software
</a><a href="#h60-0-198" id="h60-0-198" class="d">-   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
</a><a href="#h60-0-199" id="h60-0-199" class="d">-   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
</a><a href="#h60-0-200" id="h60-0-200" class="d">-   See the License for the specific language governing permissions and
</a><a href="#h60-0-201" id="h60-0-201" class="d">-   limitations under the License.
</a><b>diff --git a/<a id="h61" href="../file/vendor/google.golang.org/appengine/internal/BUILD">vendor/google.golang.org/appengine/internal/BUILD</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/BUILD">vendor/google.golang.org/appengine/internal/BUILD</a></b>
<a href="#h61-0" id="h61-0" class="h">@@ -1,33 +0,0 @@
</a><a href="#h61-0-0" id="h61-0-0" class="d">-
</a><a href="#h61-0-1" id="h61-0-1" class="d">-load(&quot;@io_bazel_rules_go//go:def.bzl&quot;,
</a><a href="#h61-0-2" id="h61-0-2" class="d">-  &quot;go_binary&quot;,
</a><a href="#h61-0-3" id="h61-0-3" class="d">-  &quot;go_library&quot;,
</a><a href="#h61-0-4" id="h61-0-4" class="d">-  &quot;go_test&quot;,
</a><a href="#h61-0-5" id="h61-0-5" class="d">-)
</a><a href="#h61-0-6" id="h61-0-6" class="d">-
</a><a href="#h61-0-7" id="h61-0-7" class="d">-go_library(
</a><a href="#h61-0-8" id="h61-0-8" class="d">-name = &quot;go_default_library&quot;,
</a><a href="#h61-0-9" id="h61-0-9" class="d">-  srcs = [
</a><a href="#h61-0-10" id="h61-0-10" class="d">-    &quot;api.go&quot;,
</a><a href="#h61-0-11" id="h61-0-11" class="d">-    &quot;api_common.go&quot;,
</a><a href="#h61-0-12" id="h61-0-12" class="d">-    &quot;app_id.go&quot;,
</a><a href="#h61-0-13" id="h61-0-13" class="d">-    &quot;identity.go&quot;,
</a><a href="#h61-0-14" id="h61-0-14" class="d">-    &quot;identity_vm.go&quot;,
</a><a href="#h61-0-15" id="h61-0-15" class="d">-    &quot;internal.go&quot;,
</a><a href="#h61-0-16" id="h61-0-16" class="d">-    &quot;main_vm.go&quot;,
</a><a href="#h61-0-17" id="h61-0-17" class="d">-    &quot;metadata.go&quot;,
</a><a href="#h61-0-18" id="h61-0-18" class="d">-    &quot;net.go&quot;,
</a><a href="#h61-0-19" id="h61-0-19" class="d">-    &quot;transaction.go&quot;,
</a><a href="#h61-0-20" id="h61-0-20" class="d">-  ],
</a><a href="#h61-0-21" id="h61-0-21" class="d">-  deps = [
</a><a href="#h61-0-22" id="h61-0-22" class="d">-    &quot;//vendor/github.com/golang/protobuf/proto:go_default_library&quot;,
</a><a href="#h61-0-23" id="h61-0-23" class="d">-    &quot;//vendor/golang.org/x/net/context:go_default_library&quot;,
</a><a href="#h61-0-24" id="h61-0-24" class="d">-    &quot;//vendor/google.golang.org/appengine/internal/base:go_default_library&quot;,
</a><a href="#h61-0-25" id="h61-0-25" class="d">-    &quot;//vendor/google.golang.org/appengine/internal/datastore:go_default_library&quot;,
</a><a href="#h61-0-26" id="h61-0-26" class="d">-    &quot;//vendor/google.golang.org/appengine/internal/log:go_default_library&quot;,
</a><a href="#h61-0-27" id="h61-0-27" class="d">-    &quot;//vendor/google.golang.org/appengine/internal/remote_api:go_default_library&quot;,
</a><a href="#h61-0-28" id="h61-0-28" class="d">-  ],
</a><a href="#h61-0-29" id="h61-0-29" class="d">-  visibility = [&quot;//visibility:public&quot;],
</a><a href="#h61-0-30" id="h61-0-30" class="d">-)
</a><a href="#h61-0-31" id="h61-0-31" class="d">-
</a><a href="#h61-0-32" id="h61-0-32" class="d">-
</a><b>diff --git a/<a id="h62" href="../file/vendor/google.golang.org/appengine/internal/api.go">vendor/google.golang.org/appengine/internal/api.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/api.go">vendor/google.golang.org/appengine/internal/api.go</a></b>
<a href="#h62-0" id="h62-0" class="h">@@ -1,646 +0,0 @@
</a><a href="#h62-0-0" id="h62-0-0" class="d">-// Copyright 2011 Google Inc. All rights reserved.
</a><a href="#h62-0-1" id="h62-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h62-0-2" id="h62-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h62-0-3" id="h62-0-3" class="d">-
</a><a href="#h62-0-4" id="h62-0-4" class="d">-// +build !appengine
</a><a href="#h62-0-5" id="h62-0-5" class="d">-
</a><a href="#h62-0-6" id="h62-0-6" class="d">-package internal
</a><a href="#h62-0-7" id="h62-0-7" class="d">-
</a><a href="#h62-0-8" id="h62-0-8" class="d">-import (
</a><a href="#h62-0-9" id="h62-0-9" class="d">-	&quot;bytes&quot;
</a><a href="#h62-0-10" id="h62-0-10" class="d">-	&quot;errors&quot;
</a><a href="#h62-0-11" id="h62-0-11" class="d">-	&quot;fmt&quot;
</a><a href="#h62-0-12" id="h62-0-12" class="d">-	&quot;io/ioutil&quot;
</a><a href="#h62-0-13" id="h62-0-13" class="d">-	&quot;log&quot;
</a><a href="#h62-0-14" id="h62-0-14" class="d">-	&quot;net&quot;
</a><a href="#h62-0-15" id="h62-0-15" class="d">-	&quot;net/http&quot;
</a><a href="#h62-0-16" id="h62-0-16" class="d">-	&quot;net/url&quot;
</a><a href="#h62-0-17" id="h62-0-17" class="d">-	&quot;os&quot;
</a><a href="#h62-0-18" id="h62-0-18" class="d">-	&quot;runtime&quot;
</a><a href="#h62-0-19" id="h62-0-19" class="d">-	&quot;strconv&quot;
</a><a href="#h62-0-20" id="h62-0-20" class="d">-	&quot;strings&quot;
</a><a href="#h62-0-21" id="h62-0-21" class="d">-	&quot;sync&quot;
</a><a href="#h62-0-22" id="h62-0-22" class="d">-	&quot;sync/atomic&quot;
</a><a href="#h62-0-23" id="h62-0-23" class="d">-	&quot;time&quot;
</a><a href="#h62-0-24" id="h62-0-24" class="d">-
</a><a href="#h62-0-25" id="h62-0-25" class="d">-	&quot;github.com/golang/protobuf/proto&quot;
</a><a href="#h62-0-26" id="h62-0-26" class="d">-	netcontext &quot;golang.org/x/net/context&quot;
</a><a href="#h62-0-27" id="h62-0-27" class="d">-
</a><a href="#h62-0-28" id="h62-0-28" class="d">-	basepb &quot;google.golang.org/appengine/internal/base&quot;
</a><a href="#h62-0-29" id="h62-0-29" class="d">-	logpb &quot;google.golang.org/appengine/internal/log&quot;
</a><a href="#h62-0-30" id="h62-0-30" class="d">-	remotepb &quot;google.golang.org/appengine/internal/remote_api&quot;
</a><a href="#h62-0-31" id="h62-0-31" class="d">-)
</a><a href="#h62-0-32" id="h62-0-32" class="d">-
</a><a href="#h62-0-33" id="h62-0-33" class="d">-const (
</a><a href="#h62-0-34" id="h62-0-34" class="d">-	apiPath = &quot;/rpc_http&quot;
</a><a href="#h62-0-35" id="h62-0-35" class="d">-)
</a><a href="#h62-0-36" id="h62-0-36" class="d">-
</a><a href="#h62-0-37" id="h62-0-37" class="d">-var (
</a><a href="#h62-0-38" id="h62-0-38" class="d">-	// Incoming headers.
</a><a href="#h62-0-39" id="h62-0-39" class="d">-	ticketHeader       = http.CanonicalHeaderKey(&quot;X-AppEngine-API-Ticket&quot;)
</a><a href="#h62-0-40" id="h62-0-40" class="d">-	dapperHeader       = http.CanonicalHeaderKey(&quot;X-Google-DapperTraceInfo&quot;)
</a><a href="#h62-0-41" id="h62-0-41" class="d">-	traceHeader        = http.CanonicalHeaderKey(&quot;X-Cloud-Trace-Context&quot;)
</a><a href="#h62-0-42" id="h62-0-42" class="d">-	curNamespaceHeader = http.CanonicalHeaderKey(&quot;X-AppEngine-Current-Namespace&quot;)
</a><a href="#h62-0-43" id="h62-0-43" class="d">-	userIPHeader       = http.CanonicalHeaderKey(&quot;X-AppEngine-User-IP&quot;)
</a><a href="#h62-0-44" id="h62-0-44" class="d">-	remoteAddrHeader   = http.CanonicalHeaderKey(&quot;X-AppEngine-Remote-Addr&quot;)
</a><a href="#h62-0-45" id="h62-0-45" class="d">-
</a><a href="#h62-0-46" id="h62-0-46" class="d">-	// Outgoing headers.
</a><a href="#h62-0-47" id="h62-0-47" class="d">-	apiEndpointHeader      = http.CanonicalHeaderKey(&quot;X-Google-RPC-Service-Endpoint&quot;)
</a><a href="#h62-0-48" id="h62-0-48" class="d">-	apiEndpointHeaderValue = []string{&quot;app-engine-apis&quot;}
</a><a href="#h62-0-49" id="h62-0-49" class="d">-	apiMethodHeader        = http.CanonicalHeaderKey(&quot;X-Google-RPC-Service-Method&quot;)
</a><a href="#h62-0-50" id="h62-0-50" class="d">-	apiMethodHeaderValue   = []string{&quot;/VMRemoteAPI.CallRemoteAPI&quot;}
</a><a href="#h62-0-51" id="h62-0-51" class="d">-	apiDeadlineHeader      = http.CanonicalHeaderKey(&quot;X-Google-RPC-Service-Deadline&quot;)
</a><a href="#h62-0-52" id="h62-0-52" class="d">-	apiContentType         = http.CanonicalHeaderKey(&quot;Content-Type&quot;)
</a><a href="#h62-0-53" id="h62-0-53" class="d">-	apiContentTypeValue    = []string{&quot;application/octet-stream&quot;}
</a><a href="#h62-0-54" id="h62-0-54" class="d">-	logFlushHeader         = http.CanonicalHeaderKey(&quot;X-AppEngine-Log-Flush-Count&quot;)
</a><a href="#h62-0-55" id="h62-0-55" class="d">-
</a><a href="#h62-0-56" id="h62-0-56" class="d">-	apiHTTPClient = &amp;http.Client{
</a><a href="#h62-0-57" id="h62-0-57" class="d">-		Transport: &amp;http.Transport{
</a><a href="#h62-0-58" id="h62-0-58" class="d">-			Proxy: http.ProxyFromEnvironment,
</a><a href="#h62-0-59" id="h62-0-59" class="d">-			Dial:  limitDial,
</a><a href="#h62-0-60" id="h62-0-60" class="d">-		},
</a><a href="#h62-0-61" id="h62-0-61" class="d">-	}
</a><a href="#h62-0-62" id="h62-0-62" class="d">-)
</a><a href="#h62-0-63" id="h62-0-63" class="d">-
</a><a href="#h62-0-64" id="h62-0-64" class="d">-func apiURL() *url.URL {
</a><a href="#h62-0-65" id="h62-0-65" class="d">-	host, port := &quot;appengine.googleapis.internal&quot;, &quot;10001&quot;
</a><a href="#h62-0-66" id="h62-0-66" class="d">-	if h := os.Getenv(&quot;API_HOST&quot;); h != &quot;&quot; {
</a><a href="#h62-0-67" id="h62-0-67" class="d">-		host = h
</a><a href="#h62-0-68" id="h62-0-68" class="d">-	}
</a><a href="#h62-0-69" id="h62-0-69" class="d">-	if p := os.Getenv(&quot;API_PORT&quot;); p != &quot;&quot; {
</a><a href="#h62-0-70" id="h62-0-70" class="d">-		port = p
</a><a href="#h62-0-71" id="h62-0-71" class="d">-	}
</a><a href="#h62-0-72" id="h62-0-72" class="d">-	return &amp;url.URL{
</a><a href="#h62-0-73" id="h62-0-73" class="d">-		Scheme: &quot;http&quot;,
</a><a href="#h62-0-74" id="h62-0-74" class="d">-		Host:   host + &quot;:&quot; + port,
</a><a href="#h62-0-75" id="h62-0-75" class="d">-		Path:   apiPath,
</a><a href="#h62-0-76" id="h62-0-76" class="d">-	}
</a><a href="#h62-0-77" id="h62-0-77" class="d">-}
</a><a href="#h62-0-78" id="h62-0-78" class="d">-
</a><a href="#h62-0-79" id="h62-0-79" class="d">-func handleHTTP(w http.ResponseWriter, r *http.Request) {
</a><a href="#h62-0-80" id="h62-0-80" class="d">-	c := &amp;context{
</a><a href="#h62-0-81" id="h62-0-81" class="d">-		req:       r,
</a><a href="#h62-0-82" id="h62-0-82" class="d">-		outHeader: w.Header(),
</a><a href="#h62-0-83" id="h62-0-83" class="d">-		apiURL:    apiURL(),
</a><a href="#h62-0-84" id="h62-0-84" class="d">-	}
</a><a href="#h62-0-85" id="h62-0-85" class="d">-	stopFlushing := make(chan int)
</a><a href="#h62-0-86" id="h62-0-86" class="d">-
</a><a href="#h62-0-87" id="h62-0-87" class="d">-	ctxs.Lock()
</a><a href="#h62-0-88" id="h62-0-88" class="d">-	ctxs.m[r] = c
</a><a href="#h62-0-89" id="h62-0-89" class="d">-	ctxs.Unlock()
</a><a href="#h62-0-90" id="h62-0-90" class="d">-	defer func() {
</a><a href="#h62-0-91" id="h62-0-91" class="d">-		ctxs.Lock()
</a><a href="#h62-0-92" id="h62-0-92" class="d">-		delete(ctxs.m, r)
</a><a href="#h62-0-93" id="h62-0-93" class="d">-		ctxs.Unlock()
</a><a href="#h62-0-94" id="h62-0-94" class="d">-	}()
</a><a href="#h62-0-95" id="h62-0-95" class="d">-
</a><a href="#h62-0-96" id="h62-0-96" class="d">-	// Patch up RemoteAddr so it looks reasonable.
</a><a href="#h62-0-97" id="h62-0-97" class="d">-	if addr := r.Header.Get(userIPHeader); addr != &quot;&quot; {
</a><a href="#h62-0-98" id="h62-0-98" class="d">-		r.RemoteAddr = addr
</a><a href="#h62-0-99" id="h62-0-99" class="d">-	} else if addr = r.Header.Get(remoteAddrHeader); addr != &quot;&quot; {
</a><a href="#h62-0-100" id="h62-0-100" class="d">-		r.RemoteAddr = addr
</a><a href="#h62-0-101" id="h62-0-101" class="d">-	} else {
</a><a href="#h62-0-102" id="h62-0-102" class="d">-		// Should not normally reach here, but pick a sensible default anyway.
</a><a href="#h62-0-103" id="h62-0-103" class="d">-		r.RemoteAddr = &quot;127.0.0.1&quot;
</a><a href="#h62-0-104" id="h62-0-104" class="d">-	}
</a><a href="#h62-0-105" id="h62-0-105" class="d">-	// The address in the headers will most likely be of these forms:
</a><a href="#h62-0-106" id="h62-0-106" class="d">-	//	123.123.123.123
</a><a href="#h62-0-107" id="h62-0-107" class="d">-	//	2001:db8::1
</a><a href="#h62-0-108" id="h62-0-108" class="d">-	// net/http.Request.RemoteAddr is specified to be in &quot;IP:port&quot; form.
</a><a href="#h62-0-109" id="h62-0-109" class="d">-	if _, _, err := net.SplitHostPort(r.RemoteAddr); err != nil {
</a><a href="#h62-0-110" id="h62-0-110" class="d">-		// Assume the remote address is only a host; add a default port.
</a><a href="#h62-0-111" id="h62-0-111" class="d">-		r.RemoteAddr = net.JoinHostPort(r.RemoteAddr, &quot;80&quot;)
</a><a href="#h62-0-112" id="h62-0-112" class="d">-	}
</a><a href="#h62-0-113" id="h62-0-113" class="d">-
</a><a href="#h62-0-114" id="h62-0-114" class="d">-	// Start goroutine responsible for flushing app logs.
</a><a href="#h62-0-115" id="h62-0-115" class="d">-	// This is done after adding c to ctx.m (and stopped before removing it)
</a><a href="#h62-0-116" id="h62-0-116" class="d">-	// because flushing logs requires making an API call.
</a><a href="#h62-0-117" id="h62-0-117" class="d">-	go c.logFlusher(stopFlushing)
</a><a href="#h62-0-118" id="h62-0-118" class="d">-
</a><a href="#h62-0-119" id="h62-0-119" class="d">-	executeRequestSafely(c, r)
</a><a href="#h62-0-120" id="h62-0-120" class="d">-	c.outHeader = nil // make sure header changes aren&#39;t respected any more
</a><a href="#h62-0-121" id="h62-0-121" class="d">-
</a><a href="#h62-0-122" id="h62-0-122" class="d">-	stopFlushing &lt;- 1 // any logging beyond this point will be dropped
</a><a href="#h62-0-123" id="h62-0-123" class="d">-
</a><a href="#h62-0-124" id="h62-0-124" class="d">-	// Flush any pending logs asynchronously.
</a><a href="#h62-0-125" id="h62-0-125" class="d">-	c.pendingLogs.Lock()
</a><a href="#h62-0-126" id="h62-0-126" class="d">-	flushes := c.pendingLogs.flushes
</a><a href="#h62-0-127" id="h62-0-127" class="d">-	if len(c.pendingLogs.lines) &gt; 0 {
</a><a href="#h62-0-128" id="h62-0-128" class="d">-		flushes++
</a><a href="#h62-0-129" id="h62-0-129" class="d">-	}
</a><a href="#h62-0-130" id="h62-0-130" class="d">-	c.pendingLogs.Unlock()
</a><a href="#h62-0-131" id="h62-0-131" class="d">-	go c.flushLog(false)
</a><a href="#h62-0-132" id="h62-0-132" class="d">-	w.Header().Set(logFlushHeader, strconv.Itoa(flushes))
</a><a href="#h62-0-133" id="h62-0-133" class="d">-
</a><a href="#h62-0-134" id="h62-0-134" class="d">-	// Avoid nil Write call if c.Write is never called.
</a><a href="#h62-0-135" id="h62-0-135" class="d">-	if c.outCode != 0 {
</a><a href="#h62-0-136" id="h62-0-136" class="d">-		w.WriteHeader(c.outCode)
</a><a href="#h62-0-137" id="h62-0-137" class="d">-	}
</a><a href="#h62-0-138" id="h62-0-138" class="d">-	if c.outBody != nil {
</a><a href="#h62-0-139" id="h62-0-139" class="d">-		w.Write(c.outBody)
</a><a href="#h62-0-140" id="h62-0-140" class="d">-	}
</a><a href="#h62-0-141" id="h62-0-141" class="d">-}
</a><a href="#h62-0-142" id="h62-0-142" class="d">-
</a><a href="#h62-0-143" id="h62-0-143" class="d">-func executeRequestSafely(c *context, r *http.Request) {
</a><a href="#h62-0-144" id="h62-0-144" class="d">-	defer func() {
</a><a href="#h62-0-145" id="h62-0-145" class="d">-		if x := recover(); x != nil {
</a><a href="#h62-0-146" id="h62-0-146" class="d">-			logf(c, 4, &quot;%s&quot;, renderPanic(x)) // 4 == critical
</a><a href="#h62-0-147" id="h62-0-147" class="d">-			c.outCode = 500
</a><a href="#h62-0-148" id="h62-0-148" class="d">-		}
</a><a href="#h62-0-149" id="h62-0-149" class="d">-	}()
</a><a href="#h62-0-150" id="h62-0-150" class="d">-
</a><a href="#h62-0-151" id="h62-0-151" class="d">-	http.DefaultServeMux.ServeHTTP(c, r)
</a><a href="#h62-0-152" id="h62-0-152" class="d">-}
</a><a href="#h62-0-153" id="h62-0-153" class="d">-
</a><a href="#h62-0-154" id="h62-0-154" class="d">-func renderPanic(x interface{}) string {
</a><a href="#h62-0-155" id="h62-0-155" class="d">-	buf := make([]byte, 16&lt;&lt;10) // 16 KB should be plenty
</a><a href="#h62-0-156" id="h62-0-156" class="d">-	buf = buf[:runtime.Stack(buf, false)]
</a><a href="#h62-0-157" id="h62-0-157" class="d">-
</a><a href="#h62-0-158" id="h62-0-158" class="d">-	// Remove the first few stack frames:
</a><a href="#h62-0-159" id="h62-0-159" class="d">-	//   this func
</a><a href="#h62-0-160" id="h62-0-160" class="d">-	//   the recover closure in the caller
</a><a href="#h62-0-161" id="h62-0-161" class="d">-	// That will root the stack trace at the site of the panic.
</a><a href="#h62-0-162" id="h62-0-162" class="d">-	const (
</a><a href="#h62-0-163" id="h62-0-163" class="d">-		skipStart  = &quot;internal.renderPanic&quot;
</a><a href="#h62-0-164" id="h62-0-164" class="d">-		skipFrames = 2
</a><a href="#h62-0-165" id="h62-0-165" class="d">-	)
</a><a href="#h62-0-166" id="h62-0-166" class="d">-	start := bytes.Index(buf, []byte(skipStart))
</a><a href="#h62-0-167" id="h62-0-167" class="d">-	p := start
</a><a href="#h62-0-168" id="h62-0-168" class="d">-	for i := 0; i &lt; skipFrames*2 &amp;&amp; p+1 &lt; len(buf); i++ {
</a><a href="#h62-0-169" id="h62-0-169" class="d">-		p = bytes.IndexByte(buf[p+1:], &#39;\n&#39;) + p + 1
</a><a href="#h62-0-170" id="h62-0-170" class="d">-		if p &lt; 0 {
</a><a href="#h62-0-171" id="h62-0-171" class="d">-			break
</a><a href="#h62-0-172" id="h62-0-172" class="d">-		}
</a><a href="#h62-0-173" id="h62-0-173" class="d">-	}
</a><a href="#h62-0-174" id="h62-0-174" class="d">-	if p &gt;= 0 {
</a><a href="#h62-0-175" id="h62-0-175" class="d">-		// buf[start:p+1] is the block to remove.
</a><a href="#h62-0-176" id="h62-0-176" class="d">-		// Copy buf[p+1:] over buf[start:] and shrink buf.
</a><a href="#h62-0-177" id="h62-0-177" class="d">-		copy(buf[start:], buf[p+1:])
</a><a href="#h62-0-178" id="h62-0-178" class="d">-		buf = buf[:len(buf)-(p+1-start)]
</a><a href="#h62-0-179" id="h62-0-179" class="d">-	}
</a><a href="#h62-0-180" id="h62-0-180" class="d">-
</a><a href="#h62-0-181" id="h62-0-181" class="d">-	// Add panic heading.
</a><a href="#h62-0-182" id="h62-0-182" class="d">-	head := fmt.Sprintf(&quot;panic: %v\n\n&quot;, x)
</a><a href="#h62-0-183" id="h62-0-183" class="d">-	if len(head) &gt; len(buf) {
</a><a href="#h62-0-184" id="h62-0-184" class="d">-		// Extremely unlikely to happen.
</a><a href="#h62-0-185" id="h62-0-185" class="d">-		return head
</a><a href="#h62-0-186" id="h62-0-186" class="d">-	}
</a><a href="#h62-0-187" id="h62-0-187" class="d">-	copy(buf[len(head):], buf)
</a><a href="#h62-0-188" id="h62-0-188" class="d">-	copy(buf, head)
</a><a href="#h62-0-189" id="h62-0-189" class="d">-
</a><a href="#h62-0-190" id="h62-0-190" class="d">-	return string(buf)
</a><a href="#h62-0-191" id="h62-0-191" class="d">-}
</a><a href="#h62-0-192" id="h62-0-192" class="d">-
</a><a href="#h62-0-193" id="h62-0-193" class="d">-var ctxs = struct {
</a><a href="#h62-0-194" id="h62-0-194" class="d">-	sync.Mutex
</a><a href="#h62-0-195" id="h62-0-195" class="d">-	m  map[*http.Request]*context
</a><a href="#h62-0-196" id="h62-0-196" class="d">-	bg *context // background context, lazily initialized
</a><a href="#h62-0-197" id="h62-0-197" class="d">-	// dec is used by tests to decorate the netcontext.Context returned
</a><a href="#h62-0-198" id="h62-0-198" class="d">-	// for a given request. This allows tests to add overrides (such as
</a><a href="#h62-0-199" id="h62-0-199" class="d">-	// WithAppIDOverride) to the context. The map is nil outside tests.
</a><a href="#h62-0-200" id="h62-0-200" class="d">-	dec map[*http.Request]func(netcontext.Context) netcontext.Context
</a><a href="#h62-0-201" id="h62-0-201" class="d">-}{
</a><a href="#h62-0-202" id="h62-0-202" class="d">-	m: make(map[*http.Request]*context),
</a><a href="#h62-0-203" id="h62-0-203" class="d">-}
</a><a href="#h62-0-204" id="h62-0-204" class="d">-
</a><a href="#h62-0-205" id="h62-0-205" class="d">-// context represents the context of an in-flight HTTP request.
</a><a href="#h62-0-206" id="h62-0-206" class="d">-// It implements the appengine.Context and http.ResponseWriter interfaces.
</a><a href="#h62-0-207" id="h62-0-207" class="d">-type context struct {
</a><a href="#h62-0-208" id="h62-0-208" class="d">-	req *http.Request
</a><a href="#h62-0-209" id="h62-0-209" class="d">-
</a><a href="#h62-0-210" id="h62-0-210" class="d">-	outCode   int
</a><a href="#h62-0-211" id="h62-0-211" class="d">-	outHeader http.Header
</a><a href="#h62-0-212" id="h62-0-212" class="d">-	outBody   []byte
</a><a href="#h62-0-213" id="h62-0-213" class="d">-
</a><a href="#h62-0-214" id="h62-0-214" class="d">-	pendingLogs struct {
</a><a href="#h62-0-215" id="h62-0-215" class="d">-		sync.Mutex
</a><a href="#h62-0-216" id="h62-0-216" class="d">-		lines   []*logpb.UserAppLogLine
</a><a href="#h62-0-217" id="h62-0-217" class="d">-		flushes int
</a><a href="#h62-0-218" id="h62-0-218" class="d">-	}
</a><a href="#h62-0-219" id="h62-0-219" class="d">-
</a><a href="#h62-0-220" id="h62-0-220" class="d">-	apiURL *url.URL
</a><a href="#h62-0-221" id="h62-0-221" class="d">-}
</a><a href="#h62-0-222" id="h62-0-222" class="d">-
</a><a href="#h62-0-223" id="h62-0-223" class="d">-var contextKey = &quot;holds a *context&quot;
</a><a href="#h62-0-224" id="h62-0-224" class="d">-
</a><a href="#h62-0-225" id="h62-0-225" class="d">-func fromContext(ctx netcontext.Context) *context {
</a><a href="#h62-0-226" id="h62-0-226" class="d">-	c, _ := ctx.Value(&amp;contextKey).(*context)
</a><a href="#h62-0-227" id="h62-0-227" class="d">-	return c
</a><a href="#h62-0-228" id="h62-0-228" class="d">-}
</a><a href="#h62-0-229" id="h62-0-229" class="d">-
</a><a href="#h62-0-230" id="h62-0-230" class="d">-func withContext(parent netcontext.Context, c *context) netcontext.Context {
</a><a href="#h62-0-231" id="h62-0-231" class="d">-	ctx := netcontext.WithValue(parent, &amp;contextKey, c)
</a><a href="#h62-0-232" id="h62-0-232" class="d">-	if ns := c.req.Header.Get(curNamespaceHeader); ns != &quot;&quot; {
</a><a href="#h62-0-233" id="h62-0-233" class="d">-		ctx = withNamespace(ctx, ns)
</a><a href="#h62-0-234" id="h62-0-234" class="d">-	}
</a><a href="#h62-0-235" id="h62-0-235" class="d">-	return ctx
</a><a href="#h62-0-236" id="h62-0-236" class="d">-}
</a><a href="#h62-0-237" id="h62-0-237" class="d">-
</a><a href="#h62-0-238" id="h62-0-238" class="d">-func toContext(c *context) netcontext.Context {
</a><a href="#h62-0-239" id="h62-0-239" class="d">-	return withContext(netcontext.Background(), c)
</a><a href="#h62-0-240" id="h62-0-240" class="d">-}
</a><a href="#h62-0-241" id="h62-0-241" class="d">-
</a><a href="#h62-0-242" id="h62-0-242" class="d">-func IncomingHeaders(ctx netcontext.Context) http.Header {
</a><a href="#h62-0-243" id="h62-0-243" class="d">-	if c := fromContext(ctx); c != nil {
</a><a href="#h62-0-244" id="h62-0-244" class="d">-		return c.req.Header
</a><a href="#h62-0-245" id="h62-0-245" class="d">-	}
</a><a href="#h62-0-246" id="h62-0-246" class="d">-	return nil
</a><a href="#h62-0-247" id="h62-0-247" class="d">-}
</a><a href="#h62-0-248" id="h62-0-248" class="d">-
</a><a href="#h62-0-249" id="h62-0-249" class="d">-func WithContext(parent netcontext.Context, req *http.Request) netcontext.Context {
</a><a href="#h62-0-250" id="h62-0-250" class="d">-	ctxs.Lock()
</a><a href="#h62-0-251" id="h62-0-251" class="d">-	c := ctxs.m[req]
</a><a href="#h62-0-252" id="h62-0-252" class="d">-	d := ctxs.dec[req]
</a><a href="#h62-0-253" id="h62-0-253" class="d">-	ctxs.Unlock()
</a><a href="#h62-0-254" id="h62-0-254" class="d">-
</a><a href="#h62-0-255" id="h62-0-255" class="d">-	if d != nil {
</a><a href="#h62-0-256" id="h62-0-256" class="d">-		parent = d(parent)
</a><a href="#h62-0-257" id="h62-0-257" class="d">-	}
</a><a href="#h62-0-258" id="h62-0-258" class="d">-
</a><a href="#h62-0-259" id="h62-0-259" class="d">-	if c == nil {
</a><a href="#h62-0-260" id="h62-0-260" class="d">-		// Someone passed in an http.Request that is not in-flight.
</a><a href="#h62-0-261" id="h62-0-261" class="d">-		// We panic here rather than panicking at a later point
</a><a href="#h62-0-262" id="h62-0-262" class="d">-		// so that stack traces will be more sensible.
</a><a href="#h62-0-263" id="h62-0-263" class="d">-		log.Panic(&quot;appengine: NewContext passed an unknown http.Request&quot;)
</a><a href="#h62-0-264" id="h62-0-264" class="d">-	}
</a><a href="#h62-0-265" id="h62-0-265" class="d">-	return withContext(parent, c)
</a><a href="#h62-0-266" id="h62-0-266" class="d">-}
</a><a href="#h62-0-267" id="h62-0-267" class="d">-
</a><a href="#h62-0-268" id="h62-0-268" class="d">-func BackgroundContext() netcontext.Context {
</a><a href="#h62-0-269" id="h62-0-269" class="d">-	ctxs.Lock()
</a><a href="#h62-0-270" id="h62-0-270" class="d">-	defer ctxs.Unlock()
</a><a href="#h62-0-271" id="h62-0-271" class="d">-
</a><a href="#h62-0-272" id="h62-0-272" class="d">-	if ctxs.bg != nil {
</a><a href="#h62-0-273" id="h62-0-273" class="d">-		return toContext(ctxs.bg)
</a><a href="#h62-0-274" id="h62-0-274" class="d">-	}
</a><a href="#h62-0-275" id="h62-0-275" class="d">-
</a><a href="#h62-0-276" id="h62-0-276" class="d">-	// Compute background security ticket.
</a><a href="#h62-0-277" id="h62-0-277" class="d">-	appID := partitionlessAppID()
</a><a href="#h62-0-278" id="h62-0-278" class="d">-	escAppID := strings.Replace(strings.Replace(appID, &quot;:&quot;, &quot;_&quot;, -1), &quot;.&quot;, &quot;_&quot;, -1)
</a><a href="#h62-0-279" id="h62-0-279" class="d">-	majVersion := VersionID(nil)
</a><a href="#h62-0-280" id="h62-0-280" class="d">-	if i := strings.Index(majVersion, &quot;.&quot;); i &gt; 0 {
</a><a href="#h62-0-281" id="h62-0-281" class="d">-		majVersion = majVersion[:i]
</a><a href="#h62-0-282" id="h62-0-282" class="d">-	}
</a><a href="#h62-0-283" id="h62-0-283" class="d">-	ticket := fmt.Sprintf(&quot;%s/%s.%s.%s&quot;, escAppID, ModuleName(nil), majVersion, InstanceID())
</a><a href="#h62-0-284" id="h62-0-284" class="d">-
</a><a href="#h62-0-285" id="h62-0-285" class="d">-	ctxs.bg = &amp;context{
</a><a href="#h62-0-286" id="h62-0-286" class="d">-		req: &amp;http.Request{
</a><a href="#h62-0-287" id="h62-0-287" class="d">-			Header: http.Header{
</a><a href="#h62-0-288" id="h62-0-288" class="d">-				ticketHeader: []string{ticket},
</a><a href="#h62-0-289" id="h62-0-289" class="d">-			},
</a><a href="#h62-0-290" id="h62-0-290" class="d">-		},
</a><a href="#h62-0-291" id="h62-0-291" class="d">-		apiURL: apiURL(),
</a><a href="#h62-0-292" id="h62-0-292" class="d">-	}
</a><a href="#h62-0-293" id="h62-0-293" class="d">-
</a><a href="#h62-0-294" id="h62-0-294" class="d">-	// TODO(dsymonds): Wire up the shutdown handler to do a final flush.
</a><a href="#h62-0-295" id="h62-0-295" class="d">-	go ctxs.bg.logFlusher(make(chan int))
</a><a href="#h62-0-296" id="h62-0-296" class="d">-
</a><a href="#h62-0-297" id="h62-0-297" class="d">-	return toContext(ctxs.bg)
</a><a href="#h62-0-298" id="h62-0-298" class="d">-}
</a><a href="#h62-0-299" id="h62-0-299" class="d">-
</a><a href="#h62-0-300" id="h62-0-300" class="d">-// RegisterTestRequest registers the HTTP request req for testing, such that
</a><a href="#h62-0-301" id="h62-0-301" class="d">-// any API calls are sent to the provided URL. It returns a closure to delete
</a><a href="#h62-0-302" id="h62-0-302" class="d">-// the registration.
</a><a href="#h62-0-303" id="h62-0-303" class="d">-// It should only be used by aetest package.
</a><a href="#h62-0-304" id="h62-0-304" class="d">-func RegisterTestRequest(req *http.Request, apiURL *url.URL, decorate func(netcontext.Context) netcontext.Context) func() {
</a><a href="#h62-0-305" id="h62-0-305" class="d">-	c := &amp;context{
</a><a href="#h62-0-306" id="h62-0-306" class="d">-		req:    req,
</a><a href="#h62-0-307" id="h62-0-307" class="d">-		apiURL: apiURL,
</a><a href="#h62-0-308" id="h62-0-308" class="d">-	}
</a><a href="#h62-0-309" id="h62-0-309" class="d">-	ctxs.Lock()
</a><a href="#h62-0-310" id="h62-0-310" class="d">-	defer ctxs.Unlock()
</a><a href="#h62-0-311" id="h62-0-311" class="d">-	if _, ok := ctxs.m[req]; ok {
</a><a href="#h62-0-312" id="h62-0-312" class="d">-		log.Panic(&quot;req already associated with context&quot;)
</a><a href="#h62-0-313" id="h62-0-313" class="d">-	}
</a><a href="#h62-0-314" id="h62-0-314" class="d">-	if _, ok := ctxs.dec[req]; ok {
</a><a href="#h62-0-315" id="h62-0-315" class="d">-		log.Panic(&quot;req already associated with context&quot;)
</a><a href="#h62-0-316" id="h62-0-316" class="d">-	}
</a><a href="#h62-0-317" id="h62-0-317" class="d">-	if ctxs.dec == nil {
</a><a href="#h62-0-318" id="h62-0-318" class="d">-		ctxs.dec = make(map[*http.Request]func(netcontext.Context) netcontext.Context)
</a><a href="#h62-0-319" id="h62-0-319" class="d">-	}
</a><a href="#h62-0-320" id="h62-0-320" class="d">-	ctxs.m[req] = c
</a><a href="#h62-0-321" id="h62-0-321" class="d">-	ctxs.dec[req] = decorate
</a><a href="#h62-0-322" id="h62-0-322" class="d">-
</a><a href="#h62-0-323" id="h62-0-323" class="d">-	return func() {
</a><a href="#h62-0-324" id="h62-0-324" class="d">-		ctxs.Lock()
</a><a href="#h62-0-325" id="h62-0-325" class="d">-		delete(ctxs.m, req)
</a><a href="#h62-0-326" id="h62-0-326" class="d">-		delete(ctxs.dec, req)
</a><a href="#h62-0-327" id="h62-0-327" class="d">-		ctxs.Unlock()
</a><a href="#h62-0-328" id="h62-0-328" class="d">-	}
</a><a href="#h62-0-329" id="h62-0-329" class="d">-}
</a><a href="#h62-0-330" id="h62-0-330" class="d">-
</a><a href="#h62-0-331" id="h62-0-331" class="d">-var errTimeout = &amp;CallError{
</a><a href="#h62-0-332" id="h62-0-332" class="d">-	Detail:  &quot;Deadline exceeded&quot;,
</a><a href="#h62-0-333" id="h62-0-333" class="d">-	Code:    int32(remotepb.RpcError_CANCELLED),
</a><a href="#h62-0-334" id="h62-0-334" class="d">-	Timeout: true,
</a><a href="#h62-0-335" id="h62-0-335" class="d">-}
</a><a href="#h62-0-336" id="h62-0-336" class="d">-
</a><a href="#h62-0-337" id="h62-0-337" class="d">-func (c *context) Header() http.Header { return c.outHeader }
</a><a href="#h62-0-338" id="h62-0-338" class="d">-
</a><a href="#h62-0-339" id="h62-0-339" class="d">-// Copied from $GOROOT/src/pkg/net/http/transfer.go. Some response status
</a><a href="#h62-0-340" id="h62-0-340" class="d">-// codes do not permit a response body (nor response entity headers such as
</a><a href="#h62-0-341" id="h62-0-341" class="d">-// Content-Length, Content-Type, etc).
</a><a href="#h62-0-342" id="h62-0-342" class="d">-func bodyAllowedForStatus(status int) bool {
</a><a href="#h62-0-343" id="h62-0-343" class="d">-	switch {
</a><a href="#h62-0-344" id="h62-0-344" class="d">-	case status &gt;= 100 &amp;&amp; status &lt;= 199:
</a><a href="#h62-0-345" id="h62-0-345" class="d">-		return false
</a><a href="#h62-0-346" id="h62-0-346" class="d">-	case status == 204:
</a><a href="#h62-0-347" id="h62-0-347" class="d">-		return false
</a><a href="#h62-0-348" id="h62-0-348" class="d">-	case status == 304:
</a><a href="#h62-0-349" id="h62-0-349" class="d">-		return false
</a><a href="#h62-0-350" id="h62-0-350" class="d">-	}
</a><a href="#h62-0-351" id="h62-0-351" class="d">-	return true
</a><a href="#h62-0-352" id="h62-0-352" class="d">-}
</a><a href="#h62-0-353" id="h62-0-353" class="d">-
</a><a href="#h62-0-354" id="h62-0-354" class="d">-func (c *context) Write(b []byte) (int, error) {
</a><a href="#h62-0-355" id="h62-0-355" class="d">-	if c.outCode == 0 {
</a><a href="#h62-0-356" id="h62-0-356" class="d">-		c.WriteHeader(http.StatusOK)
</a><a href="#h62-0-357" id="h62-0-357" class="d">-	}
</a><a href="#h62-0-358" id="h62-0-358" class="d">-	if len(b) &gt; 0 &amp;&amp; !bodyAllowedForStatus(c.outCode) {
</a><a href="#h62-0-359" id="h62-0-359" class="d">-		return 0, http.ErrBodyNotAllowed
</a><a href="#h62-0-360" id="h62-0-360" class="d">-	}
</a><a href="#h62-0-361" id="h62-0-361" class="d">-	c.outBody = append(c.outBody, b...)
</a><a href="#h62-0-362" id="h62-0-362" class="d">-	return len(b), nil
</a><a href="#h62-0-363" id="h62-0-363" class="d">-}
</a><a href="#h62-0-364" id="h62-0-364" class="d">-
</a><a href="#h62-0-365" id="h62-0-365" class="d">-func (c *context) WriteHeader(code int) {
</a><a href="#h62-0-366" id="h62-0-366" class="d">-	if c.outCode != 0 {
</a><a href="#h62-0-367" id="h62-0-367" class="d">-		logf(c, 3, &quot;WriteHeader called multiple times on request.&quot;) // error level
</a><a href="#h62-0-368" id="h62-0-368" class="d">-		return
</a><a href="#h62-0-369" id="h62-0-369" class="d">-	}
</a><a href="#h62-0-370" id="h62-0-370" class="d">-	c.outCode = code
</a><a href="#h62-0-371" id="h62-0-371" class="d">-}
</a><a href="#h62-0-372" id="h62-0-372" class="d">-
</a><a href="#h62-0-373" id="h62-0-373" class="d">-func (c *context) post(body []byte, timeout time.Duration) (b []byte, err error) {
</a><a href="#h62-0-374" id="h62-0-374" class="d">-	hreq := &amp;http.Request{
</a><a href="#h62-0-375" id="h62-0-375" class="d">-		Method: &quot;POST&quot;,
</a><a href="#h62-0-376" id="h62-0-376" class="d">-		URL:    c.apiURL,
</a><a href="#h62-0-377" id="h62-0-377" class="d">-		Header: http.Header{
</a><a href="#h62-0-378" id="h62-0-378" class="d">-			apiEndpointHeader: apiEndpointHeaderValue,
</a><a href="#h62-0-379" id="h62-0-379" class="d">-			apiMethodHeader:   apiMethodHeaderValue,
</a><a href="#h62-0-380" id="h62-0-380" class="d">-			apiContentType:    apiContentTypeValue,
</a><a href="#h62-0-381" id="h62-0-381" class="d">-			apiDeadlineHeader: []string{strconv.FormatFloat(timeout.Seconds(), &#39;f&#39;, -1, 64)},
</a><a href="#h62-0-382" id="h62-0-382" class="d">-		},
</a><a href="#h62-0-383" id="h62-0-383" class="d">-		Body:          ioutil.NopCloser(bytes.NewReader(body)),
</a><a href="#h62-0-384" id="h62-0-384" class="d">-		ContentLength: int64(len(body)),
</a><a href="#h62-0-385" id="h62-0-385" class="d">-		Host:          c.apiURL.Host,
</a><a href="#h62-0-386" id="h62-0-386" class="d">-	}
</a><a href="#h62-0-387" id="h62-0-387" class="d">-	if info := c.req.Header.Get(dapperHeader); info != &quot;&quot; {
</a><a href="#h62-0-388" id="h62-0-388" class="d">-		hreq.Header.Set(dapperHeader, info)
</a><a href="#h62-0-389" id="h62-0-389" class="d">-	}
</a><a href="#h62-0-390" id="h62-0-390" class="d">-	if info := c.req.Header.Get(traceHeader); info != &quot;&quot; {
</a><a href="#h62-0-391" id="h62-0-391" class="d">-		hreq.Header.Set(traceHeader, info)
</a><a href="#h62-0-392" id="h62-0-392" class="d">-	}
</a><a href="#h62-0-393" id="h62-0-393" class="d">-
</a><a href="#h62-0-394" id="h62-0-394" class="d">-	tr := apiHTTPClient.Transport.(*http.Transport)
</a><a href="#h62-0-395" id="h62-0-395" class="d">-
</a><a href="#h62-0-396" id="h62-0-396" class="d">-	var timedOut int32 // atomic; set to 1 if timed out
</a><a href="#h62-0-397" id="h62-0-397" class="d">-	t := time.AfterFunc(timeout, func() {
</a><a href="#h62-0-398" id="h62-0-398" class="d">-		atomic.StoreInt32(&amp;timedOut, 1)
</a><a href="#h62-0-399" id="h62-0-399" class="d">-		tr.CancelRequest(hreq)
</a><a href="#h62-0-400" id="h62-0-400" class="d">-	})
</a><a href="#h62-0-401" id="h62-0-401" class="d">-	defer t.Stop()
</a><a href="#h62-0-402" id="h62-0-402" class="d">-	defer func() {
</a><a href="#h62-0-403" id="h62-0-403" class="d">-		// Check if timeout was exceeded.
</a><a href="#h62-0-404" id="h62-0-404" class="d">-		if atomic.LoadInt32(&amp;timedOut) != 0 {
</a><a href="#h62-0-405" id="h62-0-405" class="d">-			err = errTimeout
</a><a href="#h62-0-406" id="h62-0-406" class="d">-		}
</a><a href="#h62-0-407" id="h62-0-407" class="d">-	}()
</a><a href="#h62-0-408" id="h62-0-408" class="d">-
</a><a href="#h62-0-409" id="h62-0-409" class="d">-	hresp, err := apiHTTPClient.Do(hreq)
</a><a href="#h62-0-410" id="h62-0-410" class="d">-	if err != nil {
</a><a href="#h62-0-411" id="h62-0-411" class="d">-		return nil, &amp;CallError{
</a><a href="#h62-0-412" id="h62-0-412" class="d">-			Detail: fmt.Sprintf(&quot;service bridge HTTP failed: %v&quot;, err),
</a><a href="#h62-0-413" id="h62-0-413" class="d">-			Code:   int32(remotepb.RpcError_UNKNOWN),
</a><a href="#h62-0-414" id="h62-0-414" class="d">-		}
</a><a href="#h62-0-415" id="h62-0-415" class="d">-	}
</a><a href="#h62-0-416" id="h62-0-416" class="d">-	defer hresp.Body.Close()
</a><a href="#h62-0-417" id="h62-0-417" class="d">-	hrespBody, err := ioutil.ReadAll(hresp.Body)
</a><a href="#h62-0-418" id="h62-0-418" class="d">-	if hresp.StatusCode != 200 {
</a><a href="#h62-0-419" id="h62-0-419" class="d">-		return nil, &amp;CallError{
</a><a href="#h62-0-420" id="h62-0-420" class="d">-			Detail: fmt.Sprintf(&quot;service bridge returned HTTP %d (%q)&quot;, hresp.StatusCode, hrespBody),
</a><a href="#h62-0-421" id="h62-0-421" class="d">-			Code:   int32(remotepb.RpcError_UNKNOWN),
</a><a href="#h62-0-422" id="h62-0-422" class="d">-		}
</a><a href="#h62-0-423" id="h62-0-423" class="d">-	}
</a><a href="#h62-0-424" id="h62-0-424" class="d">-	if err != nil {
</a><a href="#h62-0-425" id="h62-0-425" class="d">-		return nil, &amp;CallError{
</a><a href="#h62-0-426" id="h62-0-426" class="d">-			Detail: fmt.Sprintf(&quot;service bridge response bad: %v&quot;, err),
</a><a href="#h62-0-427" id="h62-0-427" class="d">-			Code:   int32(remotepb.RpcError_UNKNOWN),
</a><a href="#h62-0-428" id="h62-0-428" class="d">-		}
</a><a href="#h62-0-429" id="h62-0-429" class="d">-	}
</a><a href="#h62-0-430" id="h62-0-430" class="d">-	return hrespBody, nil
</a><a href="#h62-0-431" id="h62-0-431" class="d">-}
</a><a href="#h62-0-432" id="h62-0-432" class="d">-
</a><a href="#h62-0-433" id="h62-0-433" class="d">-func Call(ctx netcontext.Context, service, method string, in, out proto.Message) error {
</a><a href="#h62-0-434" id="h62-0-434" class="d">-	if ns := NamespaceFromContext(ctx); ns != &quot;&quot; {
</a><a href="#h62-0-435" id="h62-0-435" class="d">-		if fn, ok := NamespaceMods[service]; ok {
</a><a href="#h62-0-436" id="h62-0-436" class="d">-			fn(in, ns)
</a><a href="#h62-0-437" id="h62-0-437" class="d">-		}
</a><a href="#h62-0-438" id="h62-0-438" class="d">-	}
</a><a href="#h62-0-439" id="h62-0-439" class="d">-
</a><a href="#h62-0-440" id="h62-0-440" class="d">-	if f, ctx, ok := callOverrideFromContext(ctx); ok {
</a><a href="#h62-0-441" id="h62-0-441" class="d">-		return f(ctx, service, method, in, out)
</a><a href="#h62-0-442" id="h62-0-442" class="d">-	}
</a><a href="#h62-0-443" id="h62-0-443" class="d">-
</a><a href="#h62-0-444" id="h62-0-444" class="d">-	// Handle already-done contexts quickly.
</a><a href="#h62-0-445" id="h62-0-445" class="d">-	select {
</a><a href="#h62-0-446" id="h62-0-446" class="d">-	case &lt;-ctx.Done():
</a><a href="#h62-0-447" id="h62-0-447" class="d">-		return ctx.Err()
</a><a href="#h62-0-448" id="h62-0-448" class="d">-	default:
</a><a href="#h62-0-449" id="h62-0-449" class="d">-	}
</a><a href="#h62-0-450" id="h62-0-450" class="d">-
</a><a href="#h62-0-451" id="h62-0-451" class="d">-	c := fromContext(ctx)
</a><a href="#h62-0-452" id="h62-0-452" class="d">-	if c == nil {
</a><a href="#h62-0-453" id="h62-0-453" class="d">-		// Give a good error message rather than a panic lower down.
</a><a href="#h62-0-454" id="h62-0-454" class="d">-		return errors.New(&quot;not an App Engine context&quot;)
</a><a href="#h62-0-455" id="h62-0-455" class="d">-	}
</a><a href="#h62-0-456" id="h62-0-456" class="d">-
</a><a href="#h62-0-457" id="h62-0-457" class="d">-	// Apply transaction modifications if we&#39;re in a transaction.
</a><a href="#h62-0-458" id="h62-0-458" class="d">-	if t := transactionFromContext(ctx); t != nil {
</a><a href="#h62-0-459" id="h62-0-459" class="d">-		if t.finished {
</a><a href="#h62-0-460" id="h62-0-460" class="d">-			return errors.New(&quot;transaction context has expired&quot;)
</a><a href="#h62-0-461" id="h62-0-461" class="d">-		}
</a><a href="#h62-0-462" id="h62-0-462" class="d">-		applyTransaction(in, &amp;t.transaction)
</a><a href="#h62-0-463" id="h62-0-463" class="d">-	}
</a><a href="#h62-0-464" id="h62-0-464" class="d">-
</a><a href="#h62-0-465" id="h62-0-465" class="d">-	// Default RPC timeout is 60s.
</a><a href="#h62-0-466" id="h62-0-466" class="d">-	timeout := 60 * time.Second
</a><a href="#h62-0-467" id="h62-0-467" class="d">-	if deadline, ok := ctx.Deadline(); ok {
</a><a href="#h62-0-468" id="h62-0-468" class="d">-		timeout = deadline.Sub(time.Now())
</a><a href="#h62-0-469" id="h62-0-469" class="d">-	}
</a><a href="#h62-0-470" id="h62-0-470" class="d">-
</a><a href="#h62-0-471" id="h62-0-471" class="d">-	data, err := proto.Marshal(in)
</a><a href="#h62-0-472" id="h62-0-472" class="d">-	if err != nil {
</a><a href="#h62-0-473" id="h62-0-473" class="d">-		return err
</a><a href="#h62-0-474" id="h62-0-474" class="d">-	}
</a><a href="#h62-0-475" id="h62-0-475" class="d">-
</a><a href="#h62-0-476" id="h62-0-476" class="d">-	ticket := c.req.Header.Get(ticketHeader)
</a><a href="#h62-0-477" id="h62-0-477" class="d">-	req := &amp;remotepb.Request{
</a><a href="#h62-0-478" id="h62-0-478" class="d">-		ServiceName: &amp;service,
</a><a href="#h62-0-479" id="h62-0-479" class="d">-		Method:      &amp;method,
</a><a href="#h62-0-480" id="h62-0-480" class="d">-		Request:     data,
</a><a href="#h62-0-481" id="h62-0-481" class="d">-		RequestId:   &amp;ticket,
</a><a href="#h62-0-482" id="h62-0-482" class="d">-	}
</a><a href="#h62-0-483" id="h62-0-483" class="d">-	hreqBody, err := proto.Marshal(req)
</a><a href="#h62-0-484" id="h62-0-484" class="d">-	if err != nil {
</a><a href="#h62-0-485" id="h62-0-485" class="d">-		return err
</a><a href="#h62-0-486" id="h62-0-486" class="d">-	}
</a><a href="#h62-0-487" id="h62-0-487" class="d">-
</a><a href="#h62-0-488" id="h62-0-488" class="d">-	hrespBody, err := c.post(hreqBody, timeout)
</a><a href="#h62-0-489" id="h62-0-489" class="d">-	if err != nil {
</a><a href="#h62-0-490" id="h62-0-490" class="d">-		return err
</a><a href="#h62-0-491" id="h62-0-491" class="d">-	}
</a><a href="#h62-0-492" id="h62-0-492" class="d">-
</a><a href="#h62-0-493" id="h62-0-493" class="d">-	res := &amp;remotepb.Response{}
</a><a href="#h62-0-494" id="h62-0-494" class="d">-	if err := proto.Unmarshal(hrespBody, res); err != nil {
</a><a href="#h62-0-495" id="h62-0-495" class="d">-		return err
</a><a href="#h62-0-496" id="h62-0-496" class="d">-	}
</a><a href="#h62-0-497" id="h62-0-497" class="d">-	if res.RpcError != nil {
</a><a href="#h62-0-498" id="h62-0-498" class="d">-		ce := &amp;CallError{
</a><a href="#h62-0-499" id="h62-0-499" class="d">-			Detail: res.RpcError.GetDetail(),
</a><a href="#h62-0-500" id="h62-0-500" class="d">-			Code:   *res.RpcError.Code,
</a><a href="#h62-0-501" id="h62-0-501" class="d">-		}
</a><a href="#h62-0-502" id="h62-0-502" class="d">-		switch remotepb.RpcError_ErrorCode(ce.Code) {
</a><a href="#h62-0-503" id="h62-0-503" class="d">-		case remotepb.RpcError_CANCELLED, remotepb.RpcError_DEADLINE_EXCEEDED:
</a><a href="#h62-0-504" id="h62-0-504" class="d">-			ce.Timeout = true
</a><a href="#h62-0-505" id="h62-0-505" class="d">-		}
</a><a href="#h62-0-506" id="h62-0-506" class="d">-		return ce
</a><a href="#h62-0-507" id="h62-0-507" class="d">-	}
</a><a href="#h62-0-508" id="h62-0-508" class="d">-	if res.ApplicationError != nil {
</a><a href="#h62-0-509" id="h62-0-509" class="d">-		return &amp;APIError{
</a><a href="#h62-0-510" id="h62-0-510" class="d">-			Service: *req.ServiceName,
</a><a href="#h62-0-511" id="h62-0-511" class="d">-			Detail:  res.ApplicationError.GetDetail(),
</a><a href="#h62-0-512" id="h62-0-512" class="d">-			Code:    *res.ApplicationError.Code,
</a><a href="#h62-0-513" id="h62-0-513" class="d">-		}
</a><a href="#h62-0-514" id="h62-0-514" class="d">-	}
</a><a href="#h62-0-515" id="h62-0-515" class="d">-	if res.Exception != nil || res.JavaException != nil {
</a><a href="#h62-0-516" id="h62-0-516" class="d">-		// This shouldn&#39;t happen, but let&#39;s be defensive.
</a><a href="#h62-0-517" id="h62-0-517" class="d">-		return &amp;CallError{
</a><a href="#h62-0-518" id="h62-0-518" class="d">-			Detail: &quot;service bridge returned exception&quot;,
</a><a href="#h62-0-519" id="h62-0-519" class="d">-			Code:   int32(remotepb.RpcError_UNKNOWN),
</a><a href="#h62-0-520" id="h62-0-520" class="d">-		}
</a><a href="#h62-0-521" id="h62-0-521" class="d">-	}
</a><a href="#h62-0-522" id="h62-0-522" class="d">-	return proto.Unmarshal(res.Response, out)
</a><a href="#h62-0-523" id="h62-0-523" class="d">-}
</a><a href="#h62-0-524" id="h62-0-524" class="d">-
</a><a href="#h62-0-525" id="h62-0-525" class="d">-func (c *context) Request() *http.Request {
</a><a href="#h62-0-526" id="h62-0-526" class="d">-	return c.req
</a><a href="#h62-0-527" id="h62-0-527" class="d">-}
</a><a href="#h62-0-528" id="h62-0-528" class="d">-
</a><a href="#h62-0-529" id="h62-0-529" class="d">-func (c *context) addLogLine(ll *logpb.UserAppLogLine) {
</a><a href="#h62-0-530" id="h62-0-530" class="d">-	// Truncate long log lines.
</a><a href="#h62-0-531" id="h62-0-531" class="d">-	// TODO(dsymonds): Check if this is still necessary.
</a><a href="#h62-0-532" id="h62-0-532" class="d">-	const lim = 8 &lt;&lt; 10
</a><a href="#h62-0-533" id="h62-0-533" class="d">-	if len(*ll.Message) &gt; lim {
</a><a href="#h62-0-534" id="h62-0-534" class="d">-		suffix := fmt.Sprintf(&quot;...(length %d)&quot;, len(*ll.Message))
</a><a href="#h62-0-535" id="h62-0-535" class="d">-		ll.Message = proto.String((*ll.Message)[:lim-len(suffix)] + suffix)
</a><a href="#h62-0-536" id="h62-0-536" class="d">-	}
</a><a href="#h62-0-537" id="h62-0-537" class="d">-
</a><a href="#h62-0-538" id="h62-0-538" class="d">-	c.pendingLogs.Lock()
</a><a href="#h62-0-539" id="h62-0-539" class="d">-	c.pendingLogs.lines = append(c.pendingLogs.lines, ll)
</a><a href="#h62-0-540" id="h62-0-540" class="d">-	c.pendingLogs.Unlock()
</a><a href="#h62-0-541" id="h62-0-541" class="d">-}
</a><a href="#h62-0-542" id="h62-0-542" class="d">-
</a><a href="#h62-0-543" id="h62-0-543" class="d">-var logLevelName = map[int64]string{
</a><a href="#h62-0-544" id="h62-0-544" class="d">-	0: &quot;DEBUG&quot;,
</a><a href="#h62-0-545" id="h62-0-545" class="d">-	1: &quot;INFO&quot;,
</a><a href="#h62-0-546" id="h62-0-546" class="d">-	2: &quot;WARNING&quot;,
</a><a href="#h62-0-547" id="h62-0-547" class="d">-	3: &quot;ERROR&quot;,
</a><a href="#h62-0-548" id="h62-0-548" class="d">-	4: &quot;CRITICAL&quot;,
</a><a href="#h62-0-549" id="h62-0-549" class="d">-}
</a><a href="#h62-0-550" id="h62-0-550" class="d">-
</a><a href="#h62-0-551" id="h62-0-551" class="d">-func logf(c *context, level int64, format string, args ...interface{}) {
</a><a href="#h62-0-552" id="h62-0-552" class="d">-	s := fmt.Sprintf(format, args...)
</a><a href="#h62-0-553" id="h62-0-553" class="d">-	s = strings.TrimRight(s, &quot;\n&quot;) // Remove any trailing newline characters.
</a><a href="#h62-0-554" id="h62-0-554" class="d">-	c.addLogLine(&amp;logpb.UserAppLogLine{
</a><a href="#h62-0-555" id="h62-0-555" class="d">-		TimestampUsec: proto.Int64(time.Now().UnixNano() / 1e3),
</a><a href="#h62-0-556" id="h62-0-556" class="d">-		Level:         &amp;level,
</a><a href="#h62-0-557" id="h62-0-557" class="d">-		Message:       &amp;s,
</a><a href="#h62-0-558" id="h62-0-558" class="d">-	})
</a><a href="#h62-0-559" id="h62-0-559" class="d">-	log.Print(logLevelName[level] + &quot;: &quot; + s)
</a><a href="#h62-0-560" id="h62-0-560" class="d">-}
</a><a href="#h62-0-561" id="h62-0-561" class="d">-
</a><a href="#h62-0-562" id="h62-0-562" class="d">-// flushLog attempts to flush any pending logs to the appserver.
</a><a href="#h62-0-563" id="h62-0-563" class="d">-// It should not be called concurrently.
</a><a href="#h62-0-564" id="h62-0-564" class="d">-func (c *context) flushLog(force bool) (flushed bool) {
</a><a href="#h62-0-565" id="h62-0-565" class="d">-	c.pendingLogs.Lock()
</a><a href="#h62-0-566" id="h62-0-566" class="d">-	// Grab up to 30 MB. We can get away with up to 32 MB, but let&#39;s be cautious.
</a><a href="#h62-0-567" id="h62-0-567" class="d">-	n, rem := 0, 30&lt;&lt;20
</a><a href="#h62-0-568" id="h62-0-568" class="d">-	for ; n &lt; len(c.pendingLogs.lines); n++ {
</a><a href="#h62-0-569" id="h62-0-569" class="d">-		ll := c.pendingLogs.lines[n]
</a><a href="#h62-0-570" id="h62-0-570" class="d">-		// Each log line will require about 3 bytes of overhead.
</a><a href="#h62-0-571" id="h62-0-571" class="d">-		nb := proto.Size(ll) + 3
</a><a href="#h62-0-572" id="h62-0-572" class="d">-		if nb &gt; rem {
</a><a href="#h62-0-573" id="h62-0-573" class="d">-			break
</a><a href="#h62-0-574" id="h62-0-574" class="d">-		}
</a><a href="#h62-0-575" id="h62-0-575" class="d">-		rem -= nb
</a><a href="#h62-0-576" id="h62-0-576" class="d">-	}
</a><a href="#h62-0-577" id="h62-0-577" class="d">-	lines := c.pendingLogs.lines[:n]
</a><a href="#h62-0-578" id="h62-0-578" class="d">-	c.pendingLogs.lines = c.pendingLogs.lines[n:]
</a><a href="#h62-0-579" id="h62-0-579" class="d">-	c.pendingLogs.Unlock()
</a><a href="#h62-0-580" id="h62-0-580" class="d">-
</a><a href="#h62-0-581" id="h62-0-581" class="d">-	if len(lines) == 0 &amp;&amp; !force {
</a><a href="#h62-0-582" id="h62-0-582" class="d">-		// Nothing to flush.
</a><a href="#h62-0-583" id="h62-0-583" class="d">-		return false
</a><a href="#h62-0-584" id="h62-0-584" class="d">-	}
</a><a href="#h62-0-585" id="h62-0-585" class="d">-
</a><a href="#h62-0-586" id="h62-0-586" class="d">-	rescueLogs := false
</a><a href="#h62-0-587" id="h62-0-587" class="d">-	defer func() {
</a><a href="#h62-0-588" id="h62-0-588" class="d">-		if rescueLogs {
</a><a href="#h62-0-589" id="h62-0-589" class="d">-			c.pendingLogs.Lock()
</a><a href="#h62-0-590" id="h62-0-590" class="d">-			c.pendingLogs.lines = append(lines, c.pendingLogs.lines...)
</a><a href="#h62-0-591" id="h62-0-591" class="d">-			c.pendingLogs.Unlock()
</a><a href="#h62-0-592" id="h62-0-592" class="d">-		}
</a><a href="#h62-0-593" id="h62-0-593" class="d">-	}()
</a><a href="#h62-0-594" id="h62-0-594" class="d">-
</a><a href="#h62-0-595" id="h62-0-595" class="d">-	buf, err := proto.Marshal(&amp;logpb.UserAppLogGroup{
</a><a href="#h62-0-596" id="h62-0-596" class="d">-		LogLine: lines,
</a><a href="#h62-0-597" id="h62-0-597" class="d">-	})
</a><a href="#h62-0-598" id="h62-0-598" class="d">-	if err != nil {
</a><a href="#h62-0-599" id="h62-0-599" class="d">-		log.Printf(&quot;internal.flushLog: marshaling UserAppLogGroup: %v&quot;, err)
</a><a href="#h62-0-600" id="h62-0-600" class="d">-		rescueLogs = true
</a><a href="#h62-0-601" id="h62-0-601" class="d">-		return false
</a><a href="#h62-0-602" id="h62-0-602" class="d">-	}
</a><a href="#h62-0-603" id="h62-0-603" class="d">-
</a><a href="#h62-0-604" id="h62-0-604" class="d">-	req := &amp;logpb.FlushRequest{
</a><a href="#h62-0-605" id="h62-0-605" class="d">-		Logs: buf,
</a><a href="#h62-0-606" id="h62-0-606" class="d">-	}
</a><a href="#h62-0-607" id="h62-0-607" class="d">-	res := &amp;basepb.VoidProto{}
</a><a href="#h62-0-608" id="h62-0-608" class="d">-	c.pendingLogs.Lock()
</a><a href="#h62-0-609" id="h62-0-609" class="d">-	c.pendingLogs.flushes++
</a><a href="#h62-0-610" id="h62-0-610" class="d">-	c.pendingLogs.Unlock()
</a><a href="#h62-0-611" id="h62-0-611" class="d">-	if err := Call(toContext(c), &quot;logservice&quot;, &quot;Flush&quot;, req, res); err != nil {
</a><a href="#h62-0-612" id="h62-0-612" class="d">-		log.Printf(&quot;internal.flushLog: Flush RPC: %v&quot;, err)
</a><a href="#h62-0-613" id="h62-0-613" class="d">-		rescueLogs = true
</a><a href="#h62-0-614" id="h62-0-614" class="d">-		return false
</a><a href="#h62-0-615" id="h62-0-615" class="d">-	}
</a><a href="#h62-0-616" id="h62-0-616" class="d">-	return true
</a><a href="#h62-0-617" id="h62-0-617" class="d">-}
</a><a href="#h62-0-618" id="h62-0-618" class="d">-
</a><a href="#h62-0-619" id="h62-0-619" class="d">-const (
</a><a href="#h62-0-620" id="h62-0-620" class="d">-	// Log flushing parameters.
</a><a href="#h62-0-621" id="h62-0-621" class="d">-	flushInterval      = 1 * time.Second
</a><a href="#h62-0-622" id="h62-0-622" class="d">-	forceFlushInterval = 60 * time.Second
</a><a href="#h62-0-623" id="h62-0-623" class="d">-)
</a><a href="#h62-0-624" id="h62-0-624" class="d">-
</a><a href="#h62-0-625" id="h62-0-625" class="d">-func (c *context) logFlusher(stop &lt;-chan int) {
</a><a href="#h62-0-626" id="h62-0-626" class="d">-	lastFlush := time.Now()
</a><a href="#h62-0-627" id="h62-0-627" class="d">-	tick := time.NewTicker(flushInterval)
</a><a href="#h62-0-628" id="h62-0-628" class="d">-	for {
</a><a href="#h62-0-629" id="h62-0-629" class="d">-		select {
</a><a href="#h62-0-630" id="h62-0-630" class="d">-		case &lt;-stop:
</a><a href="#h62-0-631" id="h62-0-631" class="d">-			// Request finished.
</a><a href="#h62-0-632" id="h62-0-632" class="d">-			tick.Stop()
</a><a href="#h62-0-633" id="h62-0-633" class="d">-			return
</a><a href="#h62-0-634" id="h62-0-634" class="d">-		case &lt;-tick.C:
</a><a href="#h62-0-635" id="h62-0-635" class="d">-			force := time.Now().Sub(lastFlush) &gt; forceFlushInterval
</a><a href="#h62-0-636" id="h62-0-636" class="d">-			if c.flushLog(force) {
</a><a href="#h62-0-637" id="h62-0-637" class="d">-				lastFlush = time.Now()
</a><a href="#h62-0-638" id="h62-0-638" class="d">-			}
</a><a href="#h62-0-639" id="h62-0-639" class="d">-		}
</a><a href="#h62-0-640" id="h62-0-640" class="d">-	}
</a><a href="#h62-0-641" id="h62-0-641" class="d">-}
</a><a href="#h62-0-642" id="h62-0-642" class="d">-
</a><a href="#h62-0-643" id="h62-0-643" class="d">-func ContextForTesting(req *http.Request) netcontext.Context {
</a><a href="#h62-0-644" id="h62-0-644" class="d">-	return toContext(&amp;context{req: req})
</a><a href="#h62-0-645" id="h62-0-645" class="d">-}
</a><b>diff --git a/<a id="h63" href="../file/vendor/google.golang.org/appengine/internal/api_classic.go">vendor/google.golang.org/appengine/internal/api_classic.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/api_classic.go">vendor/google.golang.org/appengine/internal/api_classic.go</a></b>
<a href="#h63-0" id="h63-0" class="h">@@ -1,159 +0,0 @@
</a><a href="#h63-0-0" id="h63-0-0" class="d">-// Copyright 2015 Google Inc. All rights reserved.
</a><a href="#h63-0-1" id="h63-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h63-0-2" id="h63-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h63-0-3" id="h63-0-3" class="d">-
</a><a href="#h63-0-4" id="h63-0-4" class="d">-// +build appengine
</a><a href="#h63-0-5" id="h63-0-5" class="d">-
</a><a href="#h63-0-6" id="h63-0-6" class="d">-package internal
</a><a href="#h63-0-7" id="h63-0-7" class="d">-
</a><a href="#h63-0-8" id="h63-0-8" class="d">-import (
</a><a href="#h63-0-9" id="h63-0-9" class="d">-	&quot;errors&quot;
</a><a href="#h63-0-10" id="h63-0-10" class="d">-	&quot;fmt&quot;
</a><a href="#h63-0-11" id="h63-0-11" class="d">-	&quot;net/http&quot;
</a><a href="#h63-0-12" id="h63-0-12" class="d">-	&quot;time&quot;
</a><a href="#h63-0-13" id="h63-0-13" class="d">-
</a><a href="#h63-0-14" id="h63-0-14" class="d">-	&quot;appengine&quot;
</a><a href="#h63-0-15" id="h63-0-15" class="d">-	&quot;appengine_internal&quot;
</a><a href="#h63-0-16" id="h63-0-16" class="d">-	basepb &quot;appengine_internal/base&quot;
</a><a href="#h63-0-17" id="h63-0-17" class="d">-
</a><a href="#h63-0-18" id="h63-0-18" class="d">-	&quot;github.com/golang/protobuf/proto&quot;
</a><a href="#h63-0-19" id="h63-0-19" class="d">-	netcontext &quot;golang.org/x/net/context&quot;
</a><a href="#h63-0-20" id="h63-0-20" class="d">-)
</a><a href="#h63-0-21" id="h63-0-21" class="d">-
</a><a href="#h63-0-22" id="h63-0-22" class="d">-var contextKey = &quot;holds an appengine.Context&quot;
</a><a href="#h63-0-23" id="h63-0-23" class="d">-
</a><a href="#h63-0-24" id="h63-0-24" class="d">-func fromContext(ctx netcontext.Context) appengine.Context {
</a><a href="#h63-0-25" id="h63-0-25" class="d">-	c, _ := ctx.Value(&amp;contextKey).(appengine.Context)
</a><a href="#h63-0-26" id="h63-0-26" class="d">-	return c
</a><a href="#h63-0-27" id="h63-0-27" class="d">-}
</a><a href="#h63-0-28" id="h63-0-28" class="d">-
</a><a href="#h63-0-29" id="h63-0-29" class="d">-// This is only for classic App Engine adapters.
</a><a href="#h63-0-30" id="h63-0-30" class="d">-func ClassicContextFromContext(ctx netcontext.Context) appengine.Context {
</a><a href="#h63-0-31" id="h63-0-31" class="d">-	return fromContext(ctx)
</a><a href="#h63-0-32" id="h63-0-32" class="d">-}
</a><a href="#h63-0-33" id="h63-0-33" class="d">-
</a><a href="#h63-0-34" id="h63-0-34" class="d">-func withContext(parent netcontext.Context, c appengine.Context) netcontext.Context {
</a><a href="#h63-0-35" id="h63-0-35" class="d">-	ctx := netcontext.WithValue(parent, &amp;contextKey, c)
</a><a href="#h63-0-36" id="h63-0-36" class="d">-
</a><a href="#h63-0-37" id="h63-0-37" class="d">-	s := &amp;basepb.StringProto{}
</a><a href="#h63-0-38" id="h63-0-38" class="d">-	c.Call(&quot;__go__&quot;, &quot;GetNamespace&quot;, &amp;basepb.VoidProto{}, s, nil)
</a><a href="#h63-0-39" id="h63-0-39" class="d">-	if ns := s.GetValue(); ns != &quot;&quot; {
</a><a href="#h63-0-40" id="h63-0-40" class="d">-		ctx = NamespacedContext(ctx, ns)
</a><a href="#h63-0-41" id="h63-0-41" class="d">-	}
</a><a href="#h63-0-42" id="h63-0-42" class="d">-
</a><a href="#h63-0-43" id="h63-0-43" class="d">-	return ctx
</a><a href="#h63-0-44" id="h63-0-44" class="d">-}
</a><a href="#h63-0-45" id="h63-0-45" class="d">-
</a><a href="#h63-0-46" id="h63-0-46" class="d">-func IncomingHeaders(ctx netcontext.Context) http.Header {
</a><a href="#h63-0-47" id="h63-0-47" class="d">-	if c := fromContext(ctx); c != nil {
</a><a href="#h63-0-48" id="h63-0-48" class="d">-		if req, ok := c.Request().(*http.Request); ok {
</a><a href="#h63-0-49" id="h63-0-49" class="d">-			return req.Header
</a><a href="#h63-0-50" id="h63-0-50" class="d">-		}
</a><a href="#h63-0-51" id="h63-0-51" class="d">-	}
</a><a href="#h63-0-52" id="h63-0-52" class="d">-	return nil
</a><a href="#h63-0-53" id="h63-0-53" class="d">-}
</a><a href="#h63-0-54" id="h63-0-54" class="d">-
</a><a href="#h63-0-55" id="h63-0-55" class="d">-func WithContext(parent netcontext.Context, req *http.Request) netcontext.Context {
</a><a href="#h63-0-56" id="h63-0-56" class="d">-	c := appengine.NewContext(req)
</a><a href="#h63-0-57" id="h63-0-57" class="d">-	return withContext(parent, c)
</a><a href="#h63-0-58" id="h63-0-58" class="d">-}
</a><a href="#h63-0-59" id="h63-0-59" class="d">-
</a><a href="#h63-0-60" id="h63-0-60" class="d">-type testingContext struct {
</a><a href="#h63-0-61" id="h63-0-61" class="d">-	appengine.Context
</a><a href="#h63-0-62" id="h63-0-62" class="d">-
</a><a href="#h63-0-63" id="h63-0-63" class="d">-	req *http.Request
</a><a href="#h63-0-64" id="h63-0-64" class="d">-}
</a><a href="#h63-0-65" id="h63-0-65" class="d">-
</a><a href="#h63-0-66" id="h63-0-66" class="d">-func (t *testingContext) FullyQualifiedAppID() string { return &quot;dev~testcontext&quot; }
</a><a href="#h63-0-67" id="h63-0-67" class="d">-func (t *testingContext) Call(service, method string, _, _ appengine_internal.ProtoMessage, _ *appengine_internal.CallOptions) error {
</a><a href="#h63-0-68" id="h63-0-68" class="d">-	if service == &quot;__go__&quot; &amp;&amp; method == &quot;GetNamespace&quot; {
</a><a href="#h63-0-69" id="h63-0-69" class="d">-		return nil
</a><a href="#h63-0-70" id="h63-0-70" class="d">-	}
</a><a href="#h63-0-71" id="h63-0-71" class="d">-	return fmt.Errorf(&quot;testingContext: unsupported Call&quot;)
</a><a href="#h63-0-72" id="h63-0-72" class="d">-}
</a><a href="#h63-0-73" id="h63-0-73" class="d">-func (t *testingContext) Request() interface{} { return t.req }
</a><a href="#h63-0-74" id="h63-0-74" class="d">-
</a><a href="#h63-0-75" id="h63-0-75" class="d">-func ContextForTesting(req *http.Request) netcontext.Context {
</a><a href="#h63-0-76" id="h63-0-76" class="d">-	return withContext(netcontext.Background(), &amp;testingContext{req: req})
</a><a href="#h63-0-77" id="h63-0-77" class="d">-}
</a><a href="#h63-0-78" id="h63-0-78" class="d">-
</a><a href="#h63-0-79" id="h63-0-79" class="d">-func Call(ctx netcontext.Context, service, method string, in, out proto.Message) error {
</a><a href="#h63-0-80" id="h63-0-80" class="d">-	if ns := NamespaceFromContext(ctx); ns != &quot;&quot; {
</a><a href="#h63-0-81" id="h63-0-81" class="d">-		if fn, ok := NamespaceMods[service]; ok {
</a><a href="#h63-0-82" id="h63-0-82" class="d">-			fn(in, ns)
</a><a href="#h63-0-83" id="h63-0-83" class="d">-		}
</a><a href="#h63-0-84" id="h63-0-84" class="d">-	}
</a><a href="#h63-0-85" id="h63-0-85" class="d">-
</a><a href="#h63-0-86" id="h63-0-86" class="d">-	if f, ctx, ok := callOverrideFromContext(ctx); ok {
</a><a href="#h63-0-87" id="h63-0-87" class="d">-		return f(ctx, service, method, in, out)
</a><a href="#h63-0-88" id="h63-0-88" class="d">-	}
</a><a href="#h63-0-89" id="h63-0-89" class="d">-
</a><a href="#h63-0-90" id="h63-0-90" class="d">-	// Handle already-done contexts quickly.
</a><a href="#h63-0-91" id="h63-0-91" class="d">-	select {
</a><a href="#h63-0-92" id="h63-0-92" class="d">-	case &lt;-ctx.Done():
</a><a href="#h63-0-93" id="h63-0-93" class="d">-		return ctx.Err()
</a><a href="#h63-0-94" id="h63-0-94" class="d">-	default:
</a><a href="#h63-0-95" id="h63-0-95" class="d">-	}
</a><a href="#h63-0-96" id="h63-0-96" class="d">-
</a><a href="#h63-0-97" id="h63-0-97" class="d">-	c := fromContext(ctx)
</a><a href="#h63-0-98" id="h63-0-98" class="d">-	if c == nil {
</a><a href="#h63-0-99" id="h63-0-99" class="d">-		// Give a good error message rather than a panic lower down.
</a><a href="#h63-0-100" id="h63-0-100" class="d">-		return errors.New(&quot;not an App Engine context&quot;)
</a><a href="#h63-0-101" id="h63-0-101" class="d">-	}
</a><a href="#h63-0-102" id="h63-0-102" class="d">-
</a><a href="#h63-0-103" id="h63-0-103" class="d">-	// Apply transaction modifications if we&#39;re in a transaction.
</a><a href="#h63-0-104" id="h63-0-104" class="d">-	if t := transactionFromContext(ctx); t != nil {
</a><a href="#h63-0-105" id="h63-0-105" class="d">-		if t.finished {
</a><a href="#h63-0-106" id="h63-0-106" class="d">-			return errors.New(&quot;transaction context has expired&quot;)
</a><a href="#h63-0-107" id="h63-0-107" class="d">-		}
</a><a href="#h63-0-108" id="h63-0-108" class="d">-		applyTransaction(in, &amp;t.transaction)
</a><a href="#h63-0-109" id="h63-0-109" class="d">-	}
</a><a href="#h63-0-110" id="h63-0-110" class="d">-
</a><a href="#h63-0-111" id="h63-0-111" class="d">-	var opts *appengine_internal.CallOptions
</a><a href="#h63-0-112" id="h63-0-112" class="d">-	if d, ok := ctx.Deadline(); ok {
</a><a href="#h63-0-113" id="h63-0-113" class="d">-		opts = &amp;appengine_internal.CallOptions{
</a><a href="#h63-0-114" id="h63-0-114" class="d">-			Timeout: d.Sub(time.Now()),
</a><a href="#h63-0-115" id="h63-0-115" class="d">-		}
</a><a href="#h63-0-116" id="h63-0-116" class="d">-	}
</a><a href="#h63-0-117" id="h63-0-117" class="d">-
</a><a href="#h63-0-118" id="h63-0-118" class="d">-	err := c.Call(service, method, in, out, opts)
</a><a href="#h63-0-119" id="h63-0-119" class="d">-	switch v := err.(type) {
</a><a href="#h63-0-120" id="h63-0-120" class="d">-	case *appengine_internal.APIError:
</a><a href="#h63-0-121" id="h63-0-121" class="d">-		return &amp;APIError{
</a><a href="#h63-0-122" id="h63-0-122" class="d">-			Service: v.Service,
</a><a href="#h63-0-123" id="h63-0-123" class="d">-			Detail:  v.Detail,
</a><a href="#h63-0-124" id="h63-0-124" class="d">-			Code:    v.Code,
</a><a href="#h63-0-125" id="h63-0-125" class="d">-		}
</a><a href="#h63-0-126" id="h63-0-126" class="d">-	case *appengine_internal.CallError:
</a><a href="#h63-0-127" id="h63-0-127" class="d">-		return &amp;CallError{
</a><a href="#h63-0-128" id="h63-0-128" class="d">-			Detail:  v.Detail,
</a><a href="#h63-0-129" id="h63-0-129" class="d">-			Code:    v.Code,
</a><a href="#h63-0-130" id="h63-0-130" class="d">-			Timeout: v.Timeout,
</a><a href="#h63-0-131" id="h63-0-131" class="d">-		}
</a><a href="#h63-0-132" id="h63-0-132" class="d">-	}
</a><a href="#h63-0-133" id="h63-0-133" class="d">-	return err
</a><a href="#h63-0-134" id="h63-0-134" class="d">-}
</a><a href="#h63-0-135" id="h63-0-135" class="d">-
</a><a href="#h63-0-136" id="h63-0-136" class="d">-func handleHTTP(w http.ResponseWriter, r *http.Request) {
</a><a href="#h63-0-137" id="h63-0-137" class="d">-	panic(&quot;handleHTTP called; this should be impossible&quot;)
</a><a href="#h63-0-138" id="h63-0-138" class="d">-}
</a><a href="#h63-0-139" id="h63-0-139" class="d">-
</a><a href="#h63-0-140" id="h63-0-140" class="d">-func logf(c appengine.Context, level int64, format string, args ...interface{}) {
</a><a href="#h63-0-141" id="h63-0-141" class="d">-	var fn func(format string, args ...interface{})
</a><a href="#h63-0-142" id="h63-0-142" class="d">-	switch level {
</a><a href="#h63-0-143" id="h63-0-143" class="d">-	case 0:
</a><a href="#h63-0-144" id="h63-0-144" class="d">-		fn = c.Debugf
</a><a href="#h63-0-145" id="h63-0-145" class="d">-	case 1:
</a><a href="#h63-0-146" id="h63-0-146" class="d">-		fn = c.Infof
</a><a href="#h63-0-147" id="h63-0-147" class="d">-	case 2:
</a><a href="#h63-0-148" id="h63-0-148" class="d">-		fn = c.Warningf
</a><a href="#h63-0-149" id="h63-0-149" class="d">-	case 3:
</a><a href="#h63-0-150" id="h63-0-150" class="d">-		fn = c.Errorf
</a><a href="#h63-0-151" id="h63-0-151" class="d">-	case 4:
</a><a href="#h63-0-152" id="h63-0-152" class="d">-		fn = c.Criticalf
</a><a href="#h63-0-153" id="h63-0-153" class="d">-	default:
</a><a href="#h63-0-154" id="h63-0-154" class="d">-		// This shouldn&#39;t happen.
</a><a href="#h63-0-155" id="h63-0-155" class="d">-		fn = c.Criticalf
</a><a href="#h63-0-156" id="h63-0-156" class="d">-	}
</a><a href="#h63-0-157" id="h63-0-157" class="d">-	fn(format, args...)
</a><a href="#h63-0-158" id="h63-0-158" class="d">-}
</a><b>diff --git a/<a id="h64" href="../file/vendor/google.golang.org/appengine/internal/api_common.go">vendor/google.golang.org/appengine/internal/api_common.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/api_common.go">vendor/google.golang.org/appengine/internal/api_common.go</a></b>
<a href="#h64-0" id="h64-0" class="h">@@ -1,86 +0,0 @@
</a><a href="#h64-0-0" id="h64-0-0" class="d">-// Copyright 2015 Google Inc. All rights reserved.
</a><a href="#h64-0-1" id="h64-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h64-0-2" id="h64-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h64-0-3" id="h64-0-3" class="d">-
</a><a href="#h64-0-4" id="h64-0-4" class="d">-package internal
</a><a href="#h64-0-5" id="h64-0-5" class="d">-
</a><a href="#h64-0-6" id="h64-0-6" class="d">-import (
</a><a href="#h64-0-7" id="h64-0-7" class="d">-	&quot;github.com/golang/protobuf/proto&quot;
</a><a href="#h64-0-8" id="h64-0-8" class="d">-	netcontext &quot;golang.org/x/net/context&quot;
</a><a href="#h64-0-9" id="h64-0-9" class="d">-)
</a><a href="#h64-0-10" id="h64-0-10" class="d">-
</a><a href="#h64-0-11" id="h64-0-11" class="d">-type CallOverrideFunc func(ctx netcontext.Context, service, method string, in, out proto.Message) error
</a><a href="#h64-0-12" id="h64-0-12" class="d">-
</a><a href="#h64-0-13" id="h64-0-13" class="d">-var callOverrideKey = &quot;holds []CallOverrideFunc&quot;
</a><a href="#h64-0-14" id="h64-0-14" class="d">-
</a><a href="#h64-0-15" id="h64-0-15" class="d">-func WithCallOverride(ctx netcontext.Context, f CallOverrideFunc) netcontext.Context {
</a><a href="#h64-0-16" id="h64-0-16" class="d">-	// We avoid appending to any existing call override
</a><a href="#h64-0-17" id="h64-0-17" class="d">-	// so we don&#39;t risk overwriting a popped stack below.
</a><a href="#h64-0-18" id="h64-0-18" class="d">-	var cofs []CallOverrideFunc
</a><a href="#h64-0-19" id="h64-0-19" class="d">-	if uf, ok := ctx.Value(&amp;callOverrideKey).([]CallOverrideFunc); ok {
</a><a href="#h64-0-20" id="h64-0-20" class="d">-		cofs = append(cofs, uf...)
</a><a href="#h64-0-21" id="h64-0-21" class="d">-	}
</a><a href="#h64-0-22" id="h64-0-22" class="d">-	cofs = append(cofs, f)
</a><a href="#h64-0-23" id="h64-0-23" class="d">-	return netcontext.WithValue(ctx, &amp;callOverrideKey, cofs)
</a><a href="#h64-0-24" id="h64-0-24" class="d">-}
</a><a href="#h64-0-25" id="h64-0-25" class="d">-
</a><a href="#h64-0-26" id="h64-0-26" class="d">-func callOverrideFromContext(ctx netcontext.Context) (CallOverrideFunc, netcontext.Context, bool) {
</a><a href="#h64-0-27" id="h64-0-27" class="d">-	cofs, _ := ctx.Value(&amp;callOverrideKey).([]CallOverrideFunc)
</a><a href="#h64-0-28" id="h64-0-28" class="d">-	if len(cofs) == 0 {
</a><a href="#h64-0-29" id="h64-0-29" class="d">-		return nil, nil, false
</a><a href="#h64-0-30" id="h64-0-30" class="d">-	}
</a><a href="#h64-0-31" id="h64-0-31" class="d">-	// We found a list of overrides; grab the last, and reconstitute a
</a><a href="#h64-0-32" id="h64-0-32" class="d">-	// context that will hide it.
</a><a href="#h64-0-33" id="h64-0-33" class="d">-	f := cofs[len(cofs)-1]
</a><a href="#h64-0-34" id="h64-0-34" class="d">-	ctx = netcontext.WithValue(ctx, &amp;callOverrideKey, cofs[:len(cofs)-1])
</a><a href="#h64-0-35" id="h64-0-35" class="d">-	return f, ctx, true
</a><a href="#h64-0-36" id="h64-0-36" class="d">-}
</a><a href="#h64-0-37" id="h64-0-37" class="d">-
</a><a href="#h64-0-38" id="h64-0-38" class="d">-type logOverrideFunc func(level int64, format string, args ...interface{})
</a><a href="#h64-0-39" id="h64-0-39" class="d">-
</a><a href="#h64-0-40" id="h64-0-40" class="d">-var logOverrideKey = &quot;holds a logOverrideFunc&quot;
</a><a href="#h64-0-41" id="h64-0-41" class="d">-
</a><a href="#h64-0-42" id="h64-0-42" class="d">-func WithLogOverride(ctx netcontext.Context, f logOverrideFunc) netcontext.Context {
</a><a href="#h64-0-43" id="h64-0-43" class="d">-	return netcontext.WithValue(ctx, &amp;logOverrideKey, f)
</a><a href="#h64-0-44" id="h64-0-44" class="d">-}
</a><a href="#h64-0-45" id="h64-0-45" class="d">-
</a><a href="#h64-0-46" id="h64-0-46" class="d">-var appIDOverrideKey = &quot;holds a string, being the full app ID&quot;
</a><a href="#h64-0-47" id="h64-0-47" class="d">-
</a><a href="#h64-0-48" id="h64-0-48" class="d">-func WithAppIDOverride(ctx netcontext.Context, appID string) netcontext.Context {
</a><a href="#h64-0-49" id="h64-0-49" class="d">-	return netcontext.WithValue(ctx, &amp;appIDOverrideKey, appID)
</a><a href="#h64-0-50" id="h64-0-50" class="d">-}
</a><a href="#h64-0-51" id="h64-0-51" class="d">-
</a><a href="#h64-0-52" id="h64-0-52" class="d">-var namespaceKey = &quot;holds the namespace string&quot;
</a><a href="#h64-0-53" id="h64-0-53" class="d">-
</a><a href="#h64-0-54" id="h64-0-54" class="d">-func withNamespace(ctx netcontext.Context, ns string) netcontext.Context {
</a><a href="#h64-0-55" id="h64-0-55" class="d">-	return netcontext.WithValue(ctx, &amp;namespaceKey, ns)
</a><a href="#h64-0-56" id="h64-0-56" class="d">-}
</a><a href="#h64-0-57" id="h64-0-57" class="d">-
</a><a href="#h64-0-58" id="h64-0-58" class="d">-func NamespaceFromContext(ctx netcontext.Context) string {
</a><a href="#h64-0-59" id="h64-0-59" class="d">-	// If there&#39;s no namespace, return the empty string.
</a><a href="#h64-0-60" id="h64-0-60" class="d">-	ns, _ := ctx.Value(&amp;namespaceKey).(string)
</a><a href="#h64-0-61" id="h64-0-61" class="d">-	return ns
</a><a href="#h64-0-62" id="h64-0-62" class="d">-}
</a><a href="#h64-0-63" id="h64-0-63" class="d">-
</a><a href="#h64-0-64" id="h64-0-64" class="d">-// FullyQualifiedAppID returns the fully-qualified application ID.
</a><a href="#h64-0-65" id="h64-0-65" class="d">-// This may contain a partition prefix (e.g. &quot;s~&quot; for High Replication apps),
</a><a href="#h64-0-66" id="h64-0-66" class="d">-// or a domain prefix (e.g. &quot;example.com:&quot;).
</a><a href="#h64-0-67" id="h64-0-67" class="d">-func FullyQualifiedAppID(ctx netcontext.Context) string {
</a><a href="#h64-0-68" id="h64-0-68" class="d">-	if id, ok := ctx.Value(&amp;appIDOverrideKey).(string); ok {
</a><a href="#h64-0-69" id="h64-0-69" class="d">-		return id
</a><a href="#h64-0-70" id="h64-0-70" class="d">-	}
</a><a href="#h64-0-71" id="h64-0-71" class="d">-	return fullyQualifiedAppID(ctx)
</a><a href="#h64-0-72" id="h64-0-72" class="d">-}
</a><a href="#h64-0-73" id="h64-0-73" class="d">-
</a><a href="#h64-0-74" id="h64-0-74" class="d">-func Logf(ctx netcontext.Context, level int64, format string, args ...interface{}) {
</a><a href="#h64-0-75" id="h64-0-75" class="d">-	if f, ok := ctx.Value(&amp;logOverrideKey).(logOverrideFunc); ok {
</a><a href="#h64-0-76" id="h64-0-76" class="d">-		f(level, format, args...)
</a><a href="#h64-0-77" id="h64-0-77" class="d">-		return
</a><a href="#h64-0-78" id="h64-0-78" class="d">-	}
</a><a href="#h64-0-79" id="h64-0-79" class="d">-	logf(fromContext(ctx), level, format, args...)
</a><a href="#h64-0-80" id="h64-0-80" class="d">-}
</a><a href="#h64-0-81" id="h64-0-81" class="d">-
</a><a href="#h64-0-82" id="h64-0-82" class="d">-// NamespacedContext wraps a Context to support namespaces.
</a><a href="#h64-0-83" id="h64-0-83" class="d">-func NamespacedContext(ctx netcontext.Context, namespace string) netcontext.Context {
</a><a href="#h64-0-84" id="h64-0-84" class="d">-	return withNamespace(ctx, namespace)
</a><a href="#h64-0-85" id="h64-0-85" class="d">-}
</a><b>diff --git a/<a id="h65" href="../file/vendor/google.golang.org/appengine/internal/app_id.go">vendor/google.golang.org/appengine/internal/app_id.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/app_id.go">vendor/google.golang.org/appengine/internal/app_id.go</a></b>
<a href="#h65-0" id="h65-0" class="h">@@ -1,28 +0,0 @@
</a><a href="#h65-0-0" id="h65-0-0" class="d">-// Copyright 2011 Google Inc. All rights reserved.
</a><a href="#h65-0-1" id="h65-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h65-0-2" id="h65-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h65-0-3" id="h65-0-3" class="d">-
</a><a href="#h65-0-4" id="h65-0-4" class="d">-package internal
</a><a href="#h65-0-5" id="h65-0-5" class="d">-
</a><a href="#h65-0-6" id="h65-0-6" class="d">-import (
</a><a href="#h65-0-7" id="h65-0-7" class="d">-	&quot;strings&quot;
</a><a href="#h65-0-8" id="h65-0-8" class="d">-)
</a><a href="#h65-0-9" id="h65-0-9" class="d">-
</a><a href="#h65-0-10" id="h65-0-10" class="d">-func parseFullAppID(appid string) (partition, domain, displayID string) {
</a><a href="#h65-0-11" id="h65-0-11" class="d">-	if i := strings.Index(appid, &quot;~&quot;); i != -1 {
</a><a href="#h65-0-12" id="h65-0-12" class="d">-		partition, appid = appid[:i], appid[i+1:]
</a><a href="#h65-0-13" id="h65-0-13" class="d">-	}
</a><a href="#h65-0-14" id="h65-0-14" class="d">-	if i := strings.Index(appid, &quot;:&quot;); i != -1 {
</a><a href="#h65-0-15" id="h65-0-15" class="d">-		domain, appid = appid[:i], appid[i+1:]
</a><a href="#h65-0-16" id="h65-0-16" class="d">-	}
</a><a href="#h65-0-17" id="h65-0-17" class="d">-	return partition, domain, appid
</a><a href="#h65-0-18" id="h65-0-18" class="d">-}
</a><a href="#h65-0-19" id="h65-0-19" class="d">-
</a><a href="#h65-0-20" id="h65-0-20" class="d">-// appID returns &quot;appid&quot; or &quot;domain.com:appid&quot;.
</a><a href="#h65-0-21" id="h65-0-21" class="d">-func appID(fullAppID string) string {
</a><a href="#h65-0-22" id="h65-0-22" class="d">-	_, dom, dis := parseFullAppID(fullAppID)
</a><a href="#h65-0-23" id="h65-0-23" class="d">-	if dom != &quot;&quot; {
</a><a href="#h65-0-24" id="h65-0-24" class="d">-		return dom + &quot;:&quot; + dis
</a><a href="#h65-0-25" id="h65-0-25" class="d">-	}
</a><a href="#h65-0-26" id="h65-0-26" class="d">-	return dis
</a><a href="#h65-0-27" id="h65-0-27" class="d">-}
</a><b>diff --git a/<a id="h66" href="../file/vendor/google.golang.org/appengine/internal/base/BUILD">vendor/google.golang.org/appengine/internal/base/BUILD</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/base/BUILD">vendor/google.golang.org/appengine/internal/base/BUILD</a></b>
<a href="#h66-0" id="h66-0" class="h">@@ -1,19 +0,0 @@
</a><a href="#h66-0-0" id="h66-0-0" class="d">-
</a><a href="#h66-0-1" id="h66-0-1" class="d">-load(&quot;@io_bazel_rules_go//go:def.bzl&quot;,
</a><a href="#h66-0-2" id="h66-0-2" class="d">-  &quot;go_binary&quot;,
</a><a href="#h66-0-3" id="h66-0-3" class="d">-  &quot;go_library&quot;,
</a><a href="#h66-0-4" id="h66-0-4" class="d">-  &quot;go_test&quot;,
</a><a href="#h66-0-5" id="h66-0-5" class="d">-)
</a><a href="#h66-0-6" id="h66-0-6" class="d">-
</a><a href="#h66-0-7" id="h66-0-7" class="d">-go_library(
</a><a href="#h66-0-8" id="h66-0-8" class="d">-name = &quot;go_default_library&quot;,
</a><a href="#h66-0-9" id="h66-0-9" class="d">-  srcs = [
</a><a href="#h66-0-10" id="h66-0-10" class="d">-    &quot;api_base.pb.go&quot;,
</a><a href="#h66-0-11" id="h66-0-11" class="d">-  ],
</a><a href="#h66-0-12" id="h66-0-12" class="d">-  deps = [
</a><a href="#h66-0-13" id="h66-0-13" class="d">-    &quot;//vendor/github.com/golang/protobuf/proto:go_default_library&quot;,
</a><a href="#h66-0-14" id="h66-0-14" class="d">-  ],
</a><a href="#h66-0-15" id="h66-0-15" class="d">-  visibility = [&quot;//visibility:public&quot;],
</a><a href="#h66-0-16" id="h66-0-16" class="d">-)
</a><a href="#h66-0-17" id="h66-0-17" class="d">-
</a><a href="#h66-0-18" id="h66-0-18" class="d">-
</a><b>diff --git a/<a id="h67" href="../file/vendor/google.golang.org/appengine/internal/base/api_base.pb.go">vendor/google.golang.org/appengine/internal/base/api_base.pb.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/base/api_base.pb.go">vendor/google.golang.org/appengine/internal/base/api_base.pb.go</a></b>
<a href="#h67-0" id="h67-0" class="h">@@ -1,133 +0,0 @@
</a><a href="#h67-0-0" id="h67-0-0" class="d">-// Code generated by protoc-gen-go.
</a><a href="#h67-0-1" id="h67-0-1" class="d">-// source: google.golang.org/appengine/internal/base/api_base.proto
</a><a href="#h67-0-2" id="h67-0-2" class="d">-// DO NOT EDIT!
</a><a href="#h67-0-3" id="h67-0-3" class="d">-
</a><a href="#h67-0-4" id="h67-0-4" class="d">-/*
</a><a href="#h67-0-5" id="h67-0-5" class="d">-Package base is a generated protocol buffer package.
</a><a href="#h67-0-6" id="h67-0-6" class="d">-
</a><a href="#h67-0-7" id="h67-0-7" class="d">-It is generated from these files:
</a><a href="#h67-0-8" id="h67-0-8" class="d">-	google.golang.org/appengine/internal/base/api_base.proto
</a><a href="#h67-0-9" id="h67-0-9" class="d">-
</a><a href="#h67-0-10" id="h67-0-10" class="d">-It has these top-level messages:
</a><a href="#h67-0-11" id="h67-0-11" class="d">-	StringProto
</a><a href="#h67-0-12" id="h67-0-12" class="d">-	Integer32Proto
</a><a href="#h67-0-13" id="h67-0-13" class="d">-	Integer64Proto
</a><a href="#h67-0-14" id="h67-0-14" class="d">-	BoolProto
</a><a href="#h67-0-15" id="h67-0-15" class="d">-	DoubleProto
</a><a href="#h67-0-16" id="h67-0-16" class="d">-	BytesProto
</a><a href="#h67-0-17" id="h67-0-17" class="d">-	VoidProto
</a><a href="#h67-0-18" id="h67-0-18" class="d">-*/
</a><a href="#h67-0-19" id="h67-0-19" class="d">-package base
</a><a href="#h67-0-20" id="h67-0-20" class="d">-
</a><a href="#h67-0-21" id="h67-0-21" class="d">-import proto &quot;github.com/golang/protobuf/proto&quot;
</a><a href="#h67-0-22" id="h67-0-22" class="d">-import fmt &quot;fmt&quot;
</a><a href="#h67-0-23" id="h67-0-23" class="d">-import math &quot;math&quot;
</a><a href="#h67-0-24" id="h67-0-24" class="d">-
</a><a href="#h67-0-25" id="h67-0-25" class="d">-// Reference imports to suppress errors if they are not otherwise used.
</a><a href="#h67-0-26" id="h67-0-26" class="d">-var _ = proto.Marshal
</a><a href="#h67-0-27" id="h67-0-27" class="d">-var _ = fmt.Errorf
</a><a href="#h67-0-28" id="h67-0-28" class="d">-var _ = math.Inf
</a><a href="#h67-0-29" id="h67-0-29" class="d">-
</a><a href="#h67-0-30" id="h67-0-30" class="d">-type StringProto struct {
</a><a href="#h67-0-31" id="h67-0-31" class="d">-	Value            *string `protobuf:&quot;bytes,1,req,name=value&quot; json:&quot;value,omitempty&quot;`
</a><a href="#h67-0-32" id="h67-0-32" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h67-0-33" id="h67-0-33" class="d">-}
</a><a href="#h67-0-34" id="h67-0-34" class="d">-
</a><a href="#h67-0-35" id="h67-0-35" class="d">-func (m *StringProto) Reset()         { *m = StringProto{} }
</a><a href="#h67-0-36" id="h67-0-36" class="d">-func (m *StringProto) String() string { return proto.CompactTextString(m) }
</a><a href="#h67-0-37" id="h67-0-37" class="d">-func (*StringProto) ProtoMessage()    {}
</a><a href="#h67-0-38" id="h67-0-38" class="d">-
</a><a href="#h67-0-39" id="h67-0-39" class="d">-func (m *StringProto) GetValue() string {
</a><a href="#h67-0-40" id="h67-0-40" class="d">-	if m != nil &amp;&amp; m.Value != nil {
</a><a href="#h67-0-41" id="h67-0-41" class="d">-		return *m.Value
</a><a href="#h67-0-42" id="h67-0-42" class="d">-	}
</a><a href="#h67-0-43" id="h67-0-43" class="d">-	return &quot;&quot;
</a><a href="#h67-0-44" id="h67-0-44" class="d">-}
</a><a href="#h67-0-45" id="h67-0-45" class="d">-
</a><a href="#h67-0-46" id="h67-0-46" class="d">-type Integer32Proto struct {
</a><a href="#h67-0-47" id="h67-0-47" class="d">-	Value            *int32 `protobuf:&quot;varint,1,req,name=value&quot; json:&quot;value,omitempty&quot;`
</a><a href="#h67-0-48" id="h67-0-48" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h67-0-49" id="h67-0-49" class="d">-}
</a><a href="#h67-0-50" id="h67-0-50" class="d">-
</a><a href="#h67-0-51" id="h67-0-51" class="d">-func (m *Integer32Proto) Reset()         { *m = Integer32Proto{} }
</a><a href="#h67-0-52" id="h67-0-52" class="d">-func (m *Integer32Proto) String() string { return proto.CompactTextString(m) }
</a><a href="#h67-0-53" id="h67-0-53" class="d">-func (*Integer32Proto) ProtoMessage()    {}
</a><a href="#h67-0-54" id="h67-0-54" class="d">-
</a><a href="#h67-0-55" id="h67-0-55" class="d">-func (m *Integer32Proto) GetValue() int32 {
</a><a href="#h67-0-56" id="h67-0-56" class="d">-	if m != nil &amp;&amp; m.Value != nil {
</a><a href="#h67-0-57" id="h67-0-57" class="d">-		return *m.Value
</a><a href="#h67-0-58" id="h67-0-58" class="d">-	}
</a><a href="#h67-0-59" id="h67-0-59" class="d">-	return 0
</a><a href="#h67-0-60" id="h67-0-60" class="d">-}
</a><a href="#h67-0-61" id="h67-0-61" class="d">-
</a><a href="#h67-0-62" id="h67-0-62" class="d">-type Integer64Proto struct {
</a><a href="#h67-0-63" id="h67-0-63" class="d">-	Value            *int64 `protobuf:&quot;varint,1,req,name=value&quot; json:&quot;value,omitempty&quot;`
</a><a href="#h67-0-64" id="h67-0-64" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h67-0-65" id="h67-0-65" class="d">-}
</a><a href="#h67-0-66" id="h67-0-66" class="d">-
</a><a href="#h67-0-67" id="h67-0-67" class="d">-func (m *Integer64Proto) Reset()         { *m = Integer64Proto{} }
</a><a href="#h67-0-68" id="h67-0-68" class="d">-func (m *Integer64Proto) String() string { return proto.CompactTextString(m) }
</a><a href="#h67-0-69" id="h67-0-69" class="d">-func (*Integer64Proto) ProtoMessage()    {}
</a><a href="#h67-0-70" id="h67-0-70" class="d">-
</a><a href="#h67-0-71" id="h67-0-71" class="d">-func (m *Integer64Proto) GetValue() int64 {
</a><a href="#h67-0-72" id="h67-0-72" class="d">-	if m != nil &amp;&amp; m.Value != nil {
</a><a href="#h67-0-73" id="h67-0-73" class="d">-		return *m.Value
</a><a href="#h67-0-74" id="h67-0-74" class="d">-	}
</a><a href="#h67-0-75" id="h67-0-75" class="d">-	return 0
</a><a href="#h67-0-76" id="h67-0-76" class="d">-}
</a><a href="#h67-0-77" id="h67-0-77" class="d">-
</a><a href="#h67-0-78" id="h67-0-78" class="d">-type BoolProto struct {
</a><a href="#h67-0-79" id="h67-0-79" class="d">-	Value            *bool  `protobuf:&quot;varint,1,req,name=value&quot; json:&quot;value,omitempty&quot;`
</a><a href="#h67-0-80" id="h67-0-80" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h67-0-81" id="h67-0-81" class="d">-}
</a><a href="#h67-0-82" id="h67-0-82" class="d">-
</a><a href="#h67-0-83" id="h67-0-83" class="d">-func (m *BoolProto) Reset()         { *m = BoolProto{} }
</a><a href="#h67-0-84" id="h67-0-84" class="d">-func (m *BoolProto) String() string { return proto.CompactTextString(m) }
</a><a href="#h67-0-85" id="h67-0-85" class="d">-func (*BoolProto) ProtoMessage()    {}
</a><a href="#h67-0-86" id="h67-0-86" class="d">-
</a><a href="#h67-0-87" id="h67-0-87" class="d">-func (m *BoolProto) GetValue() bool {
</a><a href="#h67-0-88" id="h67-0-88" class="d">-	if m != nil &amp;&amp; m.Value != nil {
</a><a href="#h67-0-89" id="h67-0-89" class="d">-		return *m.Value
</a><a href="#h67-0-90" id="h67-0-90" class="d">-	}
</a><a href="#h67-0-91" id="h67-0-91" class="d">-	return false
</a><a href="#h67-0-92" id="h67-0-92" class="d">-}
</a><a href="#h67-0-93" id="h67-0-93" class="d">-
</a><a href="#h67-0-94" id="h67-0-94" class="d">-type DoubleProto struct {
</a><a href="#h67-0-95" id="h67-0-95" class="d">-	Value            *float64 `protobuf:&quot;fixed64,1,req,name=value&quot; json:&quot;value,omitempty&quot;`
</a><a href="#h67-0-96" id="h67-0-96" class="d">-	XXX_unrecognized []byte   `json:&quot;-&quot;`
</a><a href="#h67-0-97" id="h67-0-97" class="d">-}
</a><a href="#h67-0-98" id="h67-0-98" class="d">-
</a><a href="#h67-0-99" id="h67-0-99" class="d">-func (m *DoubleProto) Reset()         { *m = DoubleProto{} }
</a><a href="#h67-0-100" id="h67-0-100" class="d">-func (m *DoubleProto) String() string { return proto.CompactTextString(m) }
</a><a href="#h67-0-101" id="h67-0-101" class="d">-func (*DoubleProto) ProtoMessage()    {}
</a><a href="#h67-0-102" id="h67-0-102" class="d">-
</a><a href="#h67-0-103" id="h67-0-103" class="d">-func (m *DoubleProto) GetValue() float64 {
</a><a href="#h67-0-104" id="h67-0-104" class="d">-	if m != nil &amp;&amp; m.Value != nil {
</a><a href="#h67-0-105" id="h67-0-105" class="d">-		return *m.Value
</a><a href="#h67-0-106" id="h67-0-106" class="d">-	}
</a><a href="#h67-0-107" id="h67-0-107" class="d">-	return 0
</a><a href="#h67-0-108" id="h67-0-108" class="d">-}
</a><a href="#h67-0-109" id="h67-0-109" class="d">-
</a><a href="#h67-0-110" id="h67-0-110" class="d">-type BytesProto struct {
</a><a href="#h67-0-111" id="h67-0-111" class="d">-	Value            []byte `protobuf:&quot;bytes,1,req,name=value&quot; json:&quot;value,omitempty&quot;`
</a><a href="#h67-0-112" id="h67-0-112" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h67-0-113" id="h67-0-113" class="d">-}
</a><a href="#h67-0-114" id="h67-0-114" class="d">-
</a><a href="#h67-0-115" id="h67-0-115" class="d">-func (m *BytesProto) Reset()         { *m = BytesProto{} }
</a><a href="#h67-0-116" id="h67-0-116" class="d">-func (m *BytesProto) String() string { return proto.CompactTextString(m) }
</a><a href="#h67-0-117" id="h67-0-117" class="d">-func (*BytesProto) ProtoMessage()    {}
</a><a href="#h67-0-118" id="h67-0-118" class="d">-
</a><a href="#h67-0-119" id="h67-0-119" class="d">-func (m *BytesProto) GetValue() []byte {
</a><a href="#h67-0-120" id="h67-0-120" class="d">-	if m != nil {
</a><a href="#h67-0-121" id="h67-0-121" class="d">-		return m.Value
</a><a href="#h67-0-122" id="h67-0-122" class="d">-	}
</a><a href="#h67-0-123" id="h67-0-123" class="d">-	return nil
</a><a href="#h67-0-124" id="h67-0-124" class="d">-}
</a><a href="#h67-0-125" id="h67-0-125" class="d">-
</a><a href="#h67-0-126" id="h67-0-126" class="d">-type VoidProto struct {
</a><a href="#h67-0-127" id="h67-0-127" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h67-0-128" id="h67-0-128" class="d">-}
</a><a href="#h67-0-129" id="h67-0-129" class="d">-
</a><a href="#h67-0-130" id="h67-0-130" class="d">-func (m *VoidProto) Reset()         { *m = VoidProto{} }
</a><a href="#h67-0-131" id="h67-0-131" class="d">-func (m *VoidProto) String() string { return proto.CompactTextString(m) }
</a><a href="#h67-0-132" id="h67-0-132" class="d">-func (*VoidProto) ProtoMessage()    {}
</a><b>diff --git a/<a id="h68" href="../file/vendor/google.golang.org/appengine/internal/base/api_base.proto">vendor/google.golang.org/appengine/internal/base/api_base.proto</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/base/api_base.proto">vendor/google.golang.org/appengine/internal/base/api_base.proto</a></b>
<a href="#h68-0" id="h68-0" class="h">@@ -1,33 +0,0 @@
</a><a href="#h68-0-0" id="h68-0-0" class="d">-// Built-in base types for API calls. Primarily useful as return types.
</a><a href="#h68-0-1" id="h68-0-1" class="d">-
</a><a href="#h68-0-2" id="h68-0-2" class="d">-syntax = &quot;proto2&quot;;
</a><a href="#h68-0-3" id="h68-0-3" class="d">-option go_package = &quot;base&quot;;
</a><a href="#h68-0-4" id="h68-0-4" class="d">-
</a><a href="#h68-0-5" id="h68-0-5" class="d">-package appengine.base;
</a><a href="#h68-0-6" id="h68-0-6" class="d">-
</a><a href="#h68-0-7" id="h68-0-7" class="d">-message StringProto {
</a><a href="#h68-0-8" id="h68-0-8" class="d">-  required string value = 1;
</a><a href="#h68-0-9" id="h68-0-9" class="d">-}
</a><a href="#h68-0-10" id="h68-0-10" class="d">-
</a><a href="#h68-0-11" id="h68-0-11" class="d">-message Integer32Proto {
</a><a href="#h68-0-12" id="h68-0-12" class="d">-  required int32 value = 1;
</a><a href="#h68-0-13" id="h68-0-13" class="d">-}
</a><a href="#h68-0-14" id="h68-0-14" class="d">-
</a><a href="#h68-0-15" id="h68-0-15" class="d">-message Integer64Proto {
</a><a href="#h68-0-16" id="h68-0-16" class="d">-  required int64 value = 1;
</a><a href="#h68-0-17" id="h68-0-17" class="d">-}
</a><a href="#h68-0-18" id="h68-0-18" class="d">-
</a><a href="#h68-0-19" id="h68-0-19" class="d">-message BoolProto {
</a><a href="#h68-0-20" id="h68-0-20" class="d">-  required bool value = 1;
</a><a href="#h68-0-21" id="h68-0-21" class="d">-}
</a><a href="#h68-0-22" id="h68-0-22" class="d">-
</a><a href="#h68-0-23" id="h68-0-23" class="d">-message DoubleProto {
</a><a href="#h68-0-24" id="h68-0-24" class="d">-  required double value = 1;
</a><a href="#h68-0-25" id="h68-0-25" class="d">-}
</a><a href="#h68-0-26" id="h68-0-26" class="d">-
</a><a href="#h68-0-27" id="h68-0-27" class="d">-message BytesProto {
</a><a href="#h68-0-28" id="h68-0-28" class="d">-  required bytes value = 1 [ctype=CORD];
</a><a href="#h68-0-29" id="h68-0-29" class="d">-}
</a><a href="#h68-0-30" id="h68-0-30" class="d">-
</a><a href="#h68-0-31" id="h68-0-31" class="d">-message VoidProto {
</a><a href="#h68-0-32" id="h68-0-32" class="d">-}
</a><b>diff --git a/<a id="h69" href="../file/vendor/google.golang.org/appengine/internal/datastore/BUILD">vendor/google.golang.org/appengine/internal/datastore/BUILD</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/datastore/BUILD">vendor/google.golang.org/appengine/internal/datastore/BUILD</a></b>
<a href="#h69-0" id="h69-0" class="h">@@ -1,19 +0,0 @@
</a><a href="#h69-0-0" id="h69-0-0" class="d">-
</a><a href="#h69-0-1" id="h69-0-1" class="d">-load(&quot;@io_bazel_rules_go//go:def.bzl&quot;,
</a><a href="#h69-0-2" id="h69-0-2" class="d">-  &quot;go_binary&quot;,
</a><a href="#h69-0-3" id="h69-0-3" class="d">-  &quot;go_library&quot;,
</a><a href="#h69-0-4" id="h69-0-4" class="d">-  &quot;go_test&quot;,
</a><a href="#h69-0-5" id="h69-0-5" class="d">-)
</a><a href="#h69-0-6" id="h69-0-6" class="d">-
</a><a href="#h69-0-7" id="h69-0-7" class="d">-go_library(
</a><a href="#h69-0-8" id="h69-0-8" class="d">-name = &quot;go_default_library&quot;,
</a><a href="#h69-0-9" id="h69-0-9" class="d">-  srcs = [
</a><a href="#h69-0-10" id="h69-0-10" class="d">-    &quot;datastore_v3.pb.go&quot;,
</a><a href="#h69-0-11" id="h69-0-11" class="d">-  ],
</a><a href="#h69-0-12" id="h69-0-12" class="d">-  deps = [
</a><a href="#h69-0-13" id="h69-0-13" class="d">-    &quot;//vendor/github.com/golang/protobuf/proto:go_default_library&quot;,
</a><a href="#h69-0-14" id="h69-0-14" class="d">-  ],
</a><a href="#h69-0-15" id="h69-0-15" class="d">-  visibility = [&quot;//visibility:public&quot;],
</a><a href="#h69-0-16" id="h69-0-16" class="d">-)
</a><a href="#h69-0-17" id="h69-0-17" class="d">-
</a><a href="#h69-0-18" id="h69-0-18" class="d">-
</a><b>diff --git a/<a id="h70" href="../file/vendor/google.golang.org/appengine/internal/datastore/datastore_v3.pb.go">vendor/google.golang.org/appengine/internal/datastore/datastore_v3.pb.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/datastore/datastore_v3.pb.go">vendor/google.golang.org/appengine/internal/datastore/datastore_v3.pb.go</a></b>
<a href="#h70-0" id="h70-0" class="h">@@ -1,2778 +0,0 @@
</a><a href="#h70-0-0" id="h70-0-0" class="d">-// Code generated by protoc-gen-go.
</a><a href="#h70-0-1" id="h70-0-1" class="d">-// source: google.golang.org/appengine/internal/datastore/datastore_v3.proto
</a><a href="#h70-0-2" id="h70-0-2" class="d">-// DO NOT EDIT!
</a><a href="#h70-0-3" id="h70-0-3" class="d">-
</a><a href="#h70-0-4" id="h70-0-4" class="d">-/*
</a><a href="#h70-0-5" id="h70-0-5" class="d">-Package datastore is a generated protocol buffer package.
</a><a href="#h70-0-6" id="h70-0-6" class="d">-
</a><a href="#h70-0-7" id="h70-0-7" class="d">-It is generated from these files:
</a><a href="#h70-0-8" id="h70-0-8" class="d">-	google.golang.org/appengine/internal/datastore/datastore_v3.proto
</a><a href="#h70-0-9" id="h70-0-9" class="d">-
</a><a href="#h70-0-10" id="h70-0-10" class="d">-It has these top-level messages:
</a><a href="#h70-0-11" id="h70-0-11" class="d">-	Action
</a><a href="#h70-0-12" id="h70-0-12" class="d">-	PropertyValue
</a><a href="#h70-0-13" id="h70-0-13" class="d">-	Property
</a><a href="#h70-0-14" id="h70-0-14" class="d">-	Path
</a><a href="#h70-0-15" id="h70-0-15" class="d">-	Reference
</a><a href="#h70-0-16" id="h70-0-16" class="d">-	User
</a><a href="#h70-0-17" id="h70-0-17" class="d">-	EntityProto
</a><a href="#h70-0-18" id="h70-0-18" class="d">-	CompositeProperty
</a><a href="#h70-0-19" id="h70-0-19" class="d">-	Index
</a><a href="#h70-0-20" id="h70-0-20" class="d">-	CompositeIndex
</a><a href="#h70-0-21" id="h70-0-21" class="d">-	IndexPostfix
</a><a href="#h70-0-22" id="h70-0-22" class="d">-	IndexPosition
</a><a href="#h70-0-23" id="h70-0-23" class="d">-	Snapshot
</a><a href="#h70-0-24" id="h70-0-24" class="d">-	InternalHeader
</a><a href="#h70-0-25" id="h70-0-25" class="d">-	Transaction
</a><a href="#h70-0-26" id="h70-0-26" class="d">-	Query
</a><a href="#h70-0-27" id="h70-0-27" class="d">-	CompiledQuery
</a><a href="#h70-0-28" id="h70-0-28" class="d">-	CompiledCursor
</a><a href="#h70-0-29" id="h70-0-29" class="d">-	Cursor
</a><a href="#h70-0-30" id="h70-0-30" class="d">-	Error
</a><a href="#h70-0-31" id="h70-0-31" class="d">-	Cost
</a><a href="#h70-0-32" id="h70-0-32" class="d">-	GetRequest
</a><a href="#h70-0-33" id="h70-0-33" class="d">-	GetResponse
</a><a href="#h70-0-34" id="h70-0-34" class="d">-	PutRequest
</a><a href="#h70-0-35" id="h70-0-35" class="d">-	PutResponse
</a><a href="#h70-0-36" id="h70-0-36" class="d">-	TouchRequest
</a><a href="#h70-0-37" id="h70-0-37" class="d">-	TouchResponse
</a><a href="#h70-0-38" id="h70-0-38" class="d">-	DeleteRequest
</a><a href="#h70-0-39" id="h70-0-39" class="d">-	DeleteResponse
</a><a href="#h70-0-40" id="h70-0-40" class="d">-	NextRequest
</a><a href="#h70-0-41" id="h70-0-41" class="d">-	QueryResult
</a><a href="#h70-0-42" id="h70-0-42" class="d">-	AllocateIdsRequest
</a><a href="#h70-0-43" id="h70-0-43" class="d">-	AllocateIdsResponse
</a><a href="#h70-0-44" id="h70-0-44" class="d">-	CompositeIndices
</a><a href="#h70-0-45" id="h70-0-45" class="d">-	AddActionsRequest
</a><a href="#h70-0-46" id="h70-0-46" class="d">-	AddActionsResponse
</a><a href="#h70-0-47" id="h70-0-47" class="d">-	BeginTransactionRequest
</a><a href="#h70-0-48" id="h70-0-48" class="d">-	CommitResponse
</a><a href="#h70-0-49" id="h70-0-49" class="d">-*/
</a><a href="#h70-0-50" id="h70-0-50" class="d">-package datastore
</a><a href="#h70-0-51" id="h70-0-51" class="d">-
</a><a href="#h70-0-52" id="h70-0-52" class="d">-import proto &quot;github.com/golang/protobuf/proto&quot;
</a><a href="#h70-0-53" id="h70-0-53" class="d">-import fmt &quot;fmt&quot;
</a><a href="#h70-0-54" id="h70-0-54" class="d">-import math &quot;math&quot;
</a><a href="#h70-0-55" id="h70-0-55" class="d">-
</a><a href="#h70-0-56" id="h70-0-56" class="d">-// Reference imports to suppress errors if they are not otherwise used.
</a><a href="#h70-0-57" id="h70-0-57" class="d">-var _ = proto.Marshal
</a><a href="#h70-0-58" id="h70-0-58" class="d">-var _ = fmt.Errorf
</a><a href="#h70-0-59" id="h70-0-59" class="d">-var _ = math.Inf
</a><a href="#h70-0-60" id="h70-0-60" class="d">-
</a><a href="#h70-0-61" id="h70-0-61" class="d">-type Property_Meaning int32
</a><a href="#h70-0-62" id="h70-0-62" class="d">-
</a><a href="#h70-0-63" id="h70-0-63" class="d">-const (
</a><a href="#h70-0-64" id="h70-0-64" class="d">-	Property_NO_MEANING       Property_Meaning = 0
</a><a href="#h70-0-65" id="h70-0-65" class="d">-	Property_BLOB             Property_Meaning = 14
</a><a href="#h70-0-66" id="h70-0-66" class="d">-	Property_TEXT             Property_Meaning = 15
</a><a href="#h70-0-67" id="h70-0-67" class="d">-	Property_BYTESTRING       Property_Meaning = 16
</a><a href="#h70-0-68" id="h70-0-68" class="d">-	Property_ATOM_CATEGORY    Property_Meaning = 1
</a><a href="#h70-0-69" id="h70-0-69" class="d">-	Property_ATOM_LINK        Property_Meaning = 2
</a><a href="#h70-0-70" id="h70-0-70" class="d">-	Property_ATOM_TITLE       Property_Meaning = 3
</a><a href="#h70-0-71" id="h70-0-71" class="d">-	Property_ATOM_CONTENT     Property_Meaning = 4
</a><a href="#h70-0-72" id="h70-0-72" class="d">-	Property_ATOM_SUMMARY     Property_Meaning = 5
</a><a href="#h70-0-73" id="h70-0-73" class="d">-	Property_ATOM_AUTHOR      Property_Meaning = 6
</a><a href="#h70-0-74" id="h70-0-74" class="d">-	Property_GD_WHEN          Property_Meaning = 7
</a><a href="#h70-0-75" id="h70-0-75" class="d">-	Property_GD_EMAIL         Property_Meaning = 8
</a><a href="#h70-0-76" id="h70-0-76" class="d">-	Property_GEORSS_POINT     Property_Meaning = 9
</a><a href="#h70-0-77" id="h70-0-77" class="d">-	Property_GD_IM            Property_Meaning = 10
</a><a href="#h70-0-78" id="h70-0-78" class="d">-	Property_GD_PHONENUMBER   Property_Meaning = 11
</a><a href="#h70-0-79" id="h70-0-79" class="d">-	Property_GD_POSTALADDRESS Property_Meaning = 12
</a><a href="#h70-0-80" id="h70-0-80" class="d">-	Property_GD_RATING        Property_Meaning = 13
</a><a href="#h70-0-81" id="h70-0-81" class="d">-	Property_BLOBKEY          Property_Meaning = 17
</a><a href="#h70-0-82" id="h70-0-82" class="d">-	Property_ENTITY_PROTO     Property_Meaning = 19
</a><a href="#h70-0-83" id="h70-0-83" class="d">-	Property_INDEX_VALUE      Property_Meaning = 18
</a><a href="#h70-0-84" id="h70-0-84" class="d">-)
</a><a href="#h70-0-85" id="h70-0-85" class="d">-
</a><a href="#h70-0-86" id="h70-0-86" class="d">-var Property_Meaning_name = map[int32]string{
</a><a href="#h70-0-87" id="h70-0-87" class="d">-	0:  &quot;NO_MEANING&quot;,
</a><a href="#h70-0-88" id="h70-0-88" class="d">-	14: &quot;BLOB&quot;,
</a><a href="#h70-0-89" id="h70-0-89" class="d">-	15: &quot;TEXT&quot;,
</a><a href="#h70-0-90" id="h70-0-90" class="d">-	16: &quot;BYTESTRING&quot;,
</a><a href="#h70-0-91" id="h70-0-91" class="d">-	1:  &quot;ATOM_CATEGORY&quot;,
</a><a href="#h70-0-92" id="h70-0-92" class="d">-	2:  &quot;ATOM_LINK&quot;,
</a><a href="#h70-0-93" id="h70-0-93" class="d">-	3:  &quot;ATOM_TITLE&quot;,
</a><a href="#h70-0-94" id="h70-0-94" class="d">-	4:  &quot;ATOM_CONTENT&quot;,
</a><a href="#h70-0-95" id="h70-0-95" class="d">-	5:  &quot;ATOM_SUMMARY&quot;,
</a><a href="#h70-0-96" id="h70-0-96" class="d">-	6:  &quot;ATOM_AUTHOR&quot;,
</a><a href="#h70-0-97" id="h70-0-97" class="d">-	7:  &quot;GD_WHEN&quot;,
</a><a href="#h70-0-98" id="h70-0-98" class="d">-	8:  &quot;GD_EMAIL&quot;,
</a><a href="#h70-0-99" id="h70-0-99" class="d">-	9:  &quot;GEORSS_POINT&quot;,
</a><a href="#h70-0-100" id="h70-0-100" class="d">-	10: &quot;GD_IM&quot;,
</a><a href="#h70-0-101" id="h70-0-101" class="d">-	11: &quot;GD_PHONENUMBER&quot;,
</a><a href="#h70-0-102" id="h70-0-102" class="d">-	12: &quot;GD_POSTALADDRESS&quot;,
</a><a href="#h70-0-103" id="h70-0-103" class="d">-	13: &quot;GD_RATING&quot;,
</a><a href="#h70-0-104" id="h70-0-104" class="d">-	17: &quot;BLOBKEY&quot;,
</a><a href="#h70-0-105" id="h70-0-105" class="d">-	19: &quot;ENTITY_PROTO&quot;,
</a><a href="#h70-0-106" id="h70-0-106" class="d">-	18: &quot;INDEX_VALUE&quot;,
</a><a href="#h70-0-107" id="h70-0-107" class="d">-}
</a><a href="#h70-0-108" id="h70-0-108" class="d">-var Property_Meaning_value = map[string]int32{
</a><a href="#h70-0-109" id="h70-0-109" class="d">-	&quot;NO_MEANING&quot;:       0,
</a><a href="#h70-0-110" id="h70-0-110" class="d">-	&quot;BLOB&quot;:             14,
</a><a href="#h70-0-111" id="h70-0-111" class="d">-	&quot;TEXT&quot;:             15,
</a><a href="#h70-0-112" id="h70-0-112" class="d">-	&quot;BYTESTRING&quot;:       16,
</a><a href="#h70-0-113" id="h70-0-113" class="d">-	&quot;ATOM_CATEGORY&quot;:    1,
</a><a href="#h70-0-114" id="h70-0-114" class="d">-	&quot;ATOM_LINK&quot;:        2,
</a><a href="#h70-0-115" id="h70-0-115" class="d">-	&quot;ATOM_TITLE&quot;:       3,
</a><a href="#h70-0-116" id="h70-0-116" class="d">-	&quot;ATOM_CONTENT&quot;:     4,
</a><a href="#h70-0-117" id="h70-0-117" class="d">-	&quot;ATOM_SUMMARY&quot;:     5,
</a><a href="#h70-0-118" id="h70-0-118" class="d">-	&quot;ATOM_AUTHOR&quot;:      6,
</a><a href="#h70-0-119" id="h70-0-119" class="d">-	&quot;GD_WHEN&quot;:          7,
</a><a href="#h70-0-120" id="h70-0-120" class="d">-	&quot;GD_EMAIL&quot;:         8,
</a><a href="#h70-0-121" id="h70-0-121" class="d">-	&quot;GEORSS_POINT&quot;:     9,
</a><a href="#h70-0-122" id="h70-0-122" class="d">-	&quot;GD_IM&quot;:            10,
</a><a href="#h70-0-123" id="h70-0-123" class="d">-	&quot;GD_PHONENUMBER&quot;:   11,
</a><a href="#h70-0-124" id="h70-0-124" class="d">-	&quot;GD_POSTALADDRESS&quot;: 12,
</a><a href="#h70-0-125" id="h70-0-125" class="d">-	&quot;GD_RATING&quot;:        13,
</a><a href="#h70-0-126" id="h70-0-126" class="d">-	&quot;BLOBKEY&quot;:          17,
</a><a href="#h70-0-127" id="h70-0-127" class="d">-	&quot;ENTITY_PROTO&quot;:     19,
</a><a href="#h70-0-128" id="h70-0-128" class="d">-	&quot;INDEX_VALUE&quot;:      18,
</a><a href="#h70-0-129" id="h70-0-129" class="d">-}
</a><a href="#h70-0-130" id="h70-0-130" class="d">-
</a><a href="#h70-0-131" id="h70-0-131" class="d">-func (x Property_Meaning) Enum() *Property_Meaning {
</a><a href="#h70-0-132" id="h70-0-132" class="d">-	p := new(Property_Meaning)
</a><a href="#h70-0-133" id="h70-0-133" class="d">-	*p = x
</a><a href="#h70-0-134" id="h70-0-134" class="d">-	return p
</a><a href="#h70-0-135" id="h70-0-135" class="d">-}
</a><a href="#h70-0-136" id="h70-0-136" class="d">-func (x Property_Meaning) String() string {
</a><a href="#h70-0-137" id="h70-0-137" class="d">-	return proto.EnumName(Property_Meaning_name, int32(x))
</a><a href="#h70-0-138" id="h70-0-138" class="d">-}
</a><a href="#h70-0-139" id="h70-0-139" class="d">-func (x *Property_Meaning) UnmarshalJSON(data []byte) error {
</a><a href="#h70-0-140" id="h70-0-140" class="d">-	value, err := proto.UnmarshalJSONEnum(Property_Meaning_value, data, &quot;Property_Meaning&quot;)
</a><a href="#h70-0-141" id="h70-0-141" class="d">-	if err != nil {
</a><a href="#h70-0-142" id="h70-0-142" class="d">-		return err
</a><a href="#h70-0-143" id="h70-0-143" class="d">-	}
</a><a href="#h70-0-144" id="h70-0-144" class="d">-	*x = Property_Meaning(value)
</a><a href="#h70-0-145" id="h70-0-145" class="d">-	return nil
</a><a href="#h70-0-146" id="h70-0-146" class="d">-}
</a><a href="#h70-0-147" id="h70-0-147" class="d">-
</a><a href="#h70-0-148" id="h70-0-148" class="d">-type Property_FtsTokenizationOption int32
</a><a href="#h70-0-149" id="h70-0-149" class="d">-
</a><a href="#h70-0-150" id="h70-0-150" class="d">-const (
</a><a href="#h70-0-151" id="h70-0-151" class="d">-	Property_HTML Property_FtsTokenizationOption = 1
</a><a href="#h70-0-152" id="h70-0-152" class="d">-	Property_ATOM Property_FtsTokenizationOption = 2
</a><a href="#h70-0-153" id="h70-0-153" class="d">-)
</a><a href="#h70-0-154" id="h70-0-154" class="d">-
</a><a href="#h70-0-155" id="h70-0-155" class="d">-var Property_FtsTokenizationOption_name = map[int32]string{
</a><a href="#h70-0-156" id="h70-0-156" class="d">-	1: &quot;HTML&quot;,
</a><a href="#h70-0-157" id="h70-0-157" class="d">-	2: &quot;ATOM&quot;,
</a><a href="#h70-0-158" id="h70-0-158" class="d">-}
</a><a href="#h70-0-159" id="h70-0-159" class="d">-var Property_FtsTokenizationOption_value = map[string]int32{
</a><a href="#h70-0-160" id="h70-0-160" class="d">-	&quot;HTML&quot;: 1,
</a><a href="#h70-0-161" id="h70-0-161" class="d">-	&quot;ATOM&quot;: 2,
</a><a href="#h70-0-162" id="h70-0-162" class="d">-}
</a><a href="#h70-0-163" id="h70-0-163" class="d">-
</a><a href="#h70-0-164" id="h70-0-164" class="d">-func (x Property_FtsTokenizationOption) Enum() *Property_FtsTokenizationOption {
</a><a href="#h70-0-165" id="h70-0-165" class="d">-	p := new(Property_FtsTokenizationOption)
</a><a href="#h70-0-166" id="h70-0-166" class="d">-	*p = x
</a><a href="#h70-0-167" id="h70-0-167" class="d">-	return p
</a><a href="#h70-0-168" id="h70-0-168" class="d">-}
</a><a href="#h70-0-169" id="h70-0-169" class="d">-func (x Property_FtsTokenizationOption) String() string {
</a><a href="#h70-0-170" id="h70-0-170" class="d">-	return proto.EnumName(Property_FtsTokenizationOption_name, int32(x))
</a><a href="#h70-0-171" id="h70-0-171" class="d">-}
</a><a href="#h70-0-172" id="h70-0-172" class="d">-func (x *Property_FtsTokenizationOption) UnmarshalJSON(data []byte) error {
</a><a href="#h70-0-173" id="h70-0-173" class="d">-	value, err := proto.UnmarshalJSONEnum(Property_FtsTokenizationOption_value, data, &quot;Property_FtsTokenizationOption&quot;)
</a><a href="#h70-0-174" id="h70-0-174" class="d">-	if err != nil {
</a><a href="#h70-0-175" id="h70-0-175" class="d">-		return err
</a><a href="#h70-0-176" id="h70-0-176" class="d">-	}
</a><a href="#h70-0-177" id="h70-0-177" class="d">-	*x = Property_FtsTokenizationOption(value)
</a><a href="#h70-0-178" id="h70-0-178" class="d">-	return nil
</a><a href="#h70-0-179" id="h70-0-179" class="d">-}
</a><a href="#h70-0-180" id="h70-0-180" class="d">-
</a><a href="#h70-0-181" id="h70-0-181" class="d">-type EntityProto_Kind int32
</a><a href="#h70-0-182" id="h70-0-182" class="d">-
</a><a href="#h70-0-183" id="h70-0-183" class="d">-const (
</a><a href="#h70-0-184" id="h70-0-184" class="d">-	EntityProto_GD_CONTACT EntityProto_Kind = 1
</a><a href="#h70-0-185" id="h70-0-185" class="d">-	EntityProto_GD_EVENT   EntityProto_Kind = 2
</a><a href="#h70-0-186" id="h70-0-186" class="d">-	EntityProto_GD_MESSAGE EntityProto_Kind = 3
</a><a href="#h70-0-187" id="h70-0-187" class="d">-)
</a><a href="#h70-0-188" id="h70-0-188" class="d">-
</a><a href="#h70-0-189" id="h70-0-189" class="d">-var EntityProto_Kind_name = map[int32]string{
</a><a href="#h70-0-190" id="h70-0-190" class="d">-	1: &quot;GD_CONTACT&quot;,
</a><a href="#h70-0-191" id="h70-0-191" class="d">-	2: &quot;GD_EVENT&quot;,
</a><a href="#h70-0-192" id="h70-0-192" class="d">-	3: &quot;GD_MESSAGE&quot;,
</a><a href="#h70-0-193" id="h70-0-193" class="d">-}
</a><a href="#h70-0-194" id="h70-0-194" class="d">-var EntityProto_Kind_value = map[string]int32{
</a><a href="#h70-0-195" id="h70-0-195" class="d">-	&quot;GD_CONTACT&quot;: 1,
</a><a href="#h70-0-196" id="h70-0-196" class="d">-	&quot;GD_EVENT&quot;:   2,
</a><a href="#h70-0-197" id="h70-0-197" class="d">-	&quot;GD_MESSAGE&quot;: 3,
</a><a href="#h70-0-198" id="h70-0-198" class="d">-}
</a><a href="#h70-0-199" id="h70-0-199" class="d">-
</a><a href="#h70-0-200" id="h70-0-200" class="d">-func (x EntityProto_Kind) Enum() *EntityProto_Kind {
</a><a href="#h70-0-201" id="h70-0-201" class="d">-	p := new(EntityProto_Kind)
</a><a href="#h70-0-202" id="h70-0-202" class="d">-	*p = x
</a><a href="#h70-0-203" id="h70-0-203" class="d">-	return p
</a><a href="#h70-0-204" id="h70-0-204" class="d">-}
</a><a href="#h70-0-205" id="h70-0-205" class="d">-func (x EntityProto_Kind) String() string {
</a><a href="#h70-0-206" id="h70-0-206" class="d">-	return proto.EnumName(EntityProto_Kind_name, int32(x))
</a><a href="#h70-0-207" id="h70-0-207" class="d">-}
</a><a href="#h70-0-208" id="h70-0-208" class="d">-func (x *EntityProto_Kind) UnmarshalJSON(data []byte) error {
</a><a href="#h70-0-209" id="h70-0-209" class="d">-	value, err := proto.UnmarshalJSONEnum(EntityProto_Kind_value, data, &quot;EntityProto_Kind&quot;)
</a><a href="#h70-0-210" id="h70-0-210" class="d">-	if err != nil {
</a><a href="#h70-0-211" id="h70-0-211" class="d">-		return err
</a><a href="#h70-0-212" id="h70-0-212" class="d">-	}
</a><a href="#h70-0-213" id="h70-0-213" class="d">-	*x = EntityProto_Kind(value)
</a><a href="#h70-0-214" id="h70-0-214" class="d">-	return nil
</a><a href="#h70-0-215" id="h70-0-215" class="d">-}
</a><a href="#h70-0-216" id="h70-0-216" class="d">-
</a><a href="#h70-0-217" id="h70-0-217" class="d">-type Index_Property_Direction int32
</a><a href="#h70-0-218" id="h70-0-218" class="d">-
</a><a href="#h70-0-219" id="h70-0-219" class="d">-const (
</a><a href="#h70-0-220" id="h70-0-220" class="d">-	Index_Property_ASCENDING  Index_Property_Direction = 1
</a><a href="#h70-0-221" id="h70-0-221" class="d">-	Index_Property_DESCENDING Index_Property_Direction = 2
</a><a href="#h70-0-222" id="h70-0-222" class="d">-)
</a><a href="#h70-0-223" id="h70-0-223" class="d">-
</a><a href="#h70-0-224" id="h70-0-224" class="d">-var Index_Property_Direction_name = map[int32]string{
</a><a href="#h70-0-225" id="h70-0-225" class="d">-	1: &quot;ASCENDING&quot;,
</a><a href="#h70-0-226" id="h70-0-226" class="d">-	2: &quot;DESCENDING&quot;,
</a><a href="#h70-0-227" id="h70-0-227" class="d">-}
</a><a href="#h70-0-228" id="h70-0-228" class="d">-var Index_Property_Direction_value = map[string]int32{
</a><a href="#h70-0-229" id="h70-0-229" class="d">-	&quot;ASCENDING&quot;:  1,
</a><a href="#h70-0-230" id="h70-0-230" class="d">-	&quot;DESCENDING&quot;: 2,
</a><a href="#h70-0-231" id="h70-0-231" class="d">-}
</a><a href="#h70-0-232" id="h70-0-232" class="d">-
</a><a href="#h70-0-233" id="h70-0-233" class="d">-func (x Index_Property_Direction) Enum() *Index_Property_Direction {
</a><a href="#h70-0-234" id="h70-0-234" class="d">-	p := new(Index_Property_Direction)
</a><a href="#h70-0-235" id="h70-0-235" class="d">-	*p = x
</a><a href="#h70-0-236" id="h70-0-236" class="d">-	return p
</a><a href="#h70-0-237" id="h70-0-237" class="d">-}
</a><a href="#h70-0-238" id="h70-0-238" class="d">-func (x Index_Property_Direction) String() string {
</a><a href="#h70-0-239" id="h70-0-239" class="d">-	return proto.EnumName(Index_Property_Direction_name, int32(x))
</a><a href="#h70-0-240" id="h70-0-240" class="d">-}
</a><a href="#h70-0-241" id="h70-0-241" class="d">-func (x *Index_Property_Direction) UnmarshalJSON(data []byte) error {
</a><a href="#h70-0-242" id="h70-0-242" class="d">-	value, err := proto.UnmarshalJSONEnum(Index_Property_Direction_value, data, &quot;Index_Property_Direction&quot;)
</a><a href="#h70-0-243" id="h70-0-243" class="d">-	if err != nil {
</a><a href="#h70-0-244" id="h70-0-244" class="d">-		return err
</a><a href="#h70-0-245" id="h70-0-245" class="d">-	}
</a><a href="#h70-0-246" id="h70-0-246" class="d">-	*x = Index_Property_Direction(value)
</a><a href="#h70-0-247" id="h70-0-247" class="d">-	return nil
</a><a href="#h70-0-248" id="h70-0-248" class="d">-}
</a><a href="#h70-0-249" id="h70-0-249" class="d">-
</a><a href="#h70-0-250" id="h70-0-250" class="d">-type CompositeIndex_State int32
</a><a href="#h70-0-251" id="h70-0-251" class="d">-
</a><a href="#h70-0-252" id="h70-0-252" class="d">-const (
</a><a href="#h70-0-253" id="h70-0-253" class="d">-	CompositeIndex_WRITE_ONLY CompositeIndex_State = 1
</a><a href="#h70-0-254" id="h70-0-254" class="d">-	CompositeIndex_READ_WRITE CompositeIndex_State = 2
</a><a href="#h70-0-255" id="h70-0-255" class="d">-	CompositeIndex_DELETED    CompositeIndex_State = 3
</a><a href="#h70-0-256" id="h70-0-256" class="d">-	CompositeIndex_ERROR      CompositeIndex_State = 4
</a><a href="#h70-0-257" id="h70-0-257" class="d">-)
</a><a href="#h70-0-258" id="h70-0-258" class="d">-
</a><a href="#h70-0-259" id="h70-0-259" class="d">-var CompositeIndex_State_name = map[int32]string{
</a><a href="#h70-0-260" id="h70-0-260" class="d">-	1: &quot;WRITE_ONLY&quot;,
</a><a href="#h70-0-261" id="h70-0-261" class="d">-	2: &quot;READ_WRITE&quot;,
</a><a href="#h70-0-262" id="h70-0-262" class="d">-	3: &quot;DELETED&quot;,
</a><a href="#h70-0-263" id="h70-0-263" class="d">-	4: &quot;ERROR&quot;,
</a><a href="#h70-0-264" id="h70-0-264" class="d">-}
</a><a href="#h70-0-265" id="h70-0-265" class="d">-var CompositeIndex_State_value = map[string]int32{
</a><a href="#h70-0-266" id="h70-0-266" class="d">-	&quot;WRITE_ONLY&quot;: 1,
</a><a href="#h70-0-267" id="h70-0-267" class="d">-	&quot;READ_WRITE&quot;: 2,
</a><a href="#h70-0-268" id="h70-0-268" class="d">-	&quot;DELETED&quot;:    3,
</a><a href="#h70-0-269" id="h70-0-269" class="d">-	&quot;ERROR&quot;:      4,
</a><a href="#h70-0-270" id="h70-0-270" class="d">-}
</a><a href="#h70-0-271" id="h70-0-271" class="d">-
</a><a href="#h70-0-272" id="h70-0-272" class="d">-func (x CompositeIndex_State) Enum() *CompositeIndex_State {
</a><a href="#h70-0-273" id="h70-0-273" class="d">-	p := new(CompositeIndex_State)
</a><a href="#h70-0-274" id="h70-0-274" class="d">-	*p = x
</a><a href="#h70-0-275" id="h70-0-275" class="d">-	return p
</a><a href="#h70-0-276" id="h70-0-276" class="d">-}
</a><a href="#h70-0-277" id="h70-0-277" class="d">-func (x CompositeIndex_State) String() string {
</a><a href="#h70-0-278" id="h70-0-278" class="d">-	return proto.EnumName(CompositeIndex_State_name, int32(x))
</a><a href="#h70-0-279" id="h70-0-279" class="d">-}
</a><a href="#h70-0-280" id="h70-0-280" class="d">-func (x *CompositeIndex_State) UnmarshalJSON(data []byte) error {
</a><a href="#h70-0-281" id="h70-0-281" class="d">-	value, err := proto.UnmarshalJSONEnum(CompositeIndex_State_value, data, &quot;CompositeIndex_State&quot;)
</a><a href="#h70-0-282" id="h70-0-282" class="d">-	if err != nil {
</a><a href="#h70-0-283" id="h70-0-283" class="d">-		return err
</a><a href="#h70-0-284" id="h70-0-284" class="d">-	}
</a><a href="#h70-0-285" id="h70-0-285" class="d">-	*x = CompositeIndex_State(value)
</a><a href="#h70-0-286" id="h70-0-286" class="d">-	return nil
</a><a href="#h70-0-287" id="h70-0-287" class="d">-}
</a><a href="#h70-0-288" id="h70-0-288" class="d">-
</a><a href="#h70-0-289" id="h70-0-289" class="d">-type Snapshot_Status int32
</a><a href="#h70-0-290" id="h70-0-290" class="d">-
</a><a href="#h70-0-291" id="h70-0-291" class="d">-const (
</a><a href="#h70-0-292" id="h70-0-292" class="d">-	Snapshot_INACTIVE Snapshot_Status = 0
</a><a href="#h70-0-293" id="h70-0-293" class="d">-	Snapshot_ACTIVE   Snapshot_Status = 1
</a><a href="#h70-0-294" id="h70-0-294" class="d">-)
</a><a href="#h70-0-295" id="h70-0-295" class="d">-
</a><a href="#h70-0-296" id="h70-0-296" class="d">-var Snapshot_Status_name = map[int32]string{
</a><a href="#h70-0-297" id="h70-0-297" class="d">-	0: &quot;INACTIVE&quot;,
</a><a href="#h70-0-298" id="h70-0-298" class="d">-	1: &quot;ACTIVE&quot;,
</a><a href="#h70-0-299" id="h70-0-299" class="d">-}
</a><a href="#h70-0-300" id="h70-0-300" class="d">-var Snapshot_Status_value = map[string]int32{
</a><a href="#h70-0-301" id="h70-0-301" class="d">-	&quot;INACTIVE&quot;: 0,
</a><a href="#h70-0-302" id="h70-0-302" class="d">-	&quot;ACTIVE&quot;:   1,
</a><a href="#h70-0-303" id="h70-0-303" class="d">-}
</a><a href="#h70-0-304" id="h70-0-304" class="d">-
</a><a href="#h70-0-305" id="h70-0-305" class="d">-func (x Snapshot_Status) Enum() *Snapshot_Status {
</a><a href="#h70-0-306" id="h70-0-306" class="d">-	p := new(Snapshot_Status)
</a><a href="#h70-0-307" id="h70-0-307" class="d">-	*p = x
</a><a href="#h70-0-308" id="h70-0-308" class="d">-	return p
</a><a href="#h70-0-309" id="h70-0-309" class="d">-}
</a><a href="#h70-0-310" id="h70-0-310" class="d">-func (x Snapshot_Status) String() string {
</a><a href="#h70-0-311" id="h70-0-311" class="d">-	return proto.EnumName(Snapshot_Status_name, int32(x))
</a><a href="#h70-0-312" id="h70-0-312" class="d">-}
</a><a href="#h70-0-313" id="h70-0-313" class="d">-func (x *Snapshot_Status) UnmarshalJSON(data []byte) error {
</a><a href="#h70-0-314" id="h70-0-314" class="d">-	value, err := proto.UnmarshalJSONEnum(Snapshot_Status_value, data, &quot;Snapshot_Status&quot;)
</a><a href="#h70-0-315" id="h70-0-315" class="d">-	if err != nil {
</a><a href="#h70-0-316" id="h70-0-316" class="d">-		return err
</a><a href="#h70-0-317" id="h70-0-317" class="d">-	}
</a><a href="#h70-0-318" id="h70-0-318" class="d">-	*x = Snapshot_Status(value)
</a><a href="#h70-0-319" id="h70-0-319" class="d">-	return nil
</a><a href="#h70-0-320" id="h70-0-320" class="d">-}
</a><a href="#h70-0-321" id="h70-0-321" class="d">-
</a><a href="#h70-0-322" id="h70-0-322" class="d">-type Query_Hint int32
</a><a href="#h70-0-323" id="h70-0-323" class="d">-
</a><a href="#h70-0-324" id="h70-0-324" class="d">-const (
</a><a href="#h70-0-325" id="h70-0-325" class="d">-	Query_ORDER_FIRST    Query_Hint = 1
</a><a href="#h70-0-326" id="h70-0-326" class="d">-	Query_ANCESTOR_FIRST Query_Hint = 2
</a><a href="#h70-0-327" id="h70-0-327" class="d">-	Query_FILTER_FIRST   Query_Hint = 3
</a><a href="#h70-0-328" id="h70-0-328" class="d">-)
</a><a href="#h70-0-329" id="h70-0-329" class="d">-
</a><a href="#h70-0-330" id="h70-0-330" class="d">-var Query_Hint_name = map[int32]string{
</a><a href="#h70-0-331" id="h70-0-331" class="d">-	1: &quot;ORDER_FIRST&quot;,
</a><a href="#h70-0-332" id="h70-0-332" class="d">-	2: &quot;ANCESTOR_FIRST&quot;,
</a><a href="#h70-0-333" id="h70-0-333" class="d">-	3: &quot;FILTER_FIRST&quot;,
</a><a href="#h70-0-334" id="h70-0-334" class="d">-}
</a><a href="#h70-0-335" id="h70-0-335" class="d">-var Query_Hint_value = map[string]int32{
</a><a href="#h70-0-336" id="h70-0-336" class="d">-	&quot;ORDER_FIRST&quot;:    1,
</a><a href="#h70-0-337" id="h70-0-337" class="d">-	&quot;ANCESTOR_FIRST&quot;: 2,
</a><a href="#h70-0-338" id="h70-0-338" class="d">-	&quot;FILTER_FIRST&quot;:   3,
</a><a href="#h70-0-339" id="h70-0-339" class="d">-}
</a><a href="#h70-0-340" id="h70-0-340" class="d">-
</a><a href="#h70-0-341" id="h70-0-341" class="d">-func (x Query_Hint) Enum() *Query_Hint {
</a><a href="#h70-0-342" id="h70-0-342" class="d">-	p := new(Query_Hint)
</a><a href="#h70-0-343" id="h70-0-343" class="d">-	*p = x
</a><a href="#h70-0-344" id="h70-0-344" class="d">-	return p
</a><a href="#h70-0-345" id="h70-0-345" class="d">-}
</a><a href="#h70-0-346" id="h70-0-346" class="d">-func (x Query_Hint) String() string {
</a><a href="#h70-0-347" id="h70-0-347" class="d">-	return proto.EnumName(Query_Hint_name, int32(x))
</a><a href="#h70-0-348" id="h70-0-348" class="d">-}
</a><a href="#h70-0-349" id="h70-0-349" class="d">-func (x *Query_Hint) UnmarshalJSON(data []byte) error {
</a><a href="#h70-0-350" id="h70-0-350" class="d">-	value, err := proto.UnmarshalJSONEnum(Query_Hint_value, data, &quot;Query_Hint&quot;)
</a><a href="#h70-0-351" id="h70-0-351" class="d">-	if err != nil {
</a><a href="#h70-0-352" id="h70-0-352" class="d">-		return err
</a><a href="#h70-0-353" id="h70-0-353" class="d">-	}
</a><a href="#h70-0-354" id="h70-0-354" class="d">-	*x = Query_Hint(value)
</a><a href="#h70-0-355" id="h70-0-355" class="d">-	return nil
</a><a href="#h70-0-356" id="h70-0-356" class="d">-}
</a><a href="#h70-0-357" id="h70-0-357" class="d">-
</a><a href="#h70-0-358" id="h70-0-358" class="d">-type Query_Filter_Operator int32
</a><a href="#h70-0-359" id="h70-0-359" class="d">-
</a><a href="#h70-0-360" id="h70-0-360" class="d">-const (
</a><a href="#h70-0-361" id="h70-0-361" class="d">-	Query_Filter_LESS_THAN             Query_Filter_Operator = 1
</a><a href="#h70-0-362" id="h70-0-362" class="d">-	Query_Filter_LESS_THAN_OR_EQUAL    Query_Filter_Operator = 2
</a><a href="#h70-0-363" id="h70-0-363" class="d">-	Query_Filter_GREATER_THAN          Query_Filter_Operator = 3
</a><a href="#h70-0-364" id="h70-0-364" class="d">-	Query_Filter_GREATER_THAN_OR_EQUAL Query_Filter_Operator = 4
</a><a href="#h70-0-365" id="h70-0-365" class="d">-	Query_Filter_EQUAL                 Query_Filter_Operator = 5
</a><a href="#h70-0-366" id="h70-0-366" class="d">-	Query_Filter_IN                    Query_Filter_Operator = 6
</a><a href="#h70-0-367" id="h70-0-367" class="d">-	Query_Filter_EXISTS                Query_Filter_Operator = 7
</a><a href="#h70-0-368" id="h70-0-368" class="d">-)
</a><a href="#h70-0-369" id="h70-0-369" class="d">-
</a><a href="#h70-0-370" id="h70-0-370" class="d">-var Query_Filter_Operator_name = map[int32]string{
</a><a href="#h70-0-371" id="h70-0-371" class="d">-	1: &quot;LESS_THAN&quot;,
</a><a href="#h70-0-372" id="h70-0-372" class="d">-	2: &quot;LESS_THAN_OR_EQUAL&quot;,
</a><a href="#h70-0-373" id="h70-0-373" class="d">-	3: &quot;GREATER_THAN&quot;,
</a><a href="#h70-0-374" id="h70-0-374" class="d">-	4: &quot;GREATER_THAN_OR_EQUAL&quot;,
</a><a href="#h70-0-375" id="h70-0-375" class="d">-	5: &quot;EQUAL&quot;,
</a><a href="#h70-0-376" id="h70-0-376" class="d">-	6: &quot;IN&quot;,
</a><a href="#h70-0-377" id="h70-0-377" class="d">-	7: &quot;EXISTS&quot;,
</a><a href="#h70-0-378" id="h70-0-378" class="d">-}
</a><a href="#h70-0-379" id="h70-0-379" class="d">-var Query_Filter_Operator_value = map[string]int32{
</a><a href="#h70-0-380" id="h70-0-380" class="d">-	&quot;LESS_THAN&quot;:             1,
</a><a href="#h70-0-381" id="h70-0-381" class="d">-	&quot;LESS_THAN_OR_EQUAL&quot;:    2,
</a><a href="#h70-0-382" id="h70-0-382" class="d">-	&quot;GREATER_THAN&quot;:          3,
</a><a href="#h70-0-383" id="h70-0-383" class="d">-	&quot;GREATER_THAN_OR_EQUAL&quot;: 4,
</a><a href="#h70-0-384" id="h70-0-384" class="d">-	&quot;EQUAL&quot;:                 5,
</a><a href="#h70-0-385" id="h70-0-385" class="d">-	&quot;IN&quot;:                    6,
</a><a href="#h70-0-386" id="h70-0-386" class="d">-	&quot;EXISTS&quot;:                7,
</a><a href="#h70-0-387" id="h70-0-387" class="d">-}
</a><a href="#h70-0-388" id="h70-0-388" class="d">-
</a><a href="#h70-0-389" id="h70-0-389" class="d">-func (x Query_Filter_Operator) Enum() *Query_Filter_Operator {
</a><a href="#h70-0-390" id="h70-0-390" class="d">-	p := new(Query_Filter_Operator)
</a><a href="#h70-0-391" id="h70-0-391" class="d">-	*p = x
</a><a href="#h70-0-392" id="h70-0-392" class="d">-	return p
</a><a href="#h70-0-393" id="h70-0-393" class="d">-}
</a><a href="#h70-0-394" id="h70-0-394" class="d">-func (x Query_Filter_Operator) String() string {
</a><a href="#h70-0-395" id="h70-0-395" class="d">-	return proto.EnumName(Query_Filter_Operator_name, int32(x))
</a><a href="#h70-0-396" id="h70-0-396" class="d">-}
</a><a href="#h70-0-397" id="h70-0-397" class="d">-func (x *Query_Filter_Operator) UnmarshalJSON(data []byte) error {
</a><a href="#h70-0-398" id="h70-0-398" class="d">-	value, err := proto.UnmarshalJSONEnum(Query_Filter_Operator_value, data, &quot;Query_Filter_Operator&quot;)
</a><a href="#h70-0-399" id="h70-0-399" class="d">-	if err != nil {
</a><a href="#h70-0-400" id="h70-0-400" class="d">-		return err
</a><a href="#h70-0-401" id="h70-0-401" class="d">-	}
</a><a href="#h70-0-402" id="h70-0-402" class="d">-	*x = Query_Filter_Operator(value)
</a><a href="#h70-0-403" id="h70-0-403" class="d">-	return nil
</a><a href="#h70-0-404" id="h70-0-404" class="d">-}
</a><a href="#h70-0-405" id="h70-0-405" class="d">-
</a><a href="#h70-0-406" id="h70-0-406" class="d">-type Query_Order_Direction int32
</a><a href="#h70-0-407" id="h70-0-407" class="d">-
</a><a href="#h70-0-408" id="h70-0-408" class="d">-const (
</a><a href="#h70-0-409" id="h70-0-409" class="d">-	Query_Order_ASCENDING  Query_Order_Direction = 1
</a><a href="#h70-0-410" id="h70-0-410" class="d">-	Query_Order_DESCENDING Query_Order_Direction = 2
</a><a href="#h70-0-411" id="h70-0-411" class="d">-)
</a><a href="#h70-0-412" id="h70-0-412" class="d">-
</a><a href="#h70-0-413" id="h70-0-413" class="d">-var Query_Order_Direction_name = map[int32]string{
</a><a href="#h70-0-414" id="h70-0-414" class="d">-	1: &quot;ASCENDING&quot;,
</a><a href="#h70-0-415" id="h70-0-415" class="d">-	2: &quot;DESCENDING&quot;,
</a><a href="#h70-0-416" id="h70-0-416" class="d">-}
</a><a href="#h70-0-417" id="h70-0-417" class="d">-var Query_Order_Direction_value = map[string]int32{
</a><a href="#h70-0-418" id="h70-0-418" class="d">-	&quot;ASCENDING&quot;:  1,
</a><a href="#h70-0-419" id="h70-0-419" class="d">-	&quot;DESCENDING&quot;: 2,
</a><a href="#h70-0-420" id="h70-0-420" class="d">-}
</a><a href="#h70-0-421" id="h70-0-421" class="d">-
</a><a href="#h70-0-422" id="h70-0-422" class="d">-func (x Query_Order_Direction) Enum() *Query_Order_Direction {
</a><a href="#h70-0-423" id="h70-0-423" class="d">-	p := new(Query_Order_Direction)
</a><a href="#h70-0-424" id="h70-0-424" class="d">-	*p = x
</a><a href="#h70-0-425" id="h70-0-425" class="d">-	return p
</a><a href="#h70-0-426" id="h70-0-426" class="d">-}
</a><a href="#h70-0-427" id="h70-0-427" class="d">-func (x Query_Order_Direction) String() string {
</a><a href="#h70-0-428" id="h70-0-428" class="d">-	return proto.EnumName(Query_Order_Direction_name, int32(x))
</a><a href="#h70-0-429" id="h70-0-429" class="d">-}
</a><a href="#h70-0-430" id="h70-0-430" class="d">-func (x *Query_Order_Direction) UnmarshalJSON(data []byte) error {
</a><a href="#h70-0-431" id="h70-0-431" class="d">-	value, err := proto.UnmarshalJSONEnum(Query_Order_Direction_value, data, &quot;Query_Order_Direction&quot;)
</a><a href="#h70-0-432" id="h70-0-432" class="d">-	if err != nil {
</a><a href="#h70-0-433" id="h70-0-433" class="d">-		return err
</a><a href="#h70-0-434" id="h70-0-434" class="d">-	}
</a><a href="#h70-0-435" id="h70-0-435" class="d">-	*x = Query_Order_Direction(value)
</a><a href="#h70-0-436" id="h70-0-436" class="d">-	return nil
</a><a href="#h70-0-437" id="h70-0-437" class="d">-}
</a><a href="#h70-0-438" id="h70-0-438" class="d">-
</a><a href="#h70-0-439" id="h70-0-439" class="d">-type Error_ErrorCode int32
</a><a href="#h70-0-440" id="h70-0-440" class="d">-
</a><a href="#h70-0-441" id="h70-0-441" class="d">-const (
</a><a href="#h70-0-442" id="h70-0-442" class="d">-	Error_BAD_REQUEST                  Error_ErrorCode = 1
</a><a href="#h70-0-443" id="h70-0-443" class="d">-	Error_CONCURRENT_TRANSACTION       Error_ErrorCode = 2
</a><a href="#h70-0-444" id="h70-0-444" class="d">-	Error_INTERNAL_ERROR               Error_ErrorCode = 3
</a><a href="#h70-0-445" id="h70-0-445" class="d">-	Error_NEED_INDEX                   Error_ErrorCode = 4
</a><a href="#h70-0-446" id="h70-0-446" class="d">-	Error_TIMEOUT                      Error_ErrorCode = 5
</a><a href="#h70-0-447" id="h70-0-447" class="d">-	Error_PERMISSION_DENIED            Error_ErrorCode = 6
</a><a href="#h70-0-448" id="h70-0-448" class="d">-	Error_BIGTABLE_ERROR               Error_ErrorCode = 7
</a><a href="#h70-0-449" id="h70-0-449" class="d">-	Error_COMMITTED_BUT_STILL_APPLYING Error_ErrorCode = 8
</a><a href="#h70-0-450" id="h70-0-450" class="d">-	Error_CAPABILITY_DISABLED          Error_ErrorCode = 9
</a><a href="#h70-0-451" id="h70-0-451" class="d">-	Error_TRY_ALTERNATE_BACKEND        Error_ErrorCode = 10
</a><a href="#h70-0-452" id="h70-0-452" class="d">-	Error_SAFE_TIME_TOO_OLD            Error_ErrorCode = 11
</a><a href="#h70-0-453" id="h70-0-453" class="d">-)
</a><a href="#h70-0-454" id="h70-0-454" class="d">-
</a><a href="#h70-0-455" id="h70-0-455" class="d">-var Error_ErrorCode_name = map[int32]string{
</a><a href="#h70-0-456" id="h70-0-456" class="d">-	1:  &quot;BAD_REQUEST&quot;,
</a><a href="#h70-0-457" id="h70-0-457" class="d">-	2:  &quot;CONCURRENT_TRANSACTION&quot;,
</a><a href="#h70-0-458" id="h70-0-458" class="d">-	3:  &quot;INTERNAL_ERROR&quot;,
</a><a href="#h70-0-459" id="h70-0-459" class="d">-	4:  &quot;NEED_INDEX&quot;,
</a><a href="#h70-0-460" id="h70-0-460" class="d">-	5:  &quot;TIMEOUT&quot;,
</a><a href="#h70-0-461" id="h70-0-461" class="d">-	6:  &quot;PERMISSION_DENIED&quot;,
</a><a href="#h70-0-462" id="h70-0-462" class="d">-	7:  &quot;BIGTABLE_ERROR&quot;,
</a><a href="#h70-0-463" id="h70-0-463" class="d">-	8:  &quot;COMMITTED_BUT_STILL_APPLYING&quot;,
</a><a href="#h70-0-464" id="h70-0-464" class="d">-	9:  &quot;CAPABILITY_DISABLED&quot;,
</a><a href="#h70-0-465" id="h70-0-465" class="d">-	10: &quot;TRY_ALTERNATE_BACKEND&quot;,
</a><a href="#h70-0-466" id="h70-0-466" class="d">-	11: &quot;SAFE_TIME_TOO_OLD&quot;,
</a><a href="#h70-0-467" id="h70-0-467" class="d">-}
</a><a href="#h70-0-468" id="h70-0-468" class="d">-var Error_ErrorCode_value = map[string]int32{
</a><a href="#h70-0-469" id="h70-0-469" class="d">-	&quot;BAD_REQUEST&quot;:                  1,
</a><a href="#h70-0-470" id="h70-0-470" class="d">-	&quot;CONCURRENT_TRANSACTION&quot;:       2,
</a><a href="#h70-0-471" id="h70-0-471" class="d">-	&quot;INTERNAL_ERROR&quot;:               3,
</a><a href="#h70-0-472" id="h70-0-472" class="d">-	&quot;NEED_INDEX&quot;:                   4,
</a><a href="#h70-0-473" id="h70-0-473" class="d">-	&quot;TIMEOUT&quot;:                      5,
</a><a href="#h70-0-474" id="h70-0-474" class="d">-	&quot;PERMISSION_DENIED&quot;:            6,
</a><a href="#h70-0-475" id="h70-0-475" class="d">-	&quot;BIGTABLE_ERROR&quot;:               7,
</a><a href="#h70-0-476" id="h70-0-476" class="d">-	&quot;COMMITTED_BUT_STILL_APPLYING&quot;: 8,
</a><a href="#h70-0-477" id="h70-0-477" class="d">-	&quot;CAPABILITY_DISABLED&quot;:          9,
</a><a href="#h70-0-478" id="h70-0-478" class="d">-	&quot;TRY_ALTERNATE_BACKEND&quot;:        10,
</a><a href="#h70-0-479" id="h70-0-479" class="d">-	&quot;SAFE_TIME_TOO_OLD&quot;:            11,
</a><a href="#h70-0-480" id="h70-0-480" class="d">-}
</a><a href="#h70-0-481" id="h70-0-481" class="d">-
</a><a href="#h70-0-482" id="h70-0-482" class="d">-func (x Error_ErrorCode) Enum() *Error_ErrorCode {
</a><a href="#h70-0-483" id="h70-0-483" class="d">-	p := new(Error_ErrorCode)
</a><a href="#h70-0-484" id="h70-0-484" class="d">-	*p = x
</a><a href="#h70-0-485" id="h70-0-485" class="d">-	return p
</a><a href="#h70-0-486" id="h70-0-486" class="d">-}
</a><a href="#h70-0-487" id="h70-0-487" class="d">-func (x Error_ErrorCode) String() string {
</a><a href="#h70-0-488" id="h70-0-488" class="d">-	return proto.EnumName(Error_ErrorCode_name, int32(x))
</a><a href="#h70-0-489" id="h70-0-489" class="d">-}
</a><a href="#h70-0-490" id="h70-0-490" class="d">-func (x *Error_ErrorCode) UnmarshalJSON(data []byte) error {
</a><a href="#h70-0-491" id="h70-0-491" class="d">-	value, err := proto.UnmarshalJSONEnum(Error_ErrorCode_value, data, &quot;Error_ErrorCode&quot;)
</a><a href="#h70-0-492" id="h70-0-492" class="d">-	if err != nil {
</a><a href="#h70-0-493" id="h70-0-493" class="d">-		return err
</a><a href="#h70-0-494" id="h70-0-494" class="d">-	}
</a><a href="#h70-0-495" id="h70-0-495" class="d">-	*x = Error_ErrorCode(value)
</a><a href="#h70-0-496" id="h70-0-496" class="d">-	return nil
</a><a href="#h70-0-497" id="h70-0-497" class="d">-}
</a><a href="#h70-0-498" id="h70-0-498" class="d">-
</a><a href="#h70-0-499" id="h70-0-499" class="d">-type PutRequest_AutoIdPolicy int32
</a><a href="#h70-0-500" id="h70-0-500" class="d">-
</a><a href="#h70-0-501" id="h70-0-501" class="d">-const (
</a><a href="#h70-0-502" id="h70-0-502" class="d">-	PutRequest_CURRENT    PutRequest_AutoIdPolicy = 0
</a><a href="#h70-0-503" id="h70-0-503" class="d">-	PutRequest_SEQUENTIAL PutRequest_AutoIdPolicy = 1
</a><a href="#h70-0-504" id="h70-0-504" class="d">-)
</a><a href="#h70-0-505" id="h70-0-505" class="d">-
</a><a href="#h70-0-506" id="h70-0-506" class="d">-var PutRequest_AutoIdPolicy_name = map[int32]string{
</a><a href="#h70-0-507" id="h70-0-507" class="d">-	0: &quot;CURRENT&quot;,
</a><a href="#h70-0-508" id="h70-0-508" class="d">-	1: &quot;SEQUENTIAL&quot;,
</a><a href="#h70-0-509" id="h70-0-509" class="d">-}
</a><a href="#h70-0-510" id="h70-0-510" class="d">-var PutRequest_AutoIdPolicy_value = map[string]int32{
</a><a href="#h70-0-511" id="h70-0-511" class="d">-	&quot;CURRENT&quot;:    0,
</a><a href="#h70-0-512" id="h70-0-512" class="d">-	&quot;SEQUENTIAL&quot;: 1,
</a><a href="#h70-0-513" id="h70-0-513" class="d">-}
</a><a href="#h70-0-514" id="h70-0-514" class="d">-
</a><a href="#h70-0-515" id="h70-0-515" class="d">-func (x PutRequest_AutoIdPolicy) Enum() *PutRequest_AutoIdPolicy {
</a><a href="#h70-0-516" id="h70-0-516" class="d">-	p := new(PutRequest_AutoIdPolicy)
</a><a href="#h70-0-517" id="h70-0-517" class="d">-	*p = x
</a><a href="#h70-0-518" id="h70-0-518" class="d">-	return p
</a><a href="#h70-0-519" id="h70-0-519" class="d">-}
</a><a href="#h70-0-520" id="h70-0-520" class="d">-func (x PutRequest_AutoIdPolicy) String() string {
</a><a href="#h70-0-521" id="h70-0-521" class="d">-	return proto.EnumName(PutRequest_AutoIdPolicy_name, int32(x))
</a><a href="#h70-0-522" id="h70-0-522" class="d">-}
</a><a href="#h70-0-523" id="h70-0-523" class="d">-func (x *PutRequest_AutoIdPolicy) UnmarshalJSON(data []byte) error {
</a><a href="#h70-0-524" id="h70-0-524" class="d">-	value, err := proto.UnmarshalJSONEnum(PutRequest_AutoIdPolicy_value, data, &quot;PutRequest_AutoIdPolicy&quot;)
</a><a href="#h70-0-525" id="h70-0-525" class="d">-	if err != nil {
</a><a href="#h70-0-526" id="h70-0-526" class="d">-		return err
</a><a href="#h70-0-527" id="h70-0-527" class="d">-	}
</a><a href="#h70-0-528" id="h70-0-528" class="d">-	*x = PutRequest_AutoIdPolicy(value)
</a><a href="#h70-0-529" id="h70-0-529" class="d">-	return nil
</a><a href="#h70-0-530" id="h70-0-530" class="d">-}
</a><a href="#h70-0-531" id="h70-0-531" class="d">-
</a><a href="#h70-0-532" id="h70-0-532" class="d">-type Action struct {
</a><a href="#h70-0-533" id="h70-0-533" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h70-0-534" id="h70-0-534" class="d">-}
</a><a href="#h70-0-535" id="h70-0-535" class="d">-
</a><a href="#h70-0-536" id="h70-0-536" class="d">-func (m *Action) Reset()         { *m = Action{} }
</a><a href="#h70-0-537" id="h70-0-537" class="d">-func (m *Action) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-538" id="h70-0-538" class="d">-func (*Action) ProtoMessage()    {}
</a><a href="#h70-0-539" id="h70-0-539" class="d">-
</a><a href="#h70-0-540" id="h70-0-540" class="d">-type PropertyValue struct {
</a><a href="#h70-0-541" id="h70-0-541" class="d">-	Int64Value       *int64                        `protobuf:&quot;varint,1,opt,name=int64Value&quot; json:&quot;int64Value,omitempty&quot;`
</a><a href="#h70-0-542" id="h70-0-542" class="d">-	BooleanValue     *bool                         `protobuf:&quot;varint,2,opt,name=booleanValue&quot; json:&quot;booleanValue,omitempty&quot;`
</a><a href="#h70-0-543" id="h70-0-543" class="d">-	StringValue      *string                       `protobuf:&quot;bytes,3,opt,name=stringValue&quot; json:&quot;stringValue,omitempty&quot;`
</a><a href="#h70-0-544" id="h70-0-544" class="d">-	DoubleValue      *float64                      `protobuf:&quot;fixed64,4,opt,name=doubleValue&quot; json:&quot;doubleValue,omitempty&quot;`
</a><a href="#h70-0-545" id="h70-0-545" class="d">-	Pointvalue       *PropertyValue_PointValue     `protobuf:&quot;group,5,opt,name=PointValue&quot; json:&quot;pointvalue,omitempty&quot;`
</a><a href="#h70-0-546" id="h70-0-546" class="d">-	Uservalue        *PropertyValue_UserValue      `protobuf:&quot;group,8,opt,name=UserValue&quot; json:&quot;uservalue,omitempty&quot;`
</a><a href="#h70-0-547" id="h70-0-547" class="d">-	Referencevalue   *PropertyValue_ReferenceValue `protobuf:&quot;group,12,opt,name=ReferenceValue&quot; json:&quot;referencevalue,omitempty&quot;`
</a><a href="#h70-0-548" id="h70-0-548" class="d">-	XXX_unrecognized []byte                        `json:&quot;-&quot;`
</a><a href="#h70-0-549" id="h70-0-549" class="d">-}
</a><a href="#h70-0-550" id="h70-0-550" class="d">-
</a><a href="#h70-0-551" id="h70-0-551" class="d">-func (m *PropertyValue) Reset()         { *m = PropertyValue{} }
</a><a href="#h70-0-552" id="h70-0-552" class="d">-func (m *PropertyValue) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-553" id="h70-0-553" class="d">-func (*PropertyValue) ProtoMessage()    {}
</a><a href="#h70-0-554" id="h70-0-554" class="d">-
</a><a href="#h70-0-555" id="h70-0-555" class="d">-func (m *PropertyValue) GetInt64Value() int64 {
</a><a href="#h70-0-556" id="h70-0-556" class="d">-	if m != nil &amp;&amp; m.Int64Value != nil {
</a><a href="#h70-0-557" id="h70-0-557" class="d">-		return *m.Int64Value
</a><a href="#h70-0-558" id="h70-0-558" class="d">-	}
</a><a href="#h70-0-559" id="h70-0-559" class="d">-	return 0
</a><a href="#h70-0-560" id="h70-0-560" class="d">-}
</a><a href="#h70-0-561" id="h70-0-561" class="d">-
</a><a href="#h70-0-562" id="h70-0-562" class="d">-func (m *PropertyValue) GetBooleanValue() bool {
</a><a href="#h70-0-563" id="h70-0-563" class="d">-	if m != nil &amp;&amp; m.BooleanValue != nil {
</a><a href="#h70-0-564" id="h70-0-564" class="d">-		return *m.BooleanValue
</a><a href="#h70-0-565" id="h70-0-565" class="d">-	}
</a><a href="#h70-0-566" id="h70-0-566" class="d">-	return false
</a><a href="#h70-0-567" id="h70-0-567" class="d">-}
</a><a href="#h70-0-568" id="h70-0-568" class="d">-
</a><a href="#h70-0-569" id="h70-0-569" class="d">-func (m *PropertyValue) GetStringValue() string {
</a><a href="#h70-0-570" id="h70-0-570" class="d">-	if m != nil &amp;&amp; m.StringValue != nil {
</a><a href="#h70-0-571" id="h70-0-571" class="d">-		return *m.StringValue
</a><a href="#h70-0-572" id="h70-0-572" class="d">-	}
</a><a href="#h70-0-573" id="h70-0-573" class="d">-	return &quot;&quot;
</a><a href="#h70-0-574" id="h70-0-574" class="d">-}
</a><a href="#h70-0-575" id="h70-0-575" class="d">-
</a><a href="#h70-0-576" id="h70-0-576" class="d">-func (m *PropertyValue) GetDoubleValue() float64 {
</a><a href="#h70-0-577" id="h70-0-577" class="d">-	if m != nil &amp;&amp; m.DoubleValue != nil {
</a><a href="#h70-0-578" id="h70-0-578" class="d">-		return *m.DoubleValue
</a><a href="#h70-0-579" id="h70-0-579" class="d">-	}
</a><a href="#h70-0-580" id="h70-0-580" class="d">-	return 0
</a><a href="#h70-0-581" id="h70-0-581" class="d">-}
</a><a href="#h70-0-582" id="h70-0-582" class="d">-
</a><a href="#h70-0-583" id="h70-0-583" class="d">-func (m *PropertyValue) GetPointvalue() *PropertyValue_PointValue {
</a><a href="#h70-0-584" id="h70-0-584" class="d">-	if m != nil {
</a><a href="#h70-0-585" id="h70-0-585" class="d">-		return m.Pointvalue
</a><a href="#h70-0-586" id="h70-0-586" class="d">-	}
</a><a href="#h70-0-587" id="h70-0-587" class="d">-	return nil
</a><a href="#h70-0-588" id="h70-0-588" class="d">-}
</a><a href="#h70-0-589" id="h70-0-589" class="d">-
</a><a href="#h70-0-590" id="h70-0-590" class="d">-func (m *PropertyValue) GetUservalue() *PropertyValue_UserValue {
</a><a href="#h70-0-591" id="h70-0-591" class="d">-	if m != nil {
</a><a href="#h70-0-592" id="h70-0-592" class="d">-		return m.Uservalue
</a><a href="#h70-0-593" id="h70-0-593" class="d">-	}
</a><a href="#h70-0-594" id="h70-0-594" class="d">-	return nil
</a><a href="#h70-0-595" id="h70-0-595" class="d">-}
</a><a href="#h70-0-596" id="h70-0-596" class="d">-
</a><a href="#h70-0-597" id="h70-0-597" class="d">-func (m *PropertyValue) GetReferencevalue() *PropertyValue_ReferenceValue {
</a><a href="#h70-0-598" id="h70-0-598" class="d">-	if m != nil {
</a><a href="#h70-0-599" id="h70-0-599" class="d">-		return m.Referencevalue
</a><a href="#h70-0-600" id="h70-0-600" class="d">-	}
</a><a href="#h70-0-601" id="h70-0-601" class="d">-	return nil
</a><a href="#h70-0-602" id="h70-0-602" class="d">-}
</a><a href="#h70-0-603" id="h70-0-603" class="d">-
</a><a href="#h70-0-604" id="h70-0-604" class="d">-type PropertyValue_PointValue struct {
</a><a href="#h70-0-605" id="h70-0-605" class="d">-	X                *float64 `protobuf:&quot;fixed64,6,req,name=x&quot; json:&quot;x,omitempty&quot;`
</a><a href="#h70-0-606" id="h70-0-606" class="d">-	Y                *float64 `protobuf:&quot;fixed64,7,req,name=y&quot; json:&quot;y,omitempty&quot;`
</a><a href="#h70-0-607" id="h70-0-607" class="d">-	XXX_unrecognized []byte   `json:&quot;-&quot;`
</a><a href="#h70-0-608" id="h70-0-608" class="d">-}
</a><a href="#h70-0-609" id="h70-0-609" class="d">-
</a><a href="#h70-0-610" id="h70-0-610" class="d">-func (m *PropertyValue_PointValue) Reset()         { *m = PropertyValue_PointValue{} }
</a><a href="#h70-0-611" id="h70-0-611" class="d">-func (m *PropertyValue_PointValue) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-612" id="h70-0-612" class="d">-func (*PropertyValue_PointValue) ProtoMessage()    {}
</a><a href="#h70-0-613" id="h70-0-613" class="d">-
</a><a href="#h70-0-614" id="h70-0-614" class="d">-func (m *PropertyValue_PointValue) GetX() float64 {
</a><a href="#h70-0-615" id="h70-0-615" class="d">-	if m != nil &amp;&amp; m.X != nil {
</a><a href="#h70-0-616" id="h70-0-616" class="d">-		return *m.X
</a><a href="#h70-0-617" id="h70-0-617" class="d">-	}
</a><a href="#h70-0-618" id="h70-0-618" class="d">-	return 0
</a><a href="#h70-0-619" id="h70-0-619" class="d">-}
</a><a href="#h70-0-620" id="h70-0-620" class="d">-
</a><a href="#h70-0-621" id="h70-0-621" class="d">-func (m *PropertyValue_PointValue) GetY() float64 {
</a><a href="#h70-0-622" id="h70-0-622" class="d">-	if m != nil &amp;&amp; m.Y != nil {
</a><a href="#h70-0-623" id="h70-0-623" class="d">-		return *m.Y
</a><a href="#h70-0-624" id="h70-0-624" class="d">-	}
</a><a href="#h70-0-625" id="h70-0-625" class="d">-	return 0
</a><a href="#h70-0-626" id="h70-0-626" class="d">-}
</a><a href="#h70-0-627" id="h70-0-627" class="d">-
</a><a href="#h70-0-628" id="h70-0-628" class="d">-type PropertyValue_UserValue struct {
</a><a href="#h70-0-629" id="h70-0-629" class="d">-	Email             *string `protobuf:&quot;bytes,9,req,name=email&quot; json:&quot;email,omitempty&quot;`
</a><a href="#h70-0-630" id="h70-0-630" class="d">-	AuthDomain        *string `protobuf:&quot;bytes,10,req,name=auth_domain&quot; json:&quot;auth_domain,omitempty&quot;`
</a><a href="#h70-0-631" id="h70-0-631" class="d">-	Nickname          *string `protobuf:&quot;bytes,11,opt,name=nickname&quot; json:&quot;nickname,omitempty&quot;`
</a><a href="#h70-0-632" id="h70-0-632" class="d">-	FederatedIdentity *string `protobuf:&quot;bytes,21,opt,name=federated_identity&quot; json:&quot;federated_identity,omitempty&quot;`
</a><a href="#h70-0-633" id="h70-0-633" class="d">-	FederatedProvider *string `protobuf:&quot;bytes,22,opt,name=federated_provider&quot; json:&quot;federated_provider,omitempty&quot;`
</a><a href="#h70-0-634" id="h70-0-634" class="d">-	XXX_unrecognized  []byte  `json:&quot;-&quot;`
</a><a href="#h70-0-635" id="h70-0-635" class="d">-}
</a><a href="#h70-0-636" id="h70-0-636" class="d">-
</a><a href="#h70-0-637" id="h70-0-637" class="d">-func (m *PropertyValue_UserValue) Reset()         { *m = PropertyValue_UserValue{} }
</a><a href="#h70-0-638" id="h70-0-638" class="d">-func (m *PropertyValue_UserValue) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-639" id="h70-0-639" class="d">-func (*PropertyValue_UserValue) ProtoMessage()    {}
</a><a href="#h70-0-640" id="h70-0-640" class="d">-
</a><a href="#h70-0-641" id="h70-0-641" class="d">-func (m *PropertyValue_UserValue) GetEmail() string {
</a><a href="#h70-0-642" id="h70-0-642" class="d">-	if m != nil &amp;&amp; m.Email != nil {
</a><a href="#h70-0-643" id="h70-0-643" class="d">-		return *m.Email
</a><a href="#h70-0-644" id="h70-0-644" class="d">-	}
</a><a href="#h70-0-645" id="h70-0-645" class="d">-	return &quot;&quot;
</a><a href="#h70-0-646" id="h70-0-646" class="d">-}
</a><a href="#h70-0-647" id="h70-0-647" class="d">-
</a><a href="#h70-0-648" id="h70-0-648" class="d">-func (m *PropertyValue_UserValue) GetAuthDomain() string {
</a><a href="#h70-0-649" id="h70-0-649" class="d">-	if m != nil &amp;&amp; m.AuthDomain != nil {
</a><a href="#h70-0-650" id="h70-0-650" class="d">-		return *m.AuthDomain
</a><a href="#h70-0-651" id="h70-0-651" class="d">-	}
</a><a href="#h70-0-652" id="h70-0-652" class="d">-	return &quot;&quot;
</a><a href="#h70-0-653" id="h70-0-653" class="d">-}
</a><a href="#h70-0-654" id="h70-0-654" class="d">-
</a><a href="#h70-0-655" id="h70-0-655" class="d">-func (m *PropertyValue_UserValue) GetNickname() string {
</a><a href="#h70-0-656" id="h70-0-656" class="d">-	if m != nil &amp;&amp; m.Nickname != nil {
</a><a href="#h70-0-657" id="h70-0-657" class="d">-		return *m.Nickname
</a><a href="#h70-0-658" id="h70-0-658" class="d">-	}
</a><a href="#h70-0-659" id="h70-0-659" class="d">-	return &quot;&quot;
</a><a href="#h70-0-660" id="h70-0-660" class="d">-}
</a><a href="#h70-0-661" id="h70-0-661" class="d">-
</a><a href="#h70-0-662" id="h70-0-662" class="d">-func (m *PropertyValue_UserValue) GetFederatedIdentity() string {
</a><a href="#h70-0-663" id="h70-0-663" class="d">-	if m != nil &amp;&amp; m.FederatedIdentity != nil {
</a><a href="#h70-0-664" id="h70-0-664" class="d">-		return *m.FederatedIdentity
</a><a href="#h70-0-665" id="h70-0-665" class="d">-	}
</a><a href="#h70-0-666" id="h70-0-666" class="d">-	return &quot;&quot;
</a><a href="#h70-0-667" id="h70-0-667" class="d">-}
</a><a href="#h70-0-668" id="h70-0-668" class="d">-
</a><a href="#h70-0-669" id="h70-0-669" class="d">-func (m *PropertyValue_UserValue) GetFederatedProvider() string {
</a><a href="#h70-0-670" id="h70-0-670" class="d">-	if m != nil &amp;&amp; m.FederatedProvider != nil {
</a><a href="#h70-0-671" id="h70-0-671" class="d">-		return *m.FederatedProvider
</a><a href="#h70-0-672" id="h70-0-672" class="d">-	}
</a><a href="#h70-0-673" id="h70-0-673" class="d">-	return &quot;&quot;
</a><a href="#h70-0-674" id="h70-0-674" class="d">-}
</a><a href="#h70-0-675" id="h70-0-675" class="d">-
</a><a href="#h70-0-676" id="h70-0-676" class="d">-type PropertyValue_ReferenceValue struct {
</a><a href="#h70-0-677" id="h70-0-677" class="d">-	App              *string                                     `protobuf:&quot;bytes,13,req,name=app&quot; json:&quot;app,omitempty&quot;`
</a><a href="#h70-0-678" id="h70-0-678" class="d">-	NameSpace        *string                                     `protobuf:&quot;bytes,20,opt,name=name_space&quot; json:&quot;name_space,omitempty&quot;`
</a><a href="#h70-0-679" id="h70-0-679" class="d">-	Pathelement      []*PropertyValue_ReferenceValue_PathElement `protobuf:&quot;group,14,rep,name=PathElement&quot; json:&quot;pathelement,omitempty&quot;`
</a><a href="#h70-0-680" id="h70-0-680" class="d">-	XXX_unrecognized []byte                                      `json:&quot;-&quot;`
</a><a href="#h70-0-681" id="h70-0-681" class="d">-}
</a><a href="#h70-0-682" id="h70-0-682" class="d">-
</a><a href="#h70-0-683" id="h70-0-683" class="d">-func (m *PropertyValue_ReferenceValue) Reset()         { *m = PropertyValue_ReferenceValue{} }
</a><a href="#h70-0-684" id="h70-0-684" class="d">-func (m *PropertyValue_ReferenceValue) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-685" id="h70-0-685" class="d">-func (*PropertyValue_ReferenceValue) ProtoMessage()    {}
</a><a href="#h70-0-686" id="h70-0-686" class="d">-
</a><a href="#h70-0-687" id="h70-0-687" class="d">-func (m *PropertyValue_ReferenceValue) GetApp() string {
</a><a href="#h70-0-688" id="h70-0-688" class="d">-	if m != nil &amp;&amp; m.App != nil {
</a><a href="#h70-0-689" id="h70-0-689" class="d">-		return *m.App
</a><a href="#h70-0-690" id="h70-0-690" class="d">-	}
</a><a href="#h70-0-691" id="h70-0-691" class="d">-	return &quot;&quot;
</a><a href="#h70-0-692" id="h70-0-692" class="d">-}
</a><a href="#h70-0-693" id="h70-0-693" class="d">-
</a><a href="#h70-0-694" id="h70-0-694" class="d">-func (m *PropertyValue_ReferenceValue) GetNameSpace() string {
</a><a href="#h70-0-695" id="h70-0-695" class="d">-	if m != nil &amp;&amp; m.NameSpace != nil {
</a><a href="#h70-0-696" id="h70-0-696" class="d">-		return *m.NameSpace
</a><a href="#h70-0-697" id="h70-0-697" class="d">-	}
</a><a href="#h70-0-698" id="h70-0-698" class="d">-	return &quot;&quot;
</a><a href="#h70-0-699" id="h70-0-699" class="d">-}
</a><a href="#h70-0-700" id="h70-0-700" class="d">-
</a><a href="#h70-0-701" id="h70-0-701" class="d">-func (m *PropertyValue_ReferenceValue) GetPathelement() []*PropertyValue_ReferenceValue_PathElement {
</a><a href="#h70-0-702" id="h70-0-702" class="d">-	if m != nil {
</a><a href="#h70-0-703" id="h70-0-703" class="d">-		return m.Pathelement
</a><a href="#h70-0-704" id="h70-0-704" class="d">-	}
</a><a href="#h70-0-705" id="h70-0-705" class="d">-	return nil
</a><a href="#h70-0-706" id="h70-0-706" class="d">-}
</a><a href="#h70-0-707" id="h70-0-707" class="d">-
</a><a href="#h70-0-708" id="h70-0-708" class="d">-type PropertyValue_ReferenceValue_PathElement struct {
</a><a href="#h70-0-709" id="h70-0-709" class="d">-	Type             *string `protobuf:&quot;bytes,15,req,name=type&quot; json:&quot;type,omitempty&quot;`
</a><a href="#h70-0-710" id="h70-0-710" class="d">-	Id               *int64  `protobuf:&quot;varint,16,opt,name=id&quot; json:&quot;id,omitempty&quot;`
</a><a href="#h70-0-711" id="h70-0-711" class="d">-	Name             *string `protobuf:&quot;bytes,17,opt,name=name&quot; json:&quot;name,omitempty&quot;`
</a><a href="#h70-0-712" id="h70-0-712" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h70-0-713" id="h70-0-713" class="d">-}
</a><a href="#h70-0-714" id="h70-0-714" class="d">-
</a><a href="#h70-0-715" id="h70-0-715" class="d">-func (m *PropertyValue_ReferenceValue_PathElement) Reset() {
</a><a href="#h70-0-716" id="h70-0-716" class="d">-	*m = PropertyValue_ReferenceValue_PathElement{}
</a><a href="#h70-0-717" id="h70-0-717" class="d">-}
</a><a href="#h70-0-718" id="h70-0-718" class="d">-func (m *PropertyValue_ReferenceValue_PathElement) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-719" id="h70-0-719" class="d">-func (*PropertyValue_ReferenceValue_PathElement) ProtoMessage()    {}
</a><a href="#h70-0-720" id="h70-0-720" class="d">-
</a><a href="#h70-0-721" id="h70-0-721" class="d">-func (m *PropertyValue_ReferenceValue_PathElement) GetType() string {
</a><a href="#h70-0-722" id="h70-0-722" class="d">-	if m != nil &amp;&amp; m.Type != nil {
</a><a href="#h70-0-723" id="h70-0-723" class="d">-		return *m.Type
</a><a href="#h70-0-724" id="h70-0-724" class="d">-	}
</a><a href="#h70-0-725" id="h70-0-725" class="d">-	return &quot;&quot;
</a><a href="#h70-0-726" id="h70-0-726" class="d">-}
</a><a href="#h70-0-727" id="h70-0-727" class="d">-
</a><a href="#h70-0-728" id="h70-0-728" class="d">-func (m *PropertyValue_ReferenceValue_PathElement) GetId() int64 {
</a><a href="#h70-0-729" id="h70-0-729" class="d">-	if m != nil &amp;&amp; m.Id != nil {
</a><a href="#h70-0-730" id="h70-0-730" class="d">-		return *m.Id
</a><a href="#h70-0-731" id="h70-0-731" class="d">-	}
</a><a href="#h70-0-732" id="h70-0-732" class="d">-	return 0
</a><a href="#h70-0-733" id="h70-0-733" class="d">-}
</a><a href="#h70-0-734" id="h70-0-734" class="d">-
</a><a href="#h70-0-735" id="h70-0-735" class="d">-func (m *PropertyValue_ReferenceValue_PathElement) GetName() string {
</a><a href="#h70-0-736" id="h70-0-736" class="d">-	if m != nil &amp;&amp; m.Name != nil {
</a><a href="#h70-0-737" id="h70-0-737" class="d">-		return *m.Name
</a><a href="#h70-0-738" id="h70-0-738" class="d">-	}
</a><a href="#h70-0-739" id="h70-0-739" class="d">-	return &quot;&quot;
</a><a href="#h70-0-740" id="h70-0-740" class="d">-}
</a><a href="#h70-0-741" id="h70-0-741" class="d">-
</a><a href="#h70-0-742" id="h70-0-742" class="d">-type Property struct {
</a><a href="#h70-0-743" id="h70-0-743" class="d">-	Meaning               *Property_Meaning               `protobuf:&quot;varint,1,opt,name=meaning,enum=appengine.Property_Meaning,def=0&quot; json:&quot;meaning,omitempty&quot;`
</a><a href="#h70-0-744" id="h70-0-744" class="d">-	MeaningUri            *string                         `protobuf:&quot;bytes,2,opt,name=meaning_uri&quot; json:&quot;meaning_uri,omitempty&quot;`
</a><a href="#h70-0-745" id="h70-0-745" class="d">-	Name                  *string                         `protobuf:&quot;bytes,3,req,name=name&quot; json:&quot;name,omitempty&quot;`
</a><a href="#h70-0-746" id="h70-0-746" class="d">-	Value                 *PropertyValue                  `protobuf:&quot;bytes,5,req,name=value&quot; json:&quot;value,omitempty&quot;`
</a><a href="#h70-0-747" id="h70-0-747" class="d">-	Multiple              *bool                           `protobuf:&quot;varint,4,req,name=multiple&quot; json:&quot;multiple,omitempty&quot;`
</a><a href="#h70-0-748" id="h70-0-748" class="d">-	Searchable            *bool                           `protobuf:&quot;varint,6,opt,name=searchable,def=0&quot; json:&quot;searchable,omitempty&quot;`
</a><a href="#h70-0-749" id="h70-0-749" class="d">-	FtsTokenizationOption *Property_FtsTokenizationOption `protobuf:&quot;varint,8,opt,name=fts_tokenization_option,enum=appengine.Property_FtsTokenizationOption&quot; json:&quot;fts_tokenization_option,omitempty&quot;`
</a><a href="#h70-0-750" id="h70-0-750" class="d">-	Locale                *string                         `protobuf:&quot;bytes,9,opt,name=locale,def=en&quot; json:&quot;locale,omitempty&quot;`
</a><a href="#h70-0-751" id="h70-0-751" class="d">-	XXX_unrecognized      []byte                          `json:&quot;-&quot;`
</a><a href="#h70-0-752" id="h70-0-752" class="d">-}
</a><a href="#h70-0-753" id="h70-0-753" class="d">-
</a><a href="#h70-0-754" id="h70-0-754" class="d">-func (m *Property) Reset()         { *m = Property{} }
</a><a href="#h70-0-755" id="h70-0-755" class="d">-func (m *Property) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-756" id="h70-0-756" class="d">-func (*Property) ProtoMessage()    {}
</a><a href="#h70-0-757" id="h70-0-757" class="d">-
</a><a href="#h70-0-758" id="h70-0-758" class="d">-const Default_Property_Meaning Property_Meaning = Property_NO_MEANING
</a><a href="#h70-0-759" id="h70-0-759" class="d">-const Default_Property_Searchable bool = false
</a><a href="#h70-0-760" id="h70-0-760" class="d">-const Default_Property_Locale string = &quot;en&quot;
</a><a href="#h70-0-761" id="h70-0-761" class="d">-
</a><a href="#h70-0-762" id="h70-0-762" class="d">-func (m *Property) GetMeaning() Property_Meaning {
</a><a href="#h70-0-763" id="h70-0-763" class="d">-	if m != nil &amp;&amp; m.Meaning != nil {
</a><a href="#h70-0-764" id="h70-0-764" class="d">-		return *m.Meaning
</a><a href="#h70-0-765" id="h70-0-765" class="d">-	}
</a><a href="#h70-0-766" id="h70-0-766" class="d">-	return Default_Property_Meaning
</a><a href="#h70-0-767" id="h70-0-767" class="d">-}
</a><a href="#h70-0-768" id="h70-0-768" class="d">-
</a><a href="#h70-0-769" id="h70-0-769" class="d">-func (m *Property) GetMeaningUri() string {
</a><a href="#h70-0-770" id="h70-0-770" class="d">-	if m != nil &amp;&amp; m.MeaningUri != nil {
</a><a href="#h70-0-771" id="h70-0-771" class="d">-		return *m.MeaningUri
</a><a href="#h70-0-772" id="h70-0-772" class="d">-	}
</a><a href="#h70-0-773" id="h70-0-773" class="d">-	return &quot;&quot;
</a><a href="#h70-0-774" id="h70-0-774" class="d">-}
</a><a href="#h70-0-775" id="h70-0-775" class="d">-
</a><a href="#h70-0-776" id="h70-0-776" class="d">-func (m *Property) GetName() string {
</a><a href="#h70-0-777" id="h70-0-777" class="d">-	if m != nil &amp;&amp; m.Name != nil {
</a><a href="#h70-0-778" id="h70-0-778" class="d">-		return *m.Name
</a><a href="#h70-0-779" id="h70-0-779" class="d">-	}
</a><a href="#h70-0-780" id="h70-0-780" class="d">-	return &quot;&quot;
</a><a href="#h70-0-781" id="h70-0-781" class="d">-}
</a><a href="#h70-0-782" id="h70-0-782" class="d">-
</a><a href="#h70-0-783" id="h70-0-783" class="d">-func (m *Property) GetValue() *PropertyValue {
</a><a href="#h70-0-784" id="h70-0-784" class="d">-	if m != nil {
</a><a href="#h70-0-785" id="h70-0-785" class="d">-		return m.Value
</a><a href="#h70-0-786" id="h70-0-786" class="d">-	}
</a><a href="#h70-0-787" id="h70-0-787" class="d">-	return nil
</a><a href="#h70-0-788" id="h70-0-788" class="d">-}
</a><a href="#h70-0-789" id="h70-0-789" class="d">-
</a><a href="#h70-0-790" id="h70-0-790" class="d">-func (m *Property) GetMultiple() bool {
</a><a href="#h70-0-791" id="h70-0-791" class="d">-	if m != nil &amp;&amp; m.Multiple != nil {
</a><a href="#h70-0-792" id="h70-0-792" class="d">-		return *m.Multiple
</a><a href="#h70-0-793" id="h70-0-793" class="d">-	}
</a><a href="#h70-0-794" id="h70-0-794" class="d">-	return false
</a><a href="#h70-0-795" id="h70-0-795" class="d">-}
</a><a href="#h70-0-796" id="h70-0-796" class="d">-
</a><a href="#h70-0-797" id="h70-0-797" class="d">-func (m *Property) GetSearchable() bool {
</a><a href="#h70-0-798" id="h70-0-798" class="d">-	if m != nil &amp;&amp; m.Searchable != nil {
</a><a href="#h70-0-799" id="h70-0-799" class="d">-		return *m.Searchable
</a><a href="#h70-0-800" id="h70-0-800" class="d">-	}
</a><a href="#h70-0-801" id="h70-0-801" class="d">-	return Default_Property_Searchable
</a><a href="#h70-0-802" id="h70-0-802" class="d">-}
</a><a href="#h70-0-803" id="h70-0-803" class="d">-
</a><a href="#h70-0-804" id="h70-0-804" class="d">-func (m *Property) GetFtsTokenizationOption() Property_FtsTokenizationOption {
</a><a href="#h70-0-805" id="h70-0-805" class="d">-	if m != nil &amp;&amp; m.FtsTokenizationOption != nil {
</a><a href="#h70-0-806" id="h70-0-806" class="d">-		return *m.FtsTokenizationOption
</a><a href="#h70-0-807" id="h70-0-807" class="d">-	}
</a><a href="#h70-0-808" id="h70-0-808" class="d">-	return Property_HTML
</a><a href="#h70-0-809" id="h70-0-809" class="d">-}
</a><a href="#h70-0-810" id="h70-0-810" class="d">-
</a><a href="#h70-0-811" id="h70-0-811" class="d">-func (m *Property) GetLocale() string {
</a><a href="#h70-0-812" id="h70-0-812" class="d">-	if m != nil &amp;&amp; m.Locale != nil {
</a><a href="#h70-0-813" id="h70-0-813" class="d">-		return *m.Locale
</a><a href="#h70-0-814" id="h70-0-814" class="d">-	}
</a><a href="#h70-0-815" id="h70-0-815" class="d">-	return Default_Property_Locale
</a><a href="#h70-0-816" id="h70-0-816" class="d">-}
</a><a href="#h70-0-817" id="h70-0-817" class="d">-
</a><a href="#h70-0-818" id="h70-0-818" class="d">-type Path struct {
</a><a href="#h70-0-819" id="h70-0-819" class="d">-	Element          []*Path_Element `protobuf:&quot;group,1,rep,name=Element&quot; json:&quot;element,omitempty&quot;`
</a><a href="#h70-0-820" id="h70-0-820" class="d">-	XXX_unrecognized []byte          `json:&quot;-&quot;`
</a><a href="#h70-0-821" id="h70-0-821" class="d">-}
</a><a href="#h70-0-822" id="h70-0-822" class="d">-
</a><a href="#h70-0-823" id="h70-0-823" class="d">-func (m *Path) Reset()         { *m = Path{} }
</a><a href="#h70-0-824" id="h70-0-824" class="d">-func (m *Path) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-825" id="h70-0-825" class="d">-func (*Path) ProtoMessage()    {}
</a><a href="#h70-0-826" id="h70-0-826" class="d">-
</a><a href="#h70-0-827" id="h70-0-827" class="d">-func (m *Path) GetElement() []*Path_Element {
</a><a href="#h70-0-828" id="h70-0-828" class="d">-	if m != nil {
</a><a href="#h70-0-829" id="h70-0-829" class="d">-		return m.Element
</a><a href="#h70-0-830" id="h70-0-830" class="d">-	}
</a><a href="#h70-0-831" id="h70-0-831" class="d">-	return nil
</a><a href="#h70-0-832" id="h70-0-832" class="d">-}
</a><a href="#h70-0-833" id="h70-0-833" class="d">-
</a><a href="#h70-0-834" id="h70-0-834" class="d">-type Path_Element struct {
</a><a href="#h70-0-835" id="h70-0-835" class="d">-	Type             *string `protobuf:&quot;bytes,2,req,name=type&quot; json:&quot;type,omitempty&quot;`
</a><a href="#h70-0-836" id="h70-0-836" class="d">-	Id               *int64  `protobuf:&quot;varint,3,opt,name=id&quot; json:&quot;id,omitempty&quot;`
</a><a href="#h70-0-837" id="h70-0-837" class="d">-	Name             *string `protobuf:&quot;bytes,4,opt,name=name&quot; json:&quot;name,omitempty&quot;`
</a><a href="#h70-0-838" id="h70-0-838" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h70-0-839" id="h70-0-839" class="d">-}
</a><a href="#h70-0-840" id="h70-0-840" class="d">-
</a><a href="#h70-0-841" id="h70-0-841" class="d">-func (m *Path_Element) Reset()         { *m = Path_Element{} }
</a><a href="#h70-0-842" id="h70-0-842" class="d">-func (m *Path_Element) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-843" id="h70-0-843" class="d">-func (*Path_Element) ProtoMessage()    {}
</a><a href="#h70-0-844" id="h70-0-844" class="d">-
</a><a href="#h70-0-845" id="h70-0-845" class="d">-func (m *Path_Element) GetType() string {
</a><a href="#h70-0-846" id="h70-0-846" class="d">-	if m != nil &amp;&amp; m.Type != nil {
</a><a href="#h70-0-847" id="h70-0-847" class="d">-		return *m.Type
</a><a href="#h70-0-848" id="h70-0-848" class="d">-	}
</a><a href="#h70-0-849" id="h70-0-849" class="d">-	return &quot;&quot;
</a><a href="#h70-0-850" id="h70-0-850" class="d">-}
</a><a href="#h70-0-851" id="h70-0-851" class="d">-
</a><a href="#h70-0-852" id="h70-0-852" class="d">-func (m *Path_Element) GetId() int64 {
</a><a href="#h70-0-853" id="h70-0-853" class="d">-	if m != nil &amp;&amp; m.Id != nil {
</a><a href="#h70-0-854" id="h70-0-854" class="d">-		return *m.Id
</a><a href="#h70-0-855" id="h70-0-855" class="d">-	}
</a><a href="#h70-0-856" id="h70-0-856" class="d">-	return 0
</a><a href="#h70-0-857" id="h70-0-857" class="d">-}
</a><a href="#h70-0-858" id="h70-0-858" class="d">-
</a><a href="#h70-0-859" id="h70-0-859" class="d">-func (m *Path_Element) GetName() string {
</a><a href="#h70-0-860" id="h70-0-860" class="d">-	if m != nil &amp;&amp; m.Name != nil {
</a><a href="#h70-0-861" id="h70-0-861" class="d">-		return *m.Name
</a><a href="#h70-0-862" id="h70-0-862" class="d">-	}
</a><a href="#h70-0-863" id="h70-0-863" class="d">-	return &quot;&quot;
</a><a href="#h70-0-864" id="h70-0-864" class="d">-}
</a><a href="#h70-0-865" id="h70-0-865" class="d">-
</a><a href="#h70-0-866" id="h70-0-866" class="d">-type Reference struct {
</a><a href="#h70-0-867" id="h70-0-867" class="d">-	App              *string `protobuf:&quot;bytes,13,req,name=app&quot; json:&quot;app,omitempty&quot;`
</a><a href="#h70-0-868" id="h70-0-868" class="d">-	NameSpace        *string `protobuf:&quot;bytes,20,opt,name=name_space&quot; json:&quot;name_space,omitempty&quot;`
</a><a href="#h70-0-869" id="h70-0-869" class="d">-	Path             *Path   `protobuf:&quot;bytes,14,req,name=path&quot; json:&quot;path,omitempty&quot;`
</a><a href="#h70-0-870" id="h70-0-870" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h70-0-871" id="h70-0-871" class="d">-}
</a><a href="#h70-0-872" id="h70-0-872" class="d">-
</a><a href="#h70-0-873" id="h70-0-873" class="d">-func (m *Reference) Reset()         { *m = Reference{} }
</a><a href="#h70-0-874" id="h70-0-874" class="d">-func (m *Reference) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-875" id="h70-0-875" class="d">-func (*Reference) ProtoMessage()    {}
</a><a href="#h70-0-876" id="h70-0-876" class="d">-
</a><a href="#h70-0-877" id="h70-0-877" class="d">-func (m *Reference) GetApp() string {
</a><a href="#h70-0-878" id="h70-0-878" class="d">-	if m != nil &amp;&amp; m.App != nil {
</a><a href="#h70-0-879" id="h70-0-879" class="d">-		return *m.App
</a><a href="#h70-0-880" id="h70-0-880" class="d">-	}
</a><a href="#h70-0-881" id="h70-0-881" class="d">-	return &quot;&quot;
</a><a href="#h70-0-882" id="h70-0-882" class="d">-}
</a><a href="#h70-0-883" id="h70-0-883" class="d">-
</a><a href="#h70-0-884" id="h70-0-884" class="d">-func (m *Reference) GetNameSpace() string {
</a><a href="#h70-0-885" id="h70-0-885" class="d">-	if m != nil &amp;&amp; m.NameSpace != nil {
</a><a href="#h70-0-886" id="h70-0-886" class="d">-		return *m.NameSpace
</a><a href="#h70-0-887" id="h70-0-887" class="d">-	}
</a><a href="#h70-0-888" id="h70-0-888" class="d">-	return &quot;&quot;
</a><a href="#h70-0-889" id="h70-0-889" class="d">-}
</a><a href="#h70-0-890" id="h70-0-890" class="d">-
</a><a href="#h70-0-891" id="h70-0-891" class="d">-func (m *Reference) GetPath() *Path {
</a><a href="#h70-0-892" id="h70-0-892" class="d">-	if m != nil {
</a><a href="#h70-0-893" id="h70-0-893" class="d">-		return m.Path
</a><a href="#h70-0-894" id="h70-0-894" class="d">-	}
</a><a href="#h70-0-895" id="h70-0-895" class="d">-	return nil
</a><a href="#h70-0-896" id="h70-0-896" class="d">-}
</a><a href="#h70-0-897" id="h70-0-897" class="d">-
</a><a href="#h70-0-898" id="h70-0-898" class="d">-type User struct {
</a><a href="#h70-0-899" id="h70-0-899" class="d">-	Email             *string `protobuf:&quot;bytes,1,req,name=email&quot; json:&quot;email,omitempty&quot;`
</a><a href="#h70-0-900" id="h70-0-900" class="d">-	AuthDomain        *string `protobuf:&quot;bytes,2,req,name=auth_domain&quot; json:&quot;auth_domain,omitempty&quot;`
</a><a href="#h70-0-901" id="h70-0-901" class="d">-	Nickname          *string `protobuf:&quot;bytes,3,opt,name=nickname&quot; json:&quot;nickname,omitempty&quot;`
</a><a href="#h70-0-902" id="h70-0-902" class="d">-	FederatedIdentity *string `protobuf:&quot;bytes,6,opt,name=federated_identity&quot; json:&quot;federated_identity,omitempty&quot;`
</a><a href="#h70-0-903" id="h70-0-903" class="d">-	FederatedProvider *string `protobuf:&quot;bytes,7,opt,name=federated_provider&quot; json:&quot;federated_provider,omitempty&quot;`
</a><a href="#h70-0-904" id="h70-0-904" class="d">-	XXX_unrecognized  []byte  `json:&quot;-&quot;`
</a><a href="#h70-0-905" id="h70-0-905" class="d">-}
</a><a href="#h70-0-906" id="h70-0-906" class="d">-
</a><a href="#h70-0-907" id="h70-0-907" class="d">-func (m *User) Reset()         { *m = User{} }
</a><a href="#h70-0-908" id="h70-0-908" class="d">-func (m *User) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-909" id="h70-0-909" class="d">-func (*User) ProtoMessage()    {}
</a><a href="#h70-0-910" id="h70-0-910" class="d">-
</a><a href="#h70-0-911" id="h70-0-911" class="d">-func (m *User) GetEmail() string {
</a><a href="#h70-0-912" id="h70-0-912" class="d">-	if m != nil &amp;&amp; m.Email != nil {
</a><a href="#h70-0-913" id="h70-0-913" class="d">-		return *m.Email
</a><a href="#h70-0-914" id="h70-0-914" class="d">-	}
</a><a href="#h70-0-915" id="h70-0-915" class="d">-	return &quot;&quot;
</a><a href="#h70-0-916" id="h70-0-916" class="d">-}
</a><a href="#h70-0-917" id="h70-0-917" class="d">-
</a><a href="#h70-0-918" id="h70-0-918" class="d">-func (m *User) GetAuthDomain() string {
</a><a href="#h70-0-919" id="h70-0-919" class="d">-	if m != nil &amp;&amp; m.AuthDomain != nil {
</a><a href="#h70-0-920" id="h70-0-920" class="d">-		return *m.AuthDomain
</a><a href="#h70-0-921" id="h70-0-921" class="d">-	}
</a><a href="#h70-0-922" id="h70-0-922" class="d">-	return &quot;&quot;
</a><a href="#h70-0-923" id="h70-0-923" class="d">-}
</a><a href="#h70-0-924" id="h70-0-924" class="d">-
</a><a href="#h70-0-925" id="h70-0-925" class="d">-func (m *User) GetNickname() string {
</a><a href="#h70-0-926" id="h70-0-926" class="d">-	if m != nil &amp;&amp; m.Nickname != nil {
</a><a href="#h70-0-927" id="h70-0-927" class="d">-		return *m.Nickname
</a><a href="#h70-0-928" id="h70-0-928" class="d">-	}
</a><a href="#h70-0-929" id="h70-0-929" class="d">-	return &quot;&quot;
</a><a href="#h70-0-930" id="h70-0-930" class="d">-}
</a><a href="#h70-0-931" id="h70-0-931" class="d">-
</a><a href="#h70-0-932" id="h70-0-932" class="d">-func (m *User) GetFederatedIdentity() string {
</a><a href="#h70-0-933" id="h70-0-933" class="d">-	if m != nil &amp;&amp; m.FederatedIdentity != nil {
</a><a href="#h70-0-934" id="h70-0-934" class="d">-		return *m.FederatedIdentity
</a><a href="#h70-0-935" id="h70-0-935" class="d">-	}
</a><a href="#h70-0-936" id="h70-0-936" class="d">-	return &quot;&quot;
</a><a href="#h70-0-937" id="h70-0-937" class="d">-}
</a><a href="#h70-0-938" id="h70-0-938" class="d">-
</a><a href="#h70-0-939" id="h70-0-939" class="d">-func (m *User) GetFederatedProvider() string {
</a><a href="#h70-0-940" id="h70-0-940" class="d">-	if m != nil &amp;&amp; m.FederatedProvider != nil {
</a><a href="#h70-0-941" id="h70-0-941" class="d">-		return *m.FederatedProvider
</a><a href="#h70-0-942" id="h70-0-942" class="d">-	}
</a><a href="#h70-0-943" id="h70-0-943" class="d">-	return &quot;&quot;
</a><a href="#h70-0-944" id="h70-0-944" class="d">-}
</a><a href="#h70-0-945" id="h70-0-945" class="d">-
</a><a href="#h70-0-946" id="h70-0-946" class="d">-type EntityProto struct {
</a><a href="#h70-0-947" id="h70-0-947" class="d">-	Key              *Reference        `protobuf:&quot;bytes,13,req,name=key&quot; json:&quot;key,omitempty&quot;`
</a><a href="#h70-0-948" id="h70-0-948" class="d">-	EntityGroup      *Path             `protobuf:&quot;bytes,16,req,name=entity_group&quot; json:&quot;entity_group,omitempty&quot;`
</a><a href="#h70-0-949" id="h70-0-949" class="d">-	Owner            *User             `protobuf:&quot;bytes,17,opt,name=owner&quot; json:&quot;owner,omitempty&quot;`
</a><a href="#h70-0-950" id="h70-0-950" class="d">-	Kind             *EntityProto_Kind `protobuf:&quot;varint,4,opt,name=kind,enum=appengine.EntityProto_Kind&quot; json:&quot;kind,omitempty&quot;`
</a><a href="#h70-0-951" id="h70-0-951" class="d">-	KindUri          *string           `protobuf:&quot;bytes,5,opt,name=kind_uri&quot; json:&quot;kind_uri,omitempty&quot;`
</a><a href="#h70-0-952" id="h70-0-952" class="d">-	Property         []*Property       `protobuf:&quot;bytes,14,rep,name=property&quot; json:&quot;property,omitempty&quot;`
</a><a href="#h70-0-953" id="h70-0-953" class="d">-	RawProperty      []*Property       `protobuf:&quot;bytes,15,rep,name=raw_property&quot; json:&quot;raw_property,omitempty&quot;`
</a><a href="#h70-0-954" id="h70-0-954" class="d">-	Rank             *int32            `protobuf:&quot;varint,18,opt,name=rank&quot; json:&quot;rank,omitempty&quot;`
</a><a href="#h70-0-955" id="h70-0-955" class="d">-	XXX_unrecognized []byte            `json:&quot;-&quot;`
</a><a href="#h70-0-956" id="h70-0-956" class="d">-}
</a><a href="#h70-0-957" id="h70-0-957" class="d">-
</a><a href="#h70-0-958" id="h70-0-958" class="d">-func (m *EntityProto) Reset()         { *m = EntityProto{} }
</a><a href="#h70-0-959" id="h70-0-959" class="d">-func (m *EntityProto) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-960" id="h70-0-960" class="d">-func (*EntityProto) ProtoMessage()    {}
</a><a href="#h70-0-961" id="h70-0-961" class="d">-
</a><a href="#h70-0-962" id="h70-0-962" class="d">-func (m *EntityProto) GetKey() *Reference {
</a><a href="#h70-0-963" id="h70-0-963" class="d">-	if m != nil {
</a><a href="#h70-0-964" id="h70-0-964" class="d">-		return m.Key
</a><a href="#h70-0-965" id="h70-0-965" class="d">-	}
</a><a href="#h70-0-966" id="h70-0-966" class="d">-	return nil
</a><a href="#h70-0-967" id="h70-0-967" class="d">-}
</a><a href="#h70-0-968" id="h70-0-968" class="d">-
</a><a href="#h70-0-969" id="h70-0-969" class="d">-func (m *EntityProto) GetEntityGroup() *Path {
</a><a href="#h70-0-970" id="h70-0-970" class="d">-	if m != nil {
</a><a href="#h70-0-971" id="h70-0-971" class="d">-		return m.EntityGroup
</a><a href="#h70-0-972" id="h70-0-972" class="d">-	}
</a><a href="#h70-0-973" id="h70-0-973" class="d">-	return nil
</a><a href="#h70-0-974" id="h70-0-974" class="d">-}
</a><a href="#h70-0-975" id="h70-0-975" class="d">-
</a><a href="#h70-0-976" id="h70-0-976" class="d">-func (m *EntityProto) GetOwner() *User {
</a><a href="#h70-0-977" id="h70-0-977" class="d">-	if m != nil {
</a><a href="#h70-0-978" id="h70-0-978" class="d">-		return m.Owner
</a><a href="#h70-0-979" id="h70-0-979" class="d">-	}
</a><a href="#h70-0-980" id="h70-0-980" class="d">-	return nil
</a><a href="#h70-0-981" id="h70-0-981" class="d">-}
</a><a href="#h70-0-982" id="h70-0-982" class="d">-
</a><a href="#h70-0-983" id="h70-0-983" class="d">-func (m *EntityProto) GetKind() EntityProto_Kind {
</a><a href="#h70-0-984" id="h70-0-984" class="d">-	if m != nil &amp;&amp; m.Kind != nil {
</a><a href="#h70-0-985" id="h70-0-985" class="d">-		return *m.Kind
</a><a href="#h70-0-986" id="h70-0-986" class="d">-	}
</a><a href="#h70-0-987" id="h70-0-987" class="d">-	return EntityProto_GD_CONTACT
</a><a href="#h70-0-988" id="h70-0-988" class="d">-}
</a><a href="#h70-0-989" id="h70-0-989" class="d">-
</a><a href="#h70-0-990" id="h70-0-990" class="d">-func (m *EntityProto) GetKindUri() string {
</a><a href="#h70-0-991" id="h70-0-991" class="d">-	if m != nil &amp;&amp; m.KindUri != nil {
</a><a href="#h70-0-992" id="h70-0-992" class="d">-		return *m.KindUri
</a><a href="#h70-0-993" id="h70-0-993" class="d">-	}
</a><a href="#h70-0-994" id="h70-0-994" class="d">-	return &quot;&quot;
</a><a href="#h70-0-995" id="h70-0-995" class="d">-}
</a><a href="#h70-0-996" id="h70-0-996" class="d">-
</a><a href="#h70-0-997" id="h70-0-997" class="d">-func (m *EntityProto) GetProperty() []*Property {
</a><a href="#h70-0-998" id="h70-0-998" class="d">-	if m != nil {
</a><a href="#h70-0-999" id="h70-0-999" class="d">-		return m.Property
</a><a href="#h70-0-1000" id="h70-0-1000" class="d">-	}
</a><a href="#h70-0-1001" id="h70-0-1001" class="d">-	return nil
</a><a href="#h70-0-1002" id="h70-0-1002" class="d">-}
</a><a href="#h70-0-1003" id="h70-0-1003" class="d">-
</a><a href="#h70-0-1004" id="h70-0-1004" class="d">-func (m *EntityProto) GetRawProperty() []*Property {
</a><a href="#h70-0-1005" id="h70-0-1005" class="d">-	if m != nil {
</a><a href="#h70-0-1006" id="h70-0-1006" class="d">-		return m.RawProperty
</a><a href="#h70-0-1007" id="h70-0-1007" class="d">-	}
</a><a href="#h70-0-1008" id="h70-0-1008" class="d">-	return nil
</a><a href="#h70-0-1009" id="h70-0-1009" class="d">-}
</a><a href="#h70-0-1010" id="h70-0-1010" class="d">-
</a><a href="#h70-0-1011" id="h70-0-1011" class="d">-func (m *EntityProto) GetRank() int32 {
</a><a href="#h70-0-1012" id="h70-0-1012" class="d">-	if m != nil &amp;&amp; m.Rank != nil {
</a><a href="#h70-0-1013" id="h70-0-1013" class="d">-		return *m.Rank
</a><a href="#h70-0-1014" id="h70-0-1014" class="d">-	}
</a><a href="#h70-0-1015" id="h70-0-1015" class="d">-	return 0
</a><a href="#h70-0-1016" id="h70-0-1016" class="d">-}
</a><a href="#h70-0-1017" id="h70-0-1017" class="d">-
</a><a href="#h70-0-1018" id="h70-0-1018" class="d">-type CompositeProperty struct {
</a><a href="#h70-0-1019" id="h70-0-1019" class="d">-	IndexId          *int64   `protobuf:&quot;varint,1,req,name=index_id&quot; json:&quot;index_id,omitempty&quot;`
</a><a href="#h70-0-1020" id="h70-0-1020" class="d">-	Value            []string `protobuf:&quot;bytes,2,rep,name=value&quot; json:&quot;value,omitempty&quot;`
</a><a href="#h70-0-1021" id="h70-0-1021" class="d">-	XXX_unrecognized []byte   `json:&quot;-&quot;`
</a><a href="#h70-0-1022" id="h70-0-1022" class="d">-}
</a><a href="#h70-0-1023" id="h70-0-1023" class="d">-
</a><a href="#h70-0-1024" id="h70-0-1024" class="d">-func (m *CompositeProperty) Reset()         { *m = CompositeProperty{} }
</a><a href="#h70-0-1025" id="h70-0-1025" class="d">-func (m *CompositeProperty) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1026" id="h70-0-1026" class="d">-func (*CompositeProperty) ProtoMessage()    {}
</a><a href="#h70-0-1027" id="h70-0-1027" class="d">-
</a><a href="#h70-0-1028" id="h70-0-1028" class="d">-func (m *CompositeProperty) GetIndexId() int64 {
</a><a href="#h70-0-1029" id="h70-0-1029" class="d">-	if m != nil &amp;&amp; m.IndexId != nil {
</a><a href="#h70-0-1030" id="h70-0-1030" class="d">-		return *m.IndexId
</a><a href="#h70-0-1031" id="h70-0-1031" class="d">-	}
</a><a href="#h70-0-1032" id="h70-0-1032" class="d">-	return 0
</a><a href="#h70-0-1033" id="h70-0-1033" class="d">-}
</a><a href="#h70-0-1034" id="h70-0-1034" class="d">-
</a><a href="#h70-0-1035" id="h70-0-1035" class="d">-func (m *CompositeProperty) GetValue() []string {
</a><a href="#h70-0-1036" id="h70-0-1036" class="d">-	if m != nil {
</a><a href="#h70-0-1037" id="h70-0-1037" class="d">-		return m.Value
</a><a href="#h70-0-1038" id="h70-0-1038" class="d">-	}
</a><a href="#h70-0-1039" id="h70-0-1039" class="d">-	return nil
</a><a href="#h70-0-1040" id="h70-0-1040" class="d">-}
</a><a href="#h70-0-1041" id="h70-0-1041" class="d">-
</a><a href="#h70-0-1042" id="h70-0-1042" class="d">-type Index struct {
</a><a href="#h70-0-1043" id="h70-0-1043" class="d">-	EntityType       *string           `protobuf:&quot;bytes,1,req,name=entity_type&quot; json:&quot;entity_type,omitempty&quot;`
</a><a href="#h70-0-1044" id="h70-0-1044" class="d">-	Ancestor         *bool             `protobuf:&quot;varint,5,req,name=ancestor&quot; json:&quot;ancestor,omitempty&quot;`
</a><a href="#h70-0-1045" id="h70-0-1045" class="d">-	Property         []*Index_Property `protobuf:&quot;group,2,rep,name=Property&quot; json:&quot;property,omitempty&quot;`
</a><a href="#h70-0-1046" id="h70-0-1046" class="d">-	XXX_unrecognized []byte            `json:&quot;-&quot;`
</a><a href="#h70-0-1047" id="h70-0-1047" class="d">-}
</a><a href="#h70-0-1048" id="h70-0-1048" class="d">-
</a><a href="#h70-0-1049" id="h70-0-1049" class="d">-func (m *Index) Reset()         { *m = Index{} }
</a><a href="#h70-0-1050" id="h70-0-1050" class="d">-func (m *Index) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1051" id="h70-0-1051" class="d">-func (*Index) ProtoMessage()    {}
</a><a href="#h70-0-1052" id="h70-0-1052" class="d">-
</a><a href="#h70-0-1053" id="h70-0-1053" class="d">-func (m *Index) GetEntityType() string {
</a><a href="#h70-0-1054" id="h70-0-1054" class="d">-	if m != nil &amp;&amp; m.EntityType != nil {
</a><a href="#h70-0-1055" id="h70-0-1055" class="d">-		return *m.EntityType
</a><a href="#h70-0-1056" id="h70-0-1056" class="d">-	}
</a><a href="#h70-0-1057" id="h70-0-1057" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1058" id="h70-0-1058" class="d">-}
</a><a href="#h70-0-1059" id="h70-0-1059" class="d">-
</a><a href="#h70-0-1060" id="h70-0-1060" class="d">-func (m *Index) GetAncestor() bool {
</a><a href="#h70-0-1061" id="h70-0-1061" class="d">-	if m != nil &amp;&amp; m.Ancestor != nil {
</a><a href="#h70-0-1062" id="h70-0-1062" class="d">-		return *m.Ancestor
</a><a href="#h70-0-1063" id="h70-0-1063" class="d">-	}
</a><a href="#h70-0-1064" id="h70-0-1064" class="d">-	return false
</a><a href="#h70-0-1065" id="h70-0-1065" class="d">-}
</a><a href="#h70-0-1066" id="h70-0-1066" class="d">-
</a><a href="#h70-0-1067" id="h70-0-1067" class="d">-func (m *Index) GetProperty() []*Index_Property {
</a><a href="#h70-0-1068" id="h70-0-1068" class="d">-	if m != nil {
</a><a href="#h70-0-1069" id="h70-0-1069" class="d">-		return m.Property
</a><a href="#h70-0-1070" id="h70-0-1070" class="d">-	}
</a><a href="#h70-0-1071" id="h70-0-1071" class="d">-	return nil
</a><a href="#h70-0-1072" id="h70-0-1072" class="d">-}
</a><a href="#h70-0-1073" id="h70-0-1073" class="d">-
</a><a href="#h70-0-1074" id="h70-0-1074" class="d">-type Index_Property struct {
</a><a href="#h70-0-1075" id="h70-0-1075" class="d">-	Name             *string                   `protobuf:&quot;bytes,3,req,name=name&quot; json:&quot;name,omitempty&quot;`
</a><a href="#h70-0-1076" id="h70-0-1076" class="d">-	Direction        *Index_Property_Direction `protobuf:&quot;varint,4,opt,name=direction,enum=appengine.Index_Property_Direction,def=1&quot; json:&quot;direction,omitempty&quot;`
</a><a href="#h70-0-1077" id="h70-0-1077" class="d">-	XXX_unrecognized []byte                    `json:&quot;-&quot;`
</a><a href="#h70-0-1078" id="h70-0-1078" class="d">-}
</a><a href="#h70-0-1079" id="h70-0-1079" class="d">-
</a><a href="#h70-0-1080" id="h70-0-1080" class="d">-func (m *Index_Property) Reset()         { *m = Index_Property{} }
</a><a href="#h70-0-1081" id="h70-0-1081" class="d">-func (m *Index_Property) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1082" id="h70-0-1082" class="d">-func (*Index_Property) ProtoMessage()    {}
</a><a href="#h70-0-1083" id="h70-0-1083" class="d">-
</a><a href="#h70-0-1084" id="h70-0-1084" class="d">-const Default_Index_Property_Direction Index_Property_Direction = Index_Property_ASCENDING
</a><a href="#h70-0-1085" id="h70-0-1085" class="d">-
</a><a href="#h70-0-1086" id="h70-0-1086" class="d">-func (m *Index_Property) GetName() string {
</a><a href="#h70-0-1087" id="h70-0-1087" class="d">-	if m != nil &amp;&amp; m.Name != nil {
</a><a href="#h70-0-1088" id="h70-0-1088" class="d">-		return *m.Name
</a><a href="#h70-0-1089" id="h70-0-1089" class="d">-	}
</a><a href="#h70-0-1090" id="h70-0-1090" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1091" id="h70-0-1091" class="d">-}
</a><a href="#h70-0-1092" id="h70-0-1092" class="d">-
</a><a href="#h70-0-1093" id="h70-0-1093" class="d">-func (m *Index_Property) GetDirection() Index_Property_Direction {
</a><a href="#h70-0-1094" id="h70-0-1094" class="d">-	if m != nil &amp;&amp; m.Direction != nil {
</a><a href="#h70-0-1095" id="h70-0-1095" class="d">-		return *m.Direction
</a><a href="#h70-0-1096" id="h70-0-1096" class="d">-	}
</a><a href="#h70-0-1097" id="h70-0-1097" class="d">-	return Default_Index_Property_Direction
</a><a href="#h70-0-1098" id="h70-0-1098" class="d">-}
</a><a href="#h70-0-1099" id="h70-0-1099" class="d">-
</a><a href="#h70-0-1100" id="h70-0-1100" class="d">-type CompositeIndex struct {
</a><a href="#h70-0-1101" id="h70-0-1101" class="d">-	AppId             *string               `protobuf:&quot;bytes,1,req,name=app_id&quot; json:&quot;app_id,omitempty&quot;`
</a><a href="#h70-0-1102" id="h70-0-1102" class="d">-	Id                *int64                `protobuf:&quot;varint,2,req,name=id&quot; json:&quot;id,omitempty&quot;`
</a><a href="#h70-0-1103" id="h70-0-1103" class="d">-	Definition        *Index                `protobuf:&quot;bytes,3,req,name=definition&quot; json:&quot;definition,omitempty&quot;`
</a><a href="#h70-0-1104" id="h70-0-1104" class="d">-	State             *CompositeIndex_State `protobuf:&quot;varint,4,req,name=state,enum=appengine.CompositeIndex_State&quot; json:&quot;state,omitempty&quot;`
</a><a href="#h70-0-1105" id="h70-0-1105" class="d">-	OnlyUseIfRequired *bool                 `protobuf:&quot;varint,6,opt,name=only_use_if_required,def=0&quot; json:&quot;only_use_if_required,omitempty&quot;`
</a><a href="#h70-0-1106" id="h70-0-1106" class="d">-	XXX_unrecognized  []byte                `json:&quot;-&quot;`
</a><a href="#h70-0-1107" id="h70-0-1107" class="d">-}
</a><a href="#h70-0-1108" id="h70-0-1108" class="d">-
</a><a href="#h70-0-1109" id="h70-0-1109" class="d">-func (m *CompositeIndex) Reset()         { *m = CompositeIndex{} }
</a><a href="#h70-0-1110" id="h70-0-1110" class="d">-func (m *CompositeIndex) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1111" id="h70-0-1111" class="d">-func (*CompositeIndex) ProtoMessage()    {}
</a><a href="#h70-0-1112" id="h70-0-1112" class="d">-
</a><a href="#h70-0-1113" id="h70-0-1113" class="d">-const Default_CompositeIndex_OnlyUseIfRequired bool = false
</a><a href="#h70-0-1114" id="h70-0-1114" class="d">-
</a><a href="#h70-0-1115" id="h70-0-1115" class="d">-func (m *CompositeIndex) GetAppId() string {
</a><a href="#h70-0-1116" id="h70-0-1116" class="d">-	if m != nil &amp;&amp; m.AppId != nil {
</a><a href="#h70-0-1117" id="h70-0-1117" class="d">-		return *m.AppId
</a><a href="#h70-0-1118" id="h70-0-1118" class="d">-	}
</a><a href="#h70-0-1119" id="h70-0-1119" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1120" id="h70-0-1120" class="d">-}
</a><a href="#h70-0-1121" id="h70-0-1121" class="d">-
</a><a href="#h70-0-1122" id="h70-0-1122" class="d">-func (m *CompositeIndex) GetId() int64 {
</a><a href="#h70-0-1123" id="h70-0-1123" class="d">-	if m != nil &amp;&amp; m.Id != nil {
</a><a href="#h70-0-1124" id="h70-0-1124" class="d">-		return *m.Id
</a><a href="#h70-0-1125" id="h70-0-1125" class="d">-	}
</a><a href="#h70-0-1126" id="h70-0-1126" class="d">-	return 0
</a><a href="#h70-0-1127" id="h70-0-1127" class="d">-}
</a><a href="#h70-0-1128" id="h70-0-1128" class="d">-
</a><a href="#h70-0-1129" id="h70-0-1129" class="d">-func (m *CompositeIndex) GetDefinition() *Index {
</a><a href="#h70-0-1130" id="h70-0-1130" class="d">-	if m != nil {
</a><a href="#h70-0-1131" id="h70-0-1131" class="d">-		return m.Definition
</a><a href="#h70-0-1132" id="h70-0-1132" class="d">-	}
</a><a href="#h70-0-1133" id="h70-0-1133" class="d">-	return nil
</a><a href="#h70-0-1134" id="h70-0-1134" class="d">-}
</a><a href="#h70-0-1135" id="h70-0-1135" class="d">-
</a><a href="#h70-0-1136" id="h70-0-1136" class="d">-func (m *CompositeIndex) GetState() CompositeIndex_State {
</a><a href="#h70-0-1137" id="h70-0-1137" class="d">-	if m != nil &amp;&amp; m.State != nil {
</a><a href="#h70-0-1138" id="h70-0-1138" class="d">-		return *m.State
</a><a href="#h70-0-1139" id="h70-0-1139" class="d">-	}
</a><a href="#h70-0-1140" id="h70-0-1140" class="d">-	return CompositeIndex_WRITE_ONLY
</a><a href="#h70-0-1141" id="h70-0-1141" class="d">-}
</a><a href="#h70-0-1142" id="h70-0-1142" class="d">-
</a><a href="#h70-0-1143" id="h70-0-1143" class="d">-func (m *CompositeIndex) GetOnlyUseIfRequired() bool {
</a><a href="#h70-0-1144" id="h70-0-1144" class="d">-	if m != nil &amp;&amp; m.OnlyUseIfRequired != nil {
</a><a href="#h70-0-1145" id="h70-0-1145" class="d">-		return *m.OnlyUseIfRequired
</a><a href="#h70-0-1146" id="h70-0-1146" class="d">-	}
</a><a href="#h70-0-1147" id="h70-0-1147" class="d">-	return Default_CompositeIndex_OnlyUseIfRequired
</a><a href="#h70-0-1148" id="h70-0-1148" class="d">-}
</a><a href="#h70-0-1149" id="h70-0-1149" class="d">-
</a><a href="#h70-0-1150" id="h70-0-1150" class="d">-type IndexPostfix struct {
</a><a href="#h70-0-1151" id="h70-0-1151" class="d">-	IndexValue       []*IndexPostfix_IndexValue `protobuf:&quot;bytes,1,rep,name=index_value&quot; json:&quot;index_value,omitempty&quot;`
</a><a href="#h70-0-1152" id="h70-0-1152" class="d">-	Key              *Reference                 `protobuf:&quot;bytes,2,opt,name=key&quot; json:&quot;key,omitempty&quot;`
</a><a href="#h70-0-1153" id="h70-0-1153" class="d">-	Before           *bool                      `protobuf:&quot;varint,3,opt,name=before,def=1&quot; json:&quot;before,omitempty&quot;`
</a><a href="#h70-0-1154" id="h70-0-1154" class="d">-	XXX_unrecognized []byte                     `json:&quot;-&quot;`
</a><a href="#h70-0-1155" id="h70-0-1155" class="d">-}
</a><a href="#h70-0-1156" id="h70-0-1156" class="d">-
</a><a href="#h70-0-1157" id="h70-0-1157" class="d">-func (m *IndexPostfix) Reset()         { *m = IndexPostfix{} }
</a><a href="#h70-0-1158" id="h70-0-1158" class="d">-func (m *IndexPostfix) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1159" id="h70-0-1159" class="d">-func (*IndexPostfix) ProtoMessage()    {}
</a><a href="#h70-0-1160" id="h70-0-1160" class="d">-
</a><a href="#h70-0-1161" id="h70-0-1161" class="d">-const Default_IndexPostfix_Before bool = true
</a><a href="#h70-0-1162" id="h70-0-1162" class="d">-
</a><a href="#h70-0-1163" id="h70-0-1163" class="d">-func (m *IndexPostfix) GetIndexValue() []*IndexPostfix_IndexValue {
</a><a href="#h70-0-1164" id="h70-0-1164" class="d">-	if m != nil {
</a><a href="#h70-0-1165" id="h70-0-1165" class="d">-		return m.IndexValue
</a><a href="#h70-0-1166" id="h70-0-1166" class="d">-	}
</a><a href="#h70-0-1167" id="h70-0-1167" class="d">-	return nil
</a><a href="#h70-0-1168" id="h70-0-1168" class="d">-}
</a><a href="#h70-0-1169" id="h70-0-1169" class="d">-
</a><a href="#h70-0-1170" id="h70-0-1170" class="d">-func (m *IndexPostfix) GetKey() *Reference {
</a><a href="#h70-0-1171" id="h70-0-1171" class="d">-	if m != nil {
</a><a href="#h70-0-1172" id="h70-0-1172" class="d">-		return m.Key
</a><a href="#h70-0-1173" id="h70-0-1173" class="d">-	}
</a><a href="#h70-0-1174" id="h70-0-1174" class="d">-	return nil
</a><a href="#h70-0-1175" id="h70-0-1175" class="d">-}
</a><a href="#h70-0-1176" id="h70-0-1176" class="d">-
</a><a href="#h70-0-1177" id="h70-0-1177" class="d">-func (m *IndexPostfix) GetBefore() bool {
</a><a href="#h70-0-1178" id="h70-0-1178" class="d">-	if m != nil &amp;&amp; m.Before != nil {
</a><a href="#h70-0-1179" id="h70-0-1179" class="d">-		return *m.Before
</a><a href="#h70-0-1180" id="h70-0-1180" class="d">-	}
</a><a href="#h70-0-1181" id="h70-0-1181" class="d">-	return Default_IndexPostfix_Before
</a><a href="#h70-0-1182" id="h70-0-1182" class="d">-}
</a><a href="#h70-0-1183" id="h70-0-1183" class="d">-
</a><a href="#h70-0-1184" id="h70-0-1184" class="d">-type IndexPostfix_IndexValue struct {
</a><a href="#h70-0-1185" id="h70-0-1185" class="d">-	PropertyName     *string        `protobuf:&quot;bytes,1,req,name=property_name&quot; json:&quot;property_name,omitempty&quot;`
</a><a href="#h70-0-1186" id="h70-0-1186" class="d">-	Value            *PropertyValue `protobuf:&quot;bytes,2,req,name=value&quot; json:&quot;value,omitempty&quot;`
</a><a href="#h70-0-1187" id="h70-0-1187" class="d">-	XXX_unrecognized []byte         `json:&quot;-&quot;`
</a><a href="#h70-0-1188" id="h70-0-1188" class="d">-}
</a><a href="#h70-0-1189" id="h70-0-1189" class="d">-
</a><a href="#h70-0-1190" id="h70-0-1190" class="d">-func (m *IndexPostfix_IndexValue) Reset()         { *m = IndexPostfix_IndexValue{} }
</a><a href="#h70-0-1191" id="h70-0-1191" class="d">-func (m *IndexPostfix_IndexValue) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1192" id="h70-0-1192" class="d">-func (*IndexPostfix_IndexValue) ProtoMessage()    {}
</a><a href="#h70-0-1193" id="h70-0-1193" class="d">-
</a><a href="#h70-0-1194" id="h70-0-1194" class="d">-func (m *IndexPostfix_IndexValue) GetPropertyName() string {
</a><a href="#h70-0-1195" id="h70-0-1195" class="d">-	if m != nil &amp;&amp; m.PropertyName != nil {
</a><a href="#h70-0-1196" id="h70-0-1196" class="d">-		return *m.PropertyName
</a><a href="#h70-0-1197" id="h70-0-1197" class="d">-	}
</a><a href="#h70-0-1198" id="h70-0-1198" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1199" id="h70-0-1199" class="d">-}
</a><a href="#h70-0-1200" id="h70-0-1200" class="d">-
</a><a href="#h70-0-1201" id="h70-0-1201" class="d">-func (m *IndexPostfix_IndexValue) GetValue() *PropertyValue {
</a><a href="#h70-0-1202" id="h70-0-1202" class="d">-	if m != nil {
</a><a href="#h70-0-1203" id="h70-0-1203" class="d">-		return m.Value
</a><a href="#h70-0-1204" id="h70-0-1204" class="d">-	}
</a><a href="#h70-0-1205" id="h70-0-1205" class="d">-	return nil
</a><a href="#h70-0-1206" id="h70-0-1206" class="d">-}
</a><a href="#h70-0-1207" id="h70-0-1207" class="d">-
</a><a href="#h70-0-1208" id="h70-0-1208" class="d">-type IndexPosition struct {
</a><a href="#h70-0-1209" id="h70-0-1209" class="d">-	Key              *string `protobuf:&quot;bytes,1,opt,name=key&quot; json:&quot;key,omitempty&quot;`
</a><a href="#h70-0-1210" id="h70-0-1210" class="d">-	Before           *bool   `protobuf:&quot;varint,2,opt,name=before,def=1&quot; json:&quot;before,omitempty&quot;`
</a><a href="#h70-0-1211" id="h70-0-1211" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h70-0-1212" id="h70-0-1212" class="d">-}
</a><a href="#h70-0-1213" id="h70-0-1213" class="d">-
</a><a href="#h70-0-1214" id="h70-0-1214" class="d">-func (m *IndexPosition) Reset()         { *m = IndexPosition{} }
</a><a href="#h70-0-1215" id="h70-0-1215" class="d">-func (m *IndexPosition) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1216" id="h70-0-1216" class="d">-func (*IndexPosition) ProtoMessage()    {}
</a><a href="#h70-0-1217" id="h70-0-1217" class="d">-
</a><a href="#h70-0-1218" id="h70-0-1218" class="d">-const Default_IndexPosition_Before bool = true
</a><a href="#h70-0-1219" id="h70-0-1219" class="d">-
</a><a href="#h70-0-1220" id="h70-0-1220" class="d">-func (m *IndexPosition) GetKey() string {
</a><a href="#h70-0-1221" id="h70-0-1221" class="d">-	if m != nil &amp;&amp; m.Key != nil {
</a><a href="#h70-0-1222" id="h70-0-1222" class="d">-		return *m.Key
</a><a href="#h70-0-1223" id="h70-0-1223" class="d">-	}
</a><a href="#h70-0-1224" id="h70-0-1224" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1225" id="h70-0-1225" class="d">-}
</a><a href="#h70-0-1226" id="h70-0-1226" class="d">-
</a><a href="#h70-0-1227" id="h70-0-1227" class="d">-func (m *IndexPosition) GetBefore() bool {
</a><a href="#h70-0-1228" id="h70-0-1228" class="d">-	if m != nil &amp;&amp; m.Before != nil {
</a><a href="#h70-0-1229" id="h70-0-1229" class="d">-		return *m.Before
</a><a href="#h70-0-1230" id="h70-0-1230" class="d">-	}
</a><a href="#h70-0-1231" id="h70-0-1231" class="d">-	return Default_IndexPosition_Before
</a><a href="#h70-0-1232" id="h70-0-1232" class="d">-}
</a><a href="#h70-0-1233" id="h70-0-1233" class="d">-
</a><a href="#h70-0-1234" id="h70-0-1234" class="d">-type Snapshot struct {
</a><a href="#h70-0-1235" id="h70-0-1235" class="d">-	Ts               *int64 `protobuf:&quot;varint,1,req,name=ts&quot; json:&quot;ts,omitempty&quot;`
</a><a href="#h70-0-1236" id="h70-0-1236" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h70-0-1237" id="h70-0-1237" class="d">-}
</a><a href="#h70-0-1238" id="h70-0-1238" class="d">-
</a><a href="#h70-0-1239" id="h70-0-1239" class="d">-func (m *Snapshot) Reset()         { *m = Snapshot{} }
</a><a href="#h70-0-1240" id="h70-0-1240" class="d">-func (m *Snapshot) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1241" id="h70-0-1241" class="d">-func (*Snapshot) ProtoMessage()    {}
</a><a href="#h70-0-1242" id="h70-0-1242" class="d">-
</a><a href="#h70-0-1243" id="h70-0-1243" class="d">-func (m *Snapshot) GetTs() int64 {
</a><a href="#h70-0-1244" id="h70-0-1244" class="d">-	if m != nil &amp;&amp; m.Ts != nil {
</a><a href="#h70-0-1245" id="h70-0-1245" class="d">-		return *m.Ts
</a><a href="#h70-0-1246" id="h70-0-1246" class="d">-	}
</a><a href="#h70-0-1247" id="h70-0-1247" class="d">-	return 0
</a><a href="#h70-0-1248" id="h70-0-1248" class="d">-}
</a><a href="#h70-0-1249" id="h70-0-1249" class="d">-
</a><a href="#h70-0-1250" id="h70-0-1250" class="d">-type InternalHeader struct {
</a><a href="#h70-0-1251" id="h70-0-1251" class="d">-	Qos              *string `protobuf:&quot;bytes,1,opt,name=qos&quot; json:&quot;qos,omitempty&quot;`
</a><a href="#h70-0-1252" id="h70-0-1252" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h70-0-1253" id="h70-0-1253" class="d">-}
</a><a href="#h70-0-1254" id="h70-0-1254" class="d">-
</a><a href="#h70-0-1255" id="h70-0-1255" class="d">-func (m *InternalHeader) Reset()         { *m = InternalHeader{} }
</a><a href="#h70-0-1256" id="h70-0-1256" class="d">-func (m *InternalHeader) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1257" id="h70-0-1257" class="d">-func (*InternalHeader) ProtoMessage()    {}
</a><a href="#h70-0-1258" id="h70-0-1258" class="d">-
</a><a href="#h70-0-1259" id="h70-0-1259" class="d">-func (m *InternalHeader) GetQos() string {
</a><a href="#h70-0-1260" id="h70-0-1260" class="d">-	if m != nil &amp;&amp; m.Qos != nil {
</a><a href="#h70-0-1261" id="h70-0-1261" class="d">-		return *m.Qos
</a><a href="#h70-0-1262" id="h70-0-1262" class="d">-	}
</a><a href="#h70-0-1263" id="h70-0-1263" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1264" id="h70-0-1264" class="d">-}
</a><a href="#h70-0-1265" id="h70-0-1265" class="d">-
</a><a href="#h70-0-1266" id="h70-0-1266" class="d">-type Transaction struct {
</a><a href="#h70-0-1267" id="h70-0-1267" class="d">-	Header           *InternalHeader `protobuf:&quot;bytes,4,opt,name=header&quot; json:&quot;header,omitempty&quot;`
</a><a href="#h70-0-1268" id="h70-0-1268" class="d">-	Handle           *uint64         `protobuf:&quot;fixed64,1,req,name=handle&quot; json:&quot;handle,omitempty&quot;`
</a><a href="#h70-0-1269" id="h70-0-1269" class="d">-	App              *string         `protobuf:&quot;bytes,2,req,name=app&quot; json:&quot;app,omitempty&quot;`
</a><a href="#h70-0-1270" id="h70-0-1270" class="d">-	MarkChanges      *bool           `protobuf:&quot;varint,3,opt,name=mark_changes,def=0&quot; json:&quot;mark_changes,omitempty&quot;`
</a><a href="#h70-0-1271" id="h70-0-1271" class="d">-	XXX_unrecognized []byte          `json:&quot;-&quot;`
</a><a href="#h70-0-1272" id="h70-0-1272" class="d">-}
</a><a href="#h70-0-1273" id="h70-0-1273" class="d">-
</a><a href="#h70-0-1274" id="h70-0-1274" class="d">-func (m *Transaction) Reset()         { *m = Transaction{} }
</a><a href="#h70-0-1275" id="h70-0-1275" class="d">-func (m *Transaction) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1276" id="h70-0-1276" class="d">-func (*Transaction) ProtoMessage()    {}
</a><a href="#h70-0-1277" id="h70-0-1277" class="d">-
</a><a href="#h70-0-1278" id="h70-0-1278" class="d">-const Default_Transaction_MarkChanges bool = false
</a><a href="#h70-0-1279" id="h70-0-1279" class="d">-
</a><a href="#h70-0-1280" id="h70-0-1280" class="d">-func (m *Transaction) GetHeader() *InternalHeader {
</a><a href="#h70-0-1281" id="h70-0-1281" class="d">-	if m != nil {
</a><a href="#h70-0-1282" id="h70-0-1282" class="d">-		return m.Header
</a><a href="#h70-0-1283" id="h70-0-1283" class="d">-	}
</a><a href="#h70-0-1284" id="h70-0-1284" class="d">-	return nil
</a><a href="#h70-0-1285" id="h70-0-1285" class="d">-}
</a><a href="#h70-0-1286" id="h70-0-1286" class="d">-
</a><a href="#h70-0-1287" id="h70-0-1287" class="d">-func (m *Transaction) GetHandle() uint64 {
</a><a href="#h70-0-1288" id="h70-0-1288" class="d">-	if m != nil &amp;&amp; m.Handle != nil {
</a><a href="#h70-0-1289" id="h70-0-1289" class="d">-		return *m.Handle
</a><a href="#h70-0-1290" id="h70-0-1290" class="d">-	}
</a><a href="#h70-0-1291" id="h70-0-1291" class="d">-	return 0
</a><a href="#h70-0-1292" id="h70-0-1292" class="d">-}
</a><a href="#h70-0-1293" id="h70-0-1293" class="d">-
</a><a href="#h70-0-1294" id="h70-0-1294" class="d">-func (m *Transaction) GetApp() string {
</a><a href="#h70-0-1295" id="h70-0-1295" class="d">-	if m != nil &amp;&amp; m.App != nil {
</a><a href="#h70-0-1296" id="h70-0-1296" class="d">-		return *m.App
</a><a href="#h70-0-1297" id="h70-0-1297" class="d">-	}
</a><a href="#h70-0-1298" id="h70-0-1298" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1299" id="h70-0-1299" class="d">-}
</a><a href="#h70-0-1300" id="h70-0-1300" class="d">-
</a><a href="#h70-0-1301" id="h70-0-1301" class="d">-func (m *Transaction) GetMarkChanges() bool {
</a><a href="#h70-0-1302" id="h70-0-1302" class="d">-	if m != nil &amp;&amp; m.MarkChanges != nil {
</a><a href="#h70-0-1303" id="h70-0-1303" class="d">-		return *m.MarkChanges
</a><a href="#h70-0-1304" id="h70-0-1304" class="d">-	}
</a><a href="#h70-0-1305" id="h70-0-1305" class="d">-	return Default_Transaction_MarkChanges
</a><a href="#h70-0-1306" id="h70-0-1306" class="d">-}
</a><a href="#h70-0-1307" id="h70-0-1307" class="d">-
</a><a href="#h70-0-1308" id="h70-0-1308" class="d">-type Query struct {
</a><a href="#h70-0-1309" id="h70-0-1309" class="d">-	Header              *InternalHeader   `protobuf:&quot;bytes,39,opt,name=header&quot; json:&quot;header,omitempty&quot;`
</a><a href="#h70-0-1310" id="h70-0-1310" class="d">-	App                 *string           `protobuf:&quot;bytes,1,req,name=app&quot; json:&quot;app,omitempty&quot;`
</a><a href="#h70-0-1311" id="h70-0-1311" class="d">-	NameSpace           *string           `protobuf:&quot;bytes,29,opt,name=name_space&quot; json:&quot;name_space,omitempty&quot;`
</a><a href="#h70-0-1312" id="h70-0-1312" class="d">-	Kind                *string           `protobuf:&quot;bytes,3,opt,name=kind&quot; json:&quot;kind,omitempty&quot;`
</a><a href="#h70-0-1313" id="h70-0-1313" class="d">-	Ancestor            *Reference        `protobuf:&quot;bytes,17,opt,name=ancestor&quot; json:&quot;ancestor,omitempty&quot;`
</a><a href="#h70-0-1314" id="h70-0-1314" class="d">-	Filter              []*Query_Filter   `protobuf:&quot;group,4,rep,name=Filter&quot; json:&quot;filter,omitempty&quot;`
</a><a href="#h70-0-1315" id="h70-0-1315" class="d">-	SearchQuery         *string           `protobuf:&quot;bytes,8,opt,name=search_query&quot; json:&quot;search_query,omitempty&quot;`
</a><a href="#h70-0-1316" id="h70-0-1316" class="d">-	Order               []*Query_Order    `protobuf:&quot;group,9,rep,name=Order&quot; json:&quot;order,omitempty&quot;`
</a><a href="#h70-0-1317" id="h70-0-1317" class="d">-	Hint                *Query_Hint       `protobuf:&quot;varint,18,opt,name=hint,enum=appengine.Query_Hint&quot; json:&quot;hint,omitempty&quot;`
</a><a href="#h70-0-1318" id="h70-0-1318" class="d">-	Count               *int32            `protobuf:&quot;varint,23,opt,name=count&quot; json:&quot;count,omitempty&quot;`
</a><a href="#h70-0-1319" id="h70-0-1319" class="d">-	Offset              *int32            `protobuf:&quot;varint,12,opt,name=offset,def=0&quot; json:&quot;offset,omitempty&quot;`
</a><a href="#h70-0-1320" id="h70-0-1320" class="d">-	Limit               *int32            `protobuf:&quot;varint,16,opt,name=limit&quot; json:&quot;limit,omitempty&quot;`
</a><a href="#h70-0-1321" id="h70-0-1321" class="d">-	CompiledCursor      *CompiledCursor   `protobuf:&quot;bytes,30,opt,name=compiled_cursor&quot; json:&quot;compiled_cursor,omitempty&quot;`
</a><a href="#h70-0-1322" id="h70-0-1322" class="d">-	EndCompiledCursor   *CompiledCursor   `protobuf:&quot;bytes,31,opt,name=end_compiled_cursor&quot; json:&quot;end_compiled_cursor,omitempty&quot;`
</a><a href="#h70-0-1323" id="h70-0-1323" class="d">-	CompositeIndex      []*CompositeIndex `protobuf:&quot;bytes,19,rep,name=composite_index&quot; json:&quot;composite_index,omitempty&quot;`
</a><a href="#h70-0-1324" id="h70-0-1324" class="d">-	RequirePerfectPlan  *bool             `protobuf:&quot;varint,20,opt,name=require_perfect_plan,def=0&quot; json:&quot;require_perfect_plan,omitempty&quot;`
</a><a href="#h70-0-1325" id="h70-0-1325" class="d">-	KeysOnly            *bool             `protobuf:&quot;varint,21,opt,name=keys_only,def=0&quot; json:&quot;keys_only,omitempty&quot;`
</a><a href="#h70-0-1326" id="h70-0-1326" class="d">-	Transaction         *Transaction      `protobuf:&quot;bytes,22,opt,name=transaction&quot; json:&quot;transaction,omitempty&quot;`
</a><a href="#h70-0-1327" id="h70-0-1327" class="d">-	Compile             *bool             `protobuf:&quot;varint,25,opt,name=compile,def=0&quot; json:&quot;compile,omitempty&quot;`
</a><a href="#h70-0-1328" id="h70-0-1328" class="d">-	FailoverMs          *int64            `protobuf:&quot;varint,26,opt,name=failover_ms&quot; json:&quot;failover_ms,omitempty&quot;`
</a><a href="#h70-0-1329" id="h70-0-1329" class="d">-	Strong              *bool             `protobuf:&quot;varint,32,opt,name=strong&quot; json:&quot;strong,omitempty&quot;`
</a><a href="#h70-0-1330" id="h70-0-1330" class="d">-	PropertyName        []string          `protobuf:&quot;bytes,33,rep,name=property_name&quot; json:&quot;property_name,omitempty&quot;`
</a><a href="#h70-0-1331" id="h70-0-1331" class="d">-	GroupByPropertyName []string          `protobuf:&quot;bytes,34,rep,name=group_by_property_name&quot; json:&quot;group_by_property_name,omitempty&quot;`
</a><a href="#h70-0-1332" id="h70-0-1332" class="d">-	Distinct            *bool             `protobuf:&quot;varint,24,opt,name=distinct&quot; json:&quot;distinct,omitempty&quot;`
</a><a href="#h70-0-1333" id="h70-0-1333" class="d">-	MinSafeTimeSeconds  *int64            `protobuf:&quot;varint,35,opt,name=min_safe_time_seconds&quot; json:&quot;min_safe_time_seconds,omitempty&quot;`
</a><a href="#h70-0-1334" id="h70-0-1334" class="d">-	SafeReplicaName     []string          `protobuf:&quot;bytes,36,rep,name=safe_replica_name&quot; json:&quot;safe_replica_name,omitempty&quot;`
</a><a href="#h70-0-1335" id="h70-0-1335" class="d">-	PersistOffset       *bool             `protobuf:&quot;varint,37,opt,name=persist_offset,def=0&quot; json:&quot;persist_offset,omitempty&quot;`
</a><a href="#h70-0-1336" id="h70-0-1336" class="d">-	XXX_unrecognized    []byte            `json:&quot;-&quot;`
</a><a href="#h70-0-1337" id="h70-0-1337" class="d">-}
</a><a href="#h70-0-1338" id="h70-0-1338" class="d">-
</a><a href="#h70-0-1339" id="h70-0-1339" class="d">-func (m *Query) Reset()         { *m = Query{} }
</a><a href="#h70-0-1340" id="h70-0-1340" class="d">-func (m *Query) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1341" id="h70-0-1341" class="d">-func (*Query) ProtoMessage()    {}
</a><a href="#h70-0-1342" id="h70-0-1342" class="d">-
</a><a href="#h70-0-1343" id="h70-0-1343" class="d">-const Default_Query_Offset int32 = 0
</a><a href="#h70-0-1344" id="h70-0-1344" class="d">-const Default_Query_RequirePerfectPlan bool = false
</a><a href="#h70-0-1345" id="h70-0-1345" class="d">-const Default_Query_KeysOnly bool = false
</a><a href="#h70-0-1346" id="h70-0-1346" class="d">-const Default_Query_Compile bool = false
</a><a href="#h70-0-1347" id="h70-0-1347" class="d">-const Default_Query_PersistOffset bool = false
</a><a href="#h70-0-1348" id="h70-0-1348" class="d">-
</a><a href="#h70-0-1349" id="h70-0-1349" class="d">-func (m *Query) GetHeader() *InternalHeader {
</a><a href="#h70-0-1350" id="h70-0-1350" class="d">-	if m != nil {
</a><a href="#h70-0-1351" id="h70-0-1351" class="d">-		return m.Header
</a><a href="#h70-0-1352" id="h70-0-1352" class="d">-	}
</a><a href="#h70-0-1353" id="h70-0-1353" class="d">-	return nil
</a><a href="#h70-0-1354" id="h70-0-1354" class="d">-}
</a><a href="#h70-0-1355" id="h70-0-1355" class="d">-
</a><a href="#h70-0-1356" id="h70-0-1356" class="d">-func (m *Query) GetApp() string {
</a><a href="#h70-0-1357" id="h70-0-1357" class="d">-	if m != nil &amp;&amp; m.App != nil {
</a><a href="#h70-0-1358" id="h70-0-1358" class="d">-		return *m.App
</a><a href="#h70-0-1359" id="h70-0-1359" class="d">-	}
</a><a href="#h70-0-1360" id="h70-0-1360" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1361" id="h70-0-1361" class="d">-}
</a><a href="#h70-0-1362" id="h70-0-1362" class="d">-
</a><a href="#h70-0-1363" id="h70-0-1363" class="d">-func (m *Query) GetNameSpace() string {
</a><a href="#h70-0-1364" id="h70-0-1364" class="d">-	if m != nil &amp;&amp; m.NameSpace != nil {
</a><a href="#h70-0-1365" id="h70-0-1365" class="d">-		return *m.NameSpace
</a><a href="#h70-0-1366" id="h70-0-1366" class="d">-	}
</a><a href="#h70-0-1367" id="h70-0-1367" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1368" id="h70-0-1368" class="d">-}
</a><a href="#h70-0-1369" id="h70-0-1369" class="d">-
</a><a href="#h70-0-1370" id="h70-0-1370" class="d">-func (m *Query) GetKind() string {
</a><a href="#h70-0-1371" id="h70-0-1371" class="d">-	if m != nil &amp;&amp; m.Kind != nil {
</a><a href="#h70-0-1372" id="h70-0-1372" class="d">-		return *m.Kind
</a><a href="#h70-0-1373" id="h70-0-1373" class="d">-	}
</a><a href="#h70-0-1374" id="h70-0-1374" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1375" id="h70-0-1375" class="d">-}
</a><a href="#h70-0-1376" id="h70-0-1376" class="d">-
</a><a href="#h70-0-1377" id="h70-0-1377" class="d">-func (m *Query) GetAncestor() *Reference {
</a><a href="#h70-0-1378" id="h70-0-1378" class="d">-	if m != nil {
</a><a href="#h70-0-1379" id="h70-0-1379" class="d">-		return m.Ancestor
</a><a href="#h70-0-1380" id="h70-0-1380" class="d">-	}
</a><a href="#h70-0-1381" id="h70-0-1381" class="d">-	return nil
</a><a href="#h70-0-1382" id="h70-0-1382" class="d">-}
</a><a href="#h70-0-1383" id="h70-0-1383" class="d">-
</a><a href="#h70-0-1384" id="h70-0-1384" class="d">-func (m *Query) GetFilter() []*Query_Filter {
</a><a href="#h70-0-1385" id="h70-0-1385" class="d">-	if m != nil {
</a><a href="#h70-0-1386" id="h70-0-1386" class="d">-		return m.Filter
</a><a href="#h70-0-1387" id="h70-0-1387" class="d">-	}
</a><a href="#h70-0-1388" id="h70-0-1388" class="d">-	return nil
</a><a href="#h70-0-1389" id="h70-0-1389" class="d">-}
</a><a href="#h70-0-1390" id="h70-0-1390" class="d">-
</a><a href="#h70-0-1391" id="h70-0-1391" class="d">-func (m *Query) GetSearchQuery() string {
</a><a href="#h70-0-1392" id="h70-0-1392" class="d">-	if m != nil &amp;&amp; m.SearchQuery != nil {
</a><a href="#h70-0-1393" id="h70-0-1393" class="d">-		return *m.SearchQuery
</a><a href="#h70-0-1394" id="h70-0-1394" class="d">-	}
</a><a href="#h70-0-1395" id="h70-0-1395" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1396" id="h70-0-1396" class="d">-}
</a><a href="#h70-0-1397" id="h70-0-1397" class="d">-
</a><a href="#h70-0-1398" id="h70-0-1398" class="d">-func (m *Query) GetOrder() []*Query_Order {
</a><a href="#h70-0-1399" id="h70-0-1399" class="d">-	if m != nil {
</a><a href="#h70-0-1400" id="h70-0-1400" class="d">-		return m.Order
</a><a href="#h70-0-1401" id="h70-0-1401" class="d">-	}
</a><a href="#h70-0-1402" id="h70-0-1402" class="d">-	return nil
</a><a href="#h70-0-1403" id="h70-0-1403" class="d">-}
</a><a href="#h70-0-1404" id="h70-0-1404" class="d">-
</a><a href="#h70-0-1405" id="h70-0-1405" class="d">-func (m *Query) GetHint() Query_Hint {
</a><a href="#h70-0-1406" id="h70-0-1406" class="d">-	if m != nil &amp;&amp; m.Hint != nil {
</a><a href="#h70-0-1407" id="h70-0-1407" class="d">-		return *m.Hint
</a><a href="#h70-0-1408" id="h70-0-1408" class="d">-	}
</a><a href="#h70-0-1409" id="h70-0-1409" class="d">-	return Query_ORDER_FIRST
</a><a href="#h70-0-1410" id="h70-0-1410" class="d">-}
</a><a href="#h70-0-1411" id="h70-0-1411" class="d">-
</a><a href="#h70-0-1412" id="h70-0-1412" class="d">-func (m *Query) GetCount() int32 {
</a><a href="#h70-0-1413" id="h70-0-1413" class="d">-	if m != nil &amp;&amp; m.Count != nil {
</a><a href="#h70-0-1414" id="h70-0-1414" class="d">-		return *m.Count
</a><a href="#h70-0-1415" id="h70-0-1415" class="d">-	}
</a><a href="#h70-0-1416" id="h70-0-1416" class="d">-	return 0
</a><a href="#h70-0-1417" id="h70-0-1417" class="d">-}
</a><a href="#h70-0-1418" id="h70-0-1418" class="d">-
</a><a href="#h70-0-1419" id="h70-0-1419" class="d">-func (m *Query) GetOffset() int32 {
</a><a href="#h70-0-1420" id="h70-0-1420" class="d">-	if m != nil &amp;&amp; m.Offset != nil {
</a><a href="#h70-0-1421" id="h70-0-1421" class="d">-		return *m.Offset
</a><a href="#h70-0-1422" id="h70-0-1422" class="d">-	}
</a><a href="#h70-0-1423" id="h70-0-1423" class="d">-	return Default_Query_Offset
</a><a href="#h70-0-1424" id="h70-0-1424" class="d">-}
</a><a href="#h70-0-1425" id="h70-0-1425" class="d">-
</a><a href="#h70-0-1426" id="h70-0-1426" class="d">-func (m *Query) GetLimit() int32 {
</a><a href="#h70-0-1427" id="h70-0-1427" class="d">-	if m != nil &amp;&amp; m.Limit != nil {
</a><a href="#h70-0-1428" id="h70-0-1428" class="d">-		return *m.Limit
</a><a href="#h70-0-1429" id="h70-0-1429" class="d">-	}
</a><a href="#h70-0-1430" id="h70-0-1430" class="d">-	return 0
</a><a href="#h70-0-1431" id="h70-0-1431" class="d">-}
</a><a href="#h70-0-1432" id="h70-0-1432" class="d">-
</a><a href="#h70-0-1433" id="h70-0-1433" class="d">-func (m *Query) GetCompiledCursor() *CompiledCursor {
</a><a href="#h70-0-1434" id="h70-0-1434" class="d">-	if m != nil {
</a><a href="#h70-0-1435" id="h70-0-1435" class="d">-		return m.CompiledCursor
</a><a href="#h70-0-1436" id="h70-0-1436" class="d">-	}
</a><a href="#h70-0-1437" id="h70-0-1437" class="d">-	return nil
</a><a href="#h70-0-1438" id="h70-0-1438" class="d">-}
</a><a href="#h70-0-1439" id="h70-0-1439" class="d">-
</a><a href="#h70-0-1440" id="h70-0-1440" class="d">-func (m *Query) GetEndCompiledCursor() *CompiledCursor {
</a><a href="#h70-0-1441" id="h70-0-1441" class="d">-	if m != nil {
</a><a href="#h70-0-1442" id="h70-0-1442" class="d">-		return m.EndCompiledCursor
</a><a href="#h70-0-1443" id="h70-0-1443" class="d">-	}
</a><a href="#h70-0-1444" id="h70-0-1444" class="d">-	return nil
</a><a href="#h70-0-1445" id="h70-0-1445" class="d">-}
</a><a href="#h70-0-1446" id="h70-0-1446" class="d">-
</a><a href="#h70-0-1447" id="h70-0-1447" class="d">-func (m *Query) GetCompositeIndex() []*CompositeIndex {
</a><a href="#h70-0-1448" id="h70-0-1448" class="d">-	if m != nil {
</a><a href="#h70-0-1449" id="h70-0-1449" class="d">-		return m.CompositeIndex
</a><a href="#h70-0-1450" id="h70-0-1450" class="d">-	}
</a><a href="#h70-0-1451" id="h70-0-1451" class="d">-	return nil
</a><a href="#h70-0-1452" id="h70-0-1452" class="d">-}
</a><a href="#h70-0-1453" id="h70-0-1453" class="d">-
</a><a href="#h70-0-1454" id="h70-0-1454" class="d">-func (m *Query) GetRequirePerfectPlan() bool {
</a><a href="#h70-0-1455" id="h70-0-1455" class="d">-	if m != nil &amp;&amp; m.RequirePerfectPlan != nil {
</a><a href="#h70-0-1456" id="h70-0-1456" class="d">-		return *m.RequirePerfectPlan
</a><a href="#h70-0-1457" id="h70-0-1457" class="d">-	}
</a><a href="#h70-0-1458" id="h70-0-1458" class="d">-	return Default_Query_RequirePerfectPlan
</a><a href="#h70-0-1459" id="h70-0-1459" class="d">-}
</a><a href="#h70-0-1460" id="h70-0-1460" class="d">-
</a><a href="#h70-0-1461" id="h70-0-1461" class="d">-func (m *Query) GetKeysOnly() bool {
</a><a href="#h70-0-1462" id="h70-0-1462" class="d">-	if m != nil &amp;&amp; m.KeysOnly != nil {
</a><a href="#h70-0-1463" id="h70-0-1463" class="d">-		return *m.KeysOnly
</a><a href="#h70-0-1464" id="h70-0-1464" class="d">-	}
</a><a href="#h70-0-1465" id="h70-0-1465" class="d">-	return Default_Query_KeysOnly
</a><a href="#h70-0-1466" id="h70-0-1466" class="d">-}
</a><a href="#h70-0-1467" id="h70-0-1467" class="d">-
</a><a href="#h70-0-1468" id="h70-0-1468" class="d">-func (m *Query) GetTransaction() *Transaction {
</a><a href="#h70-0-1469" id="h70-0-1469" class="d">-	if m != nil {
</a><a href="#h70-0-1470" id="h70-0-1470" class="d">-		return m.Transaction
</a><a href="#h70-0-1471" id="h70-0-1471" class="d">-	}
</a><a href="#h70-0-1472" id="h70-0-1472" class="d">-	return nil
</a><a href="#h70-0-1473" id="h70-0-1473" class="d">-}
</a><a href="#h70-0-1474" id="h70-0-1474" class="d">-
</a><a href="#h70-0-1475" id="h70-0-1475" class="d">-func (m *Query) GetCompile() bool {
</a><a href="#h70-0-1476" id="h70-0-1476" class="d">-	if m != nil &amp;&amp; m.Compile != nil {
</a><a href="#h70-0-1477" id="h70-0-1477" class="d">-		return *m.Compile
</a><a href="#h70-0-1478" id="h70-0-1478" class="d">-	}
</a><a href="#h70-0-1479" id="h70-0-1479" class="d">-	return Default_Query_Compile
</a><a href="#h70-0-1480" id="h70-0-1480" class="d">-}
</a><a href="#h70-0-1481" id="h70-0-1481" class="d">-
</a><a href="#h70-0-1482" id="h70-0-1482" class="d">-func (m *Query) GetFailoverMs() int64 {
</a><a href="#h70-0-1483" id="h70-0-1483" class="d">-	if m != nil &amp;&amp; m.FailoverMs != nil {
</a><a href="#h70-0-1484" id="h70-0-1484" class="d">-		return *m.FailoverMs
</a><a href="#h70-0-1485" id="h70-0-1485" class="d">-	}
</a><a href="#h70-0-1486" id="h70-0-1486" class="d">-	return 0
</a><a href="#h70-0-1487" id="h70-0-1487" class="d">-}
</a><a href="#h70-0-1488" id="h70-0-1488" class="d">-
</a><a href="#h70-0-1489" id="h70-0-1489" class="d">-func (m *Query) GetStrong() bool {
</a><a href="#h70-0-1490" id="h70-0-1490" class="d">-	if m != nil &amp;&amp; m.Strong != nil {
</a><a href="#h70-0-1491" id="h70-0-1491" class="d">-		return *m.Strong
</a><a href="#h70-0-1492" id="h70-0-1492" class="d">-	}
</a><a href="#h70-0-1493" id="h70-0-1493" class="d">-	return false
</a><a href="#h70-0-1494" id="h70-0-1494" class="d">-}
</a><a href="#h70-0-1495" id="h70-0-1495" class="d">-
</a><a href="#h70-0-1496" id="h70-0-1496" class="d">-func (m *Query) GetPropertyName() []string {
</a><a href="#h70-0-1497" id="h70-0-1497" class="d">-	if m != nil {
</a><a href="#h70-0-1498" id="h70-0-1498" class="d">-		return m.PropertyName
</a><a href="#h70-0-1499" id="h70-0-1499" class="d">-	}
</a><a href="#h70-0-1500" id="h70-0-1500" class="d">-	return nil
</a><a href="#h70-0-1501" id="h70-0-1501" class="d">-}
</a><a href="#h70-0-1502" id="h70-0-1502" class="d">-
</a><a href="#h70-0-1503" id="h70-0-1503" class="d">-func (m *Query) GetGroupByPropertyName() []string {
</a><a href="#h70-0-1504" id="h70-0-1504" class="d">-	if m != nil {
</a><a href="#h70-0-1505" id="h70-0-1505" class="d">-		return m.GroupByPropertyName
</a><a href="#h70-0-1506" id="h70-0-1506" class="d">-	}
</a><a href="#h70-0-1507" id="h70-0-1507" class="d">-	return nil
</a><a href="#h70-0-1508" id="h70-0-1508" class="d">-}
</a><a href="#h70-0-1509" id="h70-0-1509" class="d">-
</a><a href="#h70-0-1510" id="h70-0-1510" class="d">-func (m *Query) GetDistinct() bool {
</a><a href="#h70-0-1511" id="h70-0-1511" class="d">-	if m != nil &amp;&amp; m.Distinct != nil {
</a><a href="#h70-0-1512" id="h70-0-1512" class="d">-		return *m.Distinct
</a><a href="#h70-0-1513" id="h70-0-1513" class="d">-	}
</a><a href="#h70-0-1514" id="h70-0-1514" class="d">-	return false
</a><a href="#h70-0-1515" id="h70-0-1515" class="d">-}
</a><a href="#h70-0-1516" id="h70-0-1516" class="d">-
</a><a href="#h70-0-1517" id="h70-0-1517" class="d">-func (m *Query) GetMinSafeTimeSeconds() int64 {
</a><a href="#h70-0-1518" id="h70-0-1518" class="d">-	if m != nil &amp;&amp; m.MinSafeTimeSeconds != nil {
</a><a href="#h70-0-1519" id="h70-0-1519" class="d">-		return *m.MinSafeTimeSeconds
</a><a href="#h70-0-1520" id="h70-0-1520" class="d">-	}
</a><a href="#h70-0-1521" id="h70-0-1521" class="d">-	return 0
</a><a href="#h70-0-1522" id="h70-0-1522" class="d">-}
</a><a href="#h70-0-1523" id="h70-0-1523" class="d">-
</a><a href="#h70-0-1524" id="h70-0-1524" class="d">-func (m *Query) GetSafeReplicaName() []string {
</a><a href="#h70-0-1525" id="h70-0-1525" class="d">-	if m != nil {
</a><a href="#h70-0-1526" id="h70-0-1526" class="d">-		return m.SafeReplicaName
</a><a href="#h70-0-1527" id="h70-0-1527" class="d">-	}
</a><a href="#h70-0-1528" id="h70-0-1528" class="d">-	return nil
</a><a href="#h70-0-1529" id="h70-0-1529" class="d">-}
</a><a href="#h70-0-1530" id="h70-0-1530" class="d">-
</a><a href="#h70-0-1531" id="h70-0-1531" class="d">-func (m *Query) GetPersistOffset() bool {
</a><a href="#h70-0-1532" id="h70-0-1532" class="d">-	if m != nil &amp;&amp; m.PersistOffset != nil {
</a><a href="#h70-0-1533" id="h70-0-1533" class="d">-		return *m.PersistOffset
</a><a href="#h70-0-1534" id="h70-0-1534" class="d">-	}
</a><a href="#h70-0-1535" id="h70-0-1535" class="d">-	return Default_Query_PersistOffset
</a><a href="#h70-0-1536" id="h70-0-1536" class="d">-}
</a><a href="#h70-0-1537" id="h70-0-1537" class="d">-
</a><a href="#h70-0-1538" id="h70-0-1538" class="d">-type Query_Filter struct {
</a><a href="#h70-0-1539" id="h70-0-1539" class="d">-	Op               *Query_Filter_Operator `protobuf:&quot;varint,6,req,name=op,enum=appengine.Query_Filter_Operator&quot; json:&quot;op,omitempty&quot;`
</a><a href="#h70-0-1540" id="h70-0-1540" class="d">-	Property         []*Property            `protobuf:&quot;bytes,14,rep,name=property&quot; json:&quot;property,omitempty&quot;`
</a><a href="#h70-0-1541" id="h70-0-1541" class="d">-	XXX_unrecognized []byte                 `json:&quot;-&quot;`
</a><a href="#h70-0-1542" id="h70-0-1542" class="d">-}
</a><a href="#h70-0-1543" id="h70-0-1543" class="d">-
</a><a href="#h70-0-1544" id="h70-0-1544" class="d">-func (m *Query_Filter) Reset()         { *m = Query_Filter{} }
</a><a href="#h70-0-1545" id="h70-0-1545" class="d">-func (m *Query_Filter) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1546" id="h70-0-1546" class="d">-func (*Query_Filter) ProtoMessage()    {}
</a><a href="#h70-0-1547" id="h70-0-1547" class="d">-
</a><a href="#h70-0-1548" id="h70-0-1548" class="d">-func (m *Query_Filter) GetOp() Query_Filter_Operator {
</a><a href="#h70-0-1549" id="h70-0-1549" class="d">-	if m != nil &amp;&amp; m.Op != nil {
</a><a href="#h70-0-1550" id="h70-0-1550" class="d">-		return *m.Op
</a><a href="#h70-0-1551" id="h70-0-1551" class="d">-	}
</a><a href="#h70-0-1552" id="h70-0-1552" class="d">-	return Query_Filter_LESS_THAN
</a><a href="#h70-0-1553" id="h70-0-1553" class="d">-}
</a><a href="#h70-0-1554" id="h70-0-1554" class="d">-
</a><a href="#h70-0-1555" id="h70-0-1555" class="d">-func (m *Query_Filter) GetProperty() []*Property {
</a><a href="#h70-0-1556" id="h70-0-1556" class="d">-	if m != nil {
</a><a href="#h70-0-1557" id="h70-0-1557" class="d">-		return m.Property
</a><a href="#h70-0-1558" id="h70-0-1558" class="d">-	}
</a><a href="#h70-0-1559" id="h70-0-1559" class="d">-	return nil
</a><a href="#h70-0-1560" id="h70-0-1560" class="d">-}
</a><a href="#h70-0-1561" id="h70-0-1561" class="d">-
</a><a href="#h70-0-1562" id="h70-0-1562" class="d">-type Query_Order struct {
</a><a href="#h70-0-1563" id="h70-0-1563" class="d">-	Property         *string                `protobuf:&quot;bytes,10,req,name=property&quot; json:&quot;property,omitempty&quot;`
</a><a href="#h70-0-1564" id="h70-0-1564" class="d">-	Direction        *Query_Order_Direction `protobuf:&quot;varint,11,opt,name=direction,enum=appengine.Query_Order_Direction,def=1&quot; json:&quot;direction,omitempty&quot;`
</a><a href="#h70-0-1565" id="h70-0-1565" class="d">-	XXX_unrecognized []byte                 `json:&quot;-&quot;`
</a><a href="#h70-0-1566" id="h70-0-1566" class="d">-}
</a><a href="#h70-0-1567" id="h70-0-1567" class="d">-
</a><a href="#h70-0-1568" id="h70-0-1568" class="d">-func (m *Query_Order) Reset()         { *m = Query_Order{} }
</a><a href="#h70-0-1569" id="h70-0-1569" class="d">-func (m *Query_Order) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1570" id="h70-0-1570" class="d">-func (*Query_Order) ProtoMessage()    {}
</a><a href="#h70-0-1571" id="h70-0-1571" class="d">-
</a><a href="#h70-0-1572" id="h70-0-1572" class="d">-const Default_Query_Order_Direction Query_Order_Direction = Query_Order_ASCENDING
</a><a href="#h70-0-1573" id="h70-0-1573" class="d">-
</a><a href="#h70-0-1574" id="h70-0-1574" class="d">-func (m *Query_Order) GetProperty() string {
</a><a href="#h70-0-1575" id="h70-0-1575" class="d">-	if m != nil &amp;&amp; m.Property != nil {
</a><a href="#h70-0-1576" id="h70-0-1576" class="d">-		return *m.Property
</a><a href="#h70-0-1577" id="h70-0-1577" class="d">-	}
</a><a href="#h70-0-1578" id="h70-0-1578" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1579" id="h70-0-1579" class="d">-}
</a><a href="#h70-0-1580" id="h70-0-1580" class="d">-
</a><a href="#h70-0-1581" id="h70-0-1581" class="d">-func (m *Query_Order) GetDirection() Query_Order_Direction {
</a><a href="#h70-0-1582" id="h70-0-1582" class="d">-	if m != nil &amp;&amp; m.Direction != nil {
</a><a href="#h70-0-1583" id="h70-0-1583" class="d">-		return *m.Direction
</a><a href="#h70-0-1584" id="h70-0-1584" class="d">-	}
</a><a href="#h70-0-1585" id="h70-0-1585" class="d">-	return Default_Query_Order_Direction
</a><a href="#h70-0-1586" id="h70-0-1586" class="d">-}
</a><a href="#h70-0-1587" id="h70-0-1587" class="d">-
</a><a href="#h70-0-1588" id="h70-0-1588" class="d">-type CompiledQuery struct {
</a><a href="#h70-0-1589" id="h70-0-1589" class="d">-	Primaryscan       *CompiledQuery_PrimaryScan     `protobuf:&quot;group,1,req,name=PrimaryScan&quot; json:&quot;primaryscan,omitempty&quot;`
</a><a href="#h70-0-1590" id="h70-0-1590" class="d">-	Mergejoinscan     []*CompiledQuery_MergeJoinScan `protobuf:&quot;group,7,rep,name=MergeJoinScan&quot; json:&quot;mergejoinscan,omitempty&quot;`
</a><a href="#h70-0-1591" id="h70-0-1591" class="d">-	IndexDef          *Index                         `protobuf:&quot;bytes,21,opt,name=index_def&quot; json:&quot;index_def,omitempty&quot;`
</a><a href="#h70-0-1592" id="h70-0-1592" class="d">-	Offset            *int32                         `protobuf:&quot;varint,10,opt,name=offset,def=0&quot; json:&quot;offset,omitempty&quot;`
</a><a href="#h70-0-1593" id="h70-0-1593" class="d">-	Limit             *int32                         `protobuf:&quot;varint,11,opt,name=limit&quot; json:&quot;limit,omitempty&quot;`
</a><a href="#h70-0-1594" id="h70-0-1594" class="d">-	KeysOnly          *bool                          `protobuf:&quot;varint,12,req,name=keys_only&quot; json:&quot;keys_only,omitempty&quot;`
</a><a href="#h70-0-1595" id="h70-0-1595" class="d">-	PropertyName      []string                       `protobuf:&quot;bytes,24,rep,name=property_name&quot; json:&quot;property_name,omitempty&quot;`
</a><a href="#h70-0-1596" id="h70-0-1596" class="d">-	DistinctInfixSize *int32                         `protobuf:&quot;varint,25,opt,name=distinct_infix_size&quot; json:&quot;distinct_infix_size,omitempty&quot;`
</a><a href="#h70-0-1597" id="h70-0-1597" class="d">-	Entityfilter      *CompiledQuery_EntityFilter    `protobuf:&quot;group,13,opt,name=EntityFilter&quot; json:&quot;entityfilter,omitempty&quot;`
</a><a href="#h70-0-1598" id="h70-0-1598" class="d">-	XXX_unrecognized  []byte                         `json:&quot;-&quot;`
</a><a href="#h70-0-1599" id="h70-0-1599" class="d">-}
</a><a href="#h70-0-1600" id="h70-0-1600" class="d">-
</a><a href="#h70-0-1601" id="h70-0-1601" class="d">-func (m *CompiledQuery) Reset()         { *m = CompiledQuery{} }
</a><a href="#h70-0-1602" id="h70-0-1602" class="d">-func (m *CompiledQuery) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1603" id="h70-0-1603" class="d">-func (*CompiledQuery) ProtoMessage()    {}
</a><a href="#h70-0-1604" id="h70-0-1604" class="d">-
</a><a href="#h70-0-1605" id="h70-0-1605" class="d">-const Default_CompiledQuery_Offset int32 = 0
</a><a href="#h70-0-1606" id="h70-0-1606" class="d">-
</a><a href="#h70-0-1607" id="h70-0-1607" class="d">-func (m *CompiledQuery) GetPrimaryscan() *CompiledQuery_PrimaryScan {
</a><a href="#h70-0-1608" id="h70-0-1608" class="d">-	if m != nil {
</a><a href="#h70-0-1609" id="h70-0-1609" class="d">-		return m.Primaryscan
</a><a href="#h70-0-1610" id="h70-0-1610" class="d">-	}
</a><a href="#h70-0-1611" id="h70-0-1611" class="d">-	return nil
</a><a href="#h70-0-1612" id="h70-0-1612" class="d">-}
</a><a href="#h70-0-1613" id="h70-0-1613" class="d">-
</a><a href="#h70-0-1614" id="h70-0-1614" class="d">-func (m *CompiledQuery) GetMergejoinscan() []*CompiledQuery_MergeJoinScan {
</a><a href="#h70-0-1615" id="h70-0-1615" class="d">-	if m != nil {
</a><a href="#h70-0-1616" id="h70-0-1616" class="d">-		return m.Mergejoinscan
</a><a href="#h70-0-1617" id="h70-0-1617" class="d">-	}
</a><a href="#h70-0-1618" id="h70-0-1618" class="d">-	return nil
</a><a href="#h70-0-1619" id="h70-0-1619" class="d">-}
</a><a href="#h70-0-1620" id="h70-0-1620" class="d">-
</a><a href="#h70-0-1621" id="h70-0-1621" class="d">-func (m *CompiledQuery) GetIndexDef() *Index {
</a><a href="#h70-0-1622" id="h70-0-1622" class="d">-	if m != nil {
</a><a href="#h70-0-1623" id="h70-0-1623" class="d">-		return m.IndexDef
</a><a href="#h70-0-1624" id="h70-0-1624" class="d">-	}
</a><a href="#h70-0-1625" id="h70-0-1625" class="d">-	return nil
</a><a href="#h70-0-1626" id="h70-0-1626" class="d">-}
</a><a href="#h70-0-1627" id="h70-0-1627" class="d">-
</a><a href="#h70-0-1628" id="h70-0-1628" class="d">-func (m *CompiledQuery) GetOffset() int32 {
</a><a href="#h70-0-1629" id="h70-0-1629" class="d">-	if m != nil &amp;&amp; m.Offset != nil {
</a><a href="#h70-0-1630" id="h70-0-1630" class="d">-		return *m.Offset
</a><a href="#h70-0-1631" id="h70-0-1631" class="d">-	}
</a><a href="#h70-0-1632" id="h70-0-1632" class="d">-	return Default_CompiledQuery_Offset
</a><a href="#h70-0-1633" id="h70-0-1633" class="d">-}
</a><a href="#h70-0-1634" id="h70-0-1634" class="d">-
</a><a href="#h70-0-1635" id="h70-0-1635" class="d">-func (m *CompiledQuery) GetLimit() int32 {
</a><a href="#h70-0-1636" id="h70-0-1636" class="d">-	if m != nil &amp;&amp; m.Limit != nil {
</a><a href="#h70-0-1637" id="h70-0-1637" class="d">-		return *m.Limit
</a><a href="#h70-0-1638" id="h70-0-1638" class="d">-	}
</a><a href="#h70-0-1639" id="h70-0-1639" class="d">-	return 0
</a><a href="#h70-0-1640" id="h70-0-1640" class="d">-}
</a><a href="#h70-0-1641" id="h70-0-1641" class="d">-
</a><a href="#h70-0-1642" id="h70-0-1642" class="d">-func (m *CompiledQuery) GetKeysOnly() bool {
</a><a href="#h70-0-1643" id="h70-0-1643" class="d">-	if m != nil &amp;&amp; m.KeysOnly != nil {
</a><a href="#h70-0-1644" id="h70-0-1644" class="d">-		return *m.KeysOnly
</a><a href="#h70-0-1645" id="h70-0-1645" class="d">-	}
</a><a href="#h70-0-1646" id="h70-0-1646" class="d">-	return false
</a><a href="#h70-0-1647" id="h70-0-1647" class="d">-}
</a><a href="#h70-0-1648" id="h70-0-1648" class="d">-
</a><a href="#h70-0-1649" id="h70-0-1649" class="d">-func (m *CompiledQuery) GetPropertyName() []string {
</a><a href="#h70-0-1650" id="h70-0-1650" class="d">-	if m != nil {
</a><a href="#h70-0-1651" id="h70-0-1651" class="d">-		return m.PropertyName
</a><a href="#h70-0-1652" id="h70-0-1652" class="d">-	}
</a><a href="#h70-0-1653" id="h70-0-1653" class="d">-	return nil
</a><a href="#h70-0-1654" id="h70-0-1654" class="d">-}
</a><a href="#h70-0-1655" id="h70-0-1655" class="d">-
</a><a href="#h70-0-1656" id="h70-0-1656" class="d">-func (m *CompiledQuery) GetDistinctInfixSize() int32 {
</a><a href="#h70-0-1657" id="h70-0-1657" class="d">-	if m != nil &amp;&amp; m.DistinctInfixSize != nil {
</a><a href="#h70-0-1658" id="h70-0-1658" class="d">-		return *m.DistinctInfixSize
</a><a href="#h70-0-1659" id="h70-0-1659" class="d">-	}
</a><a href="#h70-0-1660" id="h70-0-1660" class="d">-	return 0
</a><a href="#h70-0-1661" id="h70-0-1661" class="d">-}
</a><a href="#h70-0-1662" id="h70-0-1662" class="d">-
</a><a href="#h70-0-1663" id="h70-0-1663" class="d">-func (m *CompiledQuery) GetEntityfilter() *CompiledQuery_EntityFilter {
</a><a href="#h70-0-1664" id="h70-0-1664" class="d">-	if m != nil {
</a><a href="#h70-0-1665" id="h70-0-1665" class="d">-		return m.Entityfilter
</a><a href="#h70-0-1666" id="h70-0-1666" class="d">-	}
</a><a href="#h70-0-1667" id="h70-0-1667" class="d">-	return nil
</a><a href="#h70-0-1668" id="h70-0-1668" class="d">-}
</a><a href="#h70-0-1669" id="h70-0-1669" class="d">-
</a><a href="#h70-0-1670" id="h70-0-1670" class="d">-type CompiledQuery_PrimaryScan struct {
</a><a href="#h70-0-1671" id="h70-0-1671" class="d">-	IndexName                  *string  `protobuf:&quot;bytes,2,opt,name=index_name&quot; json:&quot;index_name,omitempty&quot;`
</a><a href="#h70-0-1672" id="h70-0-1672" class="d">-	StartKey                   *string  `protobuf:&quot;bytes,3,opt,name=start_key&quot; json:&quot;start_key,omitempty&quot;`
</a><a href="#h70-0-1673" id="h70-0-1673" class="d">-	StartInclusive             *bool    `protobuf:&quot;varint,4,opt,name=start_inclusive&quot; json:&quot;start_inclusive,omitempty&quot;`
</a><a href="#h70-0-1674" id="h70-0-1674" class="d">-	EndKey                     *string  `protobuf:&quot;bytes,5,opt,name=end_key&quot; json:&quot;end_key,omitempty&quot;`
</a><a href="#h70-0-1675" id="h70-0-1675" class="d">-	EndInclusive               *bool    `protobuf:&quot;varint,6,opt,name=end_inclusive&quot; json:&quot;end_inclusive,omitempty&quot;`
</a><a href="#h70-0-1676" id="h70-0-1676" class="d">-	StartPostfixValue          []string `protobuf:&quot;bytes,22,rep,name=start_postfix_value&quot; json:&quot;start_postfix_value,omitempty&quot;`
</a><a href="#h70-0-1677" id="h70-0-1677" class="d">-	EndPostfixValue            []string `protobuf:&quot;bytes,23,rep,name=end_postfix_value&quot; json:&quot;end_postfix_value,omitempty&quot;`
</a><a href="#h70-0-1678" id="h70-0-1678" class="d">-	EndUnappliedLogTimestampUs *int64   `protobuf:&quot;varint,19,opt,name=end_unapplied_log_timestamp_us&quot; json:&quot;end_unapplied_log_timestamp_us,omitempty&quot;`
</a><a href="#h70-0-1679" id="h70-0-1679" class="d">-	XXX_unrecognized           []byte   `json:&quot;-&quot;`
</a><a href="#h70-0-1680" id="h70-0-1680" class="d">-}
</a><a href="#h70-0-1681" id="h70-0-1681" class="d">-
</a><a href="#h70-0-1682" id="h70-0-1682" class="d">-func (m *CompiledQuery_PrimaryScan) Reset()         { *m = CompiledQuery_PrimaryScan{} }
</a><a href="#h70-0-1683" id="h70-0-1683" class="d">-func (m *CompiledQuery_PrimaryScan) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1684" id="h70-0-1684" class="d">-func (*CompiledQuery_PrimaryScan) ProtoMessage()    {}
</a><a href="#h70-0-1685" id="h70-0-1685" class="d">-
</a><a href="#h70-0-1686" id="h70-0-1686" class="d">-func (m *CompiledQuery_PrimaryScan) GetIndexName() string {
</a><a href="#h70-0-1687" id="h70-0-1687" class="d">-	if m != nil &amp;&amp; m.IndexName != nil {
</a><a href="#h70-0-1688" id="h70-0-1688" class="d">-		return *m.IndexName
</a><a href="#h70-0-1689" id="h70-0-1689" class="d">-	}
</a><a href="#h70-0-1690" id="h70-0-1690" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1691" id="h70-0-1691" class="d">-}
</a><a href="#h70-0-1692" id="h70-0-1692" class="d">-
</a><a href="#h70-0-1693" id="h70-0-1693" class="d">-func (m *CompiledQuery_PrimaryScan) GetStartKey() string {
</a><a href="#h70-0-1694" id="h70-0-1694" class="d">-	if m != nil &amp;&amp; m.StartKey != nil {
</a><a href="#h70-0-1695" id="h70-0-1695" class="d">-		return *m.StartKey
</a><a href="#h70-0-1696" id="h70-0-1696" class="d">-	}
</a><a href="#h70-0-1697" id="h70-0-1697" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1698" id="h70-0-1698" class="d">-}
</a><a href="#h70-0-1699" id="h70-0-1699" class="d">-
</a><a href="#h70-0-1700" id="h70-0-1700" class="d">-func (m *CompiledQuery_PrimaryScan) GetStartInclusive() bool {
</a><a href="#h70-0-1701" id="h70-0-1701" class="d">-	if m != nil &amp;&amp; m.StartInclusive != nil {
</a><a href="#h70-0-1702" id="h70-0-1702" class="d">-		return *m.StartInclusive
</a><a href="#h70-0-1703" id="h70-0-1703" class="d">-	}
</a><a href="#h70-0-1704" id="h70-0-1704" class="d">-	return false
</a><a href="#h70-0-1705" id="h70-0-1705" class="d">-}
</a><a href="#h70-0-1706" id="h70-0-1706" class="d">-
</a><a href="#h70-0-1707" id="h70-0-1707" class="d">-func (m *CompiledQuery_PrimaryScan) GetEndKey() string {
</a><a href="#h70-0-1708" id="h70-0-1708" class="d">-	if m != nil &amp;&amp; m.EndKey != nil {
</a><a href="#h70-0-1709" id="h70-0-1709" class="d">-		return *m.EndKey
</a><a href="#h70-0-1710" id="h70-0-1710" class="d">-	}
</a><a href="#h70-0-1711" id="h70-0-1711" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1712" id="h70-0-1712" class="d">-}
</a><a href="#h70-0-1713" id="h70-0-1713" class="d">-
</a><a href="#h70-0-1714" id="h70-0-1714" class="d">-func (m *CompiledQuery_PrimaryScan) GetEndInclusive() bool {
</a><a href="#h70-0-1715" id="h70-0-1715" class="d">-	if m != nil &amp;&amp; m.EndInclusive != nil {
</a><a href="#h70-0-1716" id="h70-0-1716" class="d">-		return *m.EndInclusive
</a><a href="#h70-0-1717" id="h70-0-1717" class="d">-	}
</a><a href="#h70-0-1718" id="h70-0-1718" class="d">-	return false
</a><a href="#h70-0-1719" id="h70-0-1719" class="d">-}
</a><a href="#h70-0-1720" id="h70-0-1720" class="d">-
</a><a href="#h70-0-1721" id="h70-0-1721" class="d">-func (m *CompiledQuery_PrimaryScan) GetStartPostfixValue() []string {
</a><a href="#h70-0-1722" id="h70-0-1722" class="d">-	if m != nil {
</a><a href="#h70-0-1723" id="h70-0-1723" class="d">-		return m.StartPostfixValue
</a><a href="#h70-0-1724" id="h70-0-1724" class="d">-	}
</a><a href="#h70-0-1725" id="h70-0-1725" class="d">-	return nil
</a><a href="#h70-0-1726" id="h70-0-1726" class="d">-}
</a><a href="#h70-0-1727" id="h70-0-1727" class="d">-
</a><a href="#h70-0-1728" id="h70-0-1728" class="d">-func (m *CompiledQuery_PrimaryScan) GetEndPostfixValue() []string {
</a><a href="#h70-0-1729" id="h70-0-1729" class="d">-	if m != nil {
</a><a href="#h70-0-1730" id="h70-0-1730" class="d">-		return m.EndPostfixValue
</a><a href="#h70-0-1731" id="h70-0-1731" class="d">-	}
</a><a href="#h70-0-1732" id="h70-0-1732" class="d">-	return nil
</a><a href="#h70-0-1733" id="h70-0-1733" class="d">-}
</a><a href="#h70-0-1734" id="h70-0-1734" class="d">-
</a><a href="#h70-0-1735" id="h70-0-1735" class="d">-func (m *CompiledQuery_PrimaryScan) GetEndUnappliedLogTimestampUs() int64 {
</a><a href="#h70-0-1736" id="h70-0-1736" class="d">-	if m != nil &amp;&amp; m.EndUnappliedLogTimestampUs != nil {
</a><a href="#h70-0-1737" id="h70-0-1737" class="d">-		return *m.EndUnappliedLogTimestampUs
</a><a href="#h70-0-1738" id="h70-0-1738" class="d">-	}
</a><a href="#h70-0-1739" id="h70-0-1739" class="d">-	return 0
</a><a href="#h70-0-1740" id="h70-0-1740" class="d">-}
</a><a href="#h70-0-1741" id="h70-0-1741" class="d">-
</a><a href="#h70-0-1742" id="h70-0-1742" class="d">-type CompiledQuery_MergeJoinScan struct {
</a><a href="#h70-0-1743" id="h70-0-1743" class="d">-	IndexName        *string  `protobuf:&quot;bytes,8,req,name=index_name&quot; json:&quot;index_name,omitempty&quot;`
</a><a href="#h70-0-1744" id="h70-0-1744" class="d">-	PrefixValue      []string `protobuf:&quot;bytes,9,rep,name=prefix_value&quot; json:&quot;prefix_value,omitempty&quot;`
</a><a href="#h70-0-1745" id="h70-0-1745" class="d">-	ValuePrefix      *bool    `protobuf:&quot;varint,20,opt,name=value_prefix,def=0&quot; json:&quot;value_prefix,omitempty&quot;`
</a><a href="#h70-0-1746" id="h70-0-1746" class="d">-	XXX_unrecognized []byte   `json:&quot;-&quot;`
</a><a href="#h70-0-1747" id="h70-0-1747" class="d">-}
</a><a href="#h70-0-1748" id="h70-0-1748" class="d">-
</a><a href="#h70-0-1749" id="h70-0-1749" class="d">-func (m *CompiledQuery_MergeJoinScan) Reset()         { *m = CompiledQuery_MergeJoinScan{} }
</a><a href="#h70-0-1750" id="h70-0-1750" class="d">-func (m *CompiledQuery_MergeJoinScan) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1751" id="h70-0-1751" class="d">-func (*CompiledQuery_MergeJoinScan) ProtoMessage()    {}
</a><a href="#h70-0-1752" id="h70-0-1752" class="d">-
</a><a href="#h70-0-1753" id="h70-0-1753" class="d">-const Default_CompiledQuery_MergeJoinScan_ValuePrefix bool = false
</a><a href="#h70-0-1754" id="h70-0-1754" class="d">-
</a><a href="#h70-0-1755" id="h70-0-1755" class="d">-func (m *CompiledQuery_MergeJoinScan) GetIndexName() string {
</a><a href="#h70-0-1756" id="h70-0-1756" class="d">-	if m != nil &amp;&amp; m.IndexName != nil {
</a><a href="#h70-0-1757" id="h70-0-1757" class="d">-		return *m.IndexName
</a><a href="#h70-0-1758" id="h70-0-1758" class="d">-	}
</a><a href="#h70-0-1759" id="h70-0-1759" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1760" id="h70-0-1760" class="d">-}
</a><a href="#h70-0-1761" id="h70-0-1761" class="d">-
</a><a href="#h70-0-1762" id="h70-0-1762" class="d">-func (m *CompiledQuery_MergeJoinScan) GetPrefixValue() []string {
</a><a href="#h70-0-1763" id="h70-0-1763" class="d">-	if m != nil {
</a><a href="#h70-0-1764" id="h70-0-1764" class="d">-		return m.PrefixValue
</a><a href="#h70-0-1765" id="h70-0-1765" class="d">-	}
</a><a href="#h70-0-1766" id="h70-0-1766" class="d">-	return nil
</a><a href="#h70-0-1767" id="h70-0-1767" class="d">-}
</a><a href="#h70-0-1768" id="h70-0-1768" class="d">-
</a><a href="#h70-0-1769" id="h70-0-1769" class="d">-func (m *CompiledQuery_MergeJoinScan) GetValuePrefix() bool {
</a><a href="#h70-0-1770" id="h70-0-1770" class="d">-	if m != nil &amp;&amp; m.ValuePrefix != nil {
</a><a href="#h70-0-1771" id="h70-0-1771" class="d">-		return *m.ValuePrefix
</a><a href="#h70-0-1772" id="h70-0-1772" class="d">-	}
</a><a href="#h70-0-1773" id="h70-0-1773" class="d">-	return Default_CompiledQuery_MergeJoinScan_ValuePrefix
</a><a href="#h70-0-1774" id="h70-0-1774" class="d">-}
</a><a href="#h70-0-1775" id="h70-0-1775" class="d">-
</a><a href="#h70-0-1776" id="h70-0-1776" class="d">-type CompiledQuery_EntityFilter struct {
</a><a href="#h70-0-1777" id="h70-0-1777" class="d">-	Distinct         *bool      `protobuf:&quot;varint,14,opt,name=distinct,def=0&quot; json:&quot;distinct,omitempty&quot;`
</a><a href="#h70-0-1778" id="h70-0-1778" class="d">-	Kind             *string    `protobuf:&quot;bytes,17,opt,name=kind&quot; json:&quot;kind,omitempty&quot;`
</a><a href="#h70-0-1779" id="h70-0-1779" class="d">-	Ancestor         *Reference `protobuf:&quot;bytes,18,opt,name=ancestor&quot; json:&quot;ancestor,omitempty&quot;`
</a><a href="#h70-0-1780" id="h70-0-1780" class="d">-	XXX_unrecognized []byte     `json:&quot;-&quot;`
</a><a href="#h70-0-1781" id="h70-0-1781" class="d">-}
</a><a href="#h70-0-1782" id="h70-0-1782" class="d">-
</a><a href="#h70-0-1783" id="h70-0-1783" class="d">-func (m *CompiledQuery_EntityFilter) Reset()         { *m = CompiledQuery_EntityFilter{} }
</a><a href="#h70-0-1784" id="h70-0-1784" class="d">-func (m *CompiledQuery_EntityFilter) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1785" id="h70-0-1785" class="d">-func (*CompiledQuery_EntityFilter) ProtoMessage()    {}
</a><a href="#h70-0-1786" id="h70-0-1786" class="d">-
</a><a href="#h70-0-1787" id="h70-0-1787" class="d">-const Default_CompiledQuery_EntityFilter_Distinct bool = false
</a><a href="#h70-0-1788" id="h70-0-1788" class="d">-
</a><a href="#h70-0-1789" id="h70-0-1789" class="d">-func (m *CompiledQuery_EntityFilter) GetDistinct() bool {
</a><a href="#h70-0-1790" id="h70-0-1790" class="d">-	if m != nil &amp;&amp; m.Distinct != nil {
</a><a href="#h70-0-1791" id="h70-0-1791" class="d">-		return *m.Distinct
</a><a href="#h70-0-1792" id="h70-0-1792" class="d">-	}
</a><a href="#h70-0-1793" id="h70-0-1793" class="d">-	return Default_CompiledQuery_EntityFilter_Distinct
</a><a href="#h70-0-1794" id="h70-0-1794" class="d">-}
</a><a href="#h70-0-1795" id="h70-0-1795" class="d">-
</a><a href="#h70-0-1796" id="h70-0-1796" class="d">-func (m *CompiledQuery_EntityFilter) GetKind() string {
</a><a href="#h70-0-1797" id="h70-0-1797" class="d">-	if m != nil &amp;&amp; m.Kind != nil {
</a><a href="#h70-0-1798" id="h70-0-1798" class="d">-		return *m.Kind
</a><a href="#h70-0-1799" id="h70-0-1799" class="d">-	}
</a><a href="#h70-0-1800" id="h70-0-1800" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1801" id="h70-0-1801" class="d">-}
</a><a href="#h70-0-1802" id="h70-0-1802" class="d">-
</a><a href="#h70-0-1803" id="h70-0-1803" class="d">-func (m *CompiledQuery_EntityFilter) GetAncestor() *Reference {
</a><a href="#h70-0-1804" id="h70-0-1804" class="d">-	if m != nil {
</a><a href="#h70-0-1805" id="h70-0-1805" class="d">-		return m.Ancestor
</a><a href="#h70-0-1806" id="h70-0-1806" class="d">-	}
</a><a href="#h70-0-1807" id="h70-0-1807" class="d">-	return nil
</a><a href="#h70-0-1808" id="h70-0-1808" class="d">-}
</a><a href="#h70-0-1809" id="h70-0-1809" class="d">-
</a><a href="#h70-0-1810" id="h70-0-1810" class="d">-type CompiledCursor struct {
</a><a href="#h70-0-1811" id="h70-0-1811" class="d">-	Position         *CompiledCursor_Position `protobuf:&quot;group,2,opt,name=Position&quot; json:&quot;position,omitempty&quot;`
</a><a href="#h70-0-1812" id="h70-0-1812" class="d">-	XXX_unrecognized []byte                   `json:&quot;-&quot;`
</a><a href="#h70-0-1813" id="h70-0-1813" class="d">-}
</a><a href="#h70-0-1814" id="h70-0-1814" class="d">-
</a><a href="#h70-0-1815" id="h70-0-1815" class="d">-func (m *CompiledCursor) Reset()         { *m = CompiledCursor{} }
</a><a href="#h70-0-1816" id="h70-0-1816" class="d">-func (m *CompiledCursor) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1817" id="h70-0-1817" class="d">-func (*CompiledCursor) ProtoMessage()    {}
</a><a href="#h70-0-1818" id="h70-0-1818" class="d">-
</a><a href="#h70-0-1819" id="h70-0-1819" class="d">-func (m *CompiledCursor) GetPosition() *CompiledCursor_Position {
</a><a href="#h70-0-1820" id="h70-0-1820" class="d">-	if m != nil {
</a><a href="#h70-0-1821" id="h70-0-1821" class="d">-		return m.Position
</a><a href="#h70-0-1822" id="h70-0-1822" class="d">-	}
</a><a href="#h70-0-1823" id="h70-0-1823" class="d">-	return nil
</a><a href="#h70-0-1824" id="h70-0-1824" class="d">-}
</a><a href="#h70-0-1825" id="h70-0-1825" class="d">-
</a><a href="#h70-0-1826" id="h70-0-1826" class="d">-type CompiledCursor_Position struct {
</a><a href="#h70-0-1827" id="h70-0-1827" class="d">-	StartKey         *string                               `protobuf:&quot;bytes,27,opt,name=start_key&quot; json:&quot;start_key,omitempty&quot;`
</a><a href="#h70-0-1828" id="h70-0-1828" class="d">-	Indexvalue       []*CompiledCursor_Position_IndexValue `protobuf:&quot;group,29,rep,name=IndexValue&quot; json:&quot;indexvalue,omitempty&quot;`
</a><a href="#h70-0-1829" id="h70-0-1829" class="d">-	Key              *Reference                            `protobuf:&quot;bytes,32,opt,name=key&quot; json:&quot;key,omitempty&quot;`
</a><a href="#h70-0-1830" id="h70-0-1830" class="d">-	StartInclusive   *bool                                 `protobuf:&quot;varint,28,opt,name=start_inclusive,def=1&quot; json:&quot;start_inclusive,omitempty&quot;`
</a><a href="#h70-0-1831" id="h70-0-1831" class="d">-	XXX_unrecognized []byte                                `json:&quot;-&quot;`
</a><a href="#h70-0-1832" id="h70-0-1832" class="d">-}
</a><a href="#h70-0-1833" id="h70-0-1833" class="d">-
</a><a href="#h70-0-1834" id="h70-0-1834" class="d">-func (m *CompiledCursor_Position) Reset()         { *m = CompiledCursor_Position{} }
</a><a href="#h70-0-1835" id="h70-0-1835" class="d">-func (m *CompiledCursor_Position) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1836" id="h70-0-1836" class="d">-func (*CompiledCursor_Position) ProtoMessage()    {}
</a><a href="#h70-0-1837" id="h70-0-1837" class="d">-
</a><a href="#h70-0-1838" id="h70-0-1838" class="d">-const Default_CompiledCursor_Position_StartInclusive bool = true
</a><a href="#h70-0-1839" id="h70-0-1839" class="d">-
</a><a href="#h70-0-1840" id="h70-0-1840" class="d">-func (m *CompiledCursor_Position) GetStartKey() string {
</a><a href="#h70-0-1841" id="h70-0-1841" class="d">-	if m != nil &amp;&amp; m.StartKey != nil {
</a><a href="#h70-0-1842" id="h70-0-1842" class="d">-		return *m.StartKey
</a><a href="#h70-0-1843" id="h70-0-1843" class="d">-	}
</a><a href="#h70-0-1844" id="h70-0-1844" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1845" id="h70-0-1845" class="d">-}
</a><a href="#h70-0-1846" id="h70-0-1846" class="d">-
</a><a href="#h70-0-1847" id="h70-0-1847" class="d">-func (m *CompiledCursor_Position) GetIndexvalue() []*CompiledCursor_Position_IndexValue {
</a><a href="#h70-0-1848" id="h70-0-1848" class="d">-	if m != nil {
</a><a href="#h70-0-1849" id="h70-0-1849" class="d">-		return m.Indexvalue
</a><a href="#h70-0-1850" id="h70-0-1850" class="d">-	}
</a><a href="#h70-0-1851" id="h70-0-1851" class="d">-	return nil
</a><a href="#h70-0-1852" id="h70-0-1852" class="d">-}
</a><a href="#h70-0-1853" id="h70-0-1853" class="d">-
</a><a href="#h70-0-1854" id="h70-0-1854" class="d">-func (m *CompiledCursor_Position) GetKey() *Reference {
</a><a href="#h70-0-1855" id="h70-0-1855" class="d">-	if m != nil {
</a><a href="#h70-0-1856" id="h70-0-1856" class="d">-		return m.Key
</a><a href="#h70-0-1857" id="h70-0-1857" class="d">-	}
</a><a href="#h70-0-1858" id="h70-0-1858" class="d">-	return nil
</a><a href="#h70-0-1859" id="h70-0-1859" class="d">-}
</a><a href="#h70-0-1860" id="h70-0-1860" class="d">-
</a><a href="#h70-0-1861" id="h70-0-1861" class="d">-func (m *CompiledCursor_Position) GetStartInclusive() bool {
</a><a href="#h70-0-1862" id="h70-0-1862" class="d">-	if m != nil &amp;&amp; m.StartInclusive != nil {
</a><a href="#h70-0-1863" id="h70-0-1863" class="d">-		return *m.StartInclusive
</a><a href="#h70-0-1864" id="h70-0-1864" class="d">-	}
</a><a href="#h70-0-1865" id="h70-0-1865" class="d">-	return Default_CompiledCursor_Position_StartInclusive
</a><a href="#h70-0-1866" id="h70-0-1866" class="d">-}
</a><a href="#h70-0-1867" id="h70-0-1867" class="d">-
</a><a href="#h70-0-1868" id="h70-0-1868" class="d">-type CompiledCursor_Position_IndexValue struct {
</a><a href="#h70-0-1869" id="h70-0-1869" class="d">-	Property         *string        `protobuf:&quot;bytes,30,opt,name=property&quot; json:&quot;property,omitempty&quot;`
</a><a href="#h70-0-1870" id="h70-0-1870" class="d">-	Value            *PropertyValue `protobuf:&quot;bytes,31,req,name=value&quot; json:&quot;value,omitempty&quot;`
</a><a href="#h70-0-1871" id="h70-0-1871" class="d">-	XXX_unrecognized []byte         `json:&quot;-&quot;`
</a><a href="#h70-0-1872" id="h70-0-1872" class="d">-}
</a><a href="#h70-0-1873" id="h70-0-1873" class="d">-
</a><a href="#h70-0-1874" id="h70-0-1874" class="d">-func (m *CompiledCursor_Position_IndexValue) Reset()         { *m = CompiledCursor_Position_IndexValue{} }
</a><a href="#h70-0-1875" id="h70-0-1875" class="d">-func (m *CompiledCursor_Position_IndexValue) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1876" id="h70-0-1876" class="d">-func (*CompiledCursor_Position_IndexValue) ProtoMessage()    {}
</a><a href="#h70-0-1877" id="h70-0-1877" class="d">-
</a><a href="#h70-0-1878" id="h70-0-1878" class="d">-func (m *CompiledCursor_Position_IndexValue) GetProperty() string {
</a><a href="#h70-0-1879" id="h70-0-1879" class="d">-	if m != nil &amp;&amp; m.Property != nil {
</a><a href="#h70-0-1880" id="h70-0-1880" class="d">-		return *m.Property
</a><a href="#h70-0-1881" id="h70-0-1881" class="d">-	}
</a><a href="#h70-0-1882" id="h70-0-1882" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1883" id="h70-0-1883" class="d">-}
</a><a href="#h70-0-1884" id="h70-0-1884" class="d">-
</a><a href="#h70-0-1885" id="h70-0-1885" class="d">-func (m *CompiledCursor_Position_IndexValue) GetValue() *PropertyValue {
</a><a href="#h70-0-1886" id="h70-0-1886" class="d">-	if m != nil {
</a><a href="#h70-0-1887" id="h70-0-1887" class="d">-		return m.Value
</a><a href="#h70-0-1888" id="h70-0-1888" class="d">-	}
</a><a href="#h70-0-1889" id="h70-0-1889" class="d">-	return nil
</a><a href="#h70-0-1890" id="h70-0-1890" class="d">-}
</a><a href="#h70-0-1891" id="h70-0-1891" class="d">-
</a><a href="#h70-0-1892" id="h70-0-1892" class="d">-type Cursor struct {
</a><a href="#h70-0-1893" id="h70-0-1893" class="d">-	Cursor           *uint64 `protobuf:&quot;fixed64,1,req,name=cursor&quot; json:&quot;cursor,omitempty&quot;`
</a><a href="#h70-0-1894" id="h70-0-1894" class="d">-	App              *string `protobuf:&quot;bytes,2,opt,name=app&quot; json:&quot;app,omitempty&quot;`
</a><a href="#h70-0-1895" id="h70-0-1895" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h70-0-1896" id="h70-0-1896" class="d">-}
</a><a href="#h70-0-1897" id="h70-0-1897" class="d">-
</a><a href="#h70-0-1898" id="h70-0-1898" class="d">-func (m *Cursor) Reset()         { *m = Cursor{} }
</a><a href="#h70-0-1899" id="h70-0-1899" class="d">-func (m *Cursor) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1900" id="h70-0-1900" class="d">-func (*Cursor) ProtoMessage()    {}
</a><a href="#h70-0-1901" id="h70-0-1901" class="d">-
</a><a href="#h70-0-1902" id="h70-0-1902" class="d">-func (m *Cursor) GetCursor() uint64 {
</a><a href="#h70-0-1903" id="h70-0-1903" class="d">-	if m != nil &amp;&amp; m.Cursor != nil {
</a><a href="#h70-0-1904" id="h70-0-1904" class="d">-		return *m.Cursor
</a><a href="#h70-0-1905" id="h70-0-1905" class="d">-	}
</a><a href="#h70-0-1906" id="h70-0-1906" class="d">-	return 0
</a><a href="#h70-0-1907" id="h70-0-1907" class="d">-}
</a><a href="#h70-0-1908" id="h70-0-1908" class="d">-
</a><a href="#h70-0-1909" id="h70-0-1909" class="d">-func (m *Cursor) GetApp() string {
</a><a href="#h70-0-1910" id="h70-0-1910" class="d">-	if m != nil &amp;&amp; m.App != nil {
</a><a href="#h70-0-1911" id="h70-0-1911" class="d">-		return *m.App
</a><a href="#h70-0-1912" id="h70-0-1912" class="d">-	}
</a><a href="#h70-0-1913" id="h70-0-1913" class="d">-	return &quot;&quot;
</a><a href="#h70-0-1914" id="h70-0-1914" class="d">-}
</a><a href="#h70-0-1915" id="h70-0-1915" class="d">-
</a><a href="#h70-0-1916" id="h70-0-1916" class="d">-type Error struct {
</a><a href="#h70-0-1917" id="h70-0-1917" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h70-0-1918" id="h70-0-1918" class="d">-}
</a><a href="#h70-0-1919" id="h70-0-1919" class="d">-
</a><a href="#h70-0-1920" id="h70-0-1920" class="d">-func (m *Error) Reset()         { *m = Error{} }
</a><a href="#h70-0-1921" id="h70-0-1921" class="d">-func (m *Error) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1922" id="h70-0-1922" class="d">-func (*Error) ProtoMessage()    {}
</a><a href="#h70-0-1923" id="h70-0-1923" class="d">-
</a><a href="#h70-0-1924" id="h70-0-1924" class="d">-type Cost struct {
</a><a href="#h70-0-1925" id="h70-0-1925" class="d">-	IndexWrites             *int32           `protobuf:&quot;varint,1,opt,name=index_writes&quot; json:&quot;index_writes,omitempty&quot;`
</a><a href="#h70-0-1926" id="h70-0-1926" class="d">-	IndexWriteBytes         *int32           `protobuf:&quot;varint,2,opt,name=index_write_bytes&quot; json:&quot;index_write_bytes,omitempty&quot;`
</a><a href="#h70-0-1927" id="h70-0-1927" class="d">-	EntityWrites            *int32           `protobuf:&quot;varint,3,opt,name=entity_writes&quot; json:&quot;entity_writes,omitempty&quot;`
</a><a href="#h70-0-1928" id="h70-0-1928" class="d">-	EntityWriteBytes        *int32           `protobuf:&quot;varint,4,opt,name=entity_write_bytes&quot; json:&quot;entity_write_bytes,omitempty&quot;`
</a><a href="#h70-0-1929" id="h70-0-1929" class="d">-	Commitcost              *Cost_CommitCost `protobuf:&quot;group,5,opt,name=CommitCost&quot; json:&quot;commitcost,omitempty&quot;`
</a><a href="#h70-0-1930" id="h70-0-1930" class="d">-	ApproximateStorageDelta *int32           `protobuf:&quot;varint,8,opt,name=approximate_storage_delta&quot; json:&quot;approximate_storage_delta,omitempty&quot;`
</a><a href="#h70-0-1931" id="h70-0-1931" class="d">-	IdSequenceUpdates       *int32           `protobuf:&quot;varint,9,opt,name=id_sequence_updates&quot; json:&quot;id_sequence_updates,omitempty&quot;`
</a><a href="#h70-0-1932" id="h70-0-1932" class="d">-	XXX_unrecognized        []byte           `json:&quot;-&quot;`
</a><a href="#h70-0-1933" id="h70-0-1933" class="d">-}
</a><a href="#h70-0-1934" id="h70-0-1934" class="d">-
</a><a href="#h70-0-1935" id="h70-0-1935" class="d">-func (m *Cost) Reset()         { *m = Cost{} }
</a><a href="#h70-0-1936" id="h70-0-1936" class="d">-func (m *Cost) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1937" id="h70-0-1937" class="d">-func (*Cost) ProtoMessage()    {}
</a><a href="#h70-0-1938" id="h70-0-1938" class="d">-
</a><a href="#h70-0-1939" id="h70-0-1939" class="d">-func (m *Cost) GetIndexWrites() int32 {
</a><a href="#h70-0-1940" id="h70-0-1940" class="d">-	if m != nil &amp;&amp; m.IndexWrites != nil {
</a><a href="#h70-0-1941" id="h70-0-1941" class="d">-		return *m.IndexWrites
</a><a href="#h70-0-1942" id="h70-0-1942" class="d">-	}
</a><a href="#h70-0-1943" id="h70-0-1943" class="d">-	return 0
</a><a href="#h70-0-1944" id="h70-0-1944" class="d">-}
</a><a href="#h70-0-1945" id="h70-0-1945" class="d">-
</a><a href="#h70-0-1946" id="h70-0-1946" class="d">-func (m *Cost) GetIndexWriteBytes() int32 {
</a><a href="#h70-0-1947" id="h70-0-1947" class="d">-	if m != nil &amp;&amp; m.IndexWriteBytes != nil {
</a><a href="#h70-0-1948" id="h70-0-1948" class="d">-		return *m.IndexWriteBytes
</a><a href="#h70-0-1949" id="h70-0-1949" class="d">-	}
</a><a href="#h70-0-1950" id="h70-0-1950" class="d">-	return 0
</a><a href="#h70-0-1951" id="h70-0-1951" class="d">-}
</a><a href="#h70-0-1952" id="h70-0-1952" class="d">-
</a><a href="#h70-0-1953" id="h70-0-1953" class="d">-func (m *Cost) GetEntityWrites() int32 {
</a><a href="#h70-0-1954" id="h70-0-1954" class="d">-	if m != nil &amp;&amp; m.EntityWrites != nil {
</a><a href="#h70-0-1955" id="h70-0-1955" class="d">-		return *m.EntityWrites
</a><a href="#h70-0-1956" id="h70-0-1956" class="d">-	}
</a><a href="#h70-0-1957" id="h70-0-1957" class="d">-	return 0
</a><a href="#h70-0-1958" id="h70-0-1958" class="d">-}
</a><a href="#h70-0-1959" id="h70-0-1959" class="d">-
</a><a href="#h70-0-1960" id="h70-0-1960" class="d">-func (m *Cost) GetEntityWriteBytes() int32 {
</a><a href="#h70-0-1961" id="h70-0-1961" class="d">-	if m != nil &amp;&amp; m.EntityWriteBytes != nil {
</a><a href="#h70-0-1962" id="h70-0-1962" class="d">-		return *m.EntityWriteBytes
</a><a href="#h70-0-1963" id="h70-0-1963" class="d">-	}
</a><a href="#h70-0-1964" id="h70-0-1964" class="d">-	return 0
</a><a href="#h70-0-1965" id="h70-0-1965" class="d">-}
</a><a href="#h70-0-1966" id="h70-0-1966" class="d">-
</a><a href="#h70-0-1967" id="h70-0-1967" class="d">-func (m *Cost) GetCommitcost() *Cost_CommitCost {
</a><a href="#h70-0-1968" id="h70-0-1968" class="d">-	if m != nil {
</a><a href="#h70-0-1969" id="h70-0-1969" class="d">-		return m.Commitcost
</a><a href="#h70-0-1970" id="h70-0-1970" class="d">-	}
</a><a href="#h70-0-1971" id="h70-0-1971" class="d">-	return nil
</a><a href="#h70-0-1972" id="h70-0-1972" class="d">-}
</a><a href="#h70-0-1973" id="h70-0-1973" class="d">-
</a><a href="#h70-0-1974" id="h70-0-1974" class="d">-func (m *Cost) GetApproximateStorageDelta() int32 {
</a><a href="#h70-0-1975" id="h70-0-1975" class="d">-	if m != nil &amp;&amp; m.ApproximateStorageDelta != nil {
</a><a href="#h70-0-1976" id="h70-0-1976" class="d">-		return *m.ApproximateStorageDelta
</a><a href="#h70-0-1977" id="h70-0-1977" class="d">-	}
</a><a href="#h70-0-1978" id="h70-0-1978" class="d">-	return 0
</a><a href="#h70-0-1979" id="h70-0-1979" class="d">-}
</a><a href="#h70-0-1980" id="h70-0-1980" class="d">-
</a><a href="#h70-0-1981" id="h70-0-1981" class="d">-func (m *Cost) GetIdSequenceUpdates() int32 {
</a><a href="#h70-0-1982" id="h70-0-1982" class="d">-	if m != nil &amp;&amp; m.IdSequenceUpdates != nil {
</a><a href="#h70-0-1983" id="h70-0-1983" class="d">-		return *m.IdSequenceUpdates
</a><a href="#h70-0-1984" id="h70-0-1984" class="d">-	}
</a><a href="#h70-0-1985" id="h70-0-1985" class="d">-	return 0
</a><a href="#h70-0-1986" id="h70-0-1986" class="d">-}
</a><a href="#h70-0-1987" id="h70-0-1987" class="d">-
</a><a href="#h70-0-1988" id="h70-0-1988" class="d">-type Cost_CommitCost struct {
</a><a href="#h70-0-1989" id="h70-0-1989" class="d">-	RequestedEntityPuts    *int32 `protobuf:&quot;varint,6,opt,name=requested_entity_puts&quot; json:&quot;requested_entity_puts,omitempty&quot;`
</a><a href="#h70-0-1990" id="h70-0-1990" class="d">-	RequestedEntityDeletes *int32 `protobuf:&quot;varint,7,opt,name=requested_entity_deletes&quot; json:&quot;requested_entity_deletes,omitempty&quot;`
</a><a href="#h70-0-1991" id="h70-0-1991" class="d">-	XXX_unrecognized       []byte `json:&quot;-&quot;`
</a><a href="#h70-0-1992" id="h70-0-1992" class="d">-}
</a><a href="#h70-0-1993" id="h70-0-1993" class="d">-
</a><a href="#h70-0-1994" id="h70-0-1994" class="d">-func (m *Cost_CommitCost) Reset()         { *m = Cost_CommitCost{} }
</a><a href="#h70-0-1995" id="h70-0-1995" class="d">-func (m *Cost_CommitCost) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-1996" id="h70-0-1996" class="d">-func (*Cost_CommitCost) ProtoMessage()    {}
</a><a href="#h70-0-1997" id="h70-0-1997" class="d">-
</a><a href="#h70-0-1998" id="h70-0-1998" class="d">-func (m *Cost_CommitCost) GetRequestedEntityPuts() int32 {
</a><a href="#h70-0-1999" id="h70-0-1999" class="d">-	if m != nil &amp;&amp; m.RequestedEntityPuts != nil {
</a><a href="#h70-0-2000" id="h70-0-2000" class="d">-		return *m.RequestedEntityPuts
</a><a href="#h70-0-2001" id="h70-0-2001" class="d">-	}
</a><a href="#h70-0-2002" id="h70-0-2002" class="d">-	return 0
</a><a href="#h70-0-2003" id="h70-0-2003" class="d">-}
</a><a href="#h70-0-2004" id="h70-0-2004" class="d">-
</a><a href="#h70-0-2005" id="h70-0-2005" class="d">-func (m *Cost_CommitCost) GetRequestedEntityDeletes() int32 {
</a><a href="#h70-0-2006" id="h70-0-2006" class="d">-	if m != nil &amp;&amp; m.RequestedEntityDeletes != nil {
</a><a href="#h70-0-2007" id="h70-0-2007" class="d">-		return *m.RequestedEntityDeletes
</a><a href="#h70-0-2008" id="h70-0-2008" class="d">-	}
</a><a href="#h70-0-2009" id="h70-0-2009" class="d">-	return 0
</a><a href="#h70-0-2010" id="h70-0-2010" class="d">-}
</a><a href="#h70-0-2011" id="h70-0-2011" class="d">-
</a><a href="#h70-0-2012" id="h70-0-2012" class="d">-type GetRequest struct {
</a><a href="#h70-0-2013" id="h70-0-2013" class="d">-	Header           *InternalHeader `protobuf:&quot;bytes,6,opt,name=header&quot; json:&quot;header,omitempty&quot;`
</a><a href="#h70-0-2014" id="h70-0-2014" class="d">-	Key              []*Reference    `protobuf:&quot;bytes,1,rep,name=key&quot; json:&quot;key,omitempty&quot;`
</a><a href="#h70-0-2015" id="h70-0-2015" class="d">-	Transaction      *Transaction    `protobuf:&quot;bytes,2,opt,name=transaction&quot; json:&quot;transaction,omitempty&quot;`
</a><a href="#h70-0-2016" id="h70-0-2016" class="d">-	FailoverMs       *int64          `protobuf:&quot;varint,3,opt,name=failover_ms&quot; json:&quot;failover_ms,omitempty&quot;`
</a><a href="#h70-0-2017" id="h70-0-2017" class="d">-	Strong           *bool           `protobuf:&quot;varint,4,opt,name=strong&quot; json:&quot;strong,omitempty&quot;`
</a><a href="#h70-0-2018" id="h70-0-2018" class="d">-	AllowDeferred    *bool           `protobuf:&quot;varint,5,opt,name=allow_deferred,def=0&quot; json:&quot;allow_deferred,omitempty&quot;`
</a><a href="#h70-0-2019" id="h70-0-2019" class="d">-	XXX_unrecognized []byte          `json:&quot;-&quot;`
</a><a href="#h70-0-2020" id="h70-0-2020" class="d">-}
</a><a href="#h70-0-2021" id="h70-0-2021" class="d">-
</a><a href="#h70-0-2022" id="h70-0-2022" class="d">-func (m *GetRequest) Reset()         { *m = GetRequest{} }
</a><a href="#h70-0-2023" id="h70-0-2023" class="d">-func (m *GetRequest) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2024" id="h70-0-2024" class="d">-func (*GetRequest) ProtoMessage()    {}
</a><a href="#h70-0-2025" id="h70-0-2025" class="d">-
</a><a href="#h70-0-2026" id="h70-0-2026" class="d">-const Default_GetRequest_AllowDeferred bool = false
</a><a href="#h70-0-2027" id="h70-0-2027" class="d">-
</a><a href="#h70-0-2028" id="h70-0-2028" class="d">-func (m *GetRequest) GetHeader() *InternalHeader {
</a><a href="#h70-0-2029" id="h70-0-2029" class="d">-	if m != nil {
</a><a href="#h70-0-2030" id="h70-0-2030" class="d">-		return m.Header
</a><a href="#h70-0-2031" id="h70-0-2031" class="d">-	}
</a><a href="#h70-0-2032" id="h70-0-2032" class="d">-	return nil
</a><a href="#h70-0-2033" id="h70-0-2033" class="d">-}
</a><a href="#h70-0-2034" id="h70-0-2034" class="d">-
</a><a href="#h70-0-2035" id="h70-0-2035" class="d">-func (m *GetRequest) GetKey() []*Reference {
</a><a href="#h70-0-2036" id="h70-0-2036" class="d">-	if m != nil {
</a><a href="#h70-0-2037" id="h70-0-2037" class="d">-		return m.Key
</a><a href="#h70-0-2038" id="h70-0-2038" class="d">-	}
</a><a href="#h70-0-2039" id="h70-0-2039" class="d">-	return nil
</a><a href="#h70-0-2040" id="h70-0-2040" class="d">-}
</a><a href="#h70-0-2041" id="h70-0-2041" class="d">-
</a><a href="#h70-0-2042" id="h70-0-2042" class="d">-func (m *GetRequest) GetTransaction() *Transaction {
</a><a href="#h70-0-2043" id="h70-0-2043" class="d">-	if m != nil {
</a><a href="#h70-0-2044" id="h70-0-2044" class="d">-		return m.Transaction
</a><a href="#h70-0-2045" id="h70-0-2045" class="d">-	}
</a><a href="#h70-0-2046" id="h70-0-2046" class="d">-	return nil
</a><a href="#h70-0-2047" id="h70-0-2047" class="d">-}
</a><a href="#h70-0-2048" id="h70-0-2048" class="d">-
</a><a href="#h70-0-2049" id="h70-0-2049" class="d">-func (m *GetRequest) GetFailoverMs() int64 {
</a><a href="#h70-0-2050" id="h70-0-2050" class="d">-	if m != nil &amp;&amp; m.FailoverMs != nil {
</a><a href="#h70-0-2051" id="h70-0-2051" class="d">-		return *m.FailoverMs
</a><a href="#h70-0-2052" id="h70-0-2052" class="d">-	}
</a><a href="#h70-0-2053" id="h70-0-2053" class="d">-	return 0
</a><a href="#h70-0-2054" id="h70-0-2054" class="d">-}
</a><a href="#h70-0-2055" id="h70-0-2055" class="d">-
</a><a href="#h70-0-2056" id="h70-0-2056" class="d">-func (m *GetRequest) GetStrong() bool {
</a><a href="#h70-0-2057" id="h70-0-2057" class="d">-	if m != nil &amp;&amp; m.Strong != nil {
</a><a href="#h70-0-2058" id="h70-0-2058" class="d">-		return *m.Strong
</a><a href="#h70-0-2059" id="h70-0-2059" class="d">-	}
</a><a href="#h70-0-2060" id="h70-0-2060" class="d">-	return false
</a><a href="#h70-0-2061" id="h70-0-2061" class="d">-}
</a><a href="#h70-0-2062" id="h70-0-2062" class="d">-
</a><a href="#h70-0-2063" id="h70-0-2063" class="d">-func (m *GetRequest) GetAllowDeferred() bool {
</a><a href="#h70-0-2064" id="h70-0-2064" class="d">-	if m != nil &amp;&amp; m.AllowDeferred != nil {
</a><a href="#h70-0-2065" id="h70-0-2065" class="d">-		return *m.AllowDeferred
</a><a href="#h70-0-2066" id="h70-0-2066" class="d">-	}
</a><a href="#h70-0-2067" id="h70-0-2067" class="d">-	return Default_GetRequest_AllowDeferred
</a><a href="#h70-0-2068" id="h70-0-2068" class="d">-}
</a><a href="#h70-0-2069" id="h70-0-2069" class="d">-
</a><a href="#h70-0-2070" id="h70-0-2070" class="d">-type GetResponse struct {
</a><a href="#h70-0-2071" id="h70-0-2071" class="d">-	Entity           []*GetResponse_Entity `protobuf:&quot;group,1,rep,name=Entity&quot; json:&quot;entity,omitempty&quot;`
</a><a href="#h70-0-2072" id="h70-0-2072" class="d">-	Deferred         []*Reference          `protobuf:&quot;bytes,5,rep,name=deferred&quot; json:&quot;deferred,omitempty&quot;`
</a><a href="#h70-0-2073" id="h70-0-2073" class="d">-	InOrder          *bool                 `protobuf:&quot;varint,6,opt,name=in_order,def=1&quot; json:&quot;in_order,omitempty&quot;`
</a><a href="#h70-0-2074" id="h70-0-2074" class="d">-	XXX_unrecognized []byte                `json:&quot;-&quot;`
</a><a href="#h70-0-2075" id="h70-0-2075" class="d">-}
</a><a href="#h70-0-2076" id="h70-0-2076" class="d">-
</a><a href="#h70-0-2077" id="h70-0-2077" class="d">-func (m *GetResponse) Reset()         { *m = GetResponse{} }
</a><a href="#h70-0-2078" id="h70-0-2078" class="d">-func (m *GetResponse) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2079" id="h70-0-2079" class="d">-func (*GetResponse) ProtoMessage()    {}
</a><a href="#h70-0-2080" id="h70-0-2080" class="d">-
</a><a href="#h70-0-2081" id="h70-0-2081" class="d">-const Default_GetResponse_InOrder bool = true
</a><a href="#h70-0-2082" id="h70-0-2082" class="d">-
</a><a href="#h70-0-2083" id="h70-0-2083" class="d">-func (m *GetResponse) GetEntity() []*GetResponse_Entity {
</a><a href="#h70-0-2084" id="h70-0-2084" class="d">-	if m != nil {
</a><a href="#h70-0-2085" id="h70-0-2085" class="d">-		return m.Entity
</a><a href="#h70-0-2086" id="h70-0-2086" class="d">-	}
</a><a href="#h70-0-2087" id="h70-0-2087" class="d">-	return nil
</a><a href="#h70-0-2088" id="h70-0-2088" class="d">-}
</a><a href="#h70-0-2089" id="h70-0-2089" class="d">-
</a><a href="#h70-0-2090" id="h70-0-2090" class="d">-func (m *GetResponse) GetDeferred() []*Reference {
</a><a href="#h70-0-2091" id="h70-0-2091" class="d">-	if m != nil {
</a><a href="#h70-0-2092" id="h70-0-2092" class="d">-		return m.Deferred
</a><a href="#h70-0-2093" id="h70-0-2093" class="d">-	}
</a><a href="#h70-0-2094" id="h70-0-2094" class="d">-	return nil
</a><a href="#h70-0-2095" id="h70-0-2095" class="d">-}
</a><a href="#h70-0-2096" id="h70-0-2096" class="d">-
</a><a href="#h70-0-2097" id="h70-0-2097" class="d">-func (m *GetResponse) GetInOrder() bool {
</a><a href="#h70-0-2098" id="h70-0-2098" class="d">-	if m != nil &amp;&amp; m.InOrder != nil {
</a><a href="#h70-0-2099" id="h70-0-2099" class="d">-		return *m.InOrder
</a><a href="#h70-0-2100" id="h70-0-2100" class="d">-	}
</a><a href="#h70-0-2101" id="h70-0-2101" class="d">-	return Default_GetResponse_InOrder
</a><a href="#h70-0-2102" id="h70-0-2102" class="d">-}
</a><a href="#h70-0-2103" id="h70-0-2103" class="d">-
</a><a href="#h70-0-2104" id="h70-0-2104" class="d">-type GetResponse_Entity struct {
</a><a href="#h70-0-2105" id="h70-0-2105" class="d">-	Entity           *EntityProto `protobuf:&quot;bytes,2,opt,name=entity&quot; json:&quot;entity,omitempty&quot;`
</a><a href="#h70-0-2106" id="h70-0-2106" class="d">-	Key              *Reference   `protobuf:&quot;bytes,4,opt,name=key&quot; json:&quot;key,omitempty&quot;`
</a><a href="#h70-0-2107" id="h70-0-2107" class="d">-	Version          *int64       `protobuf:&quot;varint,3,opt,name=version&quot; json:&quot;version,omitempty&quot;`
</a><a href="#h70-0-2108" id="h70-0-2108" class="d">-	XXX_unrecognized []byte       `json:&quot;-&quot;`
</a><a href="#h70-0-2109" id="h70-0-2109" class="d">-}
</a><a href="#h70-0-2110" id="h70-0-2110" class="d">-
</a><a href="#h70-0-2111" id="h70-0-2111" class="d">-func (m *GetResponse_Entity) Reset()         { *m = GetResponse_Entity{} }
</a><a href="#h70-0-2112" id="h70-0-2112" class="d">-func (m *GetResponse_Entity) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2113" id="h70-0-2113" class="d">-func (*GetResponse_Entity) ProtoMessage()    {}
</a><a href="#h70-0-2114" id="h70-0-2114" class="d">-
</a><a href="#h70-0-2115" id="h70-0-2115" class="d">-func (m *GetResponse_Entity) GetEntity() *EntityProto {
</a><a href="#h70-0-2116" id="h70-0-2116" class="d">-	if m != nil {
</a><a href="#h70-0-2117" id="h70-0-2117" class="d">-		return m.Entity
</a><a href="#h70-0-2118" id="h70-0-2118" class="d">-	}
</a><a href="#h70-0-2119" id="h70-0-2119" class="d">-	return nil
</a><a href="#h70-0-2120" id="h70-0-2120" class="d">-}
</a><a href="#h70-0-2121" id="h70-0-2121" class="d">-
</a><a href="#h70-0-2122" id="h70-0-2122" class="d">-func (m *GetResponse_Entity) GetKey() *Reference {
</a><a href="#h70-0-2123" id="h70-0-2123" class="d">-	if m != nil {
</a><a href="#h70-0-2124" id="h70-0-2124" class="d">-		return m.Key
</a><a href="#h70-0-2125" id="h70-0-2125" class="d">-	}
</a><a href="#h70-0-2126" id="h70-0-2126" class="d">-	return nil
</a><a href="#h70-0-2127" id="h70-0-2127" class="d">-}
</a><a href="#h70-0-2128" id="h70-0-2128" class="d">-
</a><a href="#h70-0-2129" id="h70-0-2129" class="d">-func (m *GetResponse_Entity) GetVersion() int64 {
</a><a href="#h70-0-2130" id="h70-0-2130" class="d">-	if m != nil &amp;&amp; m.Version != nil {
</a><a href="#h70-0-2131" id="h70-0-2131" class="d">-		return *m.Version
</a><a href="#h70-0-2132" id="h70-0-2132" class="d">-	}
</a><a href="#h70-0-2133" id="h70-0-2133" class="d">-	return 0
</a><a href="#h70-0-2134" id="h70-0-2134" class="d">-}
</a><a href="#h70-0-2135" id="h70-0-2135" class="d">-
</a><a href="#h70-0-2136" id="h70-0-2136" class="d">-type PutRequest struct {
</a><a href="#h70-0-2137" id="h70-0-2137" class="d">-	Header           *InternalHeader          `protobuf:&quot;bytes,11,opt,name=header&quot; json:&quot;header,omitempty&quot;`
</a><a href="#h70-0-2138" id="h70-0-2138" class="d">-	Entity           []*EntityProto           `protobuf:&quot;bytes,1,rep,name=entity&quot; json:&quot;entity,omitempty&quot;`
</a><a href="#h70-0-2139" id="h70-0-2139" class="d">-	Transaction      *Transaction             `protobuf:&quot;bytes,2,opt,name=transaction&quot; json:&quot;transaction,omitempty&quot;`
</a><a href="#h70-0-2140" id="h70-0-2140" class="d">-	CompositeIndex   []*CompositeIndex        `protobuf:&quot;bytes,3,rep,name=composite_index&quot; json:&quot;composite_index,omitempty&quot;`
</a><a href="#h70-0-2141" id="h70-0-2141" class="d">-	Trusted          *bool                    `protobuf:&quot;varint,4,opt,name=trusted,def=0&quot; json:&quot;trusted,omitempty&quot;`
</a><a href="#h70-0-2142" id="h70-0-2142" class="d">-	Force            *bool                    `protobuf:&quot;varint,7,opt,name=force,def=0&quot; json:&quot;force,omitempty&quot;`
</a><a href="#h70-0-2143" id="h70-0-2143" class="d">-	MarkChanges      *bool                    `protobuf:&quot;varint,8,opt,name=mark_changes,def=0&quot; json:&quot;mark_changes,omitempty&quot;`
</a><a href="#h70-0-2144" id="h70-0-2144" class="d">-	Snapshot         []*Snapshot              `protobuf:&quot;bytes,9,rep,name=snapshot&quot; json:&quot;snapshot,omitempty&quot;`
</a><a href="#h70-0-2145" id="h70-0-2145" class="d">-	AutoIdPolicy     *PutRequest_AutoIdPolicy `protobuf:&quot;varint,10,opt,name=auto_id_policy,enum=appengine.PutRequest_AutoIdPolicy,def=0&quot; json:&quot;auto_id_policy,omitempty&quot;`
</a><a href="#h70-0-2146" id="h70-0-2146" class="d">-	XXX_unrecognized []byte                   `json:&quot;-&quot;`
</a><a href="#h70-0-2147" id="h70-0-2147" class="d">-}
</a><a href="#h70-0-2148" id="h70-0-2148" class="d">-
</a><a href="#h70-0-2149" id="h70-0-2149" class="d">-func (m *PutRequest) Reset()         { *m = PutRequest{} }
</a><a href="#h70-0-2150" id="h70-0-2150" class="d">-func (m *PutRequest) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2151" id="h70-0-2151" class="d">-func (*PutRequest) ProtoMessage()    {}
</a><a href="#h70-0-2152" id="h70-0-2152" class="d">-
</a><a href="#h70-0-2153" id="h70-0-2153" class="d">-const Default_PutRequest_Trusted bool = false
</a><a href="#h70-0-2154" id="h70-0-2154" class="d">-const Default_PutRequest_Force bool = false
</a><a href="#h70-0-2155" id="h70-0-2155" class="d">-const Default_PutRequest_MarkChanges bool = false
</a><a href="#h70-0-2156" id="h70-0-2156" class="d">-const Default_PutRequest_AutoIdPolicy PutRequest_AutoIdPolicy = PutRequest_CURRENT
</a><a href="#h70-0-2157" id="h70-0-2157" class="d">-
</a><a href="#h70-0-2158" id="h70-0-2158" class="d">-func (m *PutRequest) GetHeader() *InternalHeader {
</a><a href="#h70-0-2159" id="h70-0-2159" class="d">-	if m != nil {
</a><a href="#h70-0-2160" id="h70-0-2160" class="d">-		return m.Header
</a><a href="#h70-0-2161" id="h70-0-2161" class="d">-	}
</a><a href="#h70-0-2162" id="h70-0-2162" class="d">-	return nil
</a><a href="#h70-0-2163" id="h70-0-2163" class="d">-}
</a><a href="#h70-0-2164" id="h70-0-2164" class="d">-
</a><a href="#h70-0-2165" id="h70-0-2165" class="d">-func (m *PutRequest) GetEntity() []*EntityProto {
</a><a href="#h70-0-2166" id="h70-0-2166" class="d">-	if m != nil {
</a><a href="#h70-0-2167" id="h70-0-2167" class="d">-		return m.Entity
</a><a href="#h70-0-2168" id="h70-0-2168" class="d">-	}
</a><a href="#h70-0-2169" id="h70-0-2169" class="d">-	return nil
</a><a href="#h70-0-2170" id="h70-0-2170" class="d">-}
</a><a href="#h70-0-2171" id="h70-0-2171" class="d">-
</a><a href="#h70-0-2172" id="h70-0-2172" class="d">-func (m *PutRequest) GetTransaction() *Transaction {
</a><a href="#h70-0-2173" id="h70-0-2173" class="d">-	if m != nil {
</a><a href="#h70-0-2174" id="h70-0-2174" class="d">-		return m.Transaction
</a><a href="#h70-0-2175" id="h70-0-2175" class="d">-	}
</a><a href="#h70-0-2176" id="h70-0-2176" class="d">-	return nil
</a><a href="#h70-0-2177" id="h70-0-2177" class="d">-}
</a><a href="#h70-0-2178" id="h70-0-2178" class="d">-
</a><a href="#h70-0-2179" id="h70-0-2179" class="d">-func (m *PutRequest) GetCompositeIndex() []*CompositeIndex {
</a><a href="#h70-0-2180" id="h70-0-2180" class="d">-	if m != nil {
</a><a href="#h70-0-2181" id="h70-0-2181" class="d">-		return m.CompositeIndex
</a><a href="#h70-0-2182" id="h70-0-2182" class="d">-	}
</a><a href="#h70-0-2183" id="h70-0-2183" class="d">-	return nil
</a><a href="#h70-0-2184" id="h70-0-2184" class="d">-}
</a><a href="#h70-0-2185" id="h70-0-2185" class="d">-
</a><a href="#h70-0-2186" id="h70-0-2186" class="d">-func (m *PutRequest) GetTrusted() bool {
</a><a href="#h70-0-2187" id="h70-0-2187" class="d">-	if m != nil &amp;&amp; m.Trusted != nil {
</a><a href="#h70-0-2188" id="h70-0-2188" class="d">-		return *m.Trusted
</a><a href="#h70-0-2189" id="h70-0-2189" class="d">-	}
</a><a href="#h70-0-2190" id="h70-0-2190" class="d">-	return Default_PutRequest_Trusted
</a><a href="#h70-0-2191" id="h70-0-2191" class="d">-}
</a><a href="#h70-0-2192" id="h70-0-2192" class="d">-
</a><a href="#h70-0-2193" id="h70-0-2193" class="d">-func (m *PutRequest) GetForce() bool {
</a><a href="#h70-0-2194" id="h70-0-2194" class="d">-	if m != nil &amp;&amp; m.Force != nil {
</a><a href="#h70-0-2195" id="h70-0-2195" class="d">-		return *m.Force
</a><a href="#h70-0-2196" id="h70-0-2196" class="d">-	}
</a><a href="#h70-0-2197" id="h70-0-2197" class="d">-	return Default_PutRequest_Force
</a><a href="#h70-0-2198" id="h70-0-2198" class="d">-}
</a><a href="#h70-0-2199" id="h70-0-2199" class="d">-
</a><a href="#h70-0-2200" id="h70-0-2200" class="d">-func (m *PutRequest) GetMarkChanges() bool {
</a><a href="#h70-0-2201" id="h70-0-2201" class="d">-	if m != nil &amp;&amp; m.MarkChanges != nil {
</a><a href="#h70-0-2202" id="h70-0-2202" class="d">-		return *m.MarkChanges
</a><a href="#h70-0-2203" id="h70-0-2203" class="d">-	}
</a><a href="#h70-0-2204" id="h70-0-2204" class="d">-	return Default_PutRequest_MarkChanges
</a><a href="#h70-0-2205" id="h70-0-2205" class="d">-}
</a><a href="#h70-0-2206" id="h70-0-2206" class="d">-
</a><a href="#h70-0-2207" id="h70-0-2207" class="d">-func (m *PutRequest) GetSnapshot() []*Snapshot {
</a><a href="#h70-0-2208" id="h70-0-2208" class="d">-	if m != nil {
</a><a href="#h70-0-2209" id="h70-0-2209" class="d">-		return m.Snapshot
</a><a href="#h70-0-2210" id="h70-0-2210" class="d">-	}
</a><a href="#h70-0-2211" id="h70-0-2211" class="d">-	return nil
</a><a href="#h70-0-2212" id="h70-0-2212" class="d">-}
</a><a href="#h70-0-2213" id="h70-0-2213" class="d">-
</a><a href="#h70-0-2214" id="h70-0-2214" class="d">-func (m *PutRequest) GetAutoIdPolicy() PutRequest_AutoIdPolicy {
</a><a href="#h70-0-2215" id="h70-0-2215" class="d">-	if m != nil &amp;&amp; m.AutoIdPolicy != nil {
</a><a href="#h70-0-2216" id="h70-0-2216" class="d">-		return *m.AutoIdPolicy
</a><a href="#h70-0-2217" id="h70-0-2217" class="d">-	}
</a><a href="#h70-0-2218" id="h70-0-2218" class="d">-	return Default_PutRequest_AutoIdPolicy
</a><a href="#h70-0-2219" id="h70-0-2219" class="d">-}
</a><a href="#h70-0-2220" id="h70-0-2220" class="d">-
</a><a href="#h70-0-2221" id="h70-0-2221" class="d">-type PutResponse struct {
</a><a href="#h70-0-2222" id="h70-0-2222" class="d">-	Key              []*Reference `protobuf:&quot;bytes,1,rep,name=key&quot; json:&quot;key,omitempty&quot;`
</a><a href="#h70-0-2223" id="h70-0-2223" class="d">-	Cost             *Cost        `protobuf:&quot;bytes,2,opt,name=cost&quot; json:&quot;cost,omitempty&quot;`
</a><a href="#h70-0-2224" id="h70-0-2224" class="d">-	Version          []int64      `protobuf:&quot;varint,3,rep,name=version&quot; json:&quot;version,omitempty&quot;`
</a><a href="#h70-0-2225" id="h70-0-2225" class="d">-	XXX_unrecognized []byte       `json:&quot;-&quot;`
</a><a href="#h70-0-2226" id="h70-0-2226" class="d">-}
</a><a href="#h70-0-2227" id="h70-0-2227" class="d">-
</a><a href="#h70-0-2228" id="h70-0-2228" class="d">-func (m *PutResponse) Reset()         { *m = PutResponse{} }
</a><a href="#h70-0-2229" id="h70-0-2229" class="d">-func (m *PutResponse) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2230" id="h70-0-2230" class="d">-func (*PutResponse) ProtoMessage()    {}
</a><a href="#h70-0-2231" id="h70-0-2231" class="d">-
</a><a href="#h70-0-2232" id="h70-0-2232" class="d">-func (m *PutResponse) GetKey() []*Reference {
</a><a href="#h70-0-2233" id="h70-0-2233" class="d">-	if m != nil {
</a><a href="#h70-0-2234" id="h70-0-2234" class="d">-		return m.Key
</a><a href="#h70-0-2235" id="h70-0-2235" class="d">-	}
</a><a href="#h70-0-2236" id="h70-0-2236" class="d">-	return nil
</a><a href="#h70-0-2237" id="h70-0-2237" class="d">-}
</a><a href="#h70-0-2238" id="h70-0-2238" class="d">-
</a><a href="#h70-0-2239" id="h70-0-2239" class="d">-func (m *PutResponse) GetCost() *Cost {
</a><a href="#h70-0-2240" id="h70-0-2240" class="d">-	if m != nil {
</a><a href="#h70-0-2241" id="h70-0-2241" class="d">-		return m.Cost
</a><a href="#h70-0-2242" id="h70-0-2242" class="d">-	}
</a><a href="#h70-0-2243" id="h70-0-2243" class="d">-	return nil
</a><a href="#h70-0-2244" id="h70-0-2244" class="d">-}
</a><a href="#h70-0-2245" id="h70-0-2245" class="d">-
</a><a href="#h70-0-2246" id="h70-0-2246" class="d">-func (m *PutResponse) GetVersion() []int64 {
</a><a href="#h70-0-2247" id="h70-0-2247" class="d">-	if m != nil {
</a><a href="#h70-0-2248" id="h70-0-2248" class="d">-		return m.Version
</a><a href="#h70-0-2249" id="h70-0-2249" class="d">-	}
</a><a href="#h70-0-2250" id="h70-0-2250" class="d">-	return nil
</a><a href="#h70-0-2251" id="h70-0-2251" class="d">-}
</a><a href="#h70-0-2252" id="h70-0-2252" class="d">-
</a><a href="#h70-0-2253" id="h70-0-2253" class="d">-type TouchRequest struct {
</a><a href="#h70-0-2254" id="h70-0-2254" class="d">-	Header           *InternalHeader   `protobuf:&quot;bytes,10,opt,name=header&quot; json:&quot;header,omitempty&quot;`
</a><a href="#h70-0-2255" id="h70-0-2255" class="d">-	Key              []*Reference      `protobuf:&quot;bytes,1,rep,name=key&quot; json:&quot;key,omitempty&quot;`
</a><a href="#h70-0-2256" id="h70-0-2256" class="d">-	CompositeIndex   []*CompositeIndex `protobuf:&quot;bytes,2,rep,name=composite_index&quot; json:&quot;composite_index,omitempty&quot;`
</a><a href="#h70-0-2257" id="h70-0-2257" class="d">-	Force            *bool             `protobuf:&quot;varint,3,opt,name=force,def=0&quot; json:&quot;force,omitempty&quot;`
</a><a href="#h70-0-2258" id="h70-0-2258" class="d">-	Snapshot         []*Snapshot       `protobuf:&quot;bytes,9,rep,name=snapshot&quot; json:&quot;snapshot,omitempty&quot;`
</a><a href="#h70-0-2259" id="h70-0-2259" class="d">-	XXX_unrecognized []byte            `json:&quot;-&quot;`
</a><a href="#h70-0-2260" id="h70-0-2260" class="d">-}
</a><a href="#h70-0-2261" id="h70-0-2261" class="d">-
</a><a href="#h70-0-2262" id="h70-0-2262" class="d">-func (m *TouchRequest) Reset()         { *m = TouchRequest{} }
</a><a href="#h70-0-2263" id="h70-0-2263" class="d">-func (m *TouchRequest) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2264" id="h70-0-2264" class="d">-func (*TouchRequest) ProtoMessage()    {}
</a><a href="#h70-0-2265" id="h70-0-2265" class="d">-
</a><a href="#h70-0-2266" id="h70-0-2266" class="d">-const Default_TouchRequest_Force bool = false
</a><a href="#h70-0-2267" id="h70-0-2267" class="d">-
</a><a href="#h70-0-2268" id="h70-0-2268" class="d">-func (m *TouchRequest) GetHeader() *InternalHeader {
</a><a href="#h70-0-2269" id="h70-0-2269" class="d">-	if m != nil {
</a><a href="#h70-0-2270" id="h70-0-2270" class="d">-		return m.Header
</a><a href="#h70-0-2271" id="h70-0-2271" class="d">-	}
</a><a href="#h70-0-2272" id="h70-0-2272" class="d">-	return nil
</a><a href="#h70-0-2273" id="h70-0-2273" class="d">-}
</a><a href="#h70-0-2274" id="h70-0-2274" class="d">-
</a><a href="#h70-0-2275" id="h70-0-2275" class="d">-func (m *TouchRequest) GetKey() []*Reference {
</a><a href="#h70-0-2276" id="h70-0-2276" class="d">-	if m != nil {
</a><a href="#h70-0-2277" id="h70-0-2277" class="d">-		return m.Key
</a><a href="#h70-0-2278" id="h70-0-2278" class="d">-	}
</a><a href="#h70-0-2279" id="h70-0-2279" class="d">-	return nil
</a><a href="#h70-0-2280" id="h70-0-2280" class="d">-}
</a><a href="#h70-0-2281" id="h70-0-2281" class="d">-
</a><a href="#h70-0-2282" id="h70-0-2282" class="d">-func (m *TouchRequest) GetCompositeIndex() []*CompositeIndex {
</a><a href="#h70-0-2283" id="h70-0-2283" class="d">-	if m != nil {
</a><a href="#h70-0-2284" id="h70-0-2284" class="d">-		return m.CompositeIndex
</a><a href="#h70-0-2285" id="h70-0-2285" class="d">-	}
</a><a href="#h70-0-2286" id="h70-0-2286" class="d">-	return nil
</a><a href="#h70-0-2287" id="h70-0-2287" class="d">-}
</a><a href="#h70-0-2288" id="h70-0-2288" class="d">-
</a><a href="#h70-0-2289" id="h70-0-2289" class="d">-func (m *TouchRequest) GetForce() bool {
</a><a href="#h70-0-2290" id="h70-0-2290" class="d">-	if m != nil &amp;&amp; m.Force != nil {
</a><a href="#h70-0-2291" id="h70-0-2291" class="d">-		return *m.Force
</a><a href="#h70-0-2292" id="h70-0-2292" class="d">-	}
</a><a href="#h70-0-2293" id="h70-0-2293" class="d">-	return Default_TouchRequest_Force
</a><a href="#h70-0-2294" id="h70-0-2294" class="d">-}
</a><a href="#h70-0-2295" id="h70-0-2295" class="d">-
</a><a href="#h70-0-2296" id="h70-0-2296" class="d">-func (m *TouchRequest) GetSnapshot() []*Snapshot {
</a><a href="#h70-0-2297" id="h70-0-2297" class="d">-	if m != nil {
</a><a href="#h70-0-2298" id="h70-0-2298" class="d">-		return m.Snapshot
</a><a href="#h70-0-2299" id="h70-0-2299" class="d">-	}
</a><a href="#h70-0-2300" id="h70-0-2300" class="d">-	return nil
</a><a href="#h70-0-2301" id="h70-0-2301" class="d">-}
</a><a href="#h70-0-2302" id="h70-0-2302" class="d">-
</a><a href="#h70-0-2303" id="h70-0-2303" class="d">-type TouchResponse struct {
</a><a href="#h70-0-2304" id="h70-0-2304" class="d">-	Cost             *Cost  `protobuf:&quot;bytes,1,opt,name=cost&quot; json:&quot;cost,omitempty&quot;`
</a><a href="#h70-0-2305" id="h70-0-2305" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h70-0-2306" id="h70-0-2306" class="d">-}
</a><a href="#h70-0-2307" id="h70-0-2307" class="d">-
</a><a href="#h70-0-2308" id="h70-0-2308" class="d">-func (m *TouchResponse) Reset()         { *m = TouchResponse{} }
</a><a href="#h70-0-2309" id="h70-0-2309" class="d">-func (m *TouchResponse) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2310" id="h70-0-2310" class="d">-func (*TouchResponse) ProtoMessage()    {}
</a><a href="#h70-0-2311" id="h70-0-2311" class="d">-
</a><a href="#h70-0-2312" id="h70-0-2312" class="d">-func (m *TouchResponse) GetCost() *Cost {
</a><a href="#h70-0-2313" id="h70-0-2313" class="d">-	if m != nil {
</a><a href="#h70-0-2314" id="h70-0-2314" class="d">-		return m.Cost
</a><a href="#h70-0-2315" id="h70-0-2315" class="d">-	}
</a><a href="#h70-0-2316" id="h70-0-2316" class="d">-	return nil
</a><a href="#h70-0-2317" id="h70-0-2317" class="d">-}
</a><a href="#h70-0-2318" id="h70-0-2318" class="d">-
</a><a href="#h70-0-2319" id="h70-0-2319" class="d">-type DeleteRequest struct {
</a><a href="#h70-0-2320" id="h70-0-2320" class="d">-	Header           *InternalHeader `protobuf:&quot;bytes,10,opt,name=header&quot; json:&quot;header,omitempty&quot;`
</a><a href="#h70-0-2321" id="h70-0-2321" class="d">-	Key              []*Reference    `protobuf:&quot;bytes,6,rep,name=key&quot; json:&quot;key,omitempty&quot;`
</a><a href="#h70-0-2322" id="h70-0-2322" class="d">-	Transaction      *Transaction    `protobuf:&quot;bytes,5,opt,name=transaction&quot; json:&quot;transaction,omitempty&quot;`
</a><a href="#h70-0-2323" id="h70-0-2323" class="d">-	Trusted          *bool           `protobuf:&quot;varint,4,opt,name=trusted,def=0&quot; json:&quot;trusted,omitempty&quot;`
</a><a href="#h70-0-2324" id="h70-0-2324" class="d">-	Force            *bool           `protobuf:&quot;varint,7,opt,name=force,def=0&quot; json:&quot;force,omitempty&quot;`
</a><a href="#h70-0-2325" id="h70-0-2325" class="d">-	MarkChanges      *bool           `protobuf:&quot;varint,8,opt,name=mark_changes,def=0&quot; json:&quot;mark_changes,omitempty&quot;`
</a><a href="#h70-0-2326" id="h70-0-2326" class="d">-	Snapshot         []*Snapshot     `protobuf:&quot;bytes,9,rep,name=snapshot&quot; json:&quot;snapshot,omitempty&quot;`
</a><a href="#h70-0-2327" id="h70-0-2327" class="d">-	XXX_unrecognized []byte          `json:&quot;-&quot;`
</a><a href="#h70-0-2328" id="h70-0-2328" class="d">-}
</a><a href="#h70-0-2329" id="h70-0-2329" class="d">-
</a><a href="#h70-0-2330" id="h70-0-2330" class="d">-func (m *DeleteRequest) Reset()         { *m = DeleteRequest{} }
</a><a href="#h70-0-2331" id="h70-0-2331" class="d">-func (m *DeleteRequest) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2332" id="h70-0-2332" class="d">-func (*DeleteRequest) ProtoMessage()    {}
</a><a href="#h70-0-2333" id="h70-0-2333" class="d">-
</a><a href="#h70-0-2334" id="h70-0-2334" class="d">-const Default_DeleteRequest_Trusted bool = false
</a><a href="#h70-0-2335" id="h70-0-2335" class="d">-const Default_DeleteRequest_Force bool = false
</a><a href="#h70-0-2336" id="h70-0-2336" class="d">-const Default_DeleteRequest_MarkChanges bool = false
</a><a href="#h70-0-2337" id="h70-0-2337" class="d">-
</a><a href="#h70-0-2338" id="h70-0-2338" class="d">-func (m *DeleteRequest) GetHeader() *InternalHeader {
</a><a href="#h70-0-2339" id="h70-0-2339" class="d">-	if m != nil {
</a><a href="#h70-0-2340" id="h70-0-2340" class="d">-		return m.Header
</a><a href="#h70-0-2341" id="h70-0-2341" class="d">-	}
</a><a href="#h70-0-2342" id="h70-0-2342" class="d">-	return nil
</a><a href="#h70-0-2343" id="h70-0-2343" class="d">-}
</a><a href="#h70-0-2344" id="h70-0-2344" class="d">-
</a><a href="#h70-0-2345" id="h70-0-2345" class="d">-func (m *DeleteRequest) GetKey() []*Reference {
</a><a href="#h70-0-2346" id="h70-0-2346" class="d">-	if m != nil {
</a><a href="#h70-0-2347" id="h70-0-2347" class="d">-		return m.Key
</a><a href="#h70-0-2348" id="h70-0-2348" class="d">-	}
</a><a href="#h70-0-2349" id="h70-0-2349" class="d">-	return nil
</a><a href="#h70-0-2350" id="h70-0-2350" class="d">-}
</a><a href="#h70-0-2351" id="h70-0-2351" class="d">-
</a><a href="#h70-0-2352" id="h70-0-2352" class="d">-func (m *DeleteRequest) GetTransaction() *Transaction {
</a><a href="#h70-0-2353" id="h70-0-2353" class="d">-	if m != nil {
</a><a href="#h70-0-2354" id="h70-0-2354" class="d">-		return m.Transaction
</a><a href="#h70-0-2355" id="h70-0-2355" class="d">-	}
</a><a href="#h70-0-2356" id="h70-0-2356" class="d">-	return nil
</a><a href="#h70-0-2357" id="h70-0-2357" class="d">-}
</a><a href="#h70-0-2358" id="h70-0-2358" class="d">-
</a><a href="#h70-0-2359" id="h70-0-2359" class="d">-func (m *DeleteRequest) GetTrusted() bool {
</a><a href="#h70-0-2360" id="h70-0-2360" class="d">-	if m != nil &amp;&amp; m.Trusted != nil {
</a><a href="#h70-0-2361" id="h70-0-2361" class="d">-		return *m.Trusted
</a><a href="#h70-0-2362" id="h70-0-2362" class="d">-	}
</a><a href="#h70-0-2363" id="h70-0-2363" class="d">-	return Default_DeleteRequest_Trusted
</a><a href="#h70-0-2364" id="h70-0-2364" class="d">-}
</a><a href="#h70-0-2365" id="h70-0-2365" class="d">-
</a><a href="#h70-0-2366" id="h70-0-2366" class="d">-func (m *DeleteRequest) GetForce() bool {
</a><a href="#h70-0-2367" id="h70-0-2367" class="d">-	if m != nil &amp;&amp; m.Force != nil {
</a><a href="#h70-0-2368" id="h70-0-2368" class="d">-		return *m.Force
</a><a href="#h70-0-2369" id="h70-0-2369" class="d">-	}
</a><a href="#h70-0-2370" id="h70-0-2370" class="d">-	return Default_DeleteRequest_Force
</a><a href="#h70-0-2371" id="h70-0-2371" class="d">-}
</a><a href="#h70-0-2372" id="h70-0-2372" class="d">-
</a><a href="#h70-0-2373" id="h70-0-2373" class="d">-func (m *DeleteRequest) GetMarkChanges() bool {
</a><a href="#h70-0-2374" id="h70-0-2374" class="d">-	if m != nil &amp;&amp; m.MarkChanges != nil {
</a><a href="#h70-0-2375" id="h70-0-2375" class="d">-		return *m.MarkChanges
</a><a href="#h70-0-2376" id="h70-0-2376" class="d">-	}
</a><a href="#h70-0-2377" id="h70-0-2377" class="d">-	return Default_DeleteRequest_MarkChanges
</a><a href="#h70-0-2378" id="h70-0-2378" class="d">-}
</a><a href="#h70-0-2379" id="h70-0-2379" class="d">-
</a><a href="#h70-0-2380" id="h70-0-2380" class="d">-func (m *DeleteRequest) GetSnapshot() []*Snapshot {
</a><a href="#h70-0-2381" id="h70-0-2381" class="d">-	if m != nil {
</a><a href="#h70-0-2382" id="h70-0-2382" class="d">-		return m.Snapshot
</a><a href="#h70-0-2383" id="h70-0-2383" class="d">-	}
</a><a href="#h70-0-2384" id="h70-0-2384" class="d">-	return nil
</a><a href="#h70-0-2385" id="h70-0-2385" class="d">-}
</a><a href="#h70-0-2386" id="h70-0-2386" class="d">-
</a><a href="#h70-0-2387" id="h70-0-2387" class="d">-type DeleteResponse struct {
</a><a href="#h70-0-2388" id="h70-0-2388" class="d">-	Cost             *Cost   `protobuf:&quot;bytes,1,opt,name=cost&quot; json:&quot;cost,omitempty&quot;`
</a><a href="#h70-0-2389" id="h70-0-2389" class="d">-	Version          []int64 `protobuf:&quot;varint,3,rep,name=version&quot; json:&quot;version,omitempty&quot;`
</a><a href="#h70-0-2390" id="h70-0-2390" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h70-0-2391" id="h70-0-2391" class="d">-}
</a><a href="#h70-0-2392" id="h70-0-2392" class="d">-
</a><a href="#h70-0-2393" id="h70-0-2393" class="d">-func (m *DeleteResponse) Reset()         { *m = DeleteResponse{} }
</a><a href="#h70-0-2394" id="h70-0-2394" class="d">-func (m *DeleteResponse) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2395" id="h70-0-2395" class="d">-func (*DeleteResponse) ProtoMessage()    {}
</a><a href="#h70-0-2396" id="h70-0-2396" class="d">-
</a><a href="#h70-0-2397" id="h70-0-2397" class="d">-func (m *DeleteResponse) GetCost() *Cost {
</a><a href="#h70-0-2398" id="h70-0-2398" class="d">-	if m != nil {
</a><a href="#h70-0-2399" id="h70-0-2399" class="d">-		return m.Cost
</a><a href="#h70-0-2400" id="h70-0-2400" class="d">-	}
</a><a href="#h70-0-2401" id="h70-0-2401" class="d">-	return nil
</a><a href="#h70-0-2402" id="h70-0-2402" class="d">-}
</a><a href="#h70-0-2403" id="h70-0-2403" class="d">-
</a><a href="#h70-0-2404" id="h70-0-2404" class="d">-func (m *DeleteResponse) GetVersion() []int64 {
</a><a href="#h70-0-2405" id="h70-0-2405" class="d">-	if m != nil {
</a><a href="#h70-0-2406" id="h70-0-2406" class="d">-		return m.Version
</a><a href="#h70-0-2407" id="h70-0-2407" class="d">-	}
</a><a href="#h70-0-2408" id="h70-0-2408" class="d">-	return nil
</a><a href="#h70-0-2409" id="h70-0-2409" class="d">-}
</a><a href="#h70-0-2410" id="h70-0-2410" class="d">-
</a><a href="#h70-0-2411" id="h70-0-2411" class="d">-type NextRequest struct {
</a><a href="#h70-0-2412" id="h70-0-2412" class="d">-	Header           *InternalHeader `protobuf:&quot;bytes,5,opt,name=header&quot; json:&quot;header,omitempty&quot;`
</a><a href="#h70-0-2413" id="h70-0-2413" class="d">-	Cursor           *Cursor         `protobuf:&quot;bytes,1,req,name=cursor&quot; json:&quot;cursor,omitempty&quot;`
</a><a href="#h70-0-2414" id="h70-0-2414" class="d">-	Count            *int32          `protobuf:&quot;varint,2,opt,name=count&quot; json:&quot;count,omitempty&quot;`
</a><a href="#h70-0-2415" id="h70-0-2415" class="d">-	Offset           *int32          `protobuf:&quot;varint,4,opt,name=offset,def=0&quot; json:&quot;offset,omitempty&quot;`
</a><a href="#h70-0-2416" id="h70-0-2416" class="d">-	Compile          *bool           `protobuf:&quot;varint,3,opt,name=compile,def=0&quot; json:&quot;compile,omitempty&quot;`
</a><a href="#h70-0-2417" id="h70-0-2417" class="d">-	XXX_unrecognized []byte          `json:&quot;-&quot;`
</a><a href="#h70-0-2418" id="h70-0-2418" class="d">-}
</a><a href="#h70-0-2419" id="h70-0-2419" class="d">-
</a><a href="#h70-0-2420" id="h70-0-2420" class="d">-func (m *NextRequest) Reset()         { *m = NextRequest{} }
</a><a href="#h70-0-2421" id="h70-0-2421" class="d">-func (m *NextRequest) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2422" id="h70-0-2422" class="d">-func (*NextRequest) ProtoMessage()    {}
</a><a href="#h70-0-2423" id="h70-0-2423" class="d">-
</a><a href="#h70-0-2424" id="h70-0-2424" class="d">-const Default_NextRequest_Offset int32 = 0
</a><a href="#h70-0-2425" id="h70-0-2425" class="d">-const Default_NextRequest_Compile bool = false
</a><a href="#h70-0-2426" id="h70-0-2426" class="d">-
</a><a href="#h70-0-2427" id="h70-0-2427" class="d">-func (m *NextRequest) GetHeader() *InternalHeader {
</a><a href="#h70-0-2428" id="h70-0-2428" class="d">-	if m != nil {
</a><a href="#h70-0-2429" id="h70-0-2429" class="d">-		return m.Header
</a><a href="#h70-0-2430" id="h70-0-2430" class="d">-	}
</a><a href="#h70-0-2431" id="h70-0-2431" class="d">-	return nil
</a><a href="#h70-0-2432" id="h70-0-2432" class="d">-}
</a><a href="#h70-0-2433" id="h70-0-2433" class="d">-
</a><a href="#h70-0-2434" id="h70-0-2434" class="d">-func (m *NextRequest) GetCursor() *Cursor {
</a><a href="#h70-0-2435" id="h70-0-2435" class="d">-	if m != nil {
</a><a href="#h70-0-2436" id="h70-0-2436" class="d">-		return m.Cursor
</a><a href="#h70-0-2437" id="h70-0-2437" class="d">-	}
</a><a href="#h70-0-2438" id="h70-0-2438" class="d">-	return nil
</a><a href="#h70-0-2439" id="h70-0-2439" class="d">-}
</a><a href="#h70-0-2440" id="h70-0-2440" class="d">-
</a><a href="#h70-0-2441" id="h70-0-2441" class="d">-func (m *NextRequest) GetCount() int32 {
</a><a href="#h70-0-2442" id="h70-0-2442" class="d">-	if m != nil &amp;&amp; m.Count != nil {
</a><a href="#h70-0-2443" id="h70-0-2443" class="d">-		return *m.Count
</a><a href="#h70-0-2444" id="h70-0-2444" class="d">-	}
</a><a href="#h70-0-2445" id="h70-0-2445" class="d">-	return 0
</a><a href="#h70-0-2446" id="h70-0-2446" class="d">-}
</a><a href="#h70-0-2447" id="h70-0-2447" class="d">-
</a><a href="#h70-0-2448" id="h70-0-2448" class="d">-func (m *NextRequest) GetOffset() int32 {
</a><a href="#h70-0-2449" id="h70-0-2449" class="d">-	if m != nil &amp;&amp; m.Offset != nil {
</a><a href="#h70-0-2450" id="h70-0-2450" class="d">-		return *m.Offset
</a><a href="#h70-0-2451" id="h70-0-2451" class="d">-	}
</a><a href="#h70-0-2452" id="h70-0-2452" class="d">-	return Default_NextRequest_Offset
</a><a href="#h70-0-2453" id="h70-0-2453" class="d">-}
</a><a href="#h70-0-2454" id="h70-0-2454" class="d">-
</a><a href="#h70-0-2455" id="h70-0-2455" class="d">-func (m *NextRequest) GetCompile() bool {
</a><a href="#h70-0-2456" id="h70-0-2456" class="d">-	if m != nil &amp;&amp; m.Compile != nil {
</a><a href="#h70-0-2457" id="h70-0-2457" class="d">-		return *m.Compile
</a><a href="#h70-0-2458" id="h70-0-2458" class="d">-	}
</a><a href="#h70-0-2459" id="h70-0-2459" class="d">-	return Default_NextRequest_Compile
</a><a href="#h70-0-2460" id="h70-0-2460" class="d">-}
</a><a href="#h70-0-2461" id="h70-0-2461" class="d">-
</a><a href="#h70-0-2462" id="h70-0-2462" class="d">-type QueryResult struct {
</a><a href="#h70-0-2463" id="h70-0-2463" class="d">-	Cursor           *Cursor           `protobuf:&quot;bytes,1,opt,name=cursor&quot; json:&quot;cursor,omitempty&quot;`
</a><a href="#h70-0-2464" id="h70-0-2464" class="d">-	Result           []*EntityProto    `protobuf:&quot;bytes,2,rep,name=result&quot; json:&quot;result,omitempty&quot;`
</a><a href="#h70-0-2465" id="h70-0-2465" class="d">-	SkippedResults   *int32            `protobuf:&quot;varint,7,opt,name=skipped_results&quot; json:&quot;skipped_results,omitempty&quot;`
</a><a href="#h70-0-2466" id="h70-0-2466" class="d">-	MoreResults      *bool             `protobuf:&quot;varint,3,req,name=more_results&quot; json:&quot;more_results,omitempty&quot;`
</a><a href="#h70-0-2467" id="h70-0-2467" class="d">-	KeysOnly         *bool             `protobuf:&quot;varint,4,opt,name=keys_only&quot; json:&quot;keys_only,omitempty&quot;`
</a><a href="#h70-0-2468" id="h70-0-2468" class="d">-	IndexOnly        *bool             `protobuf:&quot;varint,9,opt,name=index_only&quot; json:&quot;index_only,omitempty&quot;`
</a><a href="#h70-0-2469" id="h70-0-2469" class="d">-	SmallOps         *bool             `protobuf:&quot;varint,10,opt,name=small_ops&quot; json:&quot;small_ops,omitempty&quot;`
</a><a href="#h70-0-2470" id="h70-0-2470" class="d">-	CompiledQuery    *CompiledQuery    `protobuf:&quot;bytes,5,opt,name=compiled_query&quot; json:&quot;compiled_query,omitempty&quot;`
</a><a href="#h70-0-2471" id="h70-0-2471" class="d">-	CompiledCursor   *CompiledCursor   `protobuf:&quot;bytes,6,opt,name=compiled_cursor&quot; json:&quot;compiled_cursor,omitempty&quot;`
</a><a href="#h70-0-2472" id="h70-0-2472" class="d">-	Index            []*CompositeIndex `protobuf:&quot;bytes,8,rep,name=index&quot; json:&quot;index,omitempty&quot;`
</a><a href="#h70-0-2473" id="h70-0-2473" class="d">-	Version          []int64           `protobuf:&quot;varint,11,rep,name=version&quot; json:&quot;version,omitempty&quot;`
</a><a href="#h70-0-2474" id="h70-0-2474" class="d">-	XXX_unrecognized []byte            `json:&quot;-&quot;`
</a><a href="#h70-0-2475" id="h70-0-2475" class="d">-}
</a><a href="#h70-0-2476" id="h70-0-2476" class="d">-
</a><a href="#h70-0-2477" id="h70-0-2477" class="d">-func (m *QueryResult) Reset()         { *m = QueryResult{} }
</a><a href="#h70-0-2478" id="h70-0-2478" class="d">-func (m *QueryResult) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2479" id="h70-0-2479" class="d">-func (*QueryResult) ProtoMessage()    {}
</a><a href="#h70-0-2480" id="h70-0-2480" class="d">-
</a><a href="#h70-0-2481" id="h70-0-2481" class="d">-func (m *QueryResult) GetCursor() *Cursor {
</a><a href="#h70-0-2482" id="h70-0-2482" class="d">-	if m != nil {
</a><a href="#h70-0-2483" id="h70-0-2483" class="d">-		return m.Cursor
</a><a href="#h70-0-2484" id="h70-0-2484" class="d">-	}
</a><a href="#h70-0-2485" id="h70-0-2485" class="d">-	return nil
</a><a href="#h70-0-2486" id="h70-0-2486" class="d">-}
</a><a href="#h70-0-2487" id="h70-0-2487" class="d">-
</a><a href="#h70-0-2488" id="h70-0-2488" class="d">-func (m *QueryResult) GetResult() []*EntityProto {
</a><a href="#h70-0-2489" id="h70-0-2489" class="d">-	if m != nil {
</a><a href="#h70-0-2490" id="h70-0-2490" class="d">-		return m.Result
</a><a href="#h70-0-2491" id="h70-0-2491" class="d">-	}
</a><a href="#h70-0-2492" id="h70-0-2492" class="d">-	return nil
</a><a href="#h70-0-2493" id="h70-0-2493" class="d">-}
</a><a href="#h70-0-2494" id="h70-0-2494" class="d">-
</a><a href="#h70-0-2495" id="h70-0-2495" class="d">-func (m *QueryResult) GetSkippedResults() int32 {
</a><a href="#h70-0-2496" id="h70-0-2496" class="d">-	if m != nil &amp;&amp; m.SkippedResults != nil {
</a><a href="#h70-0-2497" id="h70-0-2497" class="d">-		return *m.SkippedResults
</a><a href="#h70-0-2498" id="h70-0-2498" class="d">-	}
</a><a href="#h70-0-2499" id="h70-0-2499" class="d">-	return 0
</a><a href="#h70-0-2500" id="h70-0-2500" class="d">-}
</a><a href="#h70-0-2501" id="h70-0-2501" class="d">-
</a><a href="#h70-0-2502" id="h70-0-2502" class="d">-func (m *QueryResult) GetMoreResults() bool {
</a><a href="#h70-0-2503" id="h70-0-2503" class="d">-	if m != nil &amp;&amp; m.MoreResults != nil {
</a><a href="#h70-0-2504" id="h70-0-2504" class="d">-		return *m.MoreResults
</a><a href="#h70-0-2505" id="h70-0-2505" class="d">-	}
</a><a href="#h70-0-2506" id="h70-0-2506" class="d">-	return false
</a><a href="#h70-0-2507" id="h70-0-2507" class="d">-}
</a><a href="#h70-0-2508" id="h70-0-2508" class="d">-
</a><a href="#h70-0-2509" id="h70-0-2509" class="d">-func (m *QueryResult) GetKeysOnly() bool {
</a><a href="#h70-0-2510" id="h70-0-2510" class="d">-	if m != nil &amp;&amp; m.KeysOnly != nil {
</a><a href="#h70-0-2511" id="h70-0-2511" class="d">-		return *m.KeysOnly
</a><a href="#h70-0-2512" id="h70-0-2512" class="d">-	}
</a><a href="#h70-0-2513" id="h70-0-2513" class="d">-	return false
</a><a href="#h70-0-2514" id="h70-0-2514" class="d">-}
</a><a href="#h70-0-2515" id="h70-0-2515" class="d">-
</a><a href="#h70-0-2516" id="h70-0-2516" class="d">-func (m *QueryResult) GetIndexOnly() bool {
</a><a href="#h70-0-2517" id="h70-0-2517" class="d">-	if m != nil &amp;&amp; m.IndexOnly != nil {
</a><a href="#h70-0-2518" id="h70-0-2518" class="d">-		return *m.IndexOnly
</a><a href="#h70-0-2519" id="h70-0-2519" class="d">-	}
</a><a href="#h70-0-2520" id="h70-0-2520" class="d">-	return false
</a><a href="#h70-0-2521" id="h70-0-2521" class="d">-}
</a><a href="#h70-0-2522" id="h70-0-2522" class="d">-
</a><a href="#h70-0-2523" id="h70-0-2523" class="d">-func (m *QueryResult) GetSmallOps() bool {
</a><a href="#h70-0-2524" id="h70-0-2524" class="d">-	if m != nil &amp;&amp; m.SmallOps != nil {
</a><a href="#h70-0-2525" id="h70-0-2525" class="d">-		return *m.SmallOps
</a><a href="#h70-0-2526" id="h70-0-2526" class="d">-	}
</a><a href="#h70-0-2527" id="h70-0-2527" class="d">-	return false
</a><a href="#h70-0-2528" id="h70-0-2528" class="d">-}
</a><a href="#h70-0-2529" id="h70-0-2529" class="d">-
</a><a href="#h70-0-2530" id="h70-0-2530" class="d">-func (m *QueryResult) GetCompiledQuery() *CompiledQuery {
</a><a href="#h70-0-2531" id="h70-0-2531" class="d">-	if m != nil {
</a><a href="#h70-0-2532" id="h70-0-2532" class="d">-		return m.CompiledQuery
</a><a href="#h70-0-2533" id="h70-0-2533" class="d">-	}
</a><a href="#h70-0-2534" id="h70-0-2534" class="d">-	return nil
</a><a href="#h70-0-2535" id="h70-0-2535" class="d">-}
</a><a href="#h70-0-2536" id="h70-0-2536" class="d">-
</a><a href="#h70-0-2537" id="h70-0-2537" class="d">-func (m *QueryResult) GetCompiledCursor() *CompiledCursor {
</a><a href="#h70-0-2538" id="h70-0-2538" class="d">-	if m != nil {
</a><a href="#h70-0-2539" id="h70-0-2539" class="d">-		return m.CompiledCursor
</a><a href="#h70-0-2540" id="h70-0-2540" class="d">-	}
</a><a href="#h70-0-2541" id="h70-0-2541" class="d">-	return nil
</a><a href="#h70-0-2542" id="h70-0-2542" class="d">-}
</a><a href="#h70-0-2543" id="h70-0-2543" class="d">-
</a><a href="#h70-0-2544" id="h70-0-2544" class="d">-func (m *QueryResult) GetIndex() []*CompositeIndex {
</a><a href="#h70-0-2545" id="h70-0-2545" class="d">-	if m != nil {
</a><a href="#h70-0-2546" id="h70-0-2546" class="d">-		return m.Index
</a><a href="#h70-0-2547" id="h70-0-2547" class="d">-	}
</a><a href="#h70-0-2548" id="h70-0-2548" class="d">-	return nil
</a><a href="#h70-0-2549" id="h70-0-2549" class="d">-}
</a><a href="#h70-0-2550" id="h70-0-2550" class="d">-
</a><a href="#h70-0-2551" id="h70-0-2551" class="d">-func (m *QueryResult) GetVersion() []int64 {
</a><a href="#h70-0-2552" id="h70-0-2552" class="d">-	if m != nil {
</a><a href="#h70-0-2553" id="h70-0-2553" class="d">-		return m.Version
</a><a href="#h70-0-2554" id="h70-0-2554" class="d">-	}
</a><a href="#h70-0-2555" id="h70-0-2555" class="d">-	return nil
</a><a href="#h70-0-2556" id="h70-0-2556" class="d">-}
</a><a href="#h70-0-2557" id="h70-0-2557" class="d">-
</a><a href="#h70-0-2558" id="h70-0-2558" class="d">-type AllocateIdsRequest struct {
</a><a href="#h70-0-2559" id="h70-0-2559" class="d">-	Header           *InternalHeader `protobuf:&quot;bytes,4,opt,name=header&quot; json:&quot;header,omitempty&quot;`
</a><a href="#h70-0-2560" id="h70-0-2560" class="d">-	ModelKey         *Reference      `protobuf:&quot;bytes,1,opt,name=model_key&quot; json:&quot;model_key,omitempty&quot;`
</a><a href="#h70-0-2561" id="h70-0-2561" class="d">-	Size             *int64          `protobuf:&quot;varint,2,opt,name=size&quot; json:&quot;size,omitempty&quot;`
</a><a href="#h70-0-2562" id="h70-0-2562" class="d">-	Max              *int64          `protobuf:&quot;varint,3,opt,name=max&quot; json:&quot;max,omitempty&quot;`
</a><a href="#h70-0-2563" id="h70-0-2563" class="d">-	Reserve          []*Reference    `protobuf:&quot;bytes,5,rep,name=reserve&quot; json:&quot;reserve,omitempty&quot;`
</a><a href="#h70-0-2564" id="h70-0-2564" class="d">-	XXX_unrecognized []byte          `json:&quot;-&quot;`
</a><a href="#h70-0-2565" id="h70-0-2565" class="d">-}
</a><a href="#h70-0-2566" id="h70-0-2566" class="d">-
</a><a href="#h70-0-2567" id="h70-0-2567" class="d">-func (m *AllocateIdsRequest) Reset()         { *m = AllocateIdsRequest{} }
</a><a href="#h70-0-2568" id="h70-0-2568" class="d">-func (m *AllocateIdsRequest) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2569" id="h70-0-2569" class="d">-func (*AllocateIdsRequest) ProtoMessage()    {}
</a><a href="#h70-0-2570" id="h70-0-2570" class="d">-
</a><a href="#h70-0-2571" id="h70-0-2571" class="d">-func (m *AllocateIdsRequest) GetHeader() *InternalHeader {
</a><a href="#h70-0-2572" id="h70-0-2572" class="d">-	if m != nil {
</a><a href="#h70-0-2573" id="h70-0-2573" class="d">-		return m.Header
</a><a href="#h70-0-2574" id="h70-0-2574" class="d">-	}
</a><a href="#h70-0-2575" id="h70-0-2575" class="d">-	return nil
</a><a href="#h70-0-2576" id="h70-0-2576" class="d">-}
</a><a href="#h70-0-2577" id="h70-0-2577" class="d">-
</a><a href="#h70-0-2578" id="h70-0-2578" class="d">-func (m *AllocateIdsRequest) GetModelKey() *Reference {
</a><a href="#h70-0-2579" id="h70-0-2579" class="d">-	if m != nil {
</a><a href="#h70-0-2580" id="h70-0-2580" class="d">-		return m.ModelKey
</a><a href="#h70-0-2581" id="h70-0-2581" class="d">-	}
</a><a href="#h70-0-2582" id="h70-0-2582" class="d">-	return nil
</a><a href="#h70-0-2583" id="h70-0-2583" class="d">-}
</a><a href="#h70-0-2584" id="h70-0-2584" class="d">-
</a><a href="#h70-0-2585" id="h70-0-2585" class="d">-func (m *AllocateIdsRequest) GetSize() int64 {
</a><a href="#h70-0-2586" id="h70-0-2586" class="d">-	if m != nil &amp;&amp; m.Size != nil {
</a><a href="#h70-0-2587" id="h70-0-2587" class="d">-		return *m.Size
</a><a href="#h70-0-2588" id="h70-0-2588" class="d">-	}
</a><a href="#h70-0-2589" id="h70-0-2589" class="d">-	return 0
</a><a href="#h70-0-2590" id="h70-0-2590" class="d">-}
</a><a href="#h70-0-2591" id="h70-0-2591" class="d">-
</a><a href="#h70-0-2592" id="h70-0-2592" class="d">-func (m *AllocateIdsRequest) GetMax() int64 {
</a><a href="#h70-0-2593" id="h70-0-2593" class="d">-	if m != nil &amp;&amp; m.Max != nil {
</a><a href="#h70-0-2594" id="h70-0-2594" class="d">-		return *m.Max
</a><a href="#h70-0-2595" id="h70-0-2595" class="d">-	}
</a><a href="#h70-0-2596" id="h70-0-2596" class="d">-	return 0
</a><a href="#h70-0-2597" id="h70-0-2597" class="d">-}
</a><a href="#h70-0-2598" id="h70-0-2598" class="d">-
</a><a href="#h70-0-2599" id="h70-0-2599" class="d">-func (m *AllocateIdsRequest) GetReserve() []*Reference {
</a><a href="#h70-0-2600" id="h70-0-2600" class="d">-	if m != nil {
</a><a href="#h70-0-2601" id="h70-0-2601" class="d">-		return m.Reserve
</a><a href="#h70-0-2602" id="h70-0-2602" class="d">-	}
</a><a href="#h70-0-2603" id="h70-0-2603" class="d">-	return nil
</a><a href="#h70-0-2604" id="h70-0-2604" class="d">-}
</a><a href="#h70-0-2605" id="h70-0-2605" class="d">-
</a><a href="#h70-0-2606" id="h70-0-2606" class="d">-type AllocateIdsResponse struct {
</a><a href="#h70-0-2607" id="h70-0-2607" class="d">-	Start            *int64 `protobuf:&quot;varint,1,req,name=start&quot; json:&quot;start,omitempty&quot;`
</a><a href="#h70-0-2608" id="h70-0-2608" class="d">-	End              *int64 `protobuf:&quot;varint,2,req,name=end&quot; json:&quot;end,omitempty&quot;`
</a><a href="#h70-0-2609" id="h70-0-2609" class="d">-	Cost             *Cost  `protobuf:&quot;bytes,3,opt,name=cost&quot; json:&quot;cost,omitempty&quot;`
</a><a href="#h70-0-2610" id="h70-0-2610" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h70-0-2611" id="h70-0-2611" class="d">-}
</a><a href="#h70-0-2612" id="h70-0-2612" class="d">-
</a><a href="#h70-0-2613" id="h70-0-2613" class="d">-func (m *AllocateIdsResponse) Reset()         { *m = AllocateIdsResponse{} }
</a><a href="#h70-0-2614" id="h70-0-2614" class="d">-func (m *AllocateIdsResponse) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2615" id="h70-0-2615" class="d">-func (*AllocateIdsResponse) ProtoMessage()    {}
</a><a href="#h70-0-2616" id="h70-0-2616" class="d">-
</a><a href="#h70-0-2617" id="h70-0-2617" class="d">-func (m *AllocateIdsResponse) GetStart() int64 {
</a><a href="#h70-0-2618" id="h70-0-2618" class="d">-	if m != nil &amp;&amp; m.Start != nil {
</a><a href="#h70-0-2619" id="h70-0-2619" class="d">-		return *m.Start
</a><a href="#h70-0-2620" id="h70-0-2620" class="d">-	}
</a><a href="#h70-0-2621" id="h70-0-2621" class="d">-	return 0
</a><a href="#h70-0-2622" id="h70-0-2622" class="d">-}
</a><a href="#h70-0-2623" id="h70-0-2623" class="d">-
</a><a href="#h70-0-2624" id="h70-0-2624" class="d">-func (m *AllocateIdsResponse) GetEnd() int64 {
</a><a href="#h70-0-2625" id="h70-0-2625" class="d">-	if m != nil &amp;&amp; m.End != nil {
</a><a href="#h70-0-2626" id="h70-0-2626" class="d">-		return *m.End
</a><a href="#h70-0-2627" id="h70-0-2627" class="d">-	}
</a><a href="#h70-0-2628" id="h70-0-2628" class="d">-	return 0
</a><a href="#h70-0-2629" id="h70-0-2629" class="d">-}
</a><a href="#h70-0-2630" id="h70-0-2630" class="d">-
</a><a href="#h70-0-2631" id="h70-0-2631" class="d">-func (m *AllocateIdsResponse) GetCost() *Cost {
</a><a href="#h70-0-2632" id="h70-0-2632" class="d">-	if m != nil {
</a><a href="#h70-0-2633" id="h70-0-2633" class="d">-		return m.Cost
</a><a href="#h70-0-2634" id="h70-0-2634" class="d">-	}
</a><a href="#h70-0-2635" id="h70-0-2635" class="d">-	return nil
</a><a href="#h70-0-2636" id="h70-0-2636" class="d">-}
</a><a href="#h70-0-2637" id="h70-0-2637" class="d">-
</a><a href="#h70-0-2638" id="h70-0-2638" class="d">-type CompositeIndices struct {
</a><a href="#h70-0-2639" id="h70-0-2639" class="d">-	Index            []*CompositeIndex `protobuf:&quot;bytes,1,rep,name=index&quot; json:&quot;index,omitempty&quot;`
</a><a href="#h70-0-2640" id="h70-0-2640" class="d">-	XXX_unrecognized []byte            `json:&quot;-&quot;`
</a><a href="#h70-0-2641" id="h70-0-2641" class="d">-}
</a><a href="#h70-0-2642" id="h70-0-2642" class="d">-
</a><a href="#h70-0-2643" id="h70-0-2643" class="d">-func (m *CompositeIndices) Reset()         { *m = CompositeIndices{} }
</a><a href="#h70-0-2644" id="h70-0-2644" class="d">-func (m *CompositeIndices) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2645" id="h70-0-2645" class="d">-func (*CompositeIndices) ProtoMessage()    {}
</a><a href="#h70-0-2646" id="h70-0-2646" class="d">-
</a><a href="#h70-0-2647" id="h70-0-2647" class="d">-func (m *CompositeIndices) GetIndex() []*CompositeIndex {
</a><a href="#h70-0-2648" id="h70-0-2648" class="d">-	if m != nil {
</a><a href="#h70-0-2649" id="h70-0-2649" class="d">-		return m.Index
</a><a href="#h70-0-2650" id="h70-0-2650" class="d">-	}
</a><a href="#h70-0-2651" id="h70-0-2651" class="d">-	return nil
</a><a href="#h70-0-2652" id="h70-0-2652" class="d">-}
</a><a href="#h70-0-2653" id="h70-0-2653" class="d">-
</a><a href="#h70-0-2654" id="h70-0-2654" class="d">-type AddActionsRequest struct {
</a><a href="#h70-0-2655" id="h70-0-2655" class="d">-	Header           *InternalHeader `protobuf:&quot;bytes,3,opt,name=header&quot; json:&quot;header,omitempty&quot;`
</a><a href="#h70-0-2656" id="h70-0-2656" class="d">-	Transaction      *Transaction    `protobuf:&quot;bytes,1,req,name=transaction&quot; json:&quot;transaction,omitempty&quot;`
</a><a href="#h70-0-2657" id="h70-0-2657" class="d">-	Action           []*Action       `protobuf:&quot;bytes,2,rep,name=action&quot; json:&quot;action,omitempty&quot;`
</a><a href="#h70-0-2658" id="h70-0-2658" class="d">-	XXX_unrecognized []byte          `json:&quot;-&quot;`
</a><a href="#h70-0-2659" id="h70-0-2659" class="d">-}
</a><a href="#h70-0-2660" id="h70-0-2660" class="d">-
</a><a href="#h70-0-2661" id="h70-0-2661" class="d">-func (m *AddActionsRequest) Reset()         { *m = AddActionsRequest{} }
</a><a href="#h70-0-2662" id="h70-0-2662" class="d">-func (m *AddActionsRequest) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2663" id="h70-0-2663" class="d">-func (*AddActionsRequest) ProtoMessage()    {}
</a><a href="#h70-0-2664" id="h70-0-2664" class="d">-
</a><a href="#h70-0-2665" id="h70-0-2665" class="d">-func (m *AddActionsRequest) GetHeader() *InternalHeader {
</a><a href="#h70-0-2666" id="h70-0-2666" class="d">-	if m != nil {
</a><a href="#h70-0-2667" id="h70-0-2667" class="d">-		return m.Header
</a><a href="#h70-0-2668" id="h70-0-2668" class="d">-	}
</a><a href="#h70-0-2669" id="h70-0-2669" class="d">-	return nil
</a><a href="#h70-0-2670" id="h70-0-2670" class="d">-}
</a><a href="#h70-0-2671" id="h70-0-2671" class="d">-
</a><a href="#h70-0-2672" id="h70-0-2672" class="d">-func (m *AddActionsRequest) GetTransaction() *Transaction {
</a><a href="#h70-0-2673" id="h70-0-2673" class="d">-	if m != nil {
</a><a href="#h70-0-2674" id="h70-0-2674" class="d">-		return m.Transaction
</a><a href="#h70-0-2675" id="h70-0-2675" class="d">-	}
</a><a href="#h70-0-2676" id="h70-0-2676" class="d">-	return nil
</a><a href="#h70-0-2677" id="h70-0-2677" class="d">-}
</a><a href="#h70-0-2678" id="h70-0-2678" class="d">-
</a><a href="#h70-0-2679" id="h70-0-2679" class="d">-func (m *AddActionsRequest) GetAction() []*Action {
</a><a href="#h70-0-2680" id="h70-0-2680" class="d">-	if m != nil {
</a><a href="#h70-0-2681" id="h70-0-2681" class="d">-		return m.Action
</a><a href="#h70-0-2682" id="h70-0-2682" class="d">-	}
</a><a href="#h70-0-2683" id="h70-0-2683" class="d">-	return nil
</a><a href="#h70-0-2684" id="h70-0-2684" class="d">-}
</a><a href="#h70-0-2685" id="h70-0-2685" class="d">-
</a><a href="#h70-0-2686" id="h70-0-2686" class="d">-type AddActionsResponse struct {
</a><a href="#h70-0-2687" id="h70-0-2687" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h70-0-2688" id="h70-0-2688" class="d">-}
</a><a href="#h70-0-2689" id="h70-0-2689" class="d">-
</a><a href="#h70-0-2690" id="h70-0-2690" class="d">-func (m *AddActionsResponse) Reset()         { *m = AddActionsResponse{} }
</a><a href="#h70-0-2691" id="h70-0-2691" class="d">-func (m *AddActionsResponse) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2692" id="h70-0-2692" class="d">-func (*AddActionsResponse) ProtoMessage()    {}
</a><a href="#h70-0-2693" id="h70-0-2693" class="d">-
</a><a href="#h70-0-2694" id="h70-0-2694" class="d">-type BeginTransactionRequest struct {
</a><a href="#h70-0-2695" id="h70-0-2695" class="d">-	Header           *InternalHeader `protobuf:&quot;bytes,3,opt,name=header&quot; json:&quot;header,omitempty&quot;`
</a><a href="#h70-0-2696" id="h70-0-2696" class="d">-	App              *string         `protobuf:&quot;bytes,1,req,name=app&quot; json:&quot;app,omitempty&quot;`
</a><a href="#h70-0-2697" id="h70-0-2697" class="d">-	AllowMultipleEg  *bool           `protobuf:&quot;varint,2,opt,name=allow_multiple_eg,def=0&quot; json:&quot;allow_multiple_eg,omitempty&quot;`
</a><a href="#h70-0-2698" id="h70-0-2698" class="d">-	XXX_unrecognized []byte          `json:&quot;-&quot;`
</a><a href="#h70-0-2699" id="h70-0-2699" class="d">-}
</a><a href="#h70-0-2700" id="h70-0-2700" class="d">-
</a><a href="#h70-0-2701" id="h70-0-2701" class="d">-func (m *BeginTransactionRequest) Reset()         { *m = BeginTransactionRequest{} }
</a><a href="#h70-0-2702" id="h70-0-2702" class="d">-func (m *BeginTransactionRequest) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2703" id="h70-0-2703" class="d">-func (*BeginTransactionRequest) ProtoMessage()    {}
</a><a href="#h70-0-2704" id="h70-0-2704" class="d">-
</a><a href="#h70-0-2705" id="h70-0-2705" class="d">-const Default_BeginTransactionRequest_AllowMultipleEg bool = false
</a><a href="#h70-0-2706" id="h70-0-2706" class="d">-
</a><a href="#h70-0-2707" id="h70-0-2707" class="d">-func (m *BeginTransactionRequest) GetHeader() *InternalHeader {
</a><a href="#h70-0-2708" id="h70-0-2708" class="d">-	if m != nil {
</a><a href="#h70-0-2709" id="h70-0-2709" class="d">-		return m.Header
</a><a href="#h70-0-2710" id="h70-0-2710" class="d">-	}
</a><a href="#h70-0-2711" id="h70-0-2711" class="d">-	return nil
</a><a href="#h70-0-2712" id="h70-0-2712" class="d">-}
</a><a href="#h70-0-2713" id="h70-0-2713" class="d">-
</a><a href="#h70-0-2714" id="h70-0-2714" class="d">-func (m *BeginTransactionRequest) GetApp() string {
</a><a href="#h70-0-2715" id="h70-0-2715" class="d">-	if m != nil &amp;&amp; m.App != nil {
</a><a href="#h70-0-2716" id="h70-0-2716" class="d">-		return *m.App
</a><a href="#h70-0-2717" id="h70-0-2717" class="d">-	}
</a><a href="#h70-0-2718" id="h70-0-2718" class="d">-	return &quot;&quot;
</a><a href="#h70-0-2719" id="h70-0-2719" class="d">-}
</a><a href="#h70-0-2720" id="h70-0-2720" class="d">-
</a><a href="#h70-0-2721" id="h70-0-2721" class="d">-func (m *BeginTransactionRequest) GetAllowMultipleEg() bool {
</a><a href="#h70-0-2722" id="h70-0-2722" class="d">-	if m != nil &amp;&amp; m.AllowMultipleEg != nil {
</a><a href="#h70-0-2723" id="h70-0-2723" class="d">-		return *m.AllowMultipleEg
</a><a href="#h70-0-2724" id="h70-0-2724" class="d">-	}
</a><a href="#h70-0-2725" id="h70-0-2725" class="d">-	return Default_BeginTransactionRequest_AllowMultipleEg
</a><a href="#h70-0-2726" id="h70-0-2726" class="d">-}
</a><a href="#h70-0-2727" id="h70-0-2727" class="d">-
</a><a href="#h70-0-2728" id="h70-0-2728" class="d">-type CommitResponse struct {
</a><a href="#h70-0-2729" id="h70-0-2729" class="d">-	Cost             *Cost                     `protobuf:&quot;bytes,1,opt,name=cost&quot; json:&quot;cost,omitempty&quot;`
</a><a href="#h70-0-2730" id="h70-0-2730" class="d">-	Version          []*CommitResponse_Version `protobuf:&quot;group,3,rep,name=Version&quot; json:&quot;version,omitempty&quot;`
</a><a href="#h70-0-2731" id="h70-0-2731" class="d">-	XXX_unrecognized []byte                    `json:&quot;-&quot;`
</a><a href="#h70-0-2732" id="h70-0-2732" class="d">-}
</a><a href="#h70-0-2733" id="h70-0-2733" class="d">-
</a><a href="#h70-0-2734" id="h70-0-2734" class="d">-func (m *CommitResponse) Reset()         { *m = CommitResponse{} }
</a><a href="#h70-0-2735" id="h70-0-2735" class="d">-func (m *CommitResponse) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2736" id="h70-0-2736" class="d">-func (*CommitResponse) ProtoMessage()    {}
</a><a href="#h70-0-2737" id="h70-0-2737" class="d">-
</a><a href="#h70-0-2738" id="h70-0-2738" class="d">-func (m *CommitResponse) GetCost() *Cost {
</a><a href="#h70-0-2739" id="h70-0-2739" class="d">-	if m != nil {
</a><a href="#h70-0-2740" id="h70-0-2740" class="d">-		return m.Cost
</a><a href="#h70-0-2741" id="h70-0-2741" class="d">-	}
</a><a href="#h70-0-2742" id="h70-0-2742" class="d">-	return nil
</a><a href="#h70-0-2743" id="h70-0-2743" class="d">-}
</a><a href="#h70-0-2744" id="h70-0-2744" class="d">-
</a><a href="#h70-0-2745" id="h70-0-2745" class="d">-func (m *CommitResponse) GetVersion() []*CommitResponse_Version {
</a><a href="#h70-0-2746" id="h70-0-2746" class="d">-	if m != nil {
</a><a href="#h70-0-2747" id="h70-0-2747" class="d">-		return m.Version
</a><a href="#h70-0-2748" id="h70-0-2748" class="d">-	}
</a><a href="#h70-0-2749" id="h70-0-2749" class="d">-	return nil
</a><a href="#h70-0-2750" id="h70-0-2750" class="d">-}
</a><a href="#h70-0-2751" id="h70-0-2751" class="d">-
</a><a href="#h70-0-2752" id="h70-0-2752" class="d">-type CommitResponse_Version struct {
</a><a href="#h70-0-2753" id="h70-0-2753" class="d">-	RootEntityKey    *Reference `protobuf:&quot;bytes,4,req,name=root_entity_key&quot; json:&quot;root_entity_key,omitempty&quot;`
</a><a href="#h70-0-2754" id="h70-0-2754" class="d">-	Version          *int64     `protobuf:&quot;varint,5,req,name=version&quot; json:&quot;version,omitempty&quot;`
</a><a href="#h70-0-2755" id="h70-0-2755" class="d">-	XXX_unrecognized []byte     `json:&quot;-&quot;`
</a><a href="#h70-0-2756" id="h70-0-2756" class="d">-}
</a><a href="#h70-0-2757" id="h70-0-2757" class="d">-
</a><a href="#h70-0-2758" id="h70-0-2758" class="d">-func (m *CommitResponse_Version) Reset()         { *m = CommitResponse_Version{} }
</a><a href="#h70-0-2759" id="h70-0-2759" class="d">-func (m *CommitResponse_Version) String() string { return proto.CompactTextString(m) }
</a><a href="#h70-0-2760" id="h70-0-2760" class="d">-func (*CommitResponse_Version) ProtoMessage()    {}
</a><a href="#h70-0-2761" id="h70-0-2761" class="d">-
</a><a href="#h70-0-2762" id="h70-0-2762" class="d">-func (m *CommitResponse_Version) GetRootEntityKey() *Reference {
</a><a href="#h70-0-2763" id="h70-0-2763" class="d">-	if m != nil {
</a><a href="#h70-0-2764" id="h70-0-2764" class="d">-		return m.RootEntityKey
</a><a href="#h70-0-2765" id="h70-0-2765" class="d">-	}
</a><a href="#h70-0-2766" id="h70-0-2766" class="d">-	return nil
</a><a href="#h70-0-2767" id="h70-0-2767" class="d">-}
</a><a href="#h70-0-2768" id="h70-0-2768" class="d">-
</a><a href="#h70-0-2769" id="h70-0-2769" class="d">-func (m *CommitResponse_Version) GetVersion() int64 {
</a><a href="#h70-0-2770" id="h70-0-2770" class="d">-	if m != nil &amp;&amp; m.Version != nil {
</a><a href="#h70-0-2771" id="h70-0-2771" class="d">-		return *m.Version
</a><a href="#h70-0-2772" id="h70-0-2772" class="d">-	}
</a><a href="#h70-0-2773" id="h70-0-2773" class="d">-	return 0
</a><a href="#h70-0-2774" id="h70-0-2774" class="d">-}
</a><a href="#h70-0-2775" id="h70-0-2775" class="d">-
</a><a href="#h70-0-2776" id="h70-0-2776" class="d">-func init() {
</a><a href="#h70-0-2777" id="h70-0-2777" class="d">-}
</a><b>diff --git a/<a id="h71" href="../file/vendor/google.golang.org/appengine/internal/datastore/datastore_v3.proto">vendor/google.golang.org/appengine/internal/datastore/datastore_v3.proto</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/datastore/datastore_v3.proto">vendor/google.golang.org/appengine/internal/datastore/datastore_v3.proto</a></b>
<a href="#h71-0" id="h71-0" class="h">@@ -1,541 +0,0 @@
</a><a href="#h71-0-0" id="h71-0-0" class="d">-syntax = &quot;proto2&quot;;
</a><a href="#h71-0-1" id="h71-0-1" class="d">-option go_package = &quot;datastore&quot;;
</a><a href="#h71-0-2" id="h71-0-2" class="d">-
</a><a href="#h71-0-3" id="h71-0-3" class="d">-package appengine;
</a><a href="#h71-0-4" id="h71-0-4" class="d">-
</a><a href="#h71-0-5" id="h71-0-5" class="d">-message Action{}
</a><a href="#h71-0-6" id="h71-0-6" class="d">-
</a><a href="#h71-0-7" id="h71-0-7" class="d">-message PropertyValue {
</a><a href="#h71-0-8" id="h71-0-8" class="d">-  optional int64 int64Value = 1;
</a><a href="#h71-0-9" id="h71-0-9" class="d">-  optional bool booleanValue = 2;
</a><a href="#h71-0-10" id="h71-0-10" class="d">-  optional string stringValue = 3;
</a><a href="#h71-0-11" id="h71-0-11" class="d">-  optional double doubleValue = 4;
</a><a href="#h71-0-12" id="h71-0-12" class="d">-
</a><a href="#h71-0-13" id="h71-0-13" class="d">-  optional group PointValue = 5 {
</a><a href="#h71-0-14" id="h71-0-14" class="d">-    required double x = 6;
</a><a href="#h71-0-15" id="h71-0-15" class="d">-    required double y = 7;
</a><a href="#h71-0-16" id="h71-0-16" class="d">-  }
</a><a href="#h71-0-17" id="h71-0-17" class="d">-
</a><a href="#h71-0-18" id="h71-0-18" class="d">-  optional group UserValue = 8 {
</a><a href="#h71-0-19" id="h71-0-19" class="d">-    required string email = 9;
</a><a href="#h71-0-20" id="h71-0-20" class="d">-    required string auth_domain = 10;
</a><a href="#h71-0-21" id="h71-0-21" class="d">-    optional string nickname = 11;
</a><a href="#h71-0-22" id="h71-0-22" class="d">-    optional string federated_identity = 21;
</a><a href="#h71-0-23" id="h71-0-23" class="d">-    optional string federated_provider = 22;
</a><a href="#h71-0-24" id="h71-0-24" class="d">-  }
</a><a href="#h71-0-25" id="h71-0-25" class="d">-
</a><a href="#h71-0-26" id="h71-0-26" class="d">-  optional group ReferenceValue = 12 {
</a><a href="#h71-0-27" id="h71-0-27" class="d">-    required string app = 13;
</a><a href="#h71-0-28" id="h71-0-28" class="d">-    optional string name_space = 20;
</a><a href="#h71-0-29" id="h71-0-29" class="d">-    repeated group PathElement = 14 {
</a><a href="#h71-0-30" id="h71-0-30" class="d">-      required string type = 15;
</a><a href="#h71-0-31" id="h71-0-31" class="d">-      optional int64 id = 16;
</a><a href="#h71-0-32" id="h71-0-32" class="d">-      optional string name = 17;
</a><a href="#h71-0-33" id="h71-0-33" class="d">-    }
</a><a href="#h71-0-34" id="h71-0-34" class="d">-  }
</a><a href="#h71-0-35" id="h71-0-35" class="d">-}
</a><a href="#h71-0-36" id="h71-0-36" class="d">-
</a><a href="#h71-0-37" id="h71-0-37" class="d">-message Property {
</a><a href="#h71-0-38" id="h71-0-38" class="d">-  enum Meaning {
</a><a href="#h71-0-39" id="h71-0-39" class="d">-    NO_MEANING = 0;
</a><a href="#h71-0-40" id="h71-0-40" class="d">-    BLOB = 14;
</a><a href="#h71-0-41" id="h71-0-41" class="d">-    TEXT = 15;
</a><a href="#h71-0-42" id="h71-0-42" class="d">-    BYTESTRING = 16;
</a><a href="#h71-0-43" id="h71-0-43" class="d">-
</a><a href="#h71-0-44" id="h71-0-44" class="d">-    ATOM_CATEGORY = 1;
</a><a href="#h71-0-45" id="h71-0-45" class="d">-    ATOM_LINK = 2;
</a><a href="#h71-0-46" id="h71-0-46" class="d">-    ATOM_TITLE = 3;
</a><a href="#h71-0-47" id="h71-0-47" class="d">-    ATOM_CONTENT = 4;
</a><a href="#h71-0-48" id="h71-0-48" class="d">-    ATOM_SUMMARY = 5;
</a><a href="#h71-0-49" id="h71-0-49" class="d">-    ATOM_AUTHOR = 6;
</a><a href="#h71-0-50" id="h71-0-50" class="d">-
</a><a href="#h71-0-51" id="h71-0-51" class="d">-    GD_WHEN = 7;
</a><a href="#h71-0-52" id="h71-0-52" class="d">-    GD_EMAIL = 8;
</a><a href="#h71-0-53" id="h71-0-53" class="d">-    GEORSS_POINT = 9;
</a><a href="#h71-0-54" id="h71-0-54" class="d">-    GD_IM = 10;
</a><a href="#h71-0-55" id="h71-0-55" class="d">-
</a><a href="#h71-0-56" id="h71-0-56" class="d">-    GD_PHONENUMBER = 11;
</a><a href="#h71-0-57" id="h71-0-57" class="d">-    GD_POSTALADDRESS = 12;
</a><a href="#h71-0-58" id="h71-0-58" class="d">-
</a><a href="#h71-0-59" id="h71-0-59" class="d">-    GD_RATING = 13;
</a><a href="#h71-0-60" id="h71-0-60" class="d">-
</a><a href="#h71-0-61" id="h71-0-61" class="d">-    BLOBKEY = 17;
</a><a href="#h71-0-62" id="h71-0-62" class="d">-    ENTITY_PROTO = 19;
</a><a href="#h71-0-63" id="h71-0-63" class="d">-
</a><a href="#h71-0-64" id="h71-0-64" class="d">-    INDEX_VALUE = 18;
</a><a href="#h71-0-65" id="h71-0-65" class="d">-  };
</a><a href="#h71-0-66" id="h71-0-66" class="d">-
</a><a href="#h71-0-67" id="h71-0-67" class="d">-  optional Meaning meaning = 1 [default = NO_MEANING];
</a><a href="#h71-0-68" id="h71-0-68" class="d">-  optional string meaning_uri = 2;
</a><a href="#h71-0-69" id="h71-0-69" class="d">-
</a><a href="#h71-0-70" id="h71-0-70" class="d">-  required string name = 3;
</a><a href="#h71-0-71" id="h71-0-71" class="d">-
</a><a href="#h71-0-72" id="h71-0-72" class="d">-  required PropertyValue value = 5;
</a><a href="#h71-0-73" id="h71-0-73" class="d">-
</a><a href="#h71-0-74" id="h71-0-74" class="d">-  required bool multiple = 4;
</a><a href="#h71-0-75" id="h71-0-75" class="d">-
</a><a href="#h71-0-76" id="h71-0-76" class="d">-  optional bool searchable = 6 [default=false];
</a><a href="#h71-0-77" id="h71-0-77" class="d">-
</a><a href="#h71-0-78" id="h71-0-78" class="d">-  enum FtsTokenizationOption {
</a><a href="#h71-0-79" id="h71-0-79" class="d">-    HTML = 1;
</a><a href="#h71-0-80" id="h71-0-80" class="d">-    ATOM = 2;
</a><a href="#h71-0-81" id="h71-0-81" class="d">-  }
</a><a href="#h71-0-82" id="h71-0-82" class="d">-
</a><a href="#h71-0-83" id="h71-0-83" class="d">-  optional FtsTokenizationOption fts_tokenization_option = 8;
</a><a href="#h71-0-84" id="h71-0-84" class="d">-
</a><a href="#h71-0-85" id="h71-0-85" class="d">-  optional string locale = 9 [default = &quot;en&quot;];
</a><a href="#h71-0-86" id="h71-0-86" class="d">-}
</a><a href="#h71-0-87" id="h71-0-87" class="d">-
</a><a href="#h71-0-88" id="h71-0-88" class="d">-message Path {
</a><a href="#h71-0-89" id="h71-0-89" class="d">-  repeated group Element = 1 {
</a><a href="#h71-0-90" id="h71-0-90" class="d">-    required string type = 2;
</a><a href="#h71-0-91" id="h71-0-91" class="d">-    optional int64 id = 3;
</a><a href="#h71-0-92" id="h71-0-92" class="d">-    optional string name = 4;
</a><a href="#h71-0-93" id="h71-0-93" class="d">-  }
</a><a href="#h71-0-94" id="h71-0-94" class="d">-}
</a><a href="#h71-0-95" id="h71-0-95" class="d">-
</a><a href="#h71-0-96" id="h71-0-96" class="d">-message Reference {
</a><a href="#h71-0-97" id="h71-0-97" class="d">-  required string app = 13;
</a><a href="#h71-0-98" id="h71-0-98" class="d">-  optional string name_space = 20;
</a><a href="#h71-0-99" id="h71-0-99" class="d">-  required Path path = 14;
</a><a href="#h71-0-100" id="h71-0-100" class="d">-}
</a><a href="#h71-0-101" id="h71-0-101" class="d">-
</a><a href="#h71-0-102" id="h71-0-102" class="d">-message User {
</a><a href="#h71-0-103" id="h71-0-103" class="d">-  required string email = 1;
</a><a href="#h71-0-104" id="h71-0-104" class="d">-  required string auth_domain = 2;
</a><a href="#h71-0-105" id="h71-0-105" class="d">-  optional string nickname = 3;
</a><a href="#h71-0-106" id="h71-0-106" class="d">-  optional string federated_identity = 6;
</a><a href="#h71-0-107" id="h71-0-107" class="d">-  optional string federated_provider = 7;
</a><a href="#h71-0-108" id="h71-0-108" class="d">-}
</a><a href="#h71-0-109" id="h71-0-109" class="d">-
</a><a href="#h71-0-110" id="h71-0-110" class="d">-message EntityProto {
</a><a href="#h71-0-111" id="h71-0-111" class="d">-  required Reference key = 13;
</a><a href="#h71-0-112" id="h71-0-112" class="d">-  required Path entity_group = 16;
</a><a href="#h71-0-113" id="h71-0-113" class="d">-  optional User owner = 17;
</a><a href="#h71-0-114" id="h71-0-114" class="d">-
</a><a href="#h71-0-115" id="h71-0-115" class="d">-  enum Kind {
</a><a href="#h71-0-116" id="h71-0-116" class="d">-    GD_CONTACT = 1;
</a><a href="#h71-0-117" id="h71-0-117" class="d">-    GD_EVENT = 2;
</a><a href="#h71-0-118" id="h71-0-118" class="d">-    GD_MESSAGE = 3;
</a><a href="#h71-0-119" id="h71-0-119" class="d">-  }
</a><a href="#h71-0-120" id="h71-0-120" class="d">-  optional Kind kind = 4;
</a><a href="#h71-0-121" id="h71-0-121" class="d">-  optional string kind_uri = 5;
</a><a href="#h71-0-122" id="h71-0-122" class="d">-
</a><a href="#h71-0-123" id="h71-0-123" class="d">-  repeated Property property = 14;
</a><a href="#h71-0-124" id="h71-0-124" class="d">-  repeated Property raw_property = 15;
</a><a href="#h71-0-125" id="h71-0-125" class="d">-
</a><a href="#h71-0-126" id="h71-0-126" class="d">-  optional int32 rank = 18;
</a><a href="#h71-0-127" id="h71-0-127" class="d">-}
</a><a href="#h71-0-128" id="h71-0-128" class="d">-
</a><a href="#h71-0-129" id="h71-0-129" class="d">-message CompositeProperty {
</a><a href="#h71-0-130" id="h71-0-130" class="d">-  required int64 index_id = 1;
</a><a href="#h71-0-131" id="h71-0-131" class="d">-  repeated string value = 2;
</a><a href="#h71-0-132" id="h71-0-132" class="d">-}
</a><a href="#h71-0-133" id="h71-0-133" class="d">-
</a><a href="#h71-0-134" id="h71-0-134" class="d">-message Index {
</a><a href="#h71-0-135" id="h71-0-135" class="d">-  required string entity_type = 1;
</a><a href="#h71-0-136" id="h71-0-136" class="d">-  required bool ancestor = 5;
</a><a href="#h71-0-137" id="h71-0-137" class="d">-  repeated group Property = 2 {
</a><a href="#h71-0-138" id="h71-0-138" class="d">-    required string name = 3;
</a><a href="#h71-0-139" id="h71-0-139" class="d">-    enum Direction {
</a><a href="#h71-0-140" id="h71-0-140" class="d">-      ASCENDING = 1;
</a><a href="#h71-0-141" id="h71-0-141" class="d">-      DESCENDING = 2;
</a><a href="#h71-0-142" id="h71-0-142" class="d">-    }
</a><a href="#h71-0-143" id="h71-0-143" class="d">-    optional Direction direction = 4 [default = ASCENDING];
</a><a href="#h71-0-144" id="h71-0-144" class="d">-  }
</a><a href="#h71-0-145" id="h71-0-145" class="d">-}
</a><a href="#h71-0-146" id="h71-0-146" class="d">-
</a><a href="#h71-0-147" id="h71-0-147" class="d">-message CompositeIndex {
</a><a href="#h71-0-148" id="h71-0-148" class="d">-  required string app_id = 1;
</a><a href="#h71-0-149" id="h71-0-149" class="d">-  required int64 id = 2;
</a><a href="#h71-0-150" id="h71-0-150" class="d">-  required Index definition = 3;
</a><a href="#h71-0-151" id="h71-0-151" class="d">-
</a><a href="#h71-0-152" id="h71-0-152" class="d">-  enum State {
</a><a href="#h71-0-153" id="h71-0-153" class="d">-    WRITE_ONLY = 1;
</a><a href="#h71-0-154" id="h71-0-154" class="d">-    READ_WRITE = 2;
</a><a href="#h71-0-155" id="h71-0-155" class="d">-    DELETED = 3;
</a><a href="#h71-0-156" id="h71-0-156" class="d">-    ERROR = 4;
</a><a href="#h71-0-157" id="h71-0-157" class="d">-  }
</a><a href="#h71-0-158" id="h71-0-158" class="d">-  required State state = 4;
</a><a href="#h71-0-159" id="h71-0-159" class="d">-
</a><a href="#h71-0-160" id="h71-0-160" class="d">-  optional bool only_use_if_required = 6 [default = false];
</a><a href="#h71-0-161" id="h71-0-161" class="d">-}
</a><a href="#h71-0-162" id="h71-0-162" class="d">-
</a><a href="#h71-0-163" id="h71-0-163" class="d">-message IndexPostfix {
</a><a href="#h71-0-164" id="h71-0-164" class="d">-  message IndexValue {
</a><a href="#h71-0-165" id="h71-0-165" class="d">-    required string property_name = 1;
</a><a href="#h71-0-166" id="h71-0-166" class="d">-    required PropertyValue value = 2;
</a><a href="#h71-0-167" id="h71-0-167" class="d">-  }
</a><a href="#h71-0-168" id="h71-0-168" class="d">-
</a><a href="#h71-0-169" id="h71-0-169" class="d">-  repeated IndexValue index_value = 1;
</a><a href="#h71-0-170" id="h71-0-170" class="d">-
</a><a href="#h71-0-171" id="h71-0-171" class="d">-  optional Reference key = 2;
</a><a href="#h71-0-172" id="h71-0-172" class="d">-
</a><a href="#h71-0-173" id="h71-0-173" class="d">-  optional bool before = 3 [default=true];
</a><a href="#h71-0-174" id="h71-0-174" class="d">-}
</a><a href="#h71-0-175" id="h71-0-175" class="d">-
</a><a href="#h71-0-176" id="h71-0-176" class="d">-message IndexPosition {
</a><a href="#h71-0-177" id="h71-0-177" class="d">-  optional string key = 1;
</a><a href="#h71-0-178" id="h71-0-178" class="d">-
</a><a href="#h71-0-179" id="h71-0-179" class="d">-  optional bool before = 2 [default=true];
</a><a href="#h71-0-180" id="h71-0-180" class="d">-}
</a><a href="#h71-0-181" id="h71-0-181" class="d">-
</a><a href="#h71-0-182" id="h71-0-182" class="d">-message Snapshot {
</a><a href="#h71-0-183" id="h71-0-183" class="d">-  enum Status {
</a><a href="#h71-0-184" id="h71-0-184" class="d">-    INACTIVE = 0;
</a><a href="#h71-0-185" id="h71-0-185" class="d">-    ACTIVE = 1;
</a><a href="#h71-0-186" id="h71-0-186" class="d">-  }
</a><a href="#h71-0-187" id="h71-0-187" class="d">-
</a><a href="#h71-0-188" id="h71-0-188" class="d">-  required int64 ts = 1;
</a><a href="#h71-0-189" id="h71-0-189" class="d">-}
</a><a href="#h71-0-190" id="h71-0-190" class="d">-
</a><a href="#h71-0-191" id="h71-0-191" class="d">-message InternalHeader {
</a><a href="#h71-0-192" id="h71-0-192" class="d">-  optional string qos = 1;
</a><a href="#h71-0-193" id="h71-0-193" class="d">-}
</a><a href="#h71-0-194" id="h71-0-194" class="d">-
</a><a href="#h71-0-195" id="h71-0-195" class="d">-message Transaction {
</a><a href="#h71-0-196" id="h71-0-196" class="d">-  optional InternalHeader header = 4;
</a><a href="#h71-0-197" id="h71-0-197" class="d">-  required fixed64 handle = 1;
</a><a href="#h71-0-198" id="h71-0-198" class="d">-  required string app = 2;
</a><a href="#h71-0-199" id="h71-0-199" class="d">-  optional bool mark_changes = 3 [default = false];
</a><a href="#h71-0-200" id="h71-0-200" class="d">-}
</a><a href="#h71-0-201" id="h71-0-201" class="d">-
</a><a href="#h71-0-202" id="h71-0-202" class="d">-message Query {
</a><a href="#h71-0-203" id="h71-0-203" class="d">-  optional InternalHeader header = 39;
</a><a href="#h71-0-204" id="h71-0-204" class="d">-
</a><a href="#h71-0-205" id="h71-0-205" class="d">-  required string app = 1;
</a><a href="#h71-0-206" id="h71-0-206" class="d">-  optional string name_space = 29;
</a><a href="#h71-0-207" id="h71-0-207" class="d">-
</a><a href="#h71-0-208" id="h71-0-208" class="d">-  optional string kind = 3;
</a><a href="#h71-0-209" id="h71-0-209" class="d">-  optional Reference ancestor = 17;
</a><a href="#h71-0-210" id="h71-0-210" class="d">-
</a><a href="#h71-0-211" id="h71-0-211" class="d">-  repeated group Filter = 4 {
</a><a href="#h71-0-212" id="h71-0-212" class="d">-    enum Operator {
</a><a href="#h71-0-213" id="h71-0-213" class="d">-      LESS_THAN = 1;
</a><a href="#h71-0-214" id="h71-0-214" class="d">-      LESS_THAN_OR_EQUAL = 2;
</a><a href="#h71-0-215" id="h71-0-215" class="d">-      GREATER_THAN = 3;
</a><a href="#h71-0-216" id="h71-0-216" class="d">-      GREATER_THAN_OR_EQUAL = 4;
</a><a href="#h71-0-217" id="h71-0-217" class="d">-      EQUAL = 5;
</a><a href="#h71-0-218" id="h71-0-218" class="d">-      IN = 6;
</a><a href="#h71-0-219" id="h71-0-219" class="d">-      EXISTS = 7;
</a><a href="#h71-0-220" id="h71-0-220" class="d">-    }
</a><a href="#h71-0-221" id="h71-0-221" class="d">-
</a><a href="#h71-0-222" id="h71-0-222" class="d">-    required Operator op = 6;
</a><a href="#h71-0-223" id="h71-0-223" class="d">-    repeated Property property = 14;
</a><a href="#h71-0-224" id="h71-0-224" class="d">-  }
</a><a href="#h71-0-225" id="h71-0-225" class="d">-
</a><a href="#h71-0-226" id="h71-0-226" class="d">-  optional string search_query = 8;
</a><a href="#h71-0-227" id="h71-0-227" class="d">-
</a><a href="#h71-0-228" id="h71-0-228" class="d">-  repeated group Order = 9 {
</a><a href="#h71-0-229" id="h71-0-229" class="d">-    enum Direction {
</a><a href="#h71-0-230" id="h71-0-230" class="d">-      ASCENDING = 1;
</a><a href="#h71-0-231" id="h71-0-231" class="d">-      DESCENDING = 2;
</a><a href="#h71-0-232" id="h71-0-232" class="d">-    }
</a><a href="#h71-0-233" id="h71-0-233" class="d">-
</a><a href="#h71-0-234" id="h71-0-234" class="d">-    required string property = 10;
</a><a href="#h71-0-235" id="h71-0-235" class="d">-    optional Direction direction = 11 [default = ASCENDING];
</a><a href="#h71-0-236" id="h71-0-236" class="d">-  }
</a><a href="#h71-0-237" id="h71-0-237" class="d">-
</a><a href="#h71-0-238" id="h71-0-238" class="d">-  enum Hint {
</a><a href="#h71-0-239" id="h71-0-239" class="d">-    ORDER_FIRST = 1;
</a><a href="#h71-0-240" id="h71-0-240" class="d">-    ANCESTOR_FIRST = 2;
</a><a href="#h71-0-241" id="h71-0-241" class="d">-    FILTER_FIRST = 3;
</a><a href="#h71-0-242" id="h71-0-242" class="d">-  }
</a><a href="#h71-0-243" id="h71-0-243" class="d">-  optional Hint hint = 18;
</a><a href="#h71-0-244" id="h71-0-244" class="d">-
</a><a href="#h71-0-245" id="h71-0-245" class="d">-  optional int32 count = 23;
</a><a href="#h71-0-246" id="h71-0-246" class="d">-
</a><a href="#h71-0-247" id="h71-0-247" class="d">-  optional int32 offset = 12 [default = 0];
</a><a href="#h71-0-248" id="h71-0-248" class="d">-
</a><a href="#h71-0-249" id="h71-0-249" class="d">-  optional int32 limit = 16;
</a><a href="#h71-0-250" id="h71-0-250" class="d">-
</a><a href="#h71-0-251" id="h71-0-251" class="d">-  optional CompiledCursor compiled_cursor = 30;
</a><a href="#h71-0-252" id="h71-0-252" class="d">-  optional CompiledCursor end_compiled_cursor = 31;
</a><a href="#h71-0-253" id="h71-0-253" class="d">-
</a><a href="#h71-0-254" id="h71-0-254" class="d">-  repeated CompositeIndex composite_index = 19;
</a><a href="#h71-0-255" id="h71-0-255" class="d">-
</a><a href="#h71-0-256" id="h71-0-256" class="d">-  optional bool require_perfect_plan = 20 [default = false];
</a><a href="#h71-0-257" id="h71-0-257" class="d">-
</a><a href="#h71-0-258" id="h71-0-258" class="d">-  optional bool keys_only = 21 [default = false];
</a><a href="#h71-0-259" id="h71-0-259" class="d">-
</a><a href="#h71-0-260" id="h71-0-260" class="d">-  optional Transaction transaction = 22;
</a><a href="#h71-0-261" id="h71-0-261" class="d">-
</a><a href="#h71-0-262" id="h71-0-262" class="d">-  optional bool compile = 25 [default = false];
</a><a href="#h71-0-263" id="h71-0-263" class="d">-
</a><a href="#h71-0-264" id="h71-0-264" class="d">-  optional int64 failover_ms = 26;
</a><a href="#h71-0-265" id="h71-0-265" class="d">-
</a><a href="#h71-0-266" id="h71-0-266" class="d">-  optional bool strong = 32;
</a><a href="#h71-0-267" id="h71-0-267" class="d">-
</a><a href="#h71-0-268" id="h71-0-268" class="d">-  repeated string property_name = 33;
</a><a href="#h71-0-269" id="h71-0-269" class="d">-
</a><a href="#h71-0-270" id="h71-0-270" class="d">-  repeated string group_by_property_name = 34;
</a><a href="#h71-0-271" id="h71-0-271" class="d">-
</a><a href="#h71-0-272" id="h71-0-272" class="d">-  optional bool distinct = 24;
</a><a href="#h71-0-273" id="h71-0-273" class="d">-
</a><a href="#h71-0-274" id="h71-0-274" class="d">-  optional int64 min_safe_time_seconds = 35;
</a><a href="#h71-0-275" id="h71-0-275" class="d">-
</a><a href="#h71-0-276" id="h71-0-276" class="d">-  repeated string safe_replica_name = 36;
</a><a href="#h71-0-277" id="h71-0-277" class="d">-
</a><a href="#h71-0-278" id="h71-0-278" class="d">-  optional bool persist_offset = 37 [default=false];
</a><a href="#h71-0-279" id="h71-0-279" class="d">-}
</a><a href="#h71-0-280" id="h71-0-280" class="d">-
</a><a href="#h71-0-281" id="h71-0-281" class="d">-message CompiledQuery {
</a><a href="#h71-0-282" id="h71-0-282" class="d">-  required group PrimaryScan = 1 {
</a><a href="#h71-0-283" id="h71-0-283" class="d">-    optional string index_name = 2;
</a><a href="#h71-0-284" id="h71-0-284" class="d">-
</a><a href="#h71-0-285" id="h71-0-285" class="d">-    optional string start_key = 3;
</a><a href="#h71-0-286" id="h71-0-286" class="d">-    optional bool start_inclusive = 4;
</a><a href="#h71-0-287" id="h71-0-287" class="d">-    optional string end_key = 5;
</a><a href="#h71-0-288" id="h71-0-288" class="d">-    optional bool end_inclusive = 6;
</a><a href="#h71-0-289" id="h71-0-289" class="d">-
</a><a href="#h71-0-290" id="h71-0-290" class="d">-    repeated string start_postfix_value = 22;
</a><a href="#h71-0-291" id="h71-0-291" class="d">-    repeated string end_postfix_value = 23;
</a><a href="#h71-0-292" id="h71-0-292" class="d">-
</a><a href="#h71-0-293" id="h71-0-293" class="d">-    optional int64 end_unapplied_log_timestamp_us = 19;
</a><a href="#h71-0-294" id="h71-0-294" class="d">-  }
</a><a href="#h71-0-295" id="h71-0-295" class="d">-
</a><a href="#h71-0-296" id="h71-0-296" class="d">-  repeated group MergeJoinScan = 7 {
</a><a href="#h71-0-297" id="h71-0-297" class="d">-    required string index_name = 8;
</a><a href="#h71-0-298" id="h71-0-298" class="d">-
</a><a href="#h71-0-299" id="h71-0-299" class="d">-    repeated string prefix_value = 9;
</a><a href="#h71-0-300" id="h71-0-300" class="d">-
</a><a href="#h71-0-301" id="h71-0-301" class="d">-    optional bool value_prefix = 20 [default=false];
</a><a href="#h71-0-302" id="h71-0-302" class="d">-  }
</a><a href="#h71-0-303" id="h71-0-303" class="d">-
</a><a href="#h71-0-304" id="h71-0-304" class="d">-  optional Index index_def = 21;
</a><a href="#h71-0-305" id="h71-0-305" class="d">-
</a><a href="#h71-0-306" id="h71-0-306" class="d">-  optional int32 offset = 10 [default = 0];
</a><a href="#h71-0-307" id="h71-0-307" class="d">-
</a><a href="#h71-0-308" id="h71-0-308" class="d">-  optional int32 limit = 11;
</a><a href="#h71-0-309" id="h71-0-309" class="d">-
</a><a href="#h71-0-310" id="h71-0-310" class="d">-  required bool keys_only = 12;
</a><a href="#h71-0-311" id="h71-0-311" class="d">-
</a><a href="#h71-0-312" id="h71-0-312" class="d">-  repeated string property_name = 24;
</a><a href="#h71-0-313" id="h71-0-313" class="d">-
</a><a href="#h71-0-314" id="h71-0-314" class="d">-  optional int32 distinct_infix_size = 25;
</a><a href="#h71-0-315" id="h71-0-315" class="d">-
</a><a href="#h71-0-316" id="h71-0-316" class="d">-  optional group EntityFilter = 13 {
</a><a href="#h71-0-317" id="h71-0-317" class="d">-    optional bool distinct = 14 [default=false];
</a><a href="#h71-0-318" id="h71-0-318" class="d">-
</a><a href="#h71-0-319" id="h71-0-319" class="d">-    optional string kind = 17;
</a><a href="#h71-0-320" id="h71-0-320" class="d">-    optional Reference ancestor = 18;
</a><a href="#h71-0-321" id="h71-0-321" class="d">-  }
</a><a href="#h71-0-322" id="h71-0-322" class="d">-}
</a><a href="#h71-0-323" id="h71-0-323" class="d">-
</a><a href="#h71-0-324" id="h71-0-324" class="d">-message CompiledCursor {
</a><a href="#h71-0-325" id="h71-0-325" class="d">-  optional group Position = 2 {
</a><a href="#h71-0-326" id="h71-0-326" class="d">-    optional string start_key = 27;
</a><a href="#h71-0-327" id="h71-0-327" class="d">-
</a><a href="#h71-0-328" id="h71-0-328" class="d">-    repeated group IndexValue = 29 {
</a><a href="#h71-0-329" id="h71-0-329" class="d">-      optional string property = 30;
</a><a href="#h71-0-330" id="h71-0-330" class="d">-      required PropertyValue value = 31;
</a><a href="#h71-0-331" id="h71-0-331" class="d">-    }
</a><a href="#h71-0-332" id="h71-0-332" class="d">-
</a><a href="#h71-0-333" id="h71-0-333" class="d">-    optional Reference key = 32;
</a><a href="#h71-0-334" id="h71-0-334" class="d">-
</a><a href="#h71-0-335" id="h71-0-335" class="d">-    optional bool start_inclusive = 28 [default=true];
</a><a href="#h71-0-336" id="h71-0-336" class="d">-  }
</a><a href="#h71-0-337" id="h71-0-337" class="d">-}
</a><a href="#h71-0-338" id="h71-0-338" class="d">-
</a><a href="#h71-0-339" id="h71-0-339" class="d">-message Cursor {
</a><a href="#h71-0-340" id="h71-0-340" class="d">-  required fixed64 cursor = 1;
</a><a href="#h71-0-341" id="h71-0-341" class="d">-
</a><a href="#h71-0-342" id="h71-0-342" class="d">-  optional string app = 2;
</a><a href="#h71-0-343" id="h71-0-343" class="d">-}
</a><a href="#h71-0-344" id="h71-0-344" class="d">-
</a><a href="#h71-0-345" id="h71-0-345" class="d">-message Error {
</a><a href="#h71-0-346" id="h71-0-346" class="d">-  enum ErrorCode {
</a><a href="#h71-0-347" id="h71-0-347" class="d">-    BAD_REQUEST = 1;
</a><a href="#h71-0-348" id="h71-0-348" class="d">-    CONCURRENT_TRANSACTION = 2;
</a><a href="#h71-0-349" id="h71-0-349" class="d">-    INTERNAL_ERROR = 3;
</a><a href="#h71-0-350" id="h71-0-350" class="d">-    NEED_INDEX = 4;
</a><a href="#h71-0-351" id="h71-0-351" class="d">-    TIMEOUT = 5;
</a><a href="#h71-0-352" id="h71-0-352" class="d">-    PERMISSION_DENIED = 6;
</a><a href="#h71-0-353" id="h71-0-353" class="d">-    BIGTABLE_ERROR = 7;
</a><a href="#h71-0-354" id="h71-0-354" class="d">-    COMMITTED_BUT_STILL_APPLYING = 8;
</a><a href="#h71-0-355" id="h71-0-355" class="d">-    CAPABILITY_DISABLED = 9;
</a><a href="#h71-0-356" id="h71-0-356" class="d">-    TRY_ALTERNATE_BACKEND = 10;
</a><a href="#h71-0-357" id="h71-0-357" class="d">-    SAFE_TIME_TOO_OLD = 11;
</a><a href="#h71-0-358" id="h71-0-358" class="d">-  }
</a><a href="#h71-0-359" id="h71-0-359" class="d">-}
</a><a href="#h71-0-360" id="h71-0-360" class="d">-
</a><a href="#h71-0-361" id="h71-0-361" class="d">-message Cost {
</a><a href="#h71-0-362" id="h71-0-362" class="d">-  optional int32 index_writes = 1;
</a><a href="#h71-0-363" id="h71-0-363" class="d">-  optional int32 index_write_bytes = 2;
</a><a href="#h71-0-364" id="h71-0-364" class="d">-  optional int32 entity_writes = 3;
</a><a href="#h71-0-365" id="h71-0-365" class="d">-  optional int32 entity_write_bytes = 4;
</a><a href="#h71-0-366" id="h71-0-366" class="d">-  optional group CommitCost = 5 {
</a><a href="#h71-0-367" id="h71-0-367" class="d">-    optional int32 requested_entity_puts = 6;
</a><a href="#h71-0-368" id="h71-0-368" class="d">-    optional int32 requested_entity_deletes = 7;
</a><a href="#h71-0-369" id="h71-0-369" class="d">-  };
</a><a href="#h71-0-370" id="h71-0-370" class="d">-  optional int32 approximate_storage_delta = 8;
</a><a href="#h71-0-371" id="h71-0-371" class="d">-  optional int32 id_sequence_updates = 9;
</a><a href="#h71-0-372" id="h71-0-372" class="d">-}
</a><a href="#h71-0-373" id="h71-0-373" class="d">-
</a><a href="#h71-0-374" id="h71-0-374" class="d">-message GetRequest {
</a><a href="#h71-0-375" id="h71-0-375" class="d">-  optional InternalHeader header = 6;
</a><a href="#h71-0-376" id="h71-0-376" class="d">-
</a><a href="#h71-0-377" id="h71-0-377" class="d">-  repeated Reference key = 1;
</a><a href="#h71-0-378" id="h71-0-378" class="d">-  optional Transaction transaction = 2;
</a><a href="#h71-0-379" id="h71-0-379" class="d">-
</a><a href="#h71-0-380" id="h71-0-380" class="d">-  optional int64 failover_ms = 3;
</a><a href="#h71-0-381" id="h71-0-381" class="d">-
</a><a href="#h71-0-382" id="h71-0-382" class="d">-  optional bool strong = 4;
</a><a href="#h71-0-383" id="h71-0-383" class="d">-
</a><a href="#h71-0-384" id="h71-0-384" class="d">-  optional bool allow_deferred = 5 [default=false];
</a><a href="#h71-0-385" id="h71-0-385" class="d">-}
</a><a href="#h71-0-386" id="h71-0-386" class="d">-
</a><a href="#h71-0-387" id="h71-0-387" class="d">-message GetResponse {
</a><a href="#h71-0-388" id="h71-0-388" class="d">-  repeated group Entity = 1 {
</a><a href="#h71-0-389" id="h71-0-389" class="d">-    optional EntityProto entity = 2;
</a><a href="#h71-0-390" id="h71-0-390" class="d">-    optional Reference key = 4;
</a><a href="#h71-0-391" id="h71-0-391" class="d">-
</a><a href="#h71-0-392" id="h71-0-392" class="d">-    optional int64 version = 3;
</a><a href="#h71-0-393" id="h71-0-393" class="d">-  }
</a><a href="#h71-0-394" id="h71-0-394" class="d">-
</a><a href="#h71-0-395" id="h71-0-395" class="d">-  repeated Reference deferred = 5;
</a><a href="#h71-0-396" id="h71-0-396" class="d">-
</a><a href="#h71-0-397" id="h71-0-397" class="d">-  optional bool in_order = 6 [default=true];
</a><a href="#h71-0-398" id="h71-0-398" class="d">-}
</a><a href="#h71-0-399" id="h71-0-399" class="d">-
</a><a href="#h71-0-400" id="h71-0-400" class="d">-message PutRequest {
</a><a href="#h71-0-401" id="h71-0-401" class="d">-  optional InternalHeader header = 11;
</a><a href="#h71-0-402" id="h71-0-402" class="d">-
</a><a href="#h71-0-403" id="h71-0-403" class="d">-  repeated EntityProto entity = 1;
</a><a href="#h71-0-404" id="h71-0-404" class="d">-  optional Transaction transaction = 2;
</a><a href="#h71-0-405" id="h71-0-405" class="d">-  repeated CompositeIndex composite_index = 3;
</a><a href="#h71-0-406" id="h71-0-406" class="d">-
</a><a href="#h71-0-407" id="h71-0-407" class="d">-  optional bool trusted = 4 [default = false];
</a><a href="#h71-0-408" id="h71-0-408" class="d">-
</a><a href="#h71-0-409" id="h71-0-409" class="d">-  optional bool force = 7 [default = false];
</a><a href="#h71-0-410" id="h71-0-410" class="d">-
</a><a href="#h71-0-411" id="h71-0-411" class="d">-  optional bool mark_changes = 8 [default = false];
</a><a href="#h71-0-412" id="h71-0-412" class="d">-  repeated Snapshot snapshot = 9;
</a><a href="#h71-0-413" id="h71-0-413" class="d">-
</a><a href="#h71-0-414" id="h71-0-414" class="d">-  enum AutoIdPolicy {
</a><a href="#h71-0-415" id="h71-0-415" class="d">-    CURRENT = 0;
</a><a href="#h71-0-416" id="h71-0-416" class="d">-    SEQUENTIAL = 1;
</a><a href="#h71-0-417" id="h71-0-417" class="d">-  }
</a><a href="#h71-0-418" id="h71-0-418" class="d">-  optional AutoIdPolicy auto_id_policy = 10 [default = CURRENT];
</a><a href="#h71-0-419" id="h71-0-419" class="d">-}
</a><a href="#h71-0-420" id="h71-0-420" class="d">-
</a><a href="#h71-0-421" id="h71-0-421" class="d">-message PutResponse {
</a><a href="#h71-0-422" id="h71-0-422" class="d">-  repeated Reference key = 1;
</a><a href="#h71-0-423" id="h71-0-423" class="d">-  optional Cost cost = 2;
</a><a href="#h71-0-424" id="h71-0-424" class="d">-  repeated int64 version = 3;
</a><a href="#h71-0-425" id="h71-0-425" class="d">-}
</a><a href="#h71-0-426" id="h71-0-426" class="d">-
</a><a href="#h71-0-427" id="h71-0-427" class="d">-message TouchRequest {
</a><a href="#h71-0-428" id="h71-0-428" class="d">-  optional InternalHeader header = 10;
</a><a href="#h71-0-429" id="h71-0-429" class="d">-
</a><a href="#h71-0-430" id="h71-0-430" class="d">-  repeated Reference key = 1;
</a><a href="#h71-0-431" id="h71-0-431" class="d">-  repeated CompositeIndex composite_index = 2;
</a><a href="#h71-0-432" id="h71-0-432" class="d">-  optional bool force = 3 [default = false];
</a><a href="#h71-0-433" id="h71-0-433" class="d">-  repeated Snapshot snapshot = 9;
</a><a href="#h71-0-434" id="h71-0-434" class="d">-}
</a><a href="#h71-0-435" id="h71-0-435" class="d">-
</a><a href="#h71-0-436" id="h71-0-436" class="d">-message TouchResponse {
</a><a href="#h71-0-437" id="h71-0-437" class="d">-  optional Cost cost = 1;
</a><a href="#h71-0-438" id="h71-0-438" class="d">-}
</a><a href="#h71-0-439" id="h71-0-439" class="d">-
</a><a href="#h71-0-440" id="h71-0-440" class="d">-message DeleteRequest {
</a><a href="#h71-0-441" id="h71-0-441" class="d">-  optional InternalHeader header = 10;
</a><a href="#h71-0-442" id="h71-0-442" class="d">-
</a><a href="#h71-0-443" id="h71-0-443" class="d">-  repeated Reference key = 6;
</a><a href="#h71-0-444" id="h71-0-444" class="d">-  optional Transaction transaction = 5;
</a><a href="#h71-0-445" id="h71-0-445" class="d">-
</a><a href="#h71-0-446" id="h71-0-446" class="d">-  optional bool trusted = 4 [default = false];
</a><a href="#h71-0-447" id="h71-0-447" class="d">-
</a><a href="#h71-0-448" id="h71-0-448" class="d">-  optional bool force = 7 [default = false];
</a><a href="#h71-0-449" id="h71-0-449" class="d">-
</a><a href="#h71-0-450" id="h71-0-450" class="d">-  optional bool mark_changes = 8 [default = false];
</a><a href="#h71-0-451" id="h71-0-451" class="d">-  repeated Snapshot snapshot = 9;
</a><a href="#h71-0-452" id="h71-0-452" class="d">-}
</a><a href="#h71-0-453" id="h71-0-453" class="d">-
</a><a href="#h71-0-454" id="h71-0-454" class="d">-message DeleteResponse {
</a><a href="#h71-0-455" id="h71-0-455" class="d">-  optional Cost cost = 1;
</a><a href="#h71-0-456" id="h71-0-456" class="d">-  repeated int64 version = 3;
</a><a href="#h71-0-457" id="h71-0-457" class="d">-}
</a><a href="#h71-0-458" id="h71-0-458" class="d">-
</a><a href="#h71-0-459" id="h71-0-459" class="d">-message NextRequest {
</a><a href="#h71-0-460" id="h71-0-460" class="d">-  optional InternalHeader header = 5;
</a><a href="#h71-0-461" id="h71-0-461" class="d">-
</a><a href="#h71-0-462" id="h71-0-462" class="d">-  required Cursor cursor = 1;
</a><a href="#h71-0-463" id="h71-0-463" class="d">-  optional int32 count = 2;
</a><a href="#h71-0-464" id="h71-0-464" class="d">-
</a><a href="#h71-0-465" id="h71-0-465" class="d">-  optional int32 offset = 4 [default = 0];
</a><a href="#h71-0-466" id="h71-0-466" class="d">-
</a><a href="#h71-0-467" id="h71-0-467" class="d">-  optional bool compile = 3 [default = false];
</a><a href="#h71-0-468" id="h71-0-468" class="d">-}
</a><a href="#h71-0-469" id="h71-0-469" class="d">-
</a><a href="#h71-0-470" id="h71-0-470" class="d">-message QueryResult {
</a><a href="#h71-0-471" id="h71-0-471" class="d">-  optional Cursor cursor = 1;
</a><a href="#h71-0-472" id="h71-0-472" class="d">-
</a><a href="#h71-0-473" id="h71-0-473" class="d">-  repeated EntityProto result = 2;
</a><a href="#h71-0-474" id="h71-0-474" class="d">-
</a><a href="#h71-0-475" id="h71-0-475" class="d">-  optional int32 skipped_results = 7;
</a><a href="#h71-0-476" id="h71-0-476" class="d">-
</a><a href="#h71-0-477" id="h71-0-477" class="d">-  required bool more_results = 3;
</a><a href="#h71-0-478" id="h71-0-478" class="d">-
</a><a href="#h71-0-479" id="h71-0-479" class="d">-  optional bool keys_only = 4;
</a><a href="#h71-0-480" id="h71-0-480" class="d">-
</a><a href="#h71-0-481" id="h71-0-481" class="d">-  optional bool index_only = 9;
</a><a href="#h71-0-482" id="h71-0-482" class="d">-
</a><a href="#h71-0-483" id="h71-0-483" class="d">-  optional bool small_ops = 10;
</a><a href="#h71-0-484" id="h71-0-484" class="d">-
</a><a href="#h71-0-485" id="h71-0-485" class="d">-  optional CompiledQuery compiled_query = 5;
</a><a href="#h71-0-486" id="h71-0-486" class="d">-
</a><a href="#h71-0-487" id="h71-0-487" class="d">-  optional CompiledCursor compiled_cursor = 6;
</a><a href="#h71-0-488" id="h71-0-488" class="d">-
</a><a href="#h71-0-489" id="h71-0-489" class="d">-  repeated CompositeIndex index = 8;
</a><a href="#h71-0-490" id="h71-0-490" class="d">-
</a><a href="#h71-0-491" id="h71-0-491" class="d">-  repeated int64 version = 11;
</a><a href="#h71-0-492" id="h71-0-492" class="d">-}
</a><a href="#h71-0-493" id="h71-0-493" class="d">-
</a><a href="#h71-0-494" id="h71-0-494" class="d">-message AllocateIdsRequest {
</a><a href="#h71-0-495" id="h71-0-495" class="d">-  optional InternalHeader header = 4;
</a><a href="#h71-0-496" id="h71-0-496" class="d">-
</a><a href="#h71-0-497" id="h71-0-497" class="d">-  optional Reference model_key = 1;
</a><a href="#h71-0-498" id="h71-0-498" class="d">-
</a><a href="#h71-0-499" id="h71-0-499" class="d">-  optional int64 size = 2;
</a><a href="#h71-0-500" id="h71-0-500" class="d">-
</a><a href="#h71-0-501" id="h71-0-501" class="d">-  optional int64 max = 3;
</a><a href="#h71-0-502" id="h71-0-502" class="d">-
</a><a href="#h71-0-503" id="h71-0-503" class="d">-  repeated Reference reserve = 5;
</a><a href="#h71-0-504" id="h71-0-504" class="d">-}
</a><a href="#h71-0-505" id="h71-0-505" class="d">-
</a><a href="#h71-0-506" id="h71-0-506" class="d">-message AllocateIdsResponse {
</a><a href="#h71-0-507" id="h71-0-507" class="d">-  required int64 start = 1;
</a><a href="#h71-0-508" id="h71-0-508" class="d">-  required int64 end = 2;
</a><a href="#h71-0-509" id="h71-0-509" class="d">-  optional Cost cost = 3;
</a><a href="#h71-0-510" id="h71-0-510" class="d">-}
</a><a href="#h71-0-511" id="h71-0-511" class="d">-
</a><a href="#h71-0-512" id="h71-0-512" class="d">-message CompositeIndices {
</a><a href="#h71-0-513" id="h71-0-513" class="d">-  repeated CompositeIndex index = 1;
</a><a href="#h71-0-514" id="h71-0-514" class="d">-}
</a><a href="#h71-0-515" id="h71-0-515" class="d">-
</a><a href="#h71-0-516" id="h71-0-516" class="d">-message AddActionsRequest {
</a><a href="#h71-0-517" id="h71-0-517" class="d">-  optional InternalHeader header = 3;
</a><a href="#h71-0-518" id="h71-0-518" class="d">-
</a><a href="#h71-0-519" id="h71-0-519" class="d">-  required Transaction transaction = 1;
</a><a href="#h71-0-520" id="h71-0-520" class="d">-  repeated Action action = 2;
</a><a href="#h71-0-521" id="h71-0-521" class="d">-}
</a><a href="#h71-0-522" id="h71-0-522" class="d">-
</a><a href="#h71-0-523" id="h71-0-523" class="d">-message AddActionsResponse {
</a><a href="#h71-0-524" id="h71-0-524" class="d">-}
</a><a href="#h71-0-525" id="h71-0-525" class="d">-
</a><a href="#h71-0-526" id="h71-0-526" class="d">-message BeginTransactionRequest {
</a><a href="#h71-0-527" id="h71-0-527" class="d">-  optional InternalHeader header = 3;
</a><a href="#h71-0-528" id="h71-0-528" class="d">-
</a><a href="#h71-0-529" id="h71-0-529" class="d">-  required string app = 1;
</a><a href="#h71-0-530" id="h71-0-530" class="d">-  optional bool allow_multiple_eg = 2 [default = false];
</a><a href="#h71-0-531" id="h71-0-531" class="d">-}
</a><a href="#h71-0-532" id="h71-0-532" class="d">-
</a><a href="#h71-0-533" id="h71-0-533" class="d">-message CommitResponse {
</a><a href="#h71-0-534" id="h71-0-534" class="d">-  optional Cost cost = 1;
</a><a href="#h71-0-535" id="h71-0-535" class="d">-
</a><a href="#h71-0-536" id="h71-0-536" class="d">-  repeated group Version = 3 {
</a><a href="#h71-0-537" id="h71-0-537" class="d">-    required Reference root_entity_key = 4;
</a><a href="#h71-0-538" id="h71-0-538" class="d">-    required int64 version = 5;
</a><a href="#h71-0-539" id="h71-0-539" class="d">-  }
</a><a href="#h71-0-540" id="h71-0-540" class="d">-}
</a><b>diff --git a/<a id="h72" href="../file/vendor/google.golang.org/appengine/internal/identity.go">vendor/google.golang.org/appengine/internal/identity.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/identity.go">vendor/google.golang.org/appengine/internal/identity.go</a></b>
<a href="#h72-0" id="h72-0" class="h">@@ -1,14 +0,0 @@
</a><a href="#h72-0-0" id="h72-0-0" class="d">-// Copyright 2011 Google Inc. All rights reserved.
</a><a href="#h72-0-1" id="h72-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h72-0-2" id="h72-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h72-0-3" id="h72-0-3" class="d">-
</a><a href="#h72-0-4" id="h72-0-4" class="d">-package internal
</a><a href="#h72-0-5" id="h72-0-5" class="d">-
</a><a href="#h72-0-6" id="h72-0-6" class="d">-import netcontext &quot;golang.org/x/net/context&quot;
</a><a href="#h72-0-7" id="h72-0-7" class="d">-
</a><a href="#h72-0-8" id="h72-0-8" class="d">-// These functions are implementations of the wrapper functions
</a><a href="#h72-0-9" id="h72-0-9" class="d">-// in ../appengine/identity.go. See that file for commentary.
</a><a href="#h72-0-10" id="h72-0-10" class="d">-
</a><a href="#h72-0-11" id="h72-0-11" class="d">-func AppID(c netcontext.Context) string {
</a><a href="#h72-0-12" id="h72-0-12" class="d">-	return appID(FullyQualifiedAppID(c))
</a><a href="#h72-0-13" id="h72-0-13" class="d">-}
</a><b>diff --git a/<a id="h73" href="../file/vendor/google.golang.org/appengine/internal/identity_classic.go">vendor/google.golang.org/appengine/internal/identity_classic.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/identity_classic.go">vendor/google.golang.org/appengine/internal/identity_classic.go</a></b>
<a href="#h73-0" id="h73-0" class="h">@@ -1,27 +0,0 @@
</a><a href="#h73-0-0" id="h73-0-0" class="d">-// Copyright 2015 Google Inc. All rights reserved.
</a><a href="#h73-0-1" id="h73-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h73-0-2" id="h73-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h73-0-3" id="h73-0-3" class="d">-
</a><a href="#h73-0-4" id="h73-0-4" class="d">-// +build appengine
</a><a href="#h73-0-5" id="h73-0-5" class="d">-
</a><a href="#h73-0-6" id="h73-0-6" class="d">-package internal
</a><a href="#h73-0-7" id="h73-0-7" class="d">-
</a><a href="#h73-0-8" id="h73-0-8" class="d">-import (
</a><a href="#h73-0-9" id="h73-0-9" class="d">-	&quot;appengine&quot;
</a><a href="#h73-0-10" id="h73-0-10" class="d">-
</a><a href="#h73-0-11" id="h73-0-11" class="d">-	netcontext &quot;golang.org/x/net/context&quot;
</a><a href="#h73-0-12" id="h73-0-12" class="d">-)
</a><a href="#h73-0-13" id="h73-0-13" class="d">-
</a><a href="#h73-0-14" id="h73-0-14" class="d">-func DefaultVersionHostname(ctx netcontext.Context) string {
</a><a href="#h73-0-15" id="h73-0-15" class="d">-	return appengine.DefaultVersionHostname(fromContext(ctx))
</a><a href="#h73-0-16" id="h73-0-16" class="d">-}
</a><a href="#h73-0-17" id="h73-0-17" class="d">-
</a><a href="#h73-0-18" id="h73-0-18" class="d">-func RequestID(ctx netcontext.Context) string  { return appengine.RequestID(fromContext(ctx)) }
</a><a href="#h73-0-19" id="h73-0-19" class="d">-func Datacenter(_ netcontext.Context) string   { return appengine.Datacenter() }
</a><a href="#h73-0-20" id="h73-0-20" class="d">-func ServerSoftware() string                   { return appengine.ServerSoftware() }
</a><a href="#h73-0-21" id="h73-0-21" class="d">-func ModuleName(ctx netcontext.Context) string { return appengine.ModuleName(fromContext(ctx)) }
</a><a href="#h73-0-22" id="h73-0-22" class="d">-func VersionID(ctx netcontext.Context) string  { return appengine.VersionID(fromContext(ctx)) }
</a><a href="#h73-0-23" id="h73-0-23" class="d">-func InstanceID() string                       { return appengine.InstanceID() }
</a><a href="#h73-0-24" id="h73-0-24" class="d">-func IsDevAppServer() bool                     { return appengine.IsDevAppServer() }
</a><a href="#h73-0-25" id="h73-0-25" class="d">-
</a><a href="#h73-0-26" id="h73-0-26" class="d">-func fullyQualifiedAppID(ctx netcontext.Context) string { return fromContext(ctx).FullyQualifiedAppID() }
</a><b>diff --git a/<a id="h74" href="../file/vendor/google.golang.org/appengine/internal/identity_vm.go">vendor/google.golang.org/appengine/internal/identity_vm.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/identity_vm.go">vendor/google.golang.org/appengine/internal/identity_vm.go</a></b>
<a href="#h74-0" id="h74-0" class="h">@@ -1,97 +0,0 @@
</a><a href="#h74-0-0" id="h74-0-0" class="d">-// Copyright 2011 Google Inc. All rights reserved.
</a><a href="#h74-0-1" id="h74-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h74-0-2" id="h74-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h74-0-3" id="h74-0-3" class="d">-
</a><a href="#h74-0-4" id="h74-0-4" class="d">-// +build !appengine
</a><a href="#h74-0-5" id="h74-0-5" class="d">-
</a><a href="#h74-0-6" id="h74-0-6" class="d">-package internal
</a><a href="#h74-0-7" id="h74-0-7" class="d">-
</a><a href="#h74-0-8" id="h74-0-8" class="d">-import (
</a><a href="#h74-0-9" id="h74-0-9" class="d">-	&quot;net/http&quot;
</a><a href="#h74-0-10" id="h74-0-10" class="d">-	&quot;os&quot;
</a><a href="#h74-0-11" id="h74-0-11" class="d">-
</a><a href="#h74-0-12" id="h74-0-12" class="d">-	netcontext &quot;golang.org/x/net/context&quot;
</a><a href="#h74-0-13" id="h74-0-13" class="d">-)
</a><a href="#h74-0-14" id="h74-0-14" class="d">-
</a><a href="#h74-0-15" id="h74-0-15" class="d">-// These functions are implementations of the wrapper functions
</a><a href="#h74-0-16" id="h74-0-16" class="d">-// in ../appengine/identity.go. See that file for commentary.
</a><a href="#h74-0-17" id="h74-0-17" class="d">-
</a><a href="#h74-0-18" id="h74-0-18" class="d">-const (
</a><a href="#h74-0-19" id="h74-0-19" class="d">-	hDefaultVersionHostname = &quot;X-AppEngine-Default-Version-Hostname&quot;
</a><a href="#h74-0-20" id="h74-0-20" class="d">-	hRequestLogId           = &quot;X-AppEngine-Request-Log-Id&quot;
</a><a href="#h74-0-21" id="h74-0-21" class="d">-	hDatacenter             = &quot;X-AppEngine-Datacenter&quot;
</a><a href="#h74-0-22" id="h74-0-22" class="d">-)
</a><a href="#h74-0-23" id="h74-0-23" class="d">-
</a><a href="#h74-0-24" id="h74-0-24" class="d">-func ctxHeaders(ctx netcontext.Context) http.Header {
</a><a href="#h74-0-25" id="h74-0-25" class="d">-	return fromContext(ctx).Request().Header
</a><a href="#h74-0-26" id="h74-0-26" class="d">-}
</a><a href="#h74-0-27" id="h74-0-27" class="d">-
</a><a href="#h74-0-28" id="h74-0-28" class="d">-func DefaultVersionHostname(ctx netcontext.Context) string {
</a><a href="#h74-0-29" id="h74-0-29" class="d">-	return ctxHeaders(ctx).Get(hDefaultVersionHostname)
</a><a href="#h74-0-30" id="h74-0-30" class="d">-}
</a><a href="#h74-0-31" id="h74-0-31" class="d">-
</a><a href="#h74-0-32" id="h74-0-32" class="d">-func RequestID(ctx netcontext.Context) string {
</a><a href="#h74-0-33" id="h74-0-33" class="d">-	return ctxHeaders(ctx).Get(hRequestLogId)
</a><a href="#h74-0-34" id="h74-0-34" class="d">-}
</a><a href="#h74-0-35" id="h74-0-35" class="d">-
</a><a href="#h74-0-36" id="h74-0-36" class="d">-func Datacenter(ctx netcontext.Context) string {
</a><a href="#h74-0-37" id="h74-0-37" class="d">-	return ctxHeaders(ctx).Get(hDatacenter)
</a><a href="#h74-0-38" id="h74-0-38" class="d">-}
</a><a href="#h74-0-39" id="h74-0-39" class="d">-
</a><a href="#h74-0-40" id="h74-0-40" class="d">-func ServerSoftware() string {
</a><a href="#h74-0-41" id="h74-0-41" class="d">-	// TODO(dsymonds): Remove fallback when we&#39;ve verified this.
</a><a href="#h74-0-42" id="h74-0-42" class="d">-	if s := os.Getenv(&quot;SERVER_SOFTWARE&quot;); s != &quot;&quot; {
</a><a href="#h74-0-43" id="h74-0-43" class="d">-		return s
</a><a href="#h74-0-44" id="h74-0-44" class="d">-	}
</a><a href="#h74-0-45" id="h74-0-45" class="d">-	return &quot;Google App Engine/1.x.x&quot;
</a><a href="#h74-0-46" id="h74-0-46" class="d">-}
</a><a href="#h74-0-47" id="h74-0-47" class="d">-
</a><a href="#h74-0-48" id="h74-0-48" class="d">-// TODO(dsymonds): Remove the metadata fetches.
</a><a href="#h74-0-49" id="h74-0-49" class="d">-
</a><a href="#h74-0-50" id="h74-0-50" class="d">-func ModuleName(_ netcontext.Context) string {
</a><a href="#h74-0-51" id="h74-0-51" class="d">-	if s := os.Getenv(&quot;GAE_MODULE_NAME&quot;); s != &quot;&quot; {
</a><a href="#h74-0-52" id="h74-0-52" class="d">-		return s
</a><a href="#h74-0-53" id="h74-0-53" class="d">-	}
</a><a href="#h74-0-54" id="h74-0-54" class="d">-	return string(mustGetMetadata(&quot;instance/attributes/gae_backend_name&quot;))
</a><a href="#h74-0-55" id="h74-0-55" class="d">-}
</a><a href="#h74-0-56" id="h74-0-56" class="d">-
</a><a href="#h74-0-57" id="h74-0-57" class="d">-func VersionID(_ netcontext.Context) string {
</a><a href="#h74-0-58" id="h74-0-58" class="d">-	if s1, s2 := os.Getenv(&quot;GAE_MODULE_VERSION&quot;), os.Getenv(&quot;GAE_MINOR_VERSION&quot;); s1 != &quot;&quot; &amp;&amp; s2 != &quot;&quot; {
</a><a href="#h74-0-59" id="h74-0-59" class="d">-		return s1 + &quot;.&quot; + s2
</a><a href="#h74-0-60" id="h74-0-60" class="d">-	}
</a><a href="#h74-0-61" id="h74-0-61" class="d">-	return string(mustGetMetadata(&quot;instance/attributes/gae_backend_version&quot;)) + &quot;.&quot; + string(mustGetMetadata(&quot;instance/attributes/gae_backend_minor_version&quot;))
</a><a href="#h74-0-62" id="h74-0-62" class="d">-}
</a><a href="#h74-0-63" id="h74-0-63" class="d">-
</a><a href="#h74-0-64" id="h74-0-64" class="d">-func InstanceID() string {
</a><a href="#h74-0-65" id="h74-0-65" class="d">-	if s := os.Getenv(&quot;GAE_MODULE_INSTANCE&quot;); s != &quot;&quot; {
</a><a href="#h74-0-66" id="h74-0-66" class="d">-		return s
</a><a href="#h74-0-67" id="h74-0-67" class="d">-	}
</a><a href="#h74-0-68" id="h74-0-68" class="d">-	return string(mustGetMetadata(&quot;instance/attributes/gae_backend_instance&quot;))
</a><a href="#h74-0-69" id="h74-0-69" class="d">-}
</a><a href="#h74-0-70" id="h74-0-70" class="d">-
</a><a href="#h74-0-71" id="h74-0-71" class="d">-func partitionlessAppID() string {
</a><a href="#h74-0-72" id="h74-0-72" class="d">-	// gae_project has everything except the partition prefix.
</a><a href="#h74-0-73" id="h74-0-73" class="d">-	appID := os.Getenv(&quot;GAE_LONG_APP_ID&quot;)
</a><a href="#h74-0-74" id="h74-0-74" class="d">-	if appID == &quot;&quot; {
</a><a href="#h74-0-75" id="h74-0-75" class="d">-		appID = string(mustGetMetadata(&quot;instance/attributes/gae_project&quot;))
</a><a href="#h74-0-76" id="h74-0-76" class="d">-	}
</a><a href="#h74-0-77" id="h74-0-77" class="d">-	return appID
</a><a href="#h74-0-78" id="h74-0-78" class="d">-}
</a><a href="#h74-0-79" id="h74-0-79" class="d">-
</a><a href="#h74-0-80" id="h74-0-80" class="d">-func fullyQualifiedAppID(_ netcontext.Context) string {
</a><a href="#h74-0-81" id="h74-0-81" class="d">-	appID := partitionlessAppID()
</a><a href="#h74-0-82" id="h74-0-82" class="d">-
</a><a href="#h74-0-83" id="h74-0-83" class="d">-	part := os.Getenv(&quot;GAE_PARTITION&quot;)
</a><a href="#h74-0-84" id="h74-0-84" class="d">-	if part == &quot;&quot; {
</a><a href="#h74-0-85" id="h74-0-85" class="d">-		part = string(mustGetMetadata(&quot;instance/attributes/gae_partition&quot;))
</a><a href="#h74-0-86" id="h74-0-86" class="d">-	}
</a><a href="#h74-0-87" id="h74-0-87" class="d">-
</a><a href="#h74-0-88" id="h74-0-88" class="d">-	if part != &quot;&quot; {
</a><a href="#h74-0-89" id="h74-0-89" class="d">-		appID = part + &quot;~&quot; + appID
</a><a href="#h74-0-90" id="h74-0-90" class="d">-	}
</a><a href="#h74-0-91" id="h74-0-91" class="d">-	return appID
</a><a href="#h74-0-92" id="h74-0-92" class="d">-}
</a><a href="#h74-0-93" id="h74-0-93" class="d">-
</a><a href="#h74-0-94" id="h74-0-94" class="d">-func IsDevAppServer() bool {
</a><a href="#h74-0-95" id="h74-0-95" class="d">-	return os.Getenv(&quot;RUN_WITH_DEVAPPSERVER&quot;) != &quot;&quot;
</a><a href="#h74-0-96" id="h74-0-96" class="d">-}
</a><b>diff --git a/<a id="h75" href="../file/vendor/google.golang.org/appengine/internal/internal.go">vendor/google.golang.org/appengine/internal/internal.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/internal.go">vendor/google.golang.org/appengine/internal/internal.go</a></b>
<a href="#h75-0" id="h75-0" class="h">@@ -1,110 +0,0 @@
</a><a href="#h75-0-0" id="h75-0-0" class="d">-// Copyright 2011 Google Inc. All rights reserved.
</a><a href="#h75-0-1" id="h75-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h75-0-2" id="h75-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h75-0-3" id="h75-0-3" class="d">-
</a><a href="#h75-0-4" id="h75-0-4" class="d">-// Package internal provides support for package appengine.
</a><a href="#h75-0-5" id="h75-0-5" class="d">-//
</a><a href="#h75-0-6" id="h75-0-6" class="d">-// Programs should not use this package directly. Its API is not stable.
</a><a href="#h75-0-7" id="h75-0-7" class="d">-// Use packages appengine and appengine/* instead.
</a><a href="#h75-0-8" id="h75-0-8" class="d">-package internal
</a><a href="#h75-0-9" id="h75-0-9" class="d">-
</a><a href="#h75-0-10" id="h75-0-10" class="d">-import (
</a><a href="#h75-0-11" id="h75-0-11" class="d">-	&quot;fmt&quot;
</a><a href="#h75-0-12" id="h75-0-12" class="d">-
</a><a href="#h75-0-13" id="h75-0-13" class="d">-	&quot;github.com/golang/protobuf/proto&quot;
</a><a href="#h75-0-14" id="h75-0-14" class="d">-
</a><a href="#h75-0-15" id="h75-0-15" class="d">-	remotepb &quot;google.golang.org/appengine/internal/remote_api&quot;
</a><a href="#h75-0-16" id="h75-0-16" class="d">-)
</a><a href="#h75-0-17" id="h75-0-17" class="d">-
</a><a href="#h75-0-18" id="h75-0-18" class="d">-// errorCodeMaps is a map of service name to the error code map for the service.
</a><a href="#h75-0-19" id="h75-0-19" class="d">-var errorCodeMaps = make(map[string]map[int32]string)
</a><a href="#h75-0-20" id="h75-0-20" class="d">-
</a><a href="#h75-0-21" id="h75-0-21" class="d">-// RegisterErrorCodeMap is called from API implementations to register their
</a><a href="#h75-0-22" id="h75-0-22" class="d">-// error code map. This should only be called from init functions.
</a><a href="#h75-0-23" id="h75-0-23" class="d">-func RegisterErrorCodeMap(service string, m map[int32]string) {
</a><a href="#h75-0-24" id="h75-0-24" class="d">-	errorCodeMaps[service] = m
</a><a href="#h75-0-25" id="h75-0-25" class="d">-}
</a><a href="#h75-0-26" id="h75-0-26" class="d">-
</a><a href="#h75-0-27" id="h75-0-27" class="d">-type timeoutCodeKey struct {
</a><a href="#h75-0-28" id="h75-0-28" class="d">-	service string
</a><a href="#h75-0-29" id="h75-0-29" class="d">-	code    int32
</a><a href="#h75-0-30" id="h75-0-30" class="d">-}
</a><a href="#h75-0-31" id="h75-0-31" class="d">-
</a><a href="#h75-0-32" id="h75-0-32" class="d">-// timeoutCodes is the set of service+code pairs that represent timeouts.
</a><a href="#h75-0-33" id="h75-0-33" class="d">-var timeoutCodes = make(map[timeoutCodeKey]bool)
</a><a href="#h75-0-34" id="h75-0-34" class="d">-
</a><a href="#h75-0-35" id="h75-0-35" class="d">-func RegisterTimeoutErrorCode(service string, code int32) {
</a><a href="#h75-0-36" id="h75-0-36" class="d">-	timeoutCodes[timeoutCodeKey{service, code}] = true
</a><a href="#h75-0-37" id="h75-0-37" class="d">-}
</a><a href="#h75-0-38" id="h75-0-38" class="d">-
</a><a href="#h75-0-39" id="h75-0-39" class="d">-// APIError is the type returned by appengine.Context&#39;s Call method
</a><a href="#h75-0-40" id="h75-0-40" class="d">-// when an API call fails in an API-specific way. This may be, for instance,
</a><a href="#h75-0-41" id="h75-0-41" class="d">-// a taskqueue API call failing with TaskQueueServiceError::UNKNOWN_QUEUE.
</a><a href="#h75-0-42" id="h75-0-42" class="d">-type APIError struct {
</a><a href="#h75-0-43" id="h75-0-43" class="d">-	Service string
</a><a href="#h75-0-44" id="h75-0-44" class="d">-	Detail  string
</a><a href="#h75-0-45" id="h75-0-45" class="d">-	Code    int32 // API-specific error code
</a><a href="#h75-0-46" id="h75-0-46" class="d">-}
</a><a href="#h75-0-47" id="h75-0-47" class="d">-
</a><a href="#h75-0-48" id="h75-0-48" class="d">-func (e *APIError) Error() string {
</a><a href="#h75-0-49" id="h75-0-49" class="d">-	if e.Code == 0 {
</a><a href="#h75-0-50" id="h75-0-50" class="d">-		if e.Detail == &quot;&quot; {
</a><a href="#h75-0-51" id="h75-0-51" class="d">-			return &quot;APIError &lt;empty&gt;&quot;
</a><a href="#h75-0-52" id="h75-0-52" class="d">-		}
</a><a href="#h75-0-53" id="h75-0-53" class="d">-		return e.Detail
</a><a href="#h75-0-54" id="h75-0-54" class="d">-	}
</a><a href="#h75-0-55" id="h75-0-55" class="d">-	s := fmt.Sprintf(&quot;API error %d&quot;, e.Code)
</a><a href="#h75-0-56" id="h75-0-56" class="d">-	if m, ok := errorCodeMaps[e.Service]; ok {
</a><a href="#h75-0-57" id="h75-0-57" class="d">-		s += &quot; (&quot; + e.Service + &quot;: &quot; + m[e.Code] + &quot;)&quot;
</a><a href="#h75-0-58" id="h75-0-58" class="d">-	} else {
</a><a href="#h75-0-59" id="h75-0-59" class="d">-		// Shouldn&#39;t happen, but provide a bit more detail if it does.
</a><a href="#h75-0-60" id="h75-0-60" class="d">-		s = e.Service + &quot; &quot; + s
</a><a href="#h75-0-61" id="h75-0-61" class="d">-	}
</a><a href="#h75-0-62" id="h75-0-62" class="d">-	if e.Detail != &quot;&quot; {
</a><a href="#h75-0-63" id="h75-0-63" class="d">-		s += &quot;: &quot; + e.Detail
</a><a href="#h75-0-64" id="h75-0-64" class="d">-	}
</a><a href="#h75-0-65" id="h75-0-65" class="d">-	return s
</a><a href="#h75-0-66" id="h75-0-66" class="d">-}
</a><a href="#h75-0-67" id="h75-0-67" class="d">-
</a><a href="#h75-0-68" id="h75-0-68" class="d">-func (e *APIError) IsTimeout() bool {
</a><a href="#h75-0-69" id="h75-0-69" class="d">-	return timeoutCodes[timeoutCodeKey{e.Service, e.Code}]
</a><a href="#h75-0-70" id="h75-0-70" class="d">-}
</a><a href="#h75-0-71" id="h75-0-71" class="d">-
</a><a href="#h75-0-72" id="h75-0-72" class="d">-// CallError is the type returned by appengine.Context&#39;s Call method when an
</a><a href="#h75-0-73" id="h75-0-73" class="d">-// API call fails in a generic way, such as RpcError::CAPABILITY_DISABLED.
</a><a href="#h75-0-74" id="h75-0-74" class="d">-type CallError struct {
</a><a href="#h75-0-75" id="h75-0-75" class="d">-	Detail string
</a><a href="#h75-0-76" id="h75-0-76" class="d">-	Code   int32
</a><a href="#h75-0-77" id="h75-0-77" class="d">-	// TODO: Remove this if we get a distinguishable error code.
</a><a href="#h75-0-78" id="h75-0-78" class="d">-	Timeout bool
</a><a href="#h75-0-79" id="h75-0-79" class="d">-}
</a><a href="#h75-0-80" id="h75-0-80" class="d">-
</a><a href="#h75-0-81" id="h75-0-81" class="d">-func (e *CallError) Error() string {
</a><a href="#h75-0-82" id="h75-0-82" class="d">-	var msg string
</a><a href="#h75-0-83" id="h75-0-83" class="d">-	switch remotepb.RpcError_ErrorCode(e.Code) {
</a><a href="#h75-0-84" id="h75-0-84" class="d">-	case remotepb.RpcError_UNKNOWN:
</a><a href="#h75-0-85" id="h75-0-85" class="d">-		return e.Detail
</a><a href="#h75-0-86" id="h75-0-86" class="d">-	case remotepb.RpcError_OVER_QUOTA:
</a><a href="#h75-0-87" id="h75-0-87" class="d">-		msg = &quot;Over quota&quot;
</a><a href="#h75-0-88" id="h75-0-88" class="d">-	case remotepb.RpcError_CAPABILITY_DISABLED:
</a><a href="#h75-0-89" id="h75-0-89" class="d">-		msg = &quot;Capability disabled&quot;
</a><a href="#h75-0-90" id="h75-0-90" class="d">-	case remotepb.RpcError_CANCELLED:
</a><a href="#h75-0-91" id="h75-0-91" class="d">-		msg = &quot;Canceled&quot;
</a><a href="#h75-0-92" id="h75-0-92" class="d">-	default:
</a><a href="#h75-0-93" id="h75-0-93" class="d">-		msg = fmt.Sprintf(&quot;Call error %d&quot;, e.Code)
</a><a href="#h75-0-94" id="h75-0-94" class="d">-	}
</a><a href="#h75-0-95" id="h75-0-95" class="d">-	s := msg + &quot;: &quot; + e.Detail
</a><a href="#h75-0-96" id="h75-0-96" class="d">-	if e.Timeout {
</a><a href="#h75-0-97" id="h75-0-97" class="d">-		s += &quot; (timeout)&quot;
</a><a href="#h75-0-98" id="h75-0-98" class="d">-	}
</a><a href="#h75-0-99" id="h75-0-99" class="d">-	return s
</a><a href="#h75-0-100" id="h75-0-100" class="d">-}
</a><a href="#h75-0-101" id="h75-0-101" class="d">-
</a><a href="#h75-0-102" id="h75-0-102" class="d">-func (e *CallError) IsTimeout() bool {
</a><a href="#h75-0-103" id="h75-0-103" class="d">-	return e.Timeout
</a><a href="#h75-0-104" id="h75-0-104" class="d">-}
</a><a href="#h75-0-105" id="h75-0-105" class="d">-
</a><a href="#h75-0-106" id="h75-0-106" class="d">-// NamespaceMods is a map from API service to a function that will mutate an RPC request to attach a namespace.
</a><a href="#h75-0-107" id="h75-0-107" class="d">-// The function should be prepared to be called on the same message more than once; it should only modify the
</a><a href="#h75-0-108" id="h75-0-108" class="d">-// RPC request the first time.
</a><a href="#h75-0-109" id="h75-0-109" class="d">-var NamespaceMods = make(map[string]func(m proto.Message, namespace string))
</a><b>diff --git a/<a id="h76" href="../file/vendor/google.golang.org/appengine/internal/log/BUILD">vendor/google.golang.org/appengine/internal/log/BUILD</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/log/BUILD">vendor/google.golang.org/appengine/internal/log/BUILD</a></b>
<a href="#h76-0" id="h76-0" class="h">@@ -1,19 +0,0 @@
</a><a href="#h76-0-0" id="h76-0-0" class="d">-
</a><a href="#h76-0-1" id="h76-0-1" class="d">-load(&quot;@io_bazel_rules_go//go:def.bzl&quot;,
</a><a href="#h76-0-2" id="h76-0-2" class="d">-  &quot;go_binary&quot;,
</a><a href="#h76-0-3" id="h76-0-3" class="d">-  &quot;go_library&quot;,
</a><a href="#h76-0-4" id="h76-0-4" class="d">-  &quot;go_test&quot;,
</a><a href="#h76-0-5" id="h76-0-5" class="d">-)
</a><a href="#h76-0-6" id="h76-0-6" class="d">-
</a><a href="#h76-0-7" id="h76-0-7" class="d">-go_library(
</a><a href="#h76-0-8" id="h76-0-8" class="d">-name = &quot;go_default_library&quot;,
</a><a href="#h76-0-9" id="h76-0-9" class="d">-  srcs = [
</a><a href="#h76-0-10" id="h76-0-10" class="d">-    &quot;log_service.pb.go&quot;,
</a><a href="#h76-0-11" id="h76-0-11" class="d">-  ],
</a><a href="#h76-0-12" id="h76-0-12" class="d">-  deps = [
</a><a href="#h76-0-13" id="h76-0-13" class="d">-    &quot;//vendor/github.com/golang/protobuf/proto:go_default_library&quot;,
</a><a href="#h76-0-14" id="h76-0-14" class="d">-  ],
</a><a href="#h76-0-15" id="h76-0-15" class="d">-  visibility = [&quot;//visibility:public&quot;],
</a><a href="#h76-0-16" id="h76-0-16" class="d">-)
</a><a href="#h76-0-17" id="h76-0-17" class="d">-
</a><a href="#h76-0-18" id="h76-0-18" class="d">-
</a><b>diff --git a/<a id="h77" href="../file/vendor/google.golang.org/appengine/internal/log/log_service.pb.go">vendor/google.golang.org/appengine/internal/log/log_service.pb.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/log/log_service.pb.go">vendor/google.golang.org/appengine/internal/log/log_service.pb.go</a></b>
<a href="#h77-0" id="h77-0" class="h">@@ -1,899 +0,0 @@
</a><a href="#h77-0-0" id="h77-0-0" class="d">-// Code generated by protoc-gen-go.
</a><a href="#h77-0-1" id="h77-0-1" class="d">-// source: google.golang.org/appengine/internal/log/log_service.proto
</a><a href="#h77-0-2" id="h77-0-2" class="d">-// DO NOT EDIT!
</a><a href="#h77-0-3" id="h77-0-3" class="d">-
</a><a href="#h77-0-4" id="h77-0-4" class="d">-/*
</a><a href="#h77-0-5" id="h77-0-5" class="d">-Package log is a generated protocol buffer package.
</a><a href="#h77-0-6" id="h77-0-6" class="d">-
</a><a href="#h77-0-7" id="h77-0-7" class="d">-It is generated from these files:
</a><a href="#h77-0-8" id="h77-0-8" class="d">-	google.golang.org/appengine/internal/log/log_service.proto
</a><a href="#h77-0-9" id="h77-0-9" class="d">-
</a><a href="#h77-0-10" id="h77-0-10" class="d">-It has these top-level messages:
</a><a href="#h77-0-11" id="h77-0-11" class="d">-	LogServiceError
</a><a href="#h77-0-12" id="h77-0-12" class="d">-	UserAppLogLine
</a><a href="#h77-0-13" id="h77-0-13" class="d">-	UserAppLogGroup
</a><a href="#h77-0-14" id="h77-0-14" class="d">-	FlushRequest
</a><a href="#h77-0-15" id="h77-0-15" class="d">-	SetStatusRequest
</a><a href="#h77-0-16" id="h77-0-16" class="d">-	LogOffset
</a><a href="#h77-0-17" id="h77-0-17" class="d">-	LogLine
</a><a href="#h77-0-18" id="h77-0-18" class="d">-	RequestLog
</a><a href="#h77-0-19" id="h77-0-19" class="d">-	LogModuleVersion
</a><a href="#h77-0-20" id="h77-0-20" class="d">-	LogReadRequest
</a><a href="#h77-0-21" id="h77-0-21" class="d">-	LogReadResponse
</a><a href="#h77-0-22" id="h77-0-22" class="d">-	LogUsageRecord
</a><a href="#h77-0-23" id="h77-0-23" class="d">-	LogUsageRequest
</a><a href="#h77-0-24" id="h77-0-24" class="d">-	LogUsageResponse
</a><a href="#h77-0-25" id="h77-0-25" class="d">-*/
</a><a href="#h77-0-26" id="h77-0-26" class="d">-package log
</a><a href="#h77-0-27" id="h77-0-27" class="d">-
</a><a href="#h77-0-28" id="h77-0-28" class="d">-import proto &quot;github.com/golang/protobuf/proto&quot;
</a><a href="#h77-0-29" id="h77-0-29" class="d">-import fmt &quot;fmt&quot;
</a><a href="#h77-0-30" id="h77-0-30" class="d">-import math &quot;math&quot;
</a><a href="#h77-0-31" id="h77-0-31" class="d">-
</a><a href="#h77-0-32" id="h77-0-32" class="d">-// Reference imports to suppress errors if they are not otherwise used.
</a><a href="#h77-0-33" id="h77-0-33" class="d">-var _ = proto.Marshal
</a><a href="#h77-0-34" id="h77-0-34" class="d">-var _ = fmt.Errorf
</a><a href="#h77-0-35" id="h77-0-35" class="d">-var _ = math.Inf
</a><a href="#h77-0-36" id="h77-0-36" class="d">-
</a><a href="#h77-0-37" id="h77-0-37" class="d">-type LogServiceError_ErrorCode int32
</a><a href="#h77-0-38" id="h77-0-38" class="d">-
</a><a href="#h77-0-39" id="h77-0-39" class="d">-const (
</a><a href="#h77-0-40" id="h77-0-40" class="d">-	LogServiceError_OK              LogServiceError_ErrorCode = 0
</a><a href="#h77-0-41" id="h77-0-41" class="d">-	LogServiceError_INVALID_REQUEST LogServiceError_ErrorCode = 1
</a><a href="#h77-0-42" id="h77-0-42" class="d">-	LogServiceError_STORAGE_ERROR   LogServiceError_ErrorCode = 2
</a><a href="#h77-0-43" id="h77-0-43" class="d">-)
</a><a href="#h77-0-44" id="h77-0-44" class="d">-
</a><a href="#h77-0-45" id="h77-0-45" class="d">-var LogServiceError_ErrorCode_name = map[int32]string{
</a><a href="#h77-0-46" id="h77-0-46" class="d">-	0: &quot;OK&quot;,
</a><a href="#h77-0-47" id="h77-0-47" class="d">-	1: &quot;INVALID_REQUEST&quot;,
</a><a href="#h77-0-48" id="h77-0-48" class="d">-	2: &quot;STORAGE_ERROR&quot;,
</a><a href="#h77-0-49" id="h77-0-49" class="d">-}
</a><a href="#h77-0-50" id="h77-0-50" class="d">-var LogServiceError_ErrorCode_value = map[string]int32{
</a><a href="#h77-0-51" id="h77-0-51" class="d">-	&quot;OK&quot;:              0,
</a><a href="#h77-0-52" id="h77-0-52" class="d">-	&quot;INVALID_REQUEST&quot;: 1,
</a><a href="#h77-0-53" id="h77-0-53" class="d">-	&quot;STORAGE_ERROR&quot;:   2,
</a><a href="#h77-0-54" id="h77-0-54" class="d">-}
</a><a href="#h77-0-55" id="h77-0-55" class="d">-
</a><a href="#h77-0-56" id="h77-0-56" class="d">-func (x LogServiceError_ErrorCode) Enum() *LogServiceError_ErrorCode {
</a><a href="#h77-0-57" id="h77-0-57" class="d">-	p := new(LogServiceError_ErrorCode)
</a><a href="#h77-0-58" id="h77-0-58" class="d">-	*p = x
</a><a href="#h77-0-59" id="h77-0-59" class="d">-	return p
</a><a href="#h77-0-60" id="h77-0-60" class="d">-}
</a><a href="#h77-0-61" id="h77-0-61" class="d">-func (x LogServiceError_ErrorCode) String() string {
</a><a href="#h77-0-62" id="h77-0-62" class="d">-	return proto.EnumName(LogServiceError_ErrorCode_name, int32(x))
</a><a href="#h77-0-63" id="h77-0-63" class="d">-}
</a><a href="#h77-0-64" id="h77-0-64" class="d">-func (x *LogServiceError_ErrorCode) UnmarshalJSON(data []byte) error {
</a><a href="#h77-0-65" id="h77-0-65" class="d">-	value, err := proto.UnmarshalJSONEnum(LogServiceError_ErrorCode_value, data, &quot;LogServiceError_ErrorCode&quot;)
</a><a href="#h77-0-66" id="h77-0-66" class="d">-	if err != nil {
</a><a href="#h77-0-67" id="h77-0-67" class="d">-		return err
</a><a href="#h77-0-68" id="h77-0-68" class="d">-	}
</a><a href="#h77-0-69" id="h77-0-69" class="d">-	*x = LogServiceError_ErrorCode(value)
</a><a href="#h77-0-70" id="h77-0-70" class="d">-	return nil
</a><a href="#h77-0-71" id="h77-0-71" class="d">-}
</a><a href="#h77-0-72" id="h77-0-72" class="d">-
</a><a href="#h77-0-73" id="h77-0-73" class="d">-type LogServiceError struct {
</a><a href="#h77-0-74" id="h77-0-74" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h77-0-75" id="h77-0-75" class="d">-}
</a><a href="#h77-0-76" id="h77-0-76" class="d">-
</a><a href="#h77-0-77" id="h77-0-77" class="d">-func (m *LogServiceError) Reset()         { *m = LogServiceError{} }
</a><a href="#h77-0-78" id="h77-0-78" class="d">-func (m *LogServiceError) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-79" id="h77-0-79" class="d">-func (*LogServiceError) ProtoMessage()    {}
</a><a href="#h77-0-80" id="h77-0-80" class="d">-
</a><a href="#h77-0-81" id="h77-0-81" class="d">-type UserAppLogLine struct {
</a><a href="#h77-0-82" id="h77-0-82" class="d">-	TimestampUsec    *int64  `protobuf:&quot;varint,1,req,name=timestamp_usec&quot; json:&quot;timestamp_usec,omitempty&quot;`
</a><a href="#h77-0-83" id="h77-0-83" class="d">-	Level            *int64  `protobuf:&quot;varint,2,req,name=level&quot; json:&quot;level,omitempty&quot;`
</a><a href="#h77-0-84" id="h77-0-84" class="d">-	Message          *string `protobuf:&quot;bytes,3,req,name=message&quot; json:&quot;message,omitempty&quot;`
</a><a href="#h77-0-85" id="h77-0-85" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h77-0-86" id="h77-0-86" class="d">-}
</a><a href="#h77-0-87" id="h77-0-87" class="d">-
</a><a href="#h77-0-88" id="h77-0-88" class="d">-func (m *UserAppLogLine) Reset()         { *m = UserAppLogLine{} }
</a><a href="#h77-0-89" id="h77-0-89" class="d">-func (m *UserAppLogLine) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-90" id="h77-0-90" class="d">-func (*UserAppLogLine) ProtoMessage()    {}
</a><a href="#h77-0-91" id="h77-0-91" class="d">-
</a><a href="#h77-0-92" id="h77-0-92" class="d">-func (m *UserAppLogLine) GetTimestampUsec() int64 {
</a><a href="#h77-0-93" id="h77-0-93" class="d">-	if m != nil &amp;&amp; m.TimestampUsec != nil {
</a><a href="#h77-0-94" id="h77-0-94" class="d">-		return *m.TimestampUsec
</a><a href="#h77-0-95" id="h77-0-95" class="d">-	}
</a><a href="#h77-0-96" id="h77-0-96" class="d">-	return 0
</a><a href="#h77-0-97" id="h77-0-97" class="d">-}
</a><a href="#h77-0-98" id="h77-0-98" class="d">-
</a><a href="#h77-0-99" id="h77-0-99" class="d">-func (m *UserAppLogLine) GetLevel() int64 {
</a><a href="#h77-0-100" id="h77-0-100" class="d">-	if m != nil &amp;&amp; m.Level != nil {
</a><a href="#h77-0-101" id="h77-0-101" class="d">-		return *m.Level
</a><a href="#h77-0-102" id="h77-0-102" class="d">-	}
</a><a href="#h77-0-103" id="h77-0-103" class="d">-	return 0
</a><a href="#h77-0-104" id="h77-0-104" class="d">-}
</a><a href="#h77-0-105" id="h77-0-105" class="d">-
</a><a href="#h77-0-106" id="h77-0-106" class="d">-func (m *UserAppLogLine) GetMessage() string {
</a><a href="#h77-0-107" id="h77-0-107" class="d">-	if m != nil &amp;&amp; m.Message != nil {
</a><a href="#h77-0-108" id="h77-0-108" class="d">-		return *m.Message
</a><a href="#h77-0-109" id="h77-0-109" class="d">-	}
</a><a href="#h77-0-110" id="h77-0-110" class="d">-	return &quot;&quot;
</a><a href="#h77-0-111" id="h77-0-111" class="d">-}
</a><a href="#h77-0-112" id="h77-0-112" class="d">-
</a><a href="#h77-0-113" id="h77-0-113" class="d">-type UserAppLogGroup struct {
</a><a href="#h77-0-114" id="h77-0-114" class="d">-	LogLine          []*UserAppLogLine `protobuf:&quot;bytes,2,rep,name=log_line&quot; json:&quot;log_line,omitempty&quot;`
</a><a href="#h77-0-115" id="h77-0-115" class="d">-	XXX_unrecognized []byte            `json:&quot;-&quot;`
</a><a href="#h77-0-116" id="h77-0-116" class="d">-}
</a><a href="#h77-0-117" id="h77-0-117" class="d">-
</a><a href="#h77-0-118" id="h77-0-118" class="d">-func (m *UserAppLogGroup) Reset()         { *m = UserAppLogGroup{} }
</a><a href="#h77-0-119" id="h77-0-119" class="d">-func (m *UserAppLogGroup) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-120" id="h77-0-120" class="d">-func (*UserAppLogGroup) ProtoMessage()    {}
</a><a href="#h77-0-121" id="h77-0-121" class="d">-
</a><a href="#h77-0-122" id="h77-0-122" class="d">-func (m *UserAppLogGroup) GetLogLine() []*UserAppLogLine {
</a><a href="#h77-0-123" id="h77-0-123" class="d">-	if m != nil {
</a><a href="#h77-0-124" id="h77-0-124" class="d">-		return m.LogLine
</a><a href="#h77-0-125" id="h77-0-125" class="d">-	}
</a><a href="#h77-0-126" id="h77-0-126" class="d">-	return nil
</a><a href="#h77-0-127" id="h77-0-127" class="d">-}
</a><a href="#h77-0-128" id="h77-0-128" class="d">-
</a><a href="#h77-0-129" id="h77-0-129" class="d">-type FlushRequest struct {
</a><a href="#h77-0-130" id="h77-0-130" class="d">-	Logs             []byte `protobuf:&quot;bytes,1,opt,name=logs&quot; json:&quot;logs,omitempty&quot;`
</a><a href="#h77-0-131" id="h77-0-131" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h77-0-132" id="h77-0-132" class="d">-}
</a><a href="#h77-0-133" id="h77-0-133" class="d">-
</a><a href="#h77-0-134" id="h77-0-134" class="d">-func (m *FlushRequest) Reset()         { *m = FlushRequest{} }
</a><a href="#h77-0-135" id="h77-0-135" class="d">-func (m *FlushRequest) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-136" id="h77-0-136" class="d">-func (*FlushRequest) ProtoMessage()    {}
</a><a href="#h77-0-137" id="h77-0-137" class="d">-
</a><a href="#h77-0-138" id="h77-0-138" class="d">-func (m *FlushRequest) GetLogs() []byte {
</a><a href="#h77-0-139" id="h77-0-139" class="d">-	if m != nil {
</a><a href="#h77-0-140" id="h77-0-140" class="d">-		return m.Logs
</a><a href="#h77-0-141" id="h77-0-141" class="d">-	}
</a><a href="#h77-0-142" id="h77-0-142" class="d">-	return nil
</a><a href="#h77-0-143" id="h77-0-143" class="d">-}
</a><a href="#h77-0-144" id="h77-0-144" class="d">-
</a><a href="#h77-0-145" id="h77-0-145" class="d">-type SetStatusRequest struct {
</a><a href="#h77-0-146" id="h77-0-146" class="d">-	Status           *string `protobuf:&quot;bytes,1,req,name=status&quot; json:&quot;status,omitempty&quot;`
</a><a href="#h77-0-147" id="h77-0-147" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h77-0-148" id="h77-0-148" class="d">-}
</a><a href="#h77-0-149" id="h77-0-149" class="d">-
</a><a href="#h77-0-150" id="h77-0-150" class="d">-func (m *SetStatusRequest) Reset()         { *m = SetStatusRequest{} }
</a><a href="#h77-0-151" id="h77-0-151" class="d">-func (m *SetStatusRequest) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-152" id="h77-0-152" class="d">-func (*SetStatusRequest) ProtoMessage()    {}
</a><a href="#h77-0-153" id="h77-0-153" class="d">-
</a><a href="#h77-0-154" id="h77-0-154" class="d">-func (m *SetStatusRequest) GetStatus() string {
</a><a href="#h77-0-155" id="h77-0-155" class="d">-	if m != nil &amp;&amp; m.Status != nil {
</a><a href="#h77-0-156" id="h77-0-156" class="d">-		return *m.Status
</a><a href="#h77-0-157" id="h77-0-157" class="d">-	}
</a><a href="#h77-0-158" id="h77-0-158" class="d">-	return &quot;&quot;
</a><a href="#h77-0-159" id="h77-0-159" class="d">-}
</a><a href="#h77-0-160" id="h77-0-160" class="d">-
</a><a href="#h77-0-161" id="h77-0-161" class="d">-type LogOffset struct {
</a><a href="#h77-0-162" id="h77-0-162" class="d">-	RequestId        []byte `protobuf:&quot;bytes,1,opt,name=request_id&quot; json:&quot;request_id,omitempty&quot;`
</a><a href="#h77-0-163" id="h77-0-163" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h77-0-164" id="h77-0-164" class="d">-}
</a><a href="#h77-0-165" id="h77-0-165" class="d">-
</a><a href="#h77-0-166" id="h77-0-166" class="d">-func (m *LogOffset) Reset()         { *m = LogOffset{} }
</a><a href="#h77-0-167" id="h77-0-167" class="d">-func (m *LogOffset) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-168" id="h77-0-168" class="d">-func (*LogOffset) ProtoMessage()    {}
</a><a href="#h77-0-169" id="h77-0-169" class="d">-
</a><a href="#h77-0-170" id="h77-0-170" class="d">-func (m *LogOffset) GetRequestId() []byte {
</a><a href="#h77-0-171" id="h77-0-171" class="d">-	if m != nil {
</a><a href="#h77-0-172" id="h77-0-172" class="d">-		return m.RequestId
</a><a href="#h77-0-173" id="h77-0-173" class="d">-	}
</a><a href="#h77-0-174" id="h77-0-174" class="d">-	return nil
</a><a href="#h77-0-175" id="h77-0-175" class="d">-}
</a><a href="#h77-0-176" id="h77-0-176" class="d">-
</a><a href="#h77-0-177" id="h77-0-177" class="d">-type LogLine struct {
</a><a href="#h77-0-178" id="h77-0-178" class="d">-	Time             *int64  `protobuf:&quot;varint,1,req,name=time&quot; json:&quot;time,omitempty&quot;`
</a><a href="#h77-0-179" id="h77-0-179" class="d">-	Level            *int32  `protobuf:&quot;varint,2,req,name=level&quot; json:&quot;level,omitempty&quot;`
</a><a href="#h77-0-180" id="h77-0-180" class="d">-	LogMessage       *string `protobuf:&quot;bytes,3,req,name=log_message&quot; json:&quot;log_message,omitempty&quot;`
</a><a href="#h77-0-181" id="h77-0-181" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h77-0-182" id="h77-0-182" class="d">-}
</a><a href="#h77-0-183" id="h77-0-183" class="d">-
</a><a href="#h77-0-184" id="h77-0-184" class="d">-func (m *LogLine) Reset()         { *m = LogLine{} }
</a><a href="#h77-0-185" id="h77-0-185" class="d">-func (m *LogLine) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-186" id="h77-0-186" class="d">-func (*LogLine) ProtoMessage()    {}
</a><a href="#h77-0-187" id="h77-0-187" class="d">-
</a><a href="#h77-0-188" id="h77-0-188" class="d">-func (m *LogLine) GetTime() int64 {
</a><a href="#h77-0-189" id="h77-0-189" class="d">-	if m != nil &amp;&amp; m.Time != nil {
</a><a href="#h77-0-190" id="h77-0-190" class="d">-		return *m.Time
</a><a href="#h77-0-191" id="h77-0-191" class="d">-	}
</a><a href="#h77-0-192" id="h77-0-192" class="d">-	return 0
</a><a href="#h77-0-193" id="h77-0-193" class="d">-}
</a><a href="#h77-0-194" id="h77-0-194" class="d">-
</a><a href="#h77-0-195" id="h77-0-195" class="d">-func (m *LogLine) GetLevel() int32 {
</a><a href="#h77-0-196" id="h77-0-196" class="d">-	if m != nil &amp;&amp; m.Level != nil {
</a><a href="#h77-0-197" id="h77-0-197" class="d">-		return *m.Level
</a><a href="#h77-0-198" id="h77-0-198" class="d">-	}
</a><a href="#h77-0-199" id="h77-0-199" class="d">-	return 0
</a><a href="#h77-0-200" id="h77-0-200" class="d">-}
</a><a href="#h77-0-201" id="h77-0-201" class="d">-
</a><a href="#h77-0-202" id="h77-0-202" class="d">-func (m *LogLine) GetLogMessage() string {
</a><a href="#h77-0-203" id="h77-0-203" class="d">-	if m != nil &amp;&amp; m.LogMessage != nil {
</a><a href="#h77-0-204" id="h77-0-204" class="d">-		return *m.LogMessage
</a><a href="#h77-0-205" id="h77-0-205" class="d">-	}
</a><a href="#h77-0-206" id="h77-0-206" class="d">-	return &quot;&quot;
</a><a href="#h77-0-207" id="h77-0-207" class="d">-}
</a><a href="#h77-0-208" id="h77-0-208" class="d">-
</a><a href="#h77-0-209" id="h77-0-209" class="d">-type RequestLog struct {
</a><a href="#h77-0-210" id="h77-0-210" class="d">-	AppId                   *string    `protobuf:&quot;bytes,1,req,name=app_id&quot; json:&quot;app_id,omitempty&quot;`
</a><a href="#h77-0-211" id="h77-0-211" class="d">-	ModuleId                *string    `protobuf:&quot;bytes,37,opt,name=module_id,def=default&quot; json:&quot;module_id,omitempty&quot;`
</a><a href="#h77-0-212" id="h77-0-212" class="d">-	VersionId               *string    `protobuf:&quot;bytes,2,req,name=version_id&quot; json:&quot;version_id,omitempty&quot;`
</a><a href="#h77-0-213" id="h77-0-213" class="d">-	RequestId               []byte     `protobuf:&quot;bytes,3,req,name=request_id&quot; json:&quot;request_id,omitempty&quot;`
</a><a href="#h77-0-214" id="h77-0-214" class="d">-	Offset                  *LogOffset `protobuf:&quot;bytes,35,opt,name=offset&quot; json:&quot;offset,omitempty&quot;`
</a><a href="#h77-0-215" id="h77-0-215" class="d">-	Ip                      *string    `protobuf:&quot;bytes,4,req,name=ip&quot; json:&quot;ip,omitempty&quot;`
</a><a href="#h77-0-216" id="h77-0-216" class="d">-	Nickname                *string    `protobuf:&quot;bytes,5,opt,name=nickname&quot; json:&quot;nickname,omitempty&quot;`
</a><a href="#h77-0-217" id="h77-0-217" class="d">-	StartTime               *int64     `protobuf:&quot;varint,6,req,name=start_time&quot; json:&quot;start_time,omitempty&quot;`
</a><a href="#h77-0-218" id="h77-0-218" class="d">-	EndTime                 *int64     `protobuf:&quot;varint,7,req,name=end_time&quot; json:&quot;end_time,omitempty&quot;`
</a><a href="#h77-0-219" id="h77-0-219" class="d">-	Latency                 *int64     `protobuf:&quot;varint,8,req,name=latency&quot; json:&quot;latency,omitempty&quot;`
</a><a href="#h77-0-220" id="h77-0-220" class="d">-	Mcycles                 *int64     `protobuf:&quot;varint,9,req,name=mcycles&quot; json:&quot;mcycles,omitempty&quot;`
</a><a href="#h77-0-221" id="h77-0-221" class="d">-	Method                  *string    `protobuf:&quot;bytes,10,req,name=method&quot; json:&quot;method,omitempty&quot;`
</a><a href="#h77-0-222" id="h77-0-222" class="d">-	Resource                *string    `protobuf:&quot;bytes,11,req,name=resource&quot; json:&quot;resource,omitempty&quot;`
</a><a href="#h77-0-223" id="h77-0-223" class="d">-	HttpVersion             *string    `protobuf:&quot;bytes,12,req,name=http_version&quot; json:&quot;http_version,omitempty&quot;`
</a><a href="#h77-0-224" id="h77-0-224" class="d">-	Status                  *int32     `protobuf:&quot;varint,13,req,name=status&quot; json:&quot;status,omitempty&quot;`
</a><a href="#h77-0-225" id="h77-0-225" class="d">-	ResponseSize            *int64     `protobuf:&quot;varint,14,req,name=response_size&quot; json:&quot;response_size,omitempty&quot;`
</a><a href="#h77-0-226" id="h77-0-226" class="d">-	Referrer                *string    `protobuf:&quot;bytes,15,opt,name=referrer&quot; json:&quot;referrer,omitempty&quot;`
</a><a href="#h77-0-227" id="h77-0-227" class="d">-	UserAgent               *string    `protobuf:&quot;bytes,16,opt,name=user_agent&quot; json:&quot;user_agent,omitempty&quot;`
</a><a href="#h77-0-228" id="h77-0-228" class="d">-	UrlMapEntry             *string    `protobuf:&quot;bytes,17,req,name=url_map_entry&quot; json:&quot;url_map_entry,omitempty&quot;`
</a><a href="#h77-0-229" id="h77-0-229" class="d">-	Combined                *string    `protobuf:&quot;bytes,18,req,name=combined&quot; json:&quot;combined,omitempty&quot;`
</a><a href="#h77-0-230" id="h77-0-230" class="d">-	ApiMcycles              *int64     `protobuf:&quot;varint,19,opt,name=api_mcycles&quot; json:&quot;api_mcycles,omitempty&quot;`
</a><a href="#h77-0-231" id="h77-0-231" class="d">-	Host                    *string    `protobuf:&quot;bytes,20,opt,name=host&quot; json:&quot;host,omitempty&quot;`
</a><a href="#h77-0-232" id="h77-0-232" class="d">-	Cost                    *float64   `protobuf:&quot;fixed64,21,opt,name=cost&quot; json:&quot;cost,omitempty&quot;`
</a><a href="#h77-0-233" id="h77-0-233" class="d">-	TaskQueueName           *string    `protobuf:&quot;bytes,22,opt,name=task_queue_name&quot; json:&quot;task_queue_name,omitempty&quot;`
</a><a href="#h77-0-234" id="h77-0-234" class="d">-	TaskName                *string    `protobuf:&quot;bytes,23,opt,name=task_name&quot; json:&quot;task_name,omitempty&quot;`
</a><a href="#h77-0-235" id="h77-0-235" class="d">-	WasLoadingRequest       *bool      `protobuf:&quot;varint,24,opt,name=was_loading_request&quot; json:&quot;was_loading_request,omitempty&quot;`
</a><a href="#h77-0-236" id="h77-0-236" class="d">-	PendingTime             *int64     `protobuf:&quot;varint,25,opt,name=pending_time&quot; json:&quot;pending_time,omitempty&quot;`
</a><a href="#h77-0-237" id="h77-0-237" class="d">-	ReplicaIndex            *int32     `protobuf:&quot;varint,26,opt,name=replica_index,def=-1&quot; json:&quot;replica_index,omitempty&quot;`
</a><a href="#h77-0-238" id="h77-0-238" class="d">-	Finished                *bool      `protobuf:&quot;varint,27,opt,name=finished,def=1&quot; json:&quot;finished,omitempty&quot;`
</a><a href="#h77-0-239" id="h77-0-239" class="d">-	CloneKey                []byte     `protobuf:&quot;bytes,28,opt,name=clone_key&quot; json:&quot;clone_key,omitempty&quot;`
</a><a href="#h77-0-240" id="h77-0-240" class="d">-	Line                    []*LogLine `protobuf:&quot;bytes,29,rep,name=line&quot; json:&quot;line,omitempty&quot;`
</a><a href="#h77-0-241" id="h77-0-241" class="d">-	LinesIncomplete         *bool      `protobuf:&quot;varint,36,opt,name=lines_incomplete&quot; json:&quot;lines_incomplete,omitempty&quot;`
</a><a href="#h77-0-242" id="h77-0-242" class="d">-	AppEngineRelease        []byte     `protobuf:&quot;bytes,38,opt,name=app_engine_release&quot; json:&quot;app_engine_release,omitempty&quot;`
</a><a href="#h77-0-243" id="h77-0-243" class="d">-	ExitReason              *int32     `protobuf:&quot;varint,30,opt,name=exit_reason&quot; json:&quot;exit_reason,omitempty&quot;`
</a><a href="#h77-0-244" id="h77-0-244" class="d">-	WasThrottledForTime     *bool      `protobuf:&quot;varint,31,opt,name=was_throttled_for_time&quot; json:&quot;was_throttled_for_time,omitempty&quot;`
</a><a href="#h77-0-245" id="h77-0-245" class="d">-	WasThrottledForRequests *bool      `protobuf:&quot;varint,32,opt,name=was_throttled_for_requests&quot; json:&quot;was_throttled_for_requests,omitempty&quot;`
</a><a href="#h77-0-246" id="h77-0-246" class="d">-	ThrottledTime           *int64     `protobuf:&quot;varint,33,opt,name=throttled_time&quot; json:&quot;throttled_time,omitempty&quot;`
</a><a href="#h77-0-247" id="h77-0-247" class="d">-	ServerName              []byte     `protobuf:&quot;bytes,34,opt,name=server_name&quot; json:&quot;server_name,omitempty&quot;`
</a><a href="#h77-0-248" id="h77-0-248" class="d">-	XXX_unrecognized        []byte     `json:&quot;-&quot;`
</a><a href="#h77-0-249" id="h77-0-249" class="d">-}
</a><a href="#h77-0-250" id="h77-0-250" class="d">-
</a><a href="#h77-0-251" id="h77-0-251" class="d">-func (m *RequestLog) Reset()         { *m = RequestLog{} }
</a><a href="#h77-0-252" id="h77-0-252" class="d">-func (m *RequestLog) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-253" id="h77-0-253" class="d">-func (*RequestLog) ProtoMessage()    {}
</a><a href="#h77-0-254" id="h77-0-254" class="d">-
</a><a href="#h77-0-255" id="h77-0-255" class="d">-const Default_RequestLog_ModuleId string = &quot;default&quot;
</a><a href="#h77-0-256" id="h77-0-256" class="d">-const Default_RequestLog_ReplicaIndex int32 = -1
</a><a href="#h77-0-257" id="h77-0-257" class="d">-const Default_RequestLog_Finished bool = true
</a><a href="#h77-0-258" id="h77-0-258" class="d">-
</a><a href="#h77-0-259" id="h77-0-259" class="d">-func (m *RequestLog) GetAppId() string {
</a><a href="#h77-0-260" id="h77-0-260" class="d">-	if m != nil &amp;&amp; m.AppId != nil {
</a><a href="#h77-0-261" id="h77-0-261" class="d">-		return *m.AppId
</a><a href="#h77-0-262" id="h77-0-262" class="d">-	}
</a><a href="#h77-0-263" id="h77-0-263" class="d">-	return &quot;&quot;
</a><a href="#h77-0-264" id="h77-0-264" class="d">-}
</a><a href="#h77-0-265" id="h77-0-265" class="d">-
</a><a href="#h77-0-266" id="h77-0-266" class="d">-func (m *RequestLog) GetModuleId() string {
</a><a href="#h77-0-267" id="h77-0-267" class="d">-	if m != nil &amp;&amp; m.ModuleId != nil {
</a><a href="#h77-0-268" id="h77-0-268" class="d">-		return *m.ModuleId
</a><a href="#h77-0-269" id="h77-0-269" class="d">-	}
</a><a href="#h77-0-270" id="h77-0-270" class="d">-	return Default_RequestLog_ModuleId
</a><a href="#h77-0-271" id="h77-0-271" class="d">-}
</a><a href="#h77-0-272" id="h77-0-272" class="d">-
</a><a href="#h77-0-273" id="h77-0-273" class="d">-func (m *RequestLog) GetVersionId() string {
</a><a href="#h77-0-274" id="h77-0-274" class="d">-	if m != nil &amp;&amp; m.VersionId != nil {
</a><a href="#h77-0-275" id="h77-0-275" class="d">-		return *m.VersionId
</a><a href="#h77-0-276" id="h77-0-276" class="d">-	}
</a><a href="#h77-0-277" id="h77-0-277" class="d">-	return &quot;&quot;
</a><a href="#h77-0-278" id="h77-0-278" class="d">-}
</a><a href="#h77-0-279" id="h77-0-279" class="d">-
</a><a href="#h77-0-280" id="h77-0-280" class="d">-func (m *RequestLog) GetRequestId() []byte {
</a><a href="#h77-0-281" id="h77-0-281" class="d">-	if m != nil {
</a><a href="#h77-0-282" id="h77-0-282" class="d">-		return m.RequestId
</a><a href="#h77-0-283" id="h77-0-283" class="d">-	}
</a><a href="#h77-0-284" id="h77-0-284" class="d">-	return nil
</a><a href="#h77-0-285" id="h77-0-285" class="d">-}
</a><a href="#h77-0-286" id="h77-0-286" class="d">-
</a><a href="#h77-0-287" id="h77-0-287" class="d">-func (m *RequestLog) GetOffset() *LogOffset {
</a><a href="#h77-0-288" id="h77-0-288" class="d">-	if m != nil {
</a><a href="#h77-0-289" id="h77-0-289" class="d">-		return m.Offset
</a><a href="#h77-0-290" id="h77-0-290" class="d">-	}
</a><a href="#h77-0-291" id="h77-0-291" class="d">-	return nil
</a><a href="#h77-0-292" id="h77-0-292" class="d">-}
</a><a href="#h77-0-293" id="h77-0-293" class="d">-
</a><a href="#h77-0-294" id="h77-0-294" class="d">-func (m *RequestLog) GetIp() string {
</a><a href="#h77-0-295" id="h77-0-295" class="d">-	if m != nil &amp;&amp; m.Ip != nil {
</a><a href="#h77-0-296" id="h77-0-296" class="d">-		return *m.Ip
</a><a href="#h77-0-297" id="h77-0-297" class="d">-	}
</a><a href="#h77-0-298" id="h77-0-298" class="d">-	return &quot;&quot;
</a><a href="#h77-0-299" id="h77-0-299" class="d">-}
</a><a href="#h77-0-300" id="h77-0-300" class="d">-
</a><a href="#h77-0-301" id="h77-0-301" class="d">-func (m *RequestLog) GetNickname() string {
</a><a href="#h77-0-302" id="h77-0-302" class="d">-	if m != nil &amp;&amp; m.Nickname != nil {
</a><a href="#h77-0-303" id="h77-0-303" class="d">-		return *m.Nickname
</a><a href="#h77-0-304" id="h77-0-304" class="d">-	}
</a><a href="#h77-0-305" id="h77-0-305" class="d">-	return &quot;&quot;
</a><a href="#h77-0-306" id="h77-0-306" class="d">-}
</a><a href="#h77-0-307" id="h77-0-307" class="d">-
</a><a href="#h77-0-308" id="h77-0-308" class="d">-func (m *RequestLog) GetStartTime() int64 {
</a><a href="#h77-0-309" id="h77-0-309" class="d">-	if m != nil &amp;&amp; m.StartTime != nil {
</a><a href="#h77-0-310" id="h77-0-310" class="d">-		return *m.StartTime
</a><a href="#h77-0-311" id="h77-0-311" class="d">-	}
</a><a href="#h77-0-312" id="h77-0-312" class="d">-	return 0
</a><a href="#h77-0-313" id="h77-0-313" class="d">-}
</a><a href="#h77-0-314" id="h77-0-314" class="d">-
</a><a href="#h77-0-315" id="h77-0-315" class="d">-func (m *RequestLog) GetEndTime() int64 {
</a><a href="#h77-0-316" id="h77-0-316" class="d">-	if m != nil &amp;&amp; m.EndTime != nil {
</a><a href="#h77-0-317" id="h77-0-317" class="d">-		return *m.EndTime
</a><a href="#h77-0-318" id="h77-0-318" class="d">-	}
</a><a href="#h77-0-319" id="h77-0-319" class="d">-	return 0
</a><a href="#h77-0-320" id="h77-0-320" class="d">-}
</a><a href="#h77-0-321" id="h77-0-321" class="d">-
</a><a href="#h77-0-322" id="h77-0-322" class="d">-func (m *RequestLog) GetLatency() int64 {
</a><a href="#h77-0-323" id="h77-0-323" class="d">-	if m != nil &amp;&amp; m.Latency != nil {
</a><a href="#h77-0-324" id="h77-0-324" class="d">-		return *m.Latency
</a><a href="#h77-0-325" id="h77-0-325" class="d">-	}
</a><a href="#h77-0-326" id="h77-0-326" class="d">-	return 0
</a><a href="#h77-0-327" id="h77-0-327" class="d">-}
</a><a href="#h77-0-328" id="h77-0-328" class="d">-
</a><a href="#h77-0-329" id="h77-0-329" class="d">-func (m *RequestLog) GetMcycles() int64 {
</a><a href="#h77-0-330" id="h77-0-330" class="d">-	if m != nil &amp;&amp; m.Mcycles != nil {
</a><a href="#h77-0-331" id="h77-0-331" class="d">-		return *m.Mcycles
</a><a href="#h77-0-332" id="h77-0-332" class="d">-	}
</a><a href="#h77-0-333" id="h77-0-333" class="d">-	return 0
</a><a href="#h77-0-334" id="h77-0-334" class="d">-}
</a><a href="#h77-0-335" id="h77-0-335" class="d">-
</a><a href="#h77-0-336" id="h77-0-336" class="d">-func (m *RequestLog) GetMethod() string {
</a><a href="#h77-0-337" id="h77-0-337" class="d">-	if m != nil &amp;&amp; m.Method != nil {
</a><a href="#h77-0-338" id="h77-0-338" class="d">-		return *m.Method
</a><a href="#h77-0-339" id="h77-0-339" class="d">-	}
</a><a href="#h77-0-340" id="h77-0-340" class="d">-	return &quot;&quot;
</a><a href="#h77-0-341" id="h77-0-341" class="d">-}
</a><a href="#h77-0-342" id="h77-0-342" class="d">-
</a><a href="#h77-0-343" id="h77-0-343" class="d">-func (m *RequestLog) GetResource() string {
</a><a href="#h77-0-344" id="h77-0-344" class="d">-	if m != nil &amp;&amp; m.Resource != nil {
</a><a href="#h77-0-345" id="h77-0-345" class="d">-		return *m.Resource
</a><a href="#h77-0-346" id="h77-0-346" class="d">-	}
</a><a href="#h77-0-347" id="h77-0-347" class="d">-	return &quot;&quot;
</a><a href="#h77-0-348" id="h77-0-348" class="d">-}
</a><a href="#h77-0-349" id="h77-0-349" class="d">-
</a><a href="#h77-0-350" id="h77-0-350" class="d">-func (m *RequestLog) GetHttpVersion() string {
</a><a href="#h77-0-351" id="h77-0-351" class="d">-	if m != nil &amp;&amp; m.HttpVersion != nil {
</a><a href="#h77-0-352" id="h77-0-352" class="d">-		return *m.HttpVersion
</a><a href="#h77-0-353" id="h77-0-353" class="d">-	}
</a><a href="#h77-0-354" id="h77-0-354" class="d">-	return &quot;&quot;
</a><a href="#h77-0-355" id="h77-0-355" class="d">-}
</a><a href="#h77-0-356" id="h77-0-356" class="d">-
</a><a href="#h77-0-357" id="h77-0-357" class="d">-func (m *RequestLog) GetStatus() int32 {
</a><a href="#h77-0-358" id="h77-0-358" class="d">-	if m != nil &amp;&amp; m.Status != nil {
</a><a href="#h77-0-359" id="h77-0-359" class="d">-		return *m.Status
</a><a href="#h77-0-360" id="h77-0-360" class="d">-	}
</a><a href="#h77-0-361" id="h77-0-361" class="d">-	return 0
</a><a href="#h77-0-362" id="h77-0-362" class="d">-}
</a><a href="#h77-0-363" id="h77-0-363" class="d">-
</a><a href="#h77-0-364" id="h77-0-364" class="d">-func (m *RequestLog) GetResponseSize() int64 {
</a><a href="#h77-0-365" id="h77-0-365" class="d">-	if m != nil &amp;&amp; m.ResponseSize != nil {
</a><a href="#h77-0-366" id="h77-0-366" class="d">-		return *m.ResponseSize
</a><a href="#h77-0-367" id="h77-0-367" class="d">-	}
</a><a href="#h77-0-368" id="h77-0-368" class="d">-	return 0
</a><a href="#h77-0-369" id="h77-0-369" class="d">-}
</a><a href="#h77-0-370" id="h77-0-370" class="d">-
</a><a href="#h77-0-371" id="h77-0-371" class="d">-func (m *RequestLog) GetReferrer() string {
</a><a href="#h77-0-372" id="h77-0-372" class="d">-	if m != nil &amp;&amp; m.Referrer != nil {
</a><a href="#h77-0-373" id="h77-0-373" class="d">-		return *m.Referrer
</a><a href="#h77-0-374" id="h77-0-374" class="d">-	}
</a><a href="#h77-0-375" id="h77-0-375" class="d">-	return &quot;&quot;
</a><a href="#h77-0-376" id="h77-0-376" class="d">-}
</a><a href="#h77-0-377" id="h77-0-377" class="d">-
</a><a href="#h77-0-378" id="h77-0-378" class="d">-func (m *RequestLog) GetUserAgent() string {
</a><a href="#h77-0-379" id="h77-0-379" class="d">-	if m != nil &amp;&amp; m.UserAgent != nil {
</a><a href="#h77-0-380" id="h77-0-380" class="d">-		return *m.UserAgent
</a><a href="#h77-0-381" id="h77-0-381" class="d">-	}
</a><a href="#h77-0-382" id="h77-0-382" class="d">-	return &quot;&quot;
</a><a href="#h77-0-383" id="h77-0-383" class="d">-}
</a><a href="#h77-0-384" id="h77-0-384" class="d">-
</a><a href="#h77-0-385" id="h77-0-385" class="d">-func (m *RequestLog) GetUrlMapEntry() string {
</a><a href="#h77-0-386" id="h77-0-386" class="d">-	if m != nil &amp;&amp; m.UrlMapEntry != nil {
</a><a href="#h77-0-387" id="h77-0-387" class="d">-		return *m.UrlMapEntry
</a><a href="#h77-0-388" id="h77-0-388" class="d">-	}
</a><a href="#h77-0-389" id="h77-0-389" class="d">-	return &quot;&quot;
</a><a href="#h77-0-390" id="h77-0-390" class="d">-}
</a><a href="#h77-0-391" id="h77-0-391" class="d">-
</a><a href="#h77-0-392" id="h77-0-392" class="d">-func (m *RequestLog) GetCombined() string {
</a><a href="#h77-0-393" id="h77-0-393" class="d">-	if m != nil &amp;&amp; m.Combined != nil {
</a><a href="#h77-0-394" id="h77-0-394" class="d">-		return *m.Combined
</a><a href="#h77-0-395" id="h77-0-395" class="d">-	}
</a><a href="#h77-0-396" id="h77-0-396" class="d">-	return &quot;&quot;
</a><a href="#h77-0-397" id="h77-0-397" class="d">-}
</a><a href="#h77-0-398" id="h77-0-398" class="d">-
</a><a href="#h77-0-399" id="h77-0-399" class="d">-func (m *RequestLog) GetApiMcycles() int64 {
</a><a href="#h77-0-400" id="h77-0-400" class="d">-	if m != nil &amp;&amp; m.ApiMcycles != nil {
</a><a href="#h77-0-401" id="h77-0-401" class="d">-		return *m.ApiMcycles
</a><a href="#h77-0-402" id="h77-0-402" class="d">-	}
</a><a href="#h77-0-403" id="h77-0-403" class="d">-	return 0
</a><a href="#h77-0-404" id="h77-0-404" class="d">-}
</a><a href="#h77-0-405" id="h77-0-405" class="d">-
</a><a href="#h77-0-406" id="h77-0-406" class="d">-func (m *RequestLog) GetHost() string {
</a><a href="#h77-0-407" id="h77-0-407" class="d">-	if m != nil &amp;&amp; m.Host != nil {
</a><a href="#h77-0-408" id="h77-0-408" class="d">-		return *m.Host
</a><a href="#h77-0-409" id="h77-0-409" class="d">-	}
</a><a href="#h77-0-410" id="h77-0-410" class="d">-	return &quot;&quot;
</a><a href="#h77-0-411" id="h77-0-411" class="d">-}
</a><a href="#h77-0-412" id="h77-0-412" class="d">-
</a><a href="#h77-0-413" id="h77-0-413" class="d">-func (m *RequestLog) GetCost() float64 {
</a><a href="#h77-0-414" id="h77-0-414" class="d">-	if m != nil &amp;&amp; m.Cost != nil {
</a><a href="#h77-0-415" id="h77-0-415" class="d">-		return *m.Cost
</a><a href="#h77-0-416" id="h77-0-416" class="d">-	}
</a><a href="#h77-0-417" id="h77-0-417" class="d">-	return 0
</a><a href="#h77-0-418" id="h77-0-418" class="d">-}
</a><a href="#h77-0-419" id="h77-0-419" class="d">-
</a><a href="#h77-0-420" id="h77-0-420" class="d">-func (m *RequestLog) GetTaskQueueName() string {
</a><a href="#h77-0-421" id="h77-0-421" class="d">-	if m != nil &amp;&amp; m.TaskQueueName != nil {
</a><a href="#h77-0-422" id="h77-0-422" class="d">-		return *m.TaskQueueName
</a><a href="#h77-0-423" id="h77-0-423" class="d">-	}
</a><a href="#h77-0-424" id="h77-0-424" class="d">-	return &quot;&quot;
</a><a href="#h77-0-425" id="h77-0-425" class="d">-}
</a><a href="#h77-0-426" id="h77-0-426" class="d">-
</a><a href="#h77-0-427" id="h77-0-427" class="d">-func (m *RequestLog) GetTaskName() string {
</a><a href="#h77-0-428" id="h77-0-428" class="d">-	if m != nil &amp;&amp; m.TaskName != nil {
</a><a href="#h77-0-429" id="h77-0-429" class="d">-		return *m.TaskName
</a><a href="#h77-0-430" id="h77-0-430" class="d">-	}
</a><a href="#h77-0-431" id="h77-0-431" class="d">-	return &quot;&quot;
</a><a href="#h77-0-432" id="h77-0-432" class="d">-}
</a><a href="#h77-0-433" id="h77-0-433" class="d">-
</a><a href="#h77-0-434" id="h77-0-434" class="d">-func (m *RequestLog) GetWasLoadingRequest() bool {
</a><a href="#h77-0-435" id="h77-0-435" class="d">-	if m != nil &amp;&amp; m.WasLoadingRequest != nil {
</a><a href="#h77-0-436" id="h77-0-436" class="d">-		return *m.WasLoadingRequest
</a><a href="#h77-0-437" id="h77-0-437" class="d">-	}
</a><a href="#h77-0-438" id="h77-0-438" class="d">-	return false
</a><a href="#h77-0-439" id="h77-0-439" class="d">-}
</a><a href="#h77-0-440" id="h77-0-440" class="d">-
</a><a href="#h77-0-441" id="h77-0-441" class="d">-func (m *RequestLog) GetPendingTime() int64 {
</a><a href="#h77-0-442" id="h77-0-442" class="d">-	if m != nil &amp;&amp; m.PendingTime != nil {
</a><a href="#h77-0-443" id="h77-0-443" class="d">-		return *m.PendingTime
</a><a href="#h77-0-444" id="h77-0-444" class="d">-	}
</a><a href="#h77-0-445" id="h77-0-445" class="d">-	return 0
</a><a href="#h77-0-446" id="h77-0-446" class="d">-}
</a><a href="#h77-0-447" id="h77-0-447" class="d">-
</a><a href="#h77-0-448" id="h77-0-448" class="d">-func (m *RequestLog) GetReplicaIndex() int32 {
</a><a href="#h77-0-449" id="h77-0-449" class="d">-	if m != nil &amp;&amp; m.ReplicaIndex != nil {
</a><a href="#h77-0-450" id="h77-0-450" class="d">-		return *m.ReplicaIndex
</a><a href="#h77-0-451" id="h77-0-451" class="d">-	}
</a><a href="#h77-0-452" id="h77-0-452" class="d">-	return Default_RequestLog_ReplicaIndex
</a><a href="#h77-0-453" id="h77-0-453" class="d">-}
</a><a href="#h77-0-454" id="h77-0-454" class="d">-
</a><a href="#h77-0-455" id="h77-0-455" class="d">-func (m *RequestLog) GetFinished() bool {
</a><a href="#h77-0-456" id="h77-0-456" class="d">-	if m != nil &amp;&amp; m.Finished != nil {
</a><a href="#h77-0-457" id="h77-0-457" class="d">-		return *m.Finished
</a><a href="#h77-0-458" id="h77-0-458" class="d">-	}
</a><a href="#h77-0-459" id="h77-0-459" class="d">-	return Default_RequestLog_Finished
</a><a href="#h77-0-460" id="h77-0-460" class="d">-}
</a><a href="#h77-0-461" id="h77-0-461" class="d">-
</a><a href="#h77-0-462" id="h77-0-462" class="d">-func (m *RequestLog) GetCloneKey() []byte {
</a><a href="#h77-0-463" id="h77-0-463" class="d">-	if m != nil {
</a><a href="#h77-0-464" id="h77-0-464" class="d">-		return m.CloneKey
</a><a href="#h77-0-465" id="h77-0-465" class="d">-	}
</a><a href="#h77-0-466" id="h77-0-466" class="d">-	return nil
</a><a href="#h77-0-467" id="h77-0-467" class="d">-}
</a><a href="#h77-0-468" id="h77-0-468" class="d">-
</a><a href="#h77-0-469" id="h77-0-469" class="d">-func (m *RequestLog) GetLine() []*LogLine {
</a><a href="#h77-0-470" id="h77-0-470" class="d">-	if m != nil {
</a><a href="#h77-0-471" id="h77-0-471" class="d">-		return m.Line
</a><a href="#h77-0-472" id="h77-0-472" class="d">-	}
</a><a href="#h77-0-473" id="h77-0-473" class="d">-	return nil
</a><a href="#h77-0-474" id="h77-0-474" class="d">-}
</a><a href="#h77-0-475" id="h77-0-475" class="d">-
</a><a href="#h77-0-476" id="h77-0-476" class="d">-func (m *RequestLog) GetLinesIncomplete() bool {
</a><a href="#h77-0-477" id="h77-0-477" class="d">-	if m != nil &amp;&amp; m.LinesIncomplete != nil {
</a><a href="#h77-0-478" id="h77-0-478" class="d">-		return *m.LinesIncomplete
</a><a href="#h77-0-479" id="h77-0-479" class="d">-	}
</a><a href="#h77-0-480" id="h77-0-480" class="d">-	return false
</a><a href="#h77-0-481" id="h77-0-481" class="d">-}
</a><a href="#h77-0-482" id="h77-0-482" class="d">-
</a><a href="#h77-0-483" id="h77-0-483" class="d">-func (m *RequestLog) GetAppEngineRelease() []byte {
</a><a href="#h77-0-484" id="h77-0-484" class="d">-	if m != nil {
</a><a href="#h77-0-485" id="h77-0-485" class="d">-		return m.AppEngineRelease
</a><a href="#h77-0-486" id="h77-0-486" class="d">-	}
</a><a href="#h77-0-487" id="h77-0-487" class="d">-	return nil
</a><a href="#h77-0-488" id="h77-0-488" class="d">-}
</a><a href="#h77-0-489" id="h77-0-489" class="d">-
</a><a href="#h77-0-490" id="h77-0-490" class="d">-func (m *RequestLog) GetExitReason() int32 {
</a><a href="#h77-0-491" id="h77-0-491" class="d">-	if m != nil &amp;&amp; m.ExitReason != nil {
</a><a href="#h77-0-492" id="h77-0-492" class="d">-		return *m.ExitReason
</a><a href="#h77-0-493" id="h77-0-493" class="d">-	}
</a><a href="#h77-0-494" id="h77-0-494" class="d">-	return 0
</a><a href="#h77-0-495" id="h77-0-495" class="d">-}
</a><a href="#h77-0-496" id="h77-0-496" class="d">-
</a><a href="#h77-0-497" id="h77-0-497" class="d">-func (m *RequestLog) GetWasThrottledForTime() bool {
</a><a href="#h77-0-498" id="h77-0-498" class="d">-	if m != nil &amp;&amp; m.WasThrottledForTime != nil {
</a><a href="#h77-0-499" id="h77-0-499" class="d">-		return *m.WasThrottledForTime
</a><a href="#h77-0-500" id="h77-0-500" class="d">-	}
</a><a href="#h77-0-501" id="h77-0-501" class="d">-	return false
</a><a href="#h77-0-502" id="h77-0-502" class="d">-}
</a><a href="#h77-0-503" id="h77-0-503" class="d">-
</a><a href="#h77-0-504" id="h77-0-504" class="d">-func (m *RequestLog) GetWasThrottledForRequests() bool {
</a><a href="#h77-0-505" id="h77-0-505" class="d">-	if m != nil &amp;&amp; m.WasThrottledForRequests != nil {
</a><a href="#h77-0-506" id="h77-0-506" class="d">-		return *m.WasThrottledForRequests
</a><a href="#h77-0-507" id="h77-0-507" class="d">-	}
</a><a href="#h77-0-508" id="h77-0-508" class="d">-	return false
</a><a href="#h77-0-509" id="h77-0-509" class="d">-}
</a><a href="#h77-0-510" id="h77-0-510" class="d">-
</a><a href="#h77-0-511" id="h77-0-511" class="d">-func (m *RequestLog) GetThrottledTime() int64 {
</a><a href="#h77-0-512" id="h77-0-512" class="d">-	if m != nil &amp;&amp; m.ThrottledTime != nil {
</a><a href="#h77-0-513" id="h77-0-513" class="d">-		return *m.ThrottledTime
</a><a href="#h77-0-514" id="h77-0-514" class="d">-	}
</a><a href="#h77-0-515" id="h77-0-515" class="d">-	return 0
</a><a href="#h77-0-516" id="h77-0-516" class="d">-}
</a><a href="#h77-0-517" id="h77-0-517" class="d">-
</a><a href="#h77-0-518" id="h77-0-518" class="d">-func (m *RequestLog) GetServerName() []byte {
</a><a href="#h77-0-519" id="h77-0-519" class="d">-	if m != nil {
</a><a href="#h77-0-520" id="h77-0-520" class="d">-		return m.ServerName
</a><a href="#h77-0-521" id="h77-0-521" class="d">-	}
</a><a href="#h77-0-522" id="h77-0-522" class="d">-	return nil
</a><a href="#h77-0-523" id="h77-0-523" class="d">-}
</a><a href="#h77-0-524" id="h77-0-524" class="d">-
</a><a href="#h77-0-525" id="h77-0-525" class="d">-type LogModuleVersion struct {
</a><a href="#h77-0-526" id="h77-0-526" class="d">-	ModuleId         *string `protobuf:&quot;bytes,1,opt,name=module_id,def=default&quot; json:&quot;module_id,omitempty&quot;`
</a><a href="#h77-0-527" id="h77-0-527" class="d">-	VersionId        *string `protobuf:&quot;bytes,2,opt,name=version_id&quot; json:&quot;version_id,omitempty&quot;`
</a><a href="#h77-0-528" id="h77-0-528" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h77-0-529" id="h77-0-529" class="d">-}
</a><a href="#h77-0-530" id="h77-0-530" class="d">-
</a><a href="#h77-0-531" id="h77-0-531" class="d">-func (m *LogModuleVersion) Reset()         { *m = LogModuleVersion{} }
</a><a href="#h77-0-532" id="h77-0-532" class="d">-func (m *LogModuleVersion) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-533" id="h77-0-533" class="d">-func (*LogModuleVersion) ProtoMessage()    {}
</a><a href="#h77-0-534" id="h77-0-534" class="d">-
</a><a href="#h77-0-535" id="h77-0-535" class="d">-const Default_LogModuleVersion_ModuleId string = &quot;default&quot;
</a><a href="#h77-0-536" id="h77-0-536" class="d">-
</a><a href="#h77-0-537" id="h77-0-537" class="d">-func (m *LogModuleVersion) GetModuleId() string {
</a><a href="#h77-0-538" id="h77-0-538" class="d">-	if m != nil &amp;&amp; m.ModuleId != nil {
</a><a href="#h77-0-539" id="h77-0-539" class="d">-		return *m.ModuleId
</a><a href="#h77-0-540" id="h77-0-540" class="d">-	}
</a><a href="#h77-0-541" id="h77-0-541" class="d">-	return Default_LogModuleVersion_ModuleId
</a><a href="#h77-0-542" id="h77-0-542" class="d">-}
</a><a href="#h77-0-543" id="h77-0-543" class="d">-
</a><a href="#h77-0-544" id="h77-0-544" class="d">-func (m *LogModuleVersion) GetVersionId() string {
</a><a href="#h77-0-545" id="h77-0-545" class="d">-	if m != nil &amp;&amp; m.VersionId != nil {
</a><a href="#h77-0-546" id="h77-0-546" class="d">-		return *m.VersionId
</a><a href="#h77-0-547" id="h77-0-547" class="d">-	}
</a><a href="#h77-0-548" id="h77-0-548" class="d">-	return &quot;&quot;
</a><a href="#h77-0-549" id="h77-0-549" class="d">-}
</a><a href="#h77-0-550" id="h77-0-550" class="d">-
</a><a href="#h77-0-551" id="h77-0-551" class="d">-type LogReadRequest struct {
</a><a href="#h77-0-552" id="h77-0-552" class="d">-	AppId             *string             `protobuf:&quot;bytes,1,req,name=app_id&quot; json:&quot;app_id,omitempty&quot;`
</a><a href="#h77-0-553" id="h77-0-553" class="d">-	VersionId         []string            `protobuf:&quot;bytes,2,rep,name=version_id&quot; json:&quot;version_id,omitempty&quot;`
</a><a href="#h77-0-554" id="h77-0-554" class="d">-	ModuleVersion     []*LogModuleVersion `protobuf:&quot;bytes,19,rep,name=module_version&quot; json:&quot;module_version,omitempty&quot;`
</a><a href="#h77-0-555" id="h77-0-555" class="d">-	StartTime         *int64              `protobuf:&quot;varint,3,opt,name=start_time&quot; json:&quot;start_time,omitempty&quot;`
</a><a href="#h77-0-556" id="h77-0-556" class="d">-	EndTime           *int64              `protobuf:&quot;varint,4,opt,name=end_time&quot; json:&quot;end_time,omitempty&quot;`
</a><a href="#h77-0-557" id="h77-0-557" class="d">-	Offset            *LogOffset          `protobuf:&quot;bytes,5,opt,name=offset&quot; json:&quot;offset,omitempty&quot;`
</a><a href="#h77-0-558" id="h77-0-558" class="d">-	RequestId         [][]byte            `protobuf:&quot;bytes,6,rep,name=request_id&quot; json:&quot;request_id,omitempty&quot;`
</a><a href="#h77-0-559" id="h77-0-559" class="d">-	MinimumLogLevel   *int32              `protobuf:&quot;varint,7,opt,name=minimum_log_level&quot; json:&quot;minimum_log_level,omitempty&quot;`
</a><a href="#h77-0-560" id="h77-0-560" class="d">-	IncludeIncomplete *bool               `protobuf:&quot;varint,8,opt,name=include_incomplete&quot; json:&quot;include_incomplete,omitempty&quot;`
</a><a href="#h77-0-561" id="h77-0-561" class="d">-	Count             *int64              `protobuf:&quot;varint,9,opt,name=count&quot; json:&quot;count,omitempty&quot;`
</a><a href="#h77-0-562" id="h77-0-562" class="d">-	CombinedLogRegex  *string             `protobuf:&quot;bytes,14,opt,name=combined_log_regex&quot; json:&quot;combined_log_regex,omitempty&quot;`
</a><a href="#h77-0-563" id="h77-0-563" class="d">-	HostRegex         *string             `protobuf:&quot;bytes,15,opt,name=host_regex&quot; json:&quot;host_regex,omitempty&quot;`
</a><a href="#h77-0-564" id="h77-0-564" class="d">-	ReplicaIndex      *int32              `protobuf:&quot;varint,16,opt,name=replica_index&quot; json:&quot;replica_index,omitempty&quot;`
</a><a href="#h77-0-565" id="h77-0-565" class="d">-	IncludeAppLogs    *bool               `protobuf:&quot;varint,10,opt,name=include_app_logs&quot; json:&quot;include_app_logs,omitempty&quot;`
</a><a href="#h77-0-566" id="h77-0-566" class="d">-	AppLogsPerRequest *int32              `protobuf:&quot;varint,17,opt,name=app_logs_per_request&quot; json:&quot;app_logs_per_request,omitempty&quot;`
</a><a href="#h77-0-567" id="h77-0-567" class="d">-	IncludeHost       *bool               `protobuf:&quot;varint,11,opt,name=include_host&quot; json:&quot;include_host,omitempty&quot;`
</a><a href="#h77-0-568" id="h77-0-568" class="d">-	IncludeAll        *bool               `protobuf:&quot;varint,12,opt,name=include_all&quot; json:&quot;include_all,omitempty&quot;`
</a><a href="#h77-0-569" id="h77-0-569" class="d">-	CacheIterator     *bool               `protobuf:&quot;varint,13,opt,name=cache_iterator&quot; json:&quot;cache_iterator,omitempty&quot;`
</a><a href="#h77-0-570" id="h77-0-570" class="d">-	NumShards         *int32              `protobuf:&quot;varint,18,opt,name=num_shards&quot; json:&quot;num_shards,omitempty&quot;`
</a><a href="#h77-0-571" id="h77-0-571" class="d">-	XXX_unrecognized  []byte              `json:&quot;-&quot;`
</a><a href="#h77-0-572" id="h77-0-572" class="d">-}
</a><a href="#h77-0-573" id="h77-0-573" class="d">-
</a><a href="#h77-0-574" id="h77-0-574" class="d">-func (m *LogReadRequest) Reset()         { *m = LogReadRequest{} }
</a><a href="#h77-0-575" id="h77-0-575" class="d">-func (m *LogReadRequest) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-576" id="h77-0-576" class="d">-func (*LogReadRequest) ProtoMessage()    {}
</a><a href="#h77-0-577" id="h77-0-577" class="d">-
</a><a href="#h77-0-578" id="h77-0-578" class="d">-func (m *LogReadRequest) GetAppId() string {
</a><a href="#h77-0-579" id="h77-0-579" class="d">-	if m != nil &amp;&amp; m.AppId != nil {
</a><a href="#h77-0-580" id="h77-0-580" class="d">-		return *m.AppId
</a><a href="#h77-0-581" id="h77-0-581" class="d">-	}
</a><a href="#h77-0-582" id="h77-0-582" class="d">-	return &quot;&quot;
</a><a href="#h77-0-583" id="h77-0-583" class="d">-}
</a><a href="#h77-0-584" id="h77-0-584" class="d">-
</a><a href="#h77-0-585" id="h77-0-585" class="d">-func (m *LogReadRequest) GetVersionId() []string {
</a><a href="#h77-0-586" id="h77-0-586" class="d">-	if m != nil {
</a><a href="#h77-0-587" id="h77-0-587" class="d">-		return m.VersionId
</a><a href="#h77-0-588" id="h77-0-588" class="d">-	}
</a><a href="#h77-0-589" id="h77-0-589" class="d">-	return nil
</a><a href="#h77-0-590" id="h77-0-590" class="d">-}
</a><a href="#h77-0-591" id="h77-0-591" class="d">-
</a><a href="#h77-0-592" id="h77-0-592" class="d">-func (m *LogReadRequest) GetModuleVersion() []*LogModuleVersion {
</a><a href="#h77-0-593" id="h77-0-593" class="d">-	if m != nil {
</a><a href="#h77-0-594" id="h77-0-594" class="d">-		return m.ModuleVersion
</a><a href="#h77-0-595" id="h77-0-595" class="d">-	}
</a><a href="#h77-0-596" id="h77-0-596" class="d">-	return nil
</a><a href="#h77-0-597" id="h77-0-597" class="d">-}
</a><a href="#h77-0-598" id="h77-0-598" class="d">-
</a><a href="#h77-0-599" id="h77-0-599" class="d">-func (m *LogReadRequest) GetStartTime() int64 {
</a><a href="#h77-0-600" id="h77-0-600" class="d">-	if m != nil &amp;&amp; m.StartTime != nil {
</a><a href="#h77-0-601" id="h77-0-601" class="d">-		return *m.StartTime
</a><a href="#h77-0-602" id="h77-0-602" class="d">-	}
</a><a href="#h77-0-603" id="h77-0-603" class="d">-	return 0
</a><a href="#h77-0-604" id="h77-0-604" class="d">-}
</a><a href="#h77-0-605" id="h77-0-605" class="d">-
</a><a href="#h77-0-606" id="h77-0-606" class="d">-func (m *LogReadRequest) GetEndTime() int64 {
</a><a href="#h77-0-607" id="h77-0-607" class="d">-	if m != nil &amp;&amp; m.EndTime != nil {
</a><a href="#h77-0-608" id="h77-0-608" class="d">-		return *m.EndTime
</a><a href="#h77-0-609" id="h77-0-609" class="d">-	}
</a><a href="#h77-0-610" id="h77-0-610" class="d">-	return 0
</a><a href="#h77-0-611" id="h77-0-611" class="d">-}
</a><a href="#h77-0-612" id="h77-0-612" class="d">-
</a><a href="#h77-0-613" id="h77-0-613" class="d">-func (m *LogReadRequest) GetOffset() *LogOffset {
</a><a href="#h77-0-614" id="h77-0-614" class="d">-	if m != nil {
</a><a href="#h77-0-615" id="h77-0-615" class="d">-		return m.Offset
</a><a href="#h77-0-616" id="h77-0-616" class="d">-	}
</a><a href="#h77-0-617" id="h77-0-617" class="d">-	return nil
</a><a href="#h77-0-618" id="h77-0-618" class="d">-}
</a><a href="#h77-0-619" id="h77-0-619" class="d">-
</a><a href="#h77-0-620" id="h77-0-620" class="d">-func (m *LogReadRequest) GetRequestId() [][]byte {
</a><a href="#h77-0-621" id="h77-0-621" class="d">-	if m != nil {
</a><a href="#h77-0-622" id="h77-0-622" class="d">-		return m.RequestId
</a><a href="#h77-0-623" id="h77-0-623" class="d">-	}
</a><a href="#h77-0-624" id="h77-0-624" class="d">-	return nil
</a><a href="#h77-0-625" id="h77-0-625" class="d">-}
</a><a href="#h77-0-626" id="h77-0-626" class="d">-
</a><a href="#h77-0-627" id="h77-0-627" class="d">-func (m *LogReadRequest) GetMinimumLogLevel() int32 {
</a><a href="#h77-0-628" id="h77-0-628" class="d">-	if m != nil &amp;&amp; m.MinimumLogLevel != nil {
</a><a href="#h77-0-629" id="h77-0-629" class="d">-		return *m.MinimumLogLevel
</a><a href="#h77-0-630" id="h77-0-630" class="d">-	}
</a><a href="#h77-0-631" id="h77-0-631" class="d">-	return 0
</a><a href="#h77-0-632" id="h77-0-632" class="d">-}
</a><a href="#h77-0-633" id="h77-0-633" class="d">-
</a><a href="#h77-0-634" id="h77-0-634" class="d">-func (m *LogReadRequest) GetIncludeIncomplete() bool {
</a><a href="#h77-0-635" id="h77-0-635" class="d">-	if m != nil &amp;&amp; m.IncludeIncomplete != nil {
</a><a href="#h77-0-636" id="h77-0-636" class="d">-		return *m.IncludeIncomplete
</a><a href="#h77-0-637" id="h77-0-637" class="d">-	}
</a><a href="#h77-0-638" id="h77-0-638" class="d">-	return false
</a><a href="#h77-0-639" id="h77-0-639" class="d">-}
</a><a href="#h77-0-640" id="h77-0-640" class="d">-
</a><a href="#h77-0-641" id="h77-0-641" class="d">-func (m *LogReadRequest) GetCount() int64 {
</a><a href="#h77-0-642" id="h77-0-642" class="d">-	if m != nil &amp;&amp; m.Count != nil {
</a><a href="#h77-0-643" id="h77-0-643" class="d">-		return *m.Count
</a><a href="#h77-0-644" id="h77-0-644" class="d">-	}
</a><a href="#h77-0-645" id="h77-0-645" class="d">-	return 0
</a><a href="#h77-0-646" id="h77-0-646" class="d">-}
</a><a href="#h77-0-647" id="h77-0-647" class="d">-
</a><a href="#h77-0-648" id="h77-0-648" class="d">-func (m *LogReadRequest) GetCombinedLogRegex() string {
</a><a href="#h77-0-649" id="h77-0-649" class="d">-	if m != nil &amp;&amp; m.CombinedLogRegex != nil {
</a><a href="#h77-0-650" id="h77-0-650" class="d">-		return *m.CombinedLogRegex
</a><a href="#h77-0-651" id="h77-0-651" class="d">-	}
</a><a href="#h77-0-652" id="h77-0-652" class="d">-	return &quot;&quot;
</a><a href="#h77-0-653" id="h77-0-653" class="d">-}
</a><a href="#h77-0-654" id="h77-0-654" class="d">-
</a><a href="#h77-0-655" id="h77-0-655" class="d">-func (m *LogReadRequest) GetHostRegex() string {
</a><a href="#h77-0-656" id="h77-0-656" class="d">-	if m != nil &amp;&amp; m.HostRegex != nil {
</a><a href="#h77-0-657" id="h77-0-657" class="d">-		return *m.HostRegex
</a><a href="#h77-0-658" id="h77-0-658" class="d">-	}
</a><a href="#h77-0-659" id="h77-0-659" class="d">-	return &quot;&quot;
</a><a href="#h77-0-660" id="h77-0-660" class="d">-}
</a><a href="#h77-0-661" id="h77-0-661" class="d">-
</a><a href="#h77-0-662" id="h77-0-662" class="d">-func (m *LogReadRequest) GetReplicaIndex() int32 {
</a><a href="#h77-0-663" id="h77-0-663" class="d">-	if m != nil &amp;&amp; m.ReplicaIndex != nil {
</a><a href="#h77-0-664" id="h77-0-664" class="d">-		return *m.ReplicaIndex
</a><a href="#h77-0-665" id="h77-0-665" class="d">-	}
</a><a href="#h77-0-666" id="h77-0-666" class="d">-	return 0
</a><a href="#h77-0-667" id="h77-0-667" class="d">-}
</a><a href="#h77-0-668" id="h77-0-668" class="d">-
</a><a href="#h77-0-669" id="h77-0-669" class="d">-func (m *LogReadRequest) GetIncludeAppLogs() bool {
</a><a href="#h77-0-670" id="h77-0-670" class="d">-	if m != nil &amp;&amp; m.IncludeAppLogs != nil {
</a><a href="#h77-0-671" id="h77-0-671" class="d">-		return *m.IncludeAppLogs
</a><a href="#h77-0-672" id="h77-0-672" class="d">-	}
</a><a href="#h77-0-673" id="h77-0-673" class="d">-	return false
</a><a href="#h77-0-674" id="h77-0-674" class="d">-}
</a><a href="#h77-0-675" id="h77-0-675" class="d">-
</a><a href="#h77-0-676" id="h77-0-676" class="d">-func (m *LogReadRequest) GetAppLogsPerRequest() int32 {
</a><a href="#h77-0-677" id="h77-0-677" class="d">-	if m != nil &amp;&amp; m.AppLogsPerRequest != nil {
</a><a href="#h77-0-678" id="h77-0-678" class="d">-		return *m.AppLogsPerRequest
</a><a href="#h77-0-679" id="h77-0-679" class="d">-	}
</a><a href="#h77-0-680" id="h77-0-680" class="d">-	return 0
</a><a href="#h77-0-681" id="h77-0-681" class="d">-}
</a><a href="#h77-0-682" id="h77-0-682" class="d">-
</a><a href="#h77-0-683" id="h77-0-683" class="d">-func (m *LogReadRequest) GetIncludeHost() bool {
</a><a href="#h77-0-684" id="h77-0-684" class="d">-	if m != nil &amp;&amp; m.IncludeHost != nil {
</a><a href="#h77-0-685" id="h77-0-685" class="d">-		return *m.IncludeHost
</a><a href="#h77-0-686" id="h77-0-686" class="d">-	}
</a><a href="#h77-0-687" id="h77-0-687" class="d">-	return false
</a><a href="#h77-0-688" id="h77-0-688" class="d">-}
</a><a href="#h77-0-689" id="h77-0-689" class="d">-
</a><a href="#h77-0-690" id="h77-0-690" class="d">-func (m *LogReadRequest) GetIncludeAll() bool {
</a><a href="#h77-0-691" id="h77-0-691" class="d">-	if m != nil &amp;&amp; m.IncludeAll != nil {
</a><a href="#h77-0-692" id="h77-0-692" class="d">-		return *m.IncludeAll
</a><a href="#h77-0-693" id="h77-0-693" class="d">-	}
</a><a href="#h77-0-694" id="h77-0-694" class="d">-	return false
</a><a href="#h77-0-695" id="h77-0-695" class="d">-}
</a><a href="#h77-0-696" id="h77-0-696" class="d">-
</a><a href="#h77-0-697" id="h77-0-697" class="d">-func (m *LogReadRequest) GetCacheIterator() bool {
</a><a href="#h77-0-698" id="h77-0-698" class="d">-	if m != nil &amp;&amp; m.CacheIterator != nil {
</a><a href="#h77-0-699" id="h77-0-699" class="d">-		return *m.CacheIterator
</a><a href="#h77-0-700" id="h77-0-700" class="d">-	}
</a><a href="#h77-0-701" id="h77-0-701" class="d">-	return false
</a><a href="#h77-0-702" id="h77-0-702" class="d">-}
</a><a href="#h77-0-703" id="h77-0-703" class="d">-
</a><a href="#h77-0-704" id="h77-0-704" class="d">-func (m *LogReadRequest) GetNumShards() int32 {
</a><a href="#h77-0-705" id="h77-0-705" class="d">-	if m != nil &amp;&amp; m.NumShards != nil {
</a><a href="#h77-0-706" id="h77-0-706" class="d">-		return *m.NumShards
</a><a href="#h77-0-707" id="h77-0-707" class="d">-	}
</a><a href="#h77-0-708" id="h77-0-708" class="d">-	return 0
</a><a href="#h77-0-709" id="h77-0-709" class="d">-}
</a><a href="#h77-0-710" id="h77-0-710" class="d">-
</a><a href="#h77-0-711" id="h77-0-711" class="d">-type LogReadResponse struct {
</a><a href="#h77-0-712" id="h77-0-712" class="d">-	Log              []*RequestLog `protobuf:&quot;bytes,1,rep,name=log&quot; json:&quot;log,omitempty&quot;`
</a><a href="#h77-0-713" id="h77-0-713" class="d">-	Offset           *LogOffset    `protobuf:&quot;bytes,2,opt,name=offset&quot; json:&quot;offset,omitempty&quot;`
</a><a href="#h77-0-714" id="h77-0-714" class="d">-	LastEndTime      *int64        `protobuf:&quot;varint,3,opt,name=last_end_time&quot; json:&quot;last_end_time,omitempty&quot;`
</a><a href="#h77-0-715" id="h77-0-715" class="d">-	XXX_unrecognized []byte        `json:&quot;-&quot;`
</a><a href="#h77-0-716" id="h77-0-716" class="d">-}
</a><a href="#h77-0-717" id="h77-0-717" class="d">-
</a><a href="#h77-0-718" id="h77-0-718" class="d">-func (m *LogReadResponse) Reset()         { *m = LogReadResponse{} }
</a><a href="#h77-0-719" id="h77-0-719" class="d">-func (m *LogReadResponse) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-720" id="h77-0-720" class="d">-func (*LogReadResponse) ProtoMessage()    {}
</a><a href="#h77-0-721" id="h77-0-721" class="d">-
</a><a href="#h77-0-722" id="h77-0-722" class="d">-func (m *LogReadResponse) GetLog() []*RequestLog {
</a><a href="#h77-0-723" id="h77-0-723" class="d">-	if m != nil {
</a><a href="#h77-0-724" id="h77-0-724" class="d">-		return m.Log
</a><a href="#h77-0-725" id="h77-0-725" class="d">-	}
</a><a href="#h77-0-726" id="h77-0-726" class="d">-	return nil
</a><a href="#h77-0-727" id="h77-0-727" class="d">-}
</a><a href="#h77-0-728" id="h77-0-728" class="d">-
</a><a href="#h77-0-729" id="h77-0-729" class="d">-func (m *LogReadResponse) GetOffset() *LogOffset {
</a><a href="#h77-0-730" id="h77-0-730" class="d">-	if m != nil {
</a><a href="#h77-0-731" id="h77-0-731" class="d">-		return m.Offset
</a><a href="#h77-0-732" id="h77-0-732" class="d">-	}
</a><a href="#h77-0-733" id="h77-0-733" class="d">-	return nil
</a><a href="#h77-0-734" id="h77-0-734" class="d">-}
</a><a href="#h77-0-735" id="h77-0-735" class="d">-
</a><a href="#h77-0-736" id="h77-0-736" class="d">-func (m *LogReadResponse) GetLastEndTime() int64 {
</a><a href="#h77-0-737" id="h77-0-737" class="d">-	if m != nil &amp;&amp; m.LastEndTime != nil {
</a><a href="#h77-0-738" id="h77-0-738" class="d">-		return *m.LastEndTime
</a><a href="#h77-0-739" id="h77-0-739" class="d">-	}
</a><a href="#h77-0-740" id="h77-0-740" class="d">-	return 0
</a><a href="#h77-0-741" id="h77-0-741" class="d">-}
</a><a href="#h77-0-742" id="h77-0-742" class="d">-
</a><a href="#h77-0-743" id="h77-0-743" class="d">-type LogUsageRecord struct {
</a><a href="#h77-0-744" id="h77-0-744" class="d">-	VersionId        *string `protobuf:&quot;bytes,1,opt,name=version_id&quot; json:&quot;version_id,omitempty&quot;`
</a><a href="#h77-0-745" id="h77-0-745" class="d">-	StartTime        *int32  `protobuf:&quot;varint,2,opt,name=start_time&quot; json:&quot;start_time,omitempty&quot;`
</a><a href="#h77-0-746" id="h77-0-746" class="d">-	EndTime          *int32  `protobuf:&quot;varint,3,opt,name=end_time&quot; json:&quot;end_time,omitempty&quot;`
</a><a href="#h77-0-747" id="h77-0-747" class="d">-	Count            *int64  `protobuf:&quot;varint,4,opt,name=count&quot; json:&quot;count,omitempty&quot;`
</a><a href="#h77-0-748" id="h77-0-748" class="d">-	TotalSize        *int64  `protobuf:&quot;varint,5,opt,name=total_size&quot; json:&quot;total_size,omitempty&quot;`
</a><a href="#h77-0-749" id="h77-0-749" class="d">-	Records          *int32  `protobuf:&quot;varint,6,opt,name=records&quot; json:&quot;records,omitempty&quot;`
</a><a href="#h77-0-750" id="h77-0-750" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h77-0-751" id="h77-0-751" class="d">-}
</a><a href="#h77-0-752" id="h77-0-752" class="d">-
</a><a href="#h77-0-753" id="h77-0-753" class="d">-func (m *LogUsageRecord) Reset()         { *m = LogUsageRecord{} }
</a><a href="#h77-0-754" id="h77-0-754" class="d">-func (m *LogUsageRecord) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-755" id="h77-0-755" class="d">-func (*LogUsageRecord) ProtoMessage()    {}
</a><a href="#h77-0-756" id="h77-0-756" class="d">-
</a><a href="#h77-0-757" id="h77-0-757" class="d">-func (m *LogUsageRecord) GetVersionId() string {
</a><a href="#h77-0-758" id="h77-0-758" class="d">-	if m != nil &amp;&amp; m.VersionId != nil {
</a><a href="#h77-0-759" id="h77-0-759" class="d">-		return *m.VersionId
</a><a href="#h77-0-760" id="h77-0-760" class="d">-	}
</a><a href="#h77-0-761" id="h77-0-761" class="d">-	return &quot;&quot;
</a><a href="#h77-0-762" id="h77-0-762" class="d">-}
</a><a href="#h77-0-763" id="h77-0-763" class="d">-
</a><a href="#h77-0-764" id="h77-0-764" class="d">-func (m *LogUsageRecord) GetStartTime() int32 {
</a><a href="#h77-0-765" id="h77-0-765" class="d">-	if m != nil &amp;&amp; m.StartTime != nil {
</a><a href="#h77-0-766" id="h77-0-766" class="d">-		return *m.StartTime
</a><a href="#h77-0-767" id="h77-0-767" class="d">-	}
</a><a href="#h77-0-768" id="h77-0-768" class="d">-	return 0
</a><a href="#h77-0-769" id="h77-0-769" class="d">-}
</a><a href="#h77-0-770" id="h77-0-770" class="d">-
</a><a href="#h77-0-771" id="h77-0-771" class="d">-func (m *LogUsageRecord) GetEndTime() int32 {
</a><a href="#h77-0-772" id="h77-0-772" class="d">-	if m != nil &amp;&amp; m.EndTime != nil {
</a><a href="#h77-0-773" id="h77-0-773" class="d">-		return *m.EndTime
</a><a href="#h77-0-774" id="h77-0-774" class="d">-	}
</a><a href="#h77-0-775" id="h77-0-775" class="d">-	return 0
</a><a href="#h77-0-776" id="h77-0-776" class="d">-}
</a><a href="#h77-0-777" id="h77-0-777" class="d">-
</a><a href="#h77-0-778" id="h77-0-778" class="d">-func (m *LogUsageRecord) GetCount() int64 {
</a><a href="#h77-0-779" id="h77-0-779" class="d">-	if m != nil &amp;&amp; m.Count != nil {
</a><a href="#h77-0-780" id="h77-0-780" class="d">-		return *m.Count
</a><a href="#h77-0-781" id="h77-0-781" class="d">-	}
</a><a href="#h77-0-782" id="h77-0-782" class="d">-	return 0
</a><a href="#h77-0-783" id="h77-0-783" class="d">-}
</a><a href="#h77-0-784" id="h77-0-784" class="d">-
</a><a href="#h77-0-785" id="h77-0-785" class="d">-func (m *LogUsageRecord) GetTotalSize() int64 {
</a><a href="#h77-0-786" id="h77-0-786" class="d">-	if m != nil &amp;&amp; m.TotalSize != nil {
</a><a href="#h77-0-787" id="h77-0-787" class="d">-		return *m.TotalSize
</a><a href="#h77-0-788" id="h77-0-788" class="d">-	}
</a><a href="#h77-0-789" id="h77-0-789" class="d">-	return 0
</a><a href="#h77-0-790" id="h77-0-790" class="d">-}
</a><a href="#h77-0-791" id="h77-0-791" class="d">-
</a><a href="#h77-0-792" id="h77-0-792" class="d">-func (m *LogUsageRecord) GetRecords() int32 {
</a><a href="#h77-0-793" id="h77-0-793" class="d">-	if m != nil &amp;&amp; m.Records != nil {
</a><a href="#h77-0-794" id="h77-0-794" class="d">-		return *m.Records
</a><a href="#h77-0-795" id="h77-0-795" class="d">-	}
</a><a href="#h77-0-796" id="h77-0-796" class="d">-	return 0
</a><a href="#h77-0-797" id="h77-0-797" class="d">-}
</a><a href="#h77-0-798" id="h77-0-798" class="d">-
</a><a href="#h77-0-799" id="h77-0-799" class="d">-type LogUsageRequest struct {
</a><a href="#h77-0-800" id="h77-0-800" class="d">-	AppId            *string  `protobuf:&quot;bytes,1,req,name=app_id&quot; json:&quot;app_id,omitempty&quot;`
</a><a href="#h77-0-801" id="h77-0-801" class="d">-	VersionId        []string `protobuf:&quot;bytes,2,rep,name=version_id&quot; json:&quot;version_id,omitempty&quot;`
</a><a href="#h77-0-802" id="h77-0-802" class="d">-	StartTime        *int32   `protobuf:&quot;varint,3,opt,name=start_time&quot; json:&quot;start_time,omitempty&quot;`
</a><a href="#h77-0-803" id="h77-0-803" class="d">-	EndTime          *int32   `protobuf:&quot;varint,4,opt,name=end_time&quot; json:&quot;end_time,omitempty&quot;`
</a><a href="#h77-0-804" id="h77-0-804" class="d">-	ResolutionHours  *uint32  `protobuf:&quot;varint,5,opt,name=resolution_hours,def=1&quot; json:&quot;resolution_hours,omitempty&quot;`
</a><a href="#h77-0-805" id="h77-0-805" class="d">-	CombineVersions  *bool    `protobuf:&quot;varint,6,opt,name=combine_versions&quot; json:&quot;combine_versions,omitempty&quot;`
</a><a href="#h77-0-806" id="h77-0-806" class="d">-	UsageVersion     *int32   `protobuf:&quot;varint,7,opt,name=usage_version&quot; json:&quot;usage_version,omitempty&quot;`
</a><a href="#h77-0-807" id="h77-0-807" class="d">-	VersionsOnly     *bool    `protobuf:&quot;varint,8,opt,name=versions_only&quot; json:&quot;versions_only,omitempty&quot;`
</a><a href="#h77-0-808" id="h77-0-808" class="d">-	XXX_unrecognized []byte   `json:&quot;-&quot;`
</a><a href="#h77-0-809" id="h77-0-809" class="d">-}
</a><a href="#h77-0-810" id="h77-0-810" class="d">-
</a><a href="#h77-0-811" id="h77-0-811" class="d">-func (m *LogUsageRequest) Reset()         { *m = LogUsageRequest{} }
</a><a href="#h77-0-812" id="h77-0-812" class="d">-func (m *LogUsageRequest) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-813" id="h77-0-813" class="d">-func (*LogUsageRequest) ProtoMessage()    {}
</a><a href="#h77-0-814" id="h77-0-814" class="d">-
</a><a href="#h77-0-815" id="h77-0-815" class="d">-const Default_LogUsageRequest_ResolutionHours uint32 = 1
</a><a href="#h77-0-816" id="h77-0-816" class="d">-
</a><a href="#h77-0-817" id="h77-0-817" class="d">-func (m *LogUsageRequest) GetAppId() string {
</a><a href="#h77-0-818" id="h77-0-818" class="d">-	if m != nil &amp;&amp; m.AppId != nil {
</a><a href="#h77-0-819" id="h77-0-819" class="d">-		return *m.AppId
</a><a href="#h77-0-820" id="h77-0-820" class="d">-	}
</a><a href="#h77-0-821" id="h77-0-821" class="d">-	return &quot;&quot;
</a><a href="#h77-0-822" id="h77-0-822" class="d">-}
</a><a href="#h77-0-823" id="h77-0-823" class="d">-
</a><a href="#h77-0-824" id="h77-0-824" class="d">-func (m *LogUsageRequest) GetVersionId() []string {
</a><a href="#h77-0-825" id="h77-0-825" class="d">-	if m != nil {
</a><a href="#h77-0-826" id="h77-0-826" class="d">-		return m.VersionId
</a><a href="#h77-0-827" id="h77-0-827" class="d">-	}
</a><a href="#h77-0-828" id="h77-0-828" class="d">-	return nil
</a><a href="#h77-0-829" id="h77-0-829" class="d">-}
</a><a href="#h77-0-830" id="h77-0-830" class="d">-
</a><a href="#h77-0-831" id="h77-0-831" class="d">-func (m *LogUsageRequest) GetStartTime() int32 {
</a><a href="#h77-0-832" id="h77-0-832" class="d">-	if m != nil &amp;&amp; m.StartTime != nil {
</a><a href="#h77-0-833" id="h77-0-833" class="d">-		return *m.StartTime
</a><a href="#h77-0-834" id="h77-0-834" class="d">-	}
</a><a href="#h77-0-835" id="h77-0-835" class="d">-	return 0
</a><a href="#h77-0-836" id="h77-0-836" class="d">-}
</a><a href="#h77-0-837" id="h77-0-837" class="d">-
</a><a href="#h77-0-838" id="h77-0-838" class="d">-func (m *LogUsageRequest) GetEndTime() int32 {
</a><a href="#h77-0-839" id="h77-0-839" class="d">-	if m != nil &amp;&amp; m.EndTime != nil {
</a><a href="#h77-0-840" id="h77-0-840" class="d">-		return *m.EndTime
</a><a href="#h77-0-841" id="h77-0-841" class="d">-	}
</a><a href="#h77-0-842" id="h77-0-842" class="d">-	return 0
</a><a href="#h77-0-843" id="h77-0-843" class="d">-}
</a><a href="#h77-0-844" id="h77-0-844" class="d">-
</a><a href="#h77-0-845" id="h77-0-845" class="d">-func (m *LogUsageRequest) GetResolutionHours() uint32 {
</a><a href="#h77-0-846" id="h77-0-846" class="d">-	if m != nil &amp;&amp; m.ResolutionHours != nil {
</a><a href="#h77-0-847" id="h77-0-847" class="d">-		return *m.ResolutionHours
</a><a href="#h77-0-848" id="h77-0-848" class="d">-	}
</a><a href="#h77-0-849" id="h77-0-849" class="d">-	return Default_LogUsageRequest_ResolutionHours
</a><a href="#h77-0-850" id="h77-0-850" class="d">-}
</a><a href="#h77-0-851" id="h77-0-851" class="d">-
</a><a href="#h77-0-852" id="h77-0-852" class="d">-func (m *LogUsageRequest) GetCombineVersions() bool {
</a><a href="#h77-0-853" id="h77-0-853" class="d">-	if m != nil &amp;&amp; m.CombineVersions != nil {
</a><a href="#h77-0-854" id="h77-0-854" class="d">-		return *m.CombineVersions
</a><a href="#h77-0-855" id="h77-0-855" class="d">-	}
</a><a href="#h77-0-856" id="h77-0-856" class="d">-	return false
</a><a href="#h77-0-857" id="h77-0-857" class="d">-}
</a><a href="#h77-0-858" id="h77-0-858" class="d">-
</a><a href="#h77-0-859" id="h77-0-859" class="d">-func (m *LogUsageRequest) GetUsageVersion() int32 {
</a><a href="#h77-0-860" id="h77-0-860" class="d">-	if m != nil &amp;&amp; m.UsageVersion != nil {
</a><a href="#h77-0-861" id="h77-0-861" class="d">-		return *m.UsageVersion
</a><a href="#h77-0-862" id="h77-0-862" class="d">-	}
</a><a href="#h77-0-863" id="h77-0-863" class="d">-	return 0
</a><a href="#h77-0-864" id="h77-0-864" class="d">-}
</a><a href="#h77-0-865" id="h77-0-865" class="d">-
</a><a href="#h77-0-866" id="h77-0-866" class="d">-func (m *LogUsageRequest) GetVersionsOnly() bool {
</a><a href="#h77-0-867" id="h77-0-867" class="d">-	if m != nil &amp;&amp; m.VersionsOnly != nil {
</a><a href="#h77-0-868" id="h77-0-868" class="d">-		return *m.VersionsOnly
</a><a href="#h77-0-869" id="h77-0-869" class="d">-	}
</a><a href="#h77-0-870" id="h77-0-870" class="d">-	return false
</a><a href="#h77-0-871" id="h77-0-871" class="d">-}
</a><a href="#h77-0-872" id="h77-0-872" class="d">-
</a><a href="#h77-0-873" id="h77-0-873" class="d">-type LogUsageResponse struct {
</a><a href="#h77-0-874" id="h77-0-874" class="d">-	Usage            []*LogUsageRecord `protobuf:&quot;bytes,1,rep,name=usage&quot; json:&quot;usage,omitempty&quot;`
</a><a href="#h77-0-875" id="h77-0-875" class="d">-	Summary          *LogUsageRecord   `protobuf:&quot;bytes,2,opt,name=summary&quot; json:&quot;summary,omitempty&quot;`
</a><a href="#h77-0-876" id="h77-0-876" class="d">-	XXX_unrecognized []byte            `json:&quot;-&quot;`
</a><a href="#h77-0-877" id="h77-0-877" class="d">-}
</a><a href="#h77-0-878" id="h77-0-878" class="d">-
</a><a href="#h77-0-879" id="h77-0-879" class="d">-func (m *LogUsageResponse) Reset()         { *m = LogUsageResponse{} }
</a><a href="#h77-0-880" id="h77-0-880" class="d">-func (m *LogUsageResponse) String() string { return proto.CompactTextString(m) }
</a><a href="#h77-0-881" id="h77-0-881" class="d">-func (*LogUsageResponse) ProtoMessage()    {}
</a><a href="#h77-0-882" id="h77-0-882" class="d">-
</a><a href="#h77-0-883" id="h77-0-883" class="d">-func (m *LogUsageResponse) GetUsage() []*LogUsageRecord {
</a><a href="#h77-0-884" id="h77-0-884" class="d">-	if m != nil {
</a><a href="#h77-0-885" id="h77-0-885" class="d">-		return m.Usage
</a><a href="#h77-0-886" id="h77-0-886" class="d">-	}
</a><a href="#h77-0-887" id="h77-0-887" class="d">-	return nil
</a><a href="#h77-0-888" id="h77-0-888" class="d">-}
</a><a href="#h77-0-889" id="h77-0-889" class="d">-
</a><a href="#h77-0-890" id="h77-0-890" class="d">-func (m *LogUsageResponse) GetSummary() *LogUsageRecord {
</a><a href="#h77-0-891" id="h77-0-891" class="d">-	if m != nil {
</a><a href="#h77-0-892" id="h77-0-892" class="d">-		return m.Summary
</a><a href="#h77-0-893" id="h77-0-893" class="d">-	}
</a><a href="#h77-0-894" id="h77-0-894" class="d">-	return nil
</a><a href="#h77-0-895" id="h77-0-895" class="d">-}
</a><a href="#h77-0-896" id="h77-0-896" class="d">-
</a><a href="#h77-0-897" id="h77-0-897" class="d">-func init() {
</a><a href="#h77-0-898" id="h77-0-898" class="d">-}
</a><b>diff --git a/<a id="h78" href="../file/vendor/google.golang.org/appengine/internal/log/log_service.proto">vendor/google.golang.org/appengine/internal/log/log_service.proto</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/log/log_service.proto">vendor/google.golang.org/appengine/internal/log/log_service.proto</a></b>
<a href="#h78-0" id="h78-0" class="h">@@ -1,150 +0,0 @@
</a><a href="#h78-0-0" id="h78-0-0" class="d">-syntax = &quot;proto2&quot;;
</a><a href="#h78-0-1" id="h78-0-1" class="d">-option go_package = &quot;log&quot;;
</a><a href="#h78-0-2" id="h78-0-2" class="d">-
</a><a href="#h78-0-3" id="h78-0-3" class="d">-package appengine;
</a><a href="#h78-0-4" id="h78-0-4" class="d">-
</a><a href="#h78-0-5" id="h78-0-5" class="d">-message LogServiceError {
</a><a href="#h78-0-6" id="h78-0-6" class="d">-  enum ErrorCode {
</a><a href="#h78-0-7" id="h78-0-7" class="d">-    OK  = 0;
</a><a href="#h78-0-8" id="h78-0-8" class="d">-    INVALID_REQUEST = 1;
</a><a href="#h78-0-9" id="h78-0-9" class="d">-    STORAGE_ERROR = 2;
</a><a href="#h78-0-10" id="h78-0-10" class="d">-  }
</a><a href="#h78-0-11" id="h78-0-11" class="d">-}
</a><a href="#h78-0-12" id="h78-0-12" class="d">-
</a><a href="#h78-0-13" id="h78-0-13" class="d">-message UserAppLogLine {
</a><a href="#h78-0-14" id="h78-0-14" class="d">-  required int64 timestamp_usec = 1;
</a><a href="#h78-0-15" id="h78-0-15" class="d">-  required int64 level = 2;
</a><a href="#h78-0-16" id="h78-0-16" class="d">-  required string message = 3;
</a><a href="#h78-0-17" id="h78-0-17" class="d">-}
</a><a href="#h78-0-18" id="h78-0-18" class="d">-
</a><a href="#h78-0-19" id="h78-0-19" class="d">-message UserAppLogGroup {
</a><a href="#h78-0-20" id="h78-0-20" class="d">-  repeated UserAppLogLine log_line = 2;
</a><a href="#h78-0-21" id="h78-0-21" class="d">-}
</a><a href="#h78-0-22" id="h78-0-22" class="d">-
</a><a href="#h78-0-23" id="h78-0-23" class="d">-message FlushRequest {
</a><a href="#h78-0-24" id="h78-0-24" class="d">-  optional bytes logs = 1;
</a><a href="#h78-0-25" id="h78-0-25" class="d">-}
</a><a href="#h78-0-26" id="h78-0-26" class="d">-
</a><a href="#h78-0-27" id="h78-0-27" class="d">-message SetStatusRequest {
</a><a href="#h78-0-28" id="h78-0-28" class="d">-  required string status = 1;
</a><a href="#h78-0-29" id="h78-0-29" class="d">-}
</a><a href="#h78-0-30" id="h78-0-30" class="d">-
</a><a href="#h78-0-31" id="h78-0-31" class="d">-
</a><a href="#h78-0-32" id="h78-0-32" class="d">-message LogOffset {
</a><a href="#h78-0-33" id="h78-0-33" class="d">-  optional bytes request_id = 1;
</a><a href="#h78-0-34" id="h78-0-34" class="d">-}
</a><a href="#h78-0-35" id="h78-0-35" class="d">-
</a><a href="#h78-0-36" id="h78-0-36" class="d">-message LogLine {
</a><a href="#h78-0-37" id="h78-0-37" class="d">-  required int64 time = 1;
</a><a href="#h78-0-38" id="h78-0-38" class="d">-  required int32 level = 2;
</a><a href="#h78-0-39" id="h78-0-39" class="d">-  required string log_message = 3;
</a><a href="#h78-0-40" id="h78-0-40" class="d">-}
</a><a href="#h78-0-41" id="h78-0-41" class="d">-
</a><a href="#h78-0-42" id="h78-0-42" class="d">-message RequestLog {
</a><a href="#h78-0-43" id="h78-0-43" class="d">-  required string app_id = 1;
</a><a href="#h78-0-44" id="h78-0-44" class="d">-  optional string module_id = 37 [default=&quot;default&quot;];
</a><a href="#h78-0-45" id="h78-0-45" class="d">-  required string version_id = 2;
</a><a href="#h78-0-46" id="h78-0-46" class="d">-  required bytes request_id = 3;
</a><a href="#h78-0-47" id="h78-0-47" class="d">-  optional LogOffset offset = 35;
</a><a href="#h78-0-48" id="h78-0-48" class="d">-  required string ip = 4;
</a><a href="#h78-0-49" id="h78-0-49" class="d">-  optional string nickname = 5;
</a><a href="#h78-0-50" id="h78-0-50" class="d">-  required int64 start_time = 6;
</a><a href="#h78-0-51" id="h78-0-51" class="d">-  required int64 end_time = 7;
</a><a href="#h78-0-52" id="h78-0-52" class="d">-  required int64 latency = 8;
</a><a href="#h78-0-53" id="h78-0-53" class="d">-  required int64 mcycles = 9;
</a><a href="#h78-0-54" id="h78-0-54" class="d">-  required string method = 10;
</a><a href="#h78-0-55" id="h78-0-55" class="d">-  required string resource = 11;
</a><a href="#h78-0-56" id="h78-0-56" class="d">-  required string http_version = 12;
</a><a href="#h78-0-57" id="h78-0-57" class="d">-  required int32 status = 13;
</a><a href="#h78-0-58" id="h78-0-58" class="d">-  required int64 response_size = 14;
</a><a href="#h78-0-59" id="h78-0-59" class="d">-  optional string referrer = 15;
</a><a href="#h78-0-60" id="h78-0-60" class="d">-  optional string user_agent = 16;
</a><a href="#h78-0-61" id="h78-0-61" class="d">-  required string url_map_entry = 17;
</a><a href="#h78-0-62" id="h78-0-62" class="d">-  required string combined = 18;
</a><a href="#h78-0-63" id="h78-0-63" class="d">-  optional int64 api_mcycles = 19;
</a><a href="#h78-0-64" id="h78-0-64" class="d">-  optional string host = 20;
</a><a href="#h78-0-65" id="h78-0-65" class="d">-  optional double cost = 21;
</a><a href="#h78-0-66" id="h78-0-66" class="d">-
</a><a href="#h78-0-67" id="h78-0-67" class="d">-  optional string task_queue_name = 22;
</a><a href="#h78-0-68" id="h78-0-68" class="d">-  optional string task_name = 23;
</a><a href="#h78-0-69" id="h78-0-69" class="d">-
</a><a href="#h78-0-70" id="h78-0-70" class="d">-  optional bool was_loading_request = 24;
</a><a href="#h78-0-71" id="h78-0-71" class="d">-  optional int64 pending_time = 25;
</a><a href="#h78-0-72" id="h78-0-72" class="d">-  optional int32 replica_index = 26 [default = -1];
</a><a href="#h78-0-73" id="h78-0-73" class="d">-  optional bool finished = 27 [default = true];
</a><a href="#h78-0-74" id="h78-0-74" class="d">-  optional bytes clone_key = 28;
</a><a href="#h78-0-75" id="h78-0-75" class="d">-
</a><a href="#h78-0-76" id="h78-0-76" class="d">-  repeated LogLine line = 29;
</a><a href="#h78-0-77" id="h78-0-77" class="d">-
</a><a href="#h78-0-78" id="h78-0-78" class="d">-  optional bool lines_incomplete = 36;
</a><a href="#h78-0-79" id="h78-0-79" class="d">-  optional bytes app_engine_release = 38;
</a><a href="#h78-0-80" id="h78-0-80" class="d">-
</a><a href="#h78-0-81" id="h78-0-81" class="d">-  optional int32 exit_reason = 30;
</a><a href="#h78-0-82" id="h78-0-82" class="d">-  optional bool was_throttled_for_time = 31;
</a><a href="#h78-0-83" id="h78-0-83" class="d">-  optional bool was_throttled_for_requests = 32;
</a><a href="#h78-0-84" id="h78-0-84" class="d">-  optional int64 throttled_time = 33;
</a><a href="#h78-0-85" id="h78-0-85" class="d">-
</a><a href="#h78-0-86" id="h78-0-86" class="d">-  optional bytes server_name = 34;
</a><a href="#h78-0-87" id="h78-0-87" class="d">-}
</a><a href="#h78-0-88" id="h78-0-88" class="d">-
</a><a href="#h78-0-89" id="h78-0-89" class="d">-message LogModuleVersion {
</a><a href="#h78-0-90" id="h78-0-90" class="d">-  optional string module_id = 1 [default=&quot;default&quot;];
</a><a href="#h78-0-91" id="h78-0-91" class="d">-  optional string version_id = 2;
</a><a href="#h78-0-92" id="h78-0-92" class="d">-}
</a><a href="#h78-0-93" id="h78-0-93" class="d">-
</a><a href="#h78-0-94" id="h78-0-94" class="d">-message LogReadRequest {
</a><a href="#h78-0-95" id="h78-0-95" class="d">-  required string app_id = 1;
</a><a href="#h78-0-96" id="h78-0-96" class="d">-  repeated string version_id = 2;
</a><a href="#h78-0-97" id="h78-0-97" class="d">-  repeated LogModuleVersion module_version = 19;
</a><a href="#h78-0-98" id="h78-0-98" class="d">-
</a><a href="#h78-0-99" id="h78-0-99" class="d">-  optional int64 start_time = 3;
</a><a href="#h78-0-100" id="h78-0-100" class="d">-  optional int64 end_time = 4;
</a><a href="#h78-0-101" id="h78-0-101" class="d">-  optional LogOffset offset = 5;
</a><a href="#h78-0-102" id="h78-0-102" class="d">-  repeated bytes request_id = 6;
</a><a href="#h78-0-103" id="h78-0-103" class="d">-
</a><a href="#h78-0-104" id="h78-0-104" class="d">-  optional int32 minimum_log_level = 7;
</a><a href="#h78-0-105" id="h78-0-105" class="d">-  optional bool include_incomplete = 8;
</a><a href="#h78-0-106" id="h78-0-106" class="d">-  optional int64 count = 9;
</a><a href="#h78-0-107" id="h78-0-107" class="d">-
</a><a href="#h78-0-108" id="h78-0-108" class="d">-  optional string combined_log_regex = 14;
</a><a href="#h78-0-109" id="h78-0-109" class="d">-  optional string host_regex = 15;
</a><a href="#h78-0-110" id="h78-0-110" class="d">-  optional int32 replica_index = 16;
</a><a href="#h78-0-111" id="h78-0-111" class="d">-
</a><a href="#h78-0-112" id="h78-0-112" class="d">-  optional bool include_app_logs = 10;
</a><a href="#h78-0-113" id="h78-0-113" class="d">-  optional int32 app_logs_per_request = 17;
</a><a href="#h78-0-114" id="h78-0-114" class="d">-  optional bool include_host = 11;
</a><a href="#h78-0-115" id="h78-0-115" class="d">-  optional bool include_all = 12;
</a><a href="#h78-0-116" id="h78-0-116" class="d">-  optional bool cache_iterator = 13;
</a><a href="#h78-0-117" id="h78-0-117" class="d">-  optional int32 num_shards = 18;
</a><a href="#h78-0-118" id="h78-0-118" class="d">-}
</a><a href="#h78-0-119" id="h78-0-119" class="d">-
</a><a href="#h78-0-120" id="h78-0-120" class="d">-message LogReadResponse {
</a><a href="#h78-0-121" id="h78-0-121" class="d">-  repeated RequestLog log = 1;
</a><a href="#h78-0-122" id="h78-0-122" class="d">-  optional LogOffset offset = 2;
</a><a href="#h78-0-123" id="h78-0-123" class="d">-  optional int64 last_end_time = 3;
</a><a href="#h78-0-124" id="h78-0-124" class="d">-}
</a><a href="#h78-0-125" id="h78-0-125" class="d">-
</a><a href="#h78-0-126" id="h78-0-126" class="d">-message LogUsageRecord {
</a><a href="#h78-0-127" id="h78-0-127" class="d">-  optional string version_id = 1;
</a><a href="#h78-0-128" id="h78-0-128" class="d">-  optional int32 start_time = 2;
</a><a href="#h78-0-129" id="h78-0-129" class="d">-  optional int32 end_time = 3;
</a><a href="#h78-0-130" id="h78-0-130" class="d">-  optional int64 count = 4;
</a><a href="#h78-0-131" id="h78-0-131" class="d">-  optional int64 total_size = 5;
</a><a href="#h78-0-132" id="h78-0-132" class="d">-  optional int32 records = 6;
</a><a href="#h78-0-133" id="h78-0-133" class="d">-}
</a><a href="#h78-0-134" id="h78-0-134" class="d">-
</a><a href="#h78-0-135" id="h78-0-135" class="d">-message LogUsageRequest {
</a><a href="#h78-0-136" id="h78-0-136" class="d">-  required string app_id = 1;
</a><a href="#h78-0-137" id="h78-0-137" class="d">-  repeated string version_id = 2;
</a><a href="#h78-0-138" id="h78-0-138" class="d">-  optional int32 start_time = 3;
</a><a href="#h78-0-139" id="h78-0-139" class="d">-  optional int32 end_time = 4;
</a><a href="#h78-0-140" id="h78-0-140" class="d">-  optional uint32 resolution_hours = 5 [default = 1];
</a><a href="#h78-0-141" id="h78-0-141" class="d">-  optional bool combine_versions = 6;
</a><a href="#h78-0-142" id="h78-0-142" class="d">-  optional int32 usage_version = 7;
</a><a href="#h78-0-143" id="h78-0-143" class="d">-  optional bool versions_only = 8;
</a><a href="#h78-0-144" id="h78-0-144" class="d">-}
</a><a href="#h78-0-145" id="h78-0-145" class="d">-
</a><a href="#h78-0-146" id="h78-0-146" class="d">-message LogUsageResponse {
</a><a href="#h78-0-147" id="h78-0-147" class="d">-  repeated LogUsageRecord usage = 1;
</a><a href="#h78-0-148" id="h78-0-148" class="d">-  optional LogUsageRecord summary = 2;
</a><a href="#h78-0-149" id="h78-0-149" class="d">-}
</a><b>diff --git a/<a id="h79" href="../file/vendor/google.golang.org/appengine/internal/main.go">vendor/google.golang.org/appengine/internal/main.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/main.go">vendor/google.golang.org/appengine/internal/main.go</a></b>
<a href="#h79-0" id="h79-0" class="h">@@ -1,15 +0,0 @@
</a><a href="#h79-0-0" id="h79-0-0" class="d">-// Copyright 2011 Google Inc. All rights reserved.
</a><a href="#h79-0-1" id="h79-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h79-0-2" id="h79-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h79-0-3" id="h79-0-3" class="d">-
</a><a href="#h79-0-4" id="h79-0-4" class="d">-// +build appengine
</a><a href="#h79-0-5" id="h79-0-5" class="d">-
</a><a href="#h79-0-6" id="h79-0-6" class="d">-package internal
</a><a href="#h79-0-7" id="h79-0-7" class="d">-
</a><a href="#h79-0-8" id="h79-0-8" class="d">-import (
</a><a href="#h79-0-9" id="h79-0-9" class="d">-	&quot;appengine_internal&quot;
</a><a href="#h79-0-10" id="h79-0-10" class="d">-)
</a><a href="#h79-0-11" id="h79-0-11" class="d">-
</a><a href="#h79-0-12" id="h79-0-12" class="d">-func Main() {
</a><a href="#h79-0-13" id="h79-0-13" class="d">-	appengine_internal.Main()
</a><a href="#h79-0-14" id="h79-0-14" class="d">-}
</a><b>diff --git a/<a id="h80" href="../file/vendor/google.golang.org/appengine/internal/main_vm.go">vendor/google.golang.org/appengine/internal/main_vm.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/main_vm.go">vendor/google.golang.org/appengine/internal/main_vm.go</a></b>
<a href="#h80-0" id="h80-0" class="h">@@ -1,44 +0,0 @@
</a><a href="#h80-0-0" id="h80-0-0" class="d">-// Copyright 2011 Google Inc. All rights reserved.
</a><a href="#h80-0-1" id="h80-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h80-0-2" id="h80-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h80-0-3" id="h80-0-3" class="d">-
</a><a href="#h80-0-4" id="h80-0-4" class="d">-// +build !appengine
</a><a href="#h80-0-5" id="h80-0-5" class="d">-
</a><a href="#h80-0-6" id="h80-0-6" class="d">-package internal
</a><a href="#h80-0-7" id="h80-0-7" class="d">-
</a><a href="#h80-0-8" id="h80-0-8" class="d">-import (
</a><a href="#h80-0-9" id="h80-0-9" class="d">-	&quot;io&quot;
</a><a href="#h80-0-10" id="h80-0-10" class="d">-	&quot;log&quot;
</a><a href="#h80-0-11" id="h80-0-11" class="d">-	&quot;net/http&quot;
</a><a href="#h80-0-12" id="h80-0-12" class="d">-	&quot;net/url&quot;
</a><a href="#h80-0-13" id="h80-0-13" class="d">-	&quot;os&quot;
</a><a href="#h80-0-14" id="h80-0-14" class="d">-)
</a><a href="#h80-0-15" id="h80-0-15" class="d">-
</a><a href="#h80-0-16" id="h80-0-16" class="d">-func Main() {
</a><a href="#h80-0-17" id="h80-0-17" class="d">-	installHealthChecker(http.DefaultServeMux)
</a><a href="#h80-0-18" id="h80-0-18" class="d">-
</a><a href="#h80-0-19" id="h80-0-19" class="d">-	port := &quot;8080&quot;
</a><a href="#h80-0-20" id="h80-0-20" class="d">-	if s := os.Getenv(&quot;PORT&quot;); s != &quot;&quot; {
</a><a href="#h80-0-21" id="h80-0-21" class="d">-		port = s
</a><a href="#h80-0-22" id="h80-0-22" class="d">-	}
</a><a href="#h80-0-23" id="h80-0-23" class="d">-
</a><a href="#h80-0-24" id="h80-0-24" class="d">-	if err := http.ListenAndServe(&quot;:&quot;+port, http.HandlerFunc(handleHTTP)); err != nil {
</a><a href="#h80-0-25" id="h80-0-25" class="d">-		log.Fatalf(&quot;http.ListenAndServe: %v&quot;, err)
</a><a href="#h80-0-26" id="h80-0-26" class="d">-	}
</a><a href="#h80-0-27" id="h80-0-27" class="d">-}
</a><a href="#h80-0-28" id="h80-0-28" class="d">-
</a><a href="#h80-0-29" id="h80-0-29" class="d">-func installHealthChecker(mux *http.ServeMux) {
</a><a href="#h80-0-30" id="h80-0-30" class="d">-	// If no health check handler has been installed by this point, add a trivial one.
</a><a href="#h80-0-31" id="h80-0-31" class="d">-	const healthPath = &quot;/_ah/health&quot;
</a><a href="#h80-0-32" id="h80-0-32" class="d">-	hreq := &amp;http.Request{
</a><a href="#h80-0-33" id="h80-0-33" class="d">-		Method: &quot;GET&quot;,
</a><a href="#h80-0-34" id="h80-0-34" class="d">-		URL: &amp;url.URL{
</a><a href="#h80-0-35" id="h80-0-35" class="d">-			Path: healthPath,
</a><a href="#h80-0-36" id="h80-0-36" class="d">-		},
</a><a href="#h80-0-37" id="h80-0-37" class="d">-	}
</a><a href="#h80-0-38" id="h80-0-38" class="d">-	if _, pat := mux.Handler(hreq); pat != healthPath {
</a><a href="#h80-0-39" id="h80-0-39" class="d">-		mux.HandleFunc(healthPath, func(w http.ResponseWriter, r *http.Request) {
</a><a href="#h80-0-40" id="h80-0-40" class="d">-			io.WriteString(w, &quot;ok&quot;)
</a><a href="#h80-0-41" id="h80-0-41" class="d">-		})
</a><a href="#h80-0-42" id="h80-0-42" class="d">-	}
</a><a href="#h80-0-43" id="h80-0-43" class="d">-}
</a><b>diff --git a/<a id="h81" href="../file/vendor/google.golang.org/appengine/internal/metadata.go">vendor/google.golang.org/appengine/internal/metadata.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/metadata.go">vendor/google.golang.org/appengine/internal/metadata.go</a></b>
<a href="#h81-0" id="h81-0" class="h">@@ -1,61 +0,0 @@
</a><a href="#h81-0-0" id="h81-0-0" class="d">-// Copyright 2014 Google Inc. All rights reserved.
</a><a href="#h81-0-1" id="h81-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h81-0-2" id="h81-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h81-0-3" id="h81-0-3" class="d">-
</a><a href="#h81-0-4" id="h81-0-4" class="d">-package internal
</a><a href="#h81-0-5" id="h81-0-5" class="d">-
</a><a href="#h81-0-6" id="h81-0-6" class="d">-// This file has code for accessing metadata.
</a><a href="#h81-0-7" id="h81-0-7" class="d">-//
</a><a href="#h81-0-8" id="h81-0-8" class="d">-// References:
</a><a href="#h81-0-9" id="h81-0-9" class="d">-//	https://cloud.google.com/compute/docs/metadata
</a><a href="#h81-0-10" id="h81-0-10" class="d">-
</a><a href="#h81-0-11" id="h81-0-11" class="d">-import (
</a><a href="#h81-0-12" id="h81-0-12" class="d">-	&quot;fmt&quot;
</a><a href="#h81-0-13" id="h81-0-13" class="d">-	&quot;io/ioutil&quot;
</a><a href="#h81-0-14" id="h81-0-14" class="d">-	&quot;log&quot;
</a><a href="#h81-0-15" id="h81-0-15" class="d">-	&quot;net/http&quot;
</a><a href="#h81-0-16" id="h81-0-16" class="d">-	&quot;net/url&quot;
</a><a href="#h81-0-17" id="h81-0-17" class="d">-)
</a><a href="#h81-0-18" id="h81-0-18" class="d">-
</a><a href="#h81-0-19" id="h81-0-19" class="d">-const (
</a><a href="#h81-0-20" id="h81-0-20" class="d">-	metadataHost = &quot;metadata&quot;
</a><a href="#h81-0-21" id="h81-0-21" class="d">-	metadataPath = &quot;/computeMetadata/v1/&quot;
</a><a href="#h81-0-22" id="h81-0-22" class="d">-)
</a><a href="#h81-0-23" id="h81-0-23" class="d">-
</a><a href="#h81-0-24" id="h81-0-24" class="d">-var (
</a><a href="#h81-0-25" id="h81-0-25" class="d">-	metadataRequestHeaders = http.Header{
</a><a href="#h81-0-26" id="h81-0-26" class="d">-		&quot;Metadata-Flavor&quot;: []string{&quot;Google&quot;},
</a><a href="#h81-0-27" id="h81-0-27" class="d">-	}
</a><a href="#h81-0-28" id="h81-0-28" class="d">-)
</a><a href="#h81-0-29" id="h81-0-29" class="d">-
</a><a href="#h81-0-30" id="h81-0-30" class="d">-// TODO(dsymonds): Do we need to support default values, like Python?
</a><a href="#h81-0-31" id="h81-0-31" class="d">-func mustGetMetadata(key string) []byte {
</a><a href="#h81-0-32" id="h81-0-32" class="d">-	b, err := getMetadata(key)
</a><a href="#h81-0-33" id="h81-0-33" class="d">-	if err != nil {
</a><a href="#h81-0-34" id="h81-0-34" class="d">-		log.Fatalf(&quot;Metadata fetch failed: %v&quot;, err)
</a><a href="#h81-0-35" id="h81-0-35" class="d">-	}
</a><a href="#h81-0-36" id="h81-0-36" class="d">-	return b
</a><a href="#h81-0-37" id="h81-0-37" class="d">-}
</a><a href="#h81-0-38" id="h81-0-38" class="d">-
</a><a href="#h81-0-39" id="h81-0-39" class="d">-func getMetadata(key string) ([]byte, error) {
</a><a href="#h81-0-40" id="h81-0-40" class="d">-	// TODO(dsymonds): May need to use url.Parse to support keys with query args.
</a><a href="#h81-0-41" id="h81-0-41" class="d">-	req := &amp;http.Request{
</a><a href="#h81-0-42" id="h81-0-42" class="d">-		Method: &quot;GET&quot;,
</a><a href="#h81-0-43" id="h81-0-43" class="d">-		URL: &amp;url.URL{
</a><a href="#h81-0-44" id="h81-0-44" class="d">-			Scheme: &quot;http&quot;,
</a><a href="#h81-0-45" id="h81-0-45" class="d">-			Host:   metadataHost,
</a><a href="#h81-0-46" id="h81-0-46" class="d">-			Path:   metadataPath + key,
</a><a href="#h81-0-47" id="h81-0-47" class="d">-		},
</a><a href="#h81-0-48" id="h81-0-48" class="d">-		Header: metadataRequestHeaders,
</a><a href="#h81-0-49" id="h81-0-49" class="d">-		Host:   metadataHost,
</a><a href="#h81-0-50" id="h81-0-50" class="d">-	}
</a><a href="#h81-0-51" id="h81-0-51" class="d">-	resp, err := http.DefaultClient.Do(req)
</a><a href="#h81-0-52" id="h81-0-52" class="d">-	if err != nil {
</a><a href="#h81-0-53" id="h81-0-53" class="d">-		return nil, err
</a><a href="#h81-0-54" id="h81-0-54" class="d">-	}
</a><a href="#h81-0-55" id="h81-0-55" class="d">-	defer resp.Body.Close()
</a><a href="#h81-0-56" id="h81-0-56" class="d">-	if resp.StatusCode != 200 {
</a><a href="#h81-0-57" id="h81-0-57" class="d">-		return nil, fmt.Errorf(&quot;metadata server returned HTTP %d&quot;, resp.StatusCode)
</a><a href="#h81-0-58" id="h81-0-58" class="d">-	}
</a><a href="#h81-0-59" id="h81-0-59" class="d">-	return ioutil.ReadAll(resp.Body)
</a><a href="#h81-0-60" id="h81-0-60" class="d">-}
</a><b>diff --git a/<a id="h82" href="../file/vendor/google.golang.org/appengine/internal/net.go">vendor/google.golang.org/appengine/internal/net.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/net.go">vendor/google.golang.org/appengine/internal/net.go</a></b>
<a href="#h82-0" id="h82-0" class="h">@@ -1,56 +0,0 @@
</a><a href="#h82-0-0" id="h82-0-0" class="d">-// Copyright 2014 Google Inc. All rights reserved.
</a><a href="#h82-0-1" id="h82-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h82-0-2" id="h82-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h82-0-3" id="h82-0-3" class="d">-
</a><a href="#h82-0-4" id="h82-0-4" class="d">-package internal
</a><a href="#h82-0-5" id="h82-0-5" class="d">-
</a><a href="#h82-0-6" id="h82-0-6" class="d">-// This file implements a network dialer that limits the number of concurrent connections.
</a><a href="#h82-0-7" id="h82-0-7" class="d">-// It is only used for API calls.
</a><a href="#h82-0-8" id="h82-0-8" class="d">-
</a><a href="#h82-0-9" id="h82-0-9" class="d">-import (
</a><a href="#h82-0-10" id="h82-0-10" class="d">-	&quot;log&quot;
</a><a href="#h82-0-11" id="h82-0-11" class="d">-	&quot;net&quot;
</a><a href="#h82-0-12" id="h82-0-12" class="d">-	&quot;runtime&quot;
</a><a href="#h82-0-13" id="h82-0-13" class="d">-	&quot;sync&quot;
</a><a href="#h82-0-14" id="h82-0-14" class="d">-	&quot;time&quot;
</a><a href="#h82-0-15" id="h82-0-15" class="d">-)
</a><a href="#h82-0-16" id="h82-0-16" class="d">-
</a><a href="#h82-0-17" id="h82-0-17" class="d">-var limitSem = make(chan int, 100) // TODO(dsymonds): Use environment variable.
</a><a href="#h82-0-18" id="h82-0-18" class="d">-
</a><a href="#h82-0-19" id="h82-0-19" class="d">-func limitRelease() {
</a><a href="#h82-0-20" id="h82-0-20" class="d">-	// non-blocking
</a><a href="#h82-0-21" id="h82-0-21" class="d">-	select {
</a><a href="#h82-0-22" id="h82-0-22" class="d">-	case &lt;-limitSem:
</a><a href="#h82-0-23" id="h82-0-23" class="d">-	default:
</a><a href="#h82-0-24" id="h82-0-24" class="d">-		// This should not normally happen.
</a><a href="#h82-0-25" id="h82-0-25" class="d">-		log.Print(&quot;appengine: unbalanced limitSem release!&quot;)
</a><a href="#h82-0-26" id="h82-0-26" class="d">-	}
</a><a href="#h82-0-27" id="h82-0-27" class="d">-}
</a><a href="#h82-0-28" id="h82-0-28" class="d">-
</a><a href="#h82-0-29" id="h82-0-29" class="d">-func limitDial(network, addr string) (net.Conn, error) {
</a><a href="#h82-0-30" id="h82-0-30" class="d">-	limitSem &lt;- 1
</a><a href="#h82-0-31" id="h82-0-31" class="d">-
</a><a href="#h82-0-32" id="h82-0-32" class="d">-	// Dial with a timeout in case the API host is MIA.
</a><a href="#h82-0-33" id="h82-0-33" class="d">-	// The connection should normally be very fast.
</a><a href="#h82-0-34" id="h82-0-34" class="d">-	conn, err := net.DialTimeout(network, addr, 500*time.Millisecond)
</a><a href="#h82-0-35" id="h82-0-35" class="d">-	if err != nil {
</a><a href="#h82-0-36" id="h82-0-36" class="d">-		limitRelease()
</a><a href="#h82-0-37" id="h82-0-37" class="d">-		return nil, err
</a><a href="#h82-0-38" id="h82-0-38" class="d">-	}
</a><a href="#h82-0-39" id="h82-0-39" class="d">-	lc := &amp;limitConn{Conn: conn}
</a><a href="#h82-0-40" id="h82-0-40" class="d">-	runtime.SetFinalizer(lc, (*limitConn).Close) // shouldn&#39;t usually be required
</a><a href="#h82-0-41" id="h82-0-41" class="d">-	return lc, nil
</a><a href="#h82-0-42" id="h82-0-42" class="d">-}
</a><a href="#h82-0-43" id="h82-0-43" class="d">-
</a><a href="#h82-0-44" id="h82-0-44" class="d">-type limitConn struct {
</a><a href="#h82-0-45" id="h82-0-45" class="d">-	close sync.Once
</a><a href="#h82-0-46" id="h82-0-46" class="d">-	net.Conn
</a><a href="#h82-0-47" id="h82-0-47" class="d">-}
</a><a href="#h82-0-48" id="h82-0-48" class="d">-
</a><a href="#h82-0-49" id="h82-0-49" class="d">-func (lc *limitConn) Close() error {
</a><a href="#h82-0-50" id="h82-0-50" class="d">-	defer lc.close.Do(func() {
</a><a href="#h82-0-51" id="h82-0-51" class="d">-		limitRelease()
</a><a href="#h82-0-52" id="h82-0-52" class="d">-		runtime.SetFinalizer(lc, nil)
</a><a href="#h82-0-53" id="h82-0-53" class="d">-	})
</a><a href="#h82-0-54" id="h82-0-54" class="d">-	return lc.Conn.Close()
</a><a href="#h82-0-55" id="h82-0-55" class="d">-}
</a><b>diff --git a/<a id="h83" href="../file/vendor/google.golang.org/appengine/internal/regen.sh">vendor/google.golang.org/appengine/internal/regen.sh</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/regen.sh">vendor/google.golang.org/appengine/internal/regen.sh</a></b>
<a href="#h83-0" id="h83-0" class="h">@@ -1,40 +0,0 @@
</a><a href="#h83-0-0" id="h83-0-0" class="d">-#!/bin/bash -e
</a><a href="#h83-0-1" id="h83-0-1" class="d">-#
</a><a href="#h83-0-2" id="h83-0-2" class="d">-# This script rebuilds the generated code for the protocol buffers.
</a><a href="#h83-0-3" id="h83-0-3" class="d">-# To run this you will need protoc and goprotobuf installed;
</a><a href="#h83-0-4" id="h83-0-4" class="d">-# see https://github.com/golang/protobuf for instructions.
</a><a href="#h83-0-5" id="h83-0-5" class="d">-
</a><a href="#h83-0-6" id="h83-0-6" class="d">-PKG=google.golang.org/appengine
</a><a href="#h83-0-7" id="h83-0-7" class="d">-
</a><a href="#h83-0-8" id="h83-0-8" class="d">-function die() {
</a><a href="#h83-0-9" id="h83-0-9" class="d">-	echo 1&gt;&amp;2 $*
</a><a href="#h83-0-10" id="h83-0-10" class="d">-	exit 1
</a><a href="#h83-0-11" id="h83-0-11" class="d">-}
</a><a href="#h83-0-12" id="h83-0-12" class="d">-
</a><a href="#h83-0-13" id="h83-0-13" class="d">-# Sanity check that the right tools are accessible.
</a><a href="#h83-0-14" id="h83-0-14" class="d">-for tool in go protoc protoc-gen-go; do
</a><a href="#h83-0-15" id="h83-0-15" class="d">-	q=$(which $tool) || die &quot;didn&#39;t find $tool&quot;
</a><a href="#h83-0-16" id="h83-0-16" class="d">-	echo 1&gt;&amp;2 &quot;$tool: $q&quot;
</a><a href="#h83-0-17" id="h83-0-17" class="d">-done
</a><a href="#h83-0-18" id="h83-0-18" class="d">-
</a><a href="#h83-0-19" id="h83-0-19" class="d">-echo -n 1&gt;&amp;2 &quot;finding package dir... &quot;
</a><a href="#h83-0-20" id="h83-0-20" class="d">-pkgdir=$(go list -f &#39;{{.Dir}}&#39; $PKG)
</a><a href="#h83-0-21" id="h83-0-21" class="d">-echo 1&gt;&amp;2 $pkgdir
</a><a href="#h83-0-22" id="h83-0-22" class="d">-base=$(echo $pkgdir | sed &quot;s,/$PKG\$,,&quot;)
</a><a href="#h83-0-23" id="h83-0-23" class="d">-echo 1&gt;&amp;2 &quot;base: $base&quot;
</a><a href="#h83-0-24" id="h83-0-24" class="d">-cd $base
</a><a href="#h83-0-25" id="h83-0-25" class="d">-
</a><a href="#h83-0-26" id="h83-0-26" class="d">-# Run protoc once per package.
</a><a href="#h83-0-27" id="h83-0-27" class="d">-for dir in $(find $PKG/internal -name &#39;*.proto&#39; | xargs dirname | sort | uniq); do
</a><a href="#h83-0-28" id="h83-0-28" class="d">-	echo 1&gt;&amp;2 &quot;* $dir&quot;
</a><a href="#h83-0-29" id="h83-0-29" class="d">-	protoc --go_out=. $dir/*.proto
</a><a href="#h83-0-30" id="h83-0-30" class="d">-done
</a><a href="#h83-0-31" id="h83-0-31" class="d">-
</a><a href="#h83-0-32" id="h83-0-32" class="d">-for f in $(find $PKG/internal -name &#39;*.pb.go&#39;); do
</a><a href="#h83-0-33" id="h83-0-33" class="d">-  # Remove proto.RegisterEnum calls.
</a><a href="#h83-0-34" id="h83-0-34" class="d">-  # These cause duplicate registration panics when these packages
</a><a href="#h83-0-35" id="h83-0-35" class="d">-  # are used on classic App Engine. proto.RegisterEnum only affects
</a><a href="#h83-0-36" id="h83-0-36" class="d">-  # parsing the text format; we don&#39;t care about that.
</a><a href="#h83-0-37" id="h83-0-37" class="d">-  # https://code.google.com/p/googleappengine/issues/detail?id=11670#c17
</a><a href="#h83-0-38" id="h83-0-38" class="d">-  sed -i &#39;/proto.RegisterEnum/d&#39; $f
</a><a href="#h83-0-39" id="h83-0-39" class="d">-done
</a><b>diff --git a/<a id="h84" href="../file/vendor/google.golang.org/appengine/internal/remote_api/BUILD">vendor/google.golang.org/appengine/internal/remote_api/BUILD</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/remote_api/BUILD">vendor/google.golang.org/appengine/internal/remote_api/BUILD</a></b>
<a href="#h84-0" id="h84-0" class="h">@@ -1,19 +0,0 @@
</a><a href="#h84-0-0" id="h84-0-0" class="d">-
</a><a href="#h84-0-1" id="h84-0-1" class="d">-load(&quot;@io_bazel_rules_go//go:def.bzl&quot;,
</a><a href="#h84-0-2" id="h84-0-2" class="d">-  &quot;go_binary&quot;,
</a><a href="#h84-0-3" id="h84-0-3" class="d">-  &quot;go_library&quot;,
</a><a href="#h84-0-4" id="h84-0-4" class="d">-  &quot;go_test&quot;,
</a><a href="#h84-0-5" id="h84-0-5" class="d">-)
</a><a href="#h84-0-6" id="h84-0-6" class="d">-
</a><a href="#h84-0-7" id="h84-0-7" class="d">-go_library(
</a><a href="#h84-0-8" id="h84-0-8" class="d">-name = &quot;go_default_library&quot;,
</a><a href="#h84-0-9" id="h84-0-9" class="d">-  srcs = [
</a><a href="#h84-0-10" id="h84-0-10" class="d">-    &quot;remote_api.pb.go&quot;,
</a><a href="#h84-0-11" id="h84-0-11" class="d">-  ],
</a><a href="#h84-0-12" id="h84-0-12" class="d">-  deps = [
</a><a href="#h84-0-13" id="h84-0-13" class="d">-    &quot;//vendor/github.com/golang/protobuf/proto:go_default_library&quot;,
</a><a href="#h84-0-14" id="h84-0-14" class="d">-  ],
</a><a href="#h84-0-15" id="h84-0-15" class="d">-  visibility = [&quot;//visibility:public&quot;],
</a><a href="#h84-0-16" id="h84-0-16" class="d">-)
</a><a href="#h84-0-17" id="h84-0-17" class="d">-
</a><a href="#h84-0-18" id="h84-0-18" class="d">-
</a><b>diff --git a/<a id="h85" href="../file/vendor/google.golang.org/appengine/internal/remote_api/remote_api.pb.go">vendor/google.golang.org/appengine/internal/remote_api/remote_api.pb.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/remote_api/remote_api.pb.go">vendor/google.golang.org/appengine/internal/remote_api/remote_api.pb.go</a></b>
<a href="#h85-0" id="h85-0" class="h">@@ -1,231 +0,0 @@
</a><a href="#h85-0-0" id="h85-0-0" class="d">-// Code generated by protoc-gen-go.
</a><a href="#h85-0-1" id="h85-0-1" class="d">-// source: google.golang.org/appengine/internal/remote_api/remote_api.proto
</a><a href="#h85-0-2" id="h85-0-2" class="d">-// DO NOT EDIT!
</a><a href="#h85-0-3" id="h85-0-3" class="d">-
</a><a href="#h85-0-4" id="h85-0-4" class="d">-/*
</a><a href="#h85-0-5" id="h85-0-5" class="d">-Package remote_api is a generated protocol buffer package.
</a><a href="#h85-0-6" id="h85-0-6" class="d">-
</a><a href="#h85-0-7" id="h85-0-7" class="d">-It is generated from these files:
</a><a href="#h85-0-8" id="h85-0-8" class="d">-	google.golang.org/appengine/internal/remote_api/remote_api.proto
</a><a href="#h85-0-9" id="h85-0-9" class="d">-
</a><a href="#h85-0-10" id="h85-0-10" class="d">-It has these top-level messages:
</a><a href="#h85-0-11" id="h85-0-11" class="d">-	Request
</a><a href="#h85-0-12" id="h85-0-12" class="d">-	ApplicationError
</a><a href="#h85-0-13" id="h85-0-13" class="d">-	RpcError
</a><a href="#h85-0-14" id="h85-0-14" class="d">-	Response
</a><a href="#h85-0-15" id="h85-0-15" class="d">-*/
</a><a href="#h85-0-16" id="h85-0-16" class="d">-package remote_api
</a><a href="#h85-0-17" id="h85-0-17" class="d">-
</a><a href="#h85-0-18" id="h85-0-18" class="d">-import proto &quot;github.com/golang/protobuf/proto&quot;
</a><a href="#h85-0-19" id="h85-0-19" class="d">-import fmt &quot;fmt&quot;
</a><a href="#h85-0-20" id="h85-0-20" class="d">-import math &quot;math&quot;
</a><a href="#h85-0-21" id="h85-0-21" class="d">-
</a><a href="#h85-0-22" id="h85-0-22" class="d">-// Reference imports to suppress errors if they are not otherwise used.
</a><a href="#h85-0-23" id="h85-0-23" class="d">-var _ = proto.Marshal
</a><a href="#h85-0-24" id="h85-0-24" class="d">-var _ = fmt.Errorf
</a><a href="#h85-0-25" id="h85-0-25" class="d">-var _ = math.Inf
</a><a href="#h85-0-26" id="h85-0-26" class="d">-
</a><a href="#h85-0-27" id="h85-0-27" class="d">-type RpcError_ErrorCode int32
</a><a href="#h85-0-28" id="h85-0-28" class="d">-
</a><a href="#h85-0-29" id="h85-0-29" class="d">-const (
</a><a href="#h85-0-30" id="h85-0-30" class="d">-	RpcError_UNKNOWN             RpcError_ErrorCode = 0
</a><a href="#h85-0-31" id="h85-0-31" class="d">-	RpcError_CALL_NOT_FOUND      RpcError_ErrorCode = 1
</a><a href="#h85-0-32" id="h85-0-32" class="d">-	RpcError_PARSE_ERROR         RpcError_ErrorCode = 2
</a><a href="#h85-0-33" id="h85-0-33" class="d">-	RpcError_SECURITY_VIOLATION  RpcError_ErrorCode = 3
</a><a href="#h85-0-34" id="h85-0-34" class="d">-	RpcError_OVER_QUOTA          RpcError_ErrorCode = 4
</a><a href="#h85-0-35" id="h85-0-35" class="d">-	RpcError_REQUEST_TOO_LARGE   RpcError_ErrorCode = 5
</a><a href="#h85-0-36" id="h85-0-36" class="d">-	RpcError_CAPABILITY_DISABLED RpcError_ErrorCode = 6
</a><a href="#h85-0-37" id="h85-0-37" class="d">-	RpcError_FEATURE_DISABLED    RpcError_ErrorCode = 7
</a><a href="#h85-0-38" id="h85-0-38" class="d">-	RpcError_BAD_REQUEST         RpcError_ErrorCode = 8
</a><a href="#h85-0-39" id="h85-0-39" class="d">-	RpcError_RESPONSE_TOO_LARGE  RpcError_ErrorCode = 9
</a><a href="#h85-0-40" id="h85-0-40" class="d">-	RpcError_CANCELLED           RpcError_ErrorCode = 10
</a><a href="#h85-0-41" id="h85-0-41" class="d">-	RpcError_REPLAY_ERROR        RpcError_ErrorCode = 11
</a><a href="#h85-0-42" id="h85-0-42" class="d">-	RpcError_DEADLINE_EXCEEDED   RpcError_ErrorCode = 12
</a><a href="#h85-0-43" id="h85-0-43" class="d">-)
</a><a href="#h85-0-44" id="h85-0-44" class="d">-
</a><a href="#h85-0-45" id="h85-0-45" class="d">-var RpcError_ErrorCode_name = map[int32]string{
</a><a href="#h85-0-46" id="h85-0-46" class="d">-	0:  &quot;UNKNOWN&quot;,
</a><a href="#h85-0-47" id="h85-0-47" class="d">-	1:  &quot;CALL_NOT_FOUND&quot;,
</a><a href="#h85-0-48" id="h85-0-48" class="d">-	2:  &quot;PARSE_ERROR&quot;,
</a><a href="#h85-0-49" id="h85-0-49" class="d">-	3:  &quot;SECURITY_VIOLATION&quot;,
</a><a href="#h85-0-50" id="h85-0-50" class="d">-	4:  &quot;OVER_QUOTA&quot;,
</a><a href="#h85-0-51" id="h85-0-51" class="d">-	5:  &quot;REQUEST_TOO_LARGE&quot;,
</a><a href="#h85-0-52" id="h85-0-52" class="d">-	6:  &quot;CAPABILITY_DISABLED&quot;,
</a><a href="#h85-0-53" id="h85-0-53" class="d">-	7:  &quot;FEATURE_DISABLED&quot;,
</a><a href="#h85-0-54" id="h85-0-54" class="d">-	8:  &quot;BAD_REQUEST&quot;,
</a><a href="#h85-0-55" id="h85-0-55" class="d">-	9:  &quot;RESPONSE_TOO_LARGE&quot;,
</a><a href="#h85-0-56" id="h85-0-56" class="d">-	10: &quot;CANCELLED&quot;,
</a><a href="#h85-0-57" id="h85-0-57" class="d">-	11: &quot;REPLAY_ERROR&quot;,
</a><a href="#h85-0-58" id="h85-0-58" class="d">-	12: &quot;DEADLINE_EXCEEDED&quot;,
</a><a href="#h85-0-59" id="h85-0-59" class="d">-}
</a><a href="#h85-0-60" id="h85-0-60" class="d">-var RpcError_ErrorCode_value = map[string]int32{
</a><a href="#h85-0-61" id="h85-0-61" class="d">-	&quot;UNKNOWN&quot;:             0,
</a><a href="#h85-0-62" id="h85-0-62" class="d">-	&quot;CALL_NOT_FOUND&quot;:      1,
</a><a href="#h85-0-63" id="h85-0-63" class="d">-	&quot;PARSE_ERROR&quot;:         2,
</a><a href="#h85-0-64" id="h85-0-64" class="d">-	&quot;SECURITY_VIOLATION&quot;:  3,
</a><a href="#h85-0-65" id="h85-0-65" class="d">-	&quot;OVER_QUOTA&quot;:          4,
</a><a href="#h85-0-66" id="h85-0-66" class="d">-	&quot;REQUEST_TOO_LARGE&quot;:   5,
</a><a href="#h85-0-67" id="h85-0-67" class="d">-	&quot;CAPABILITY_DISABLED&quot;: 6,
</a><a href="#h85-0-68" id="h85-0-68" class="d">-	&quot;FEATURE_DISABLED&quot;:    7,
</a><a href="#h85-0-69" id="h85-0-69" class="d">-	&quot;BAD_REQUEST&quot;:         8,
</a><a href="#h85-0-70" id="h85-0-70" class="d">-	&quot;RESPONSE_TOO_LARGE&quot;:  9,
</a><a href="#h85-0-71" id="h85-0-71" class="d">-	&quot;CANCELLED&quot;:           10,
</a><a href="#h85-0-72" id="h85-0-72" class="d">-	&quot;REPLAY_ERROR&quot;:        11,
</a><a href="#h85-0-73" id="h85-0-73" class="d">-	&quot;DEADLINE_EXCEEDED&quot;:   12,
</a><a href="#h85-0-74" id="h85-0-74" class="d">-}
</a><a href="#h85-0-75" id="h85-0-75" class="d">-
</a><a href="#h85-0-76" id="h85-0-76" class="d">-func (x RpcError_ErrorCode) Enum() *RpcError_ErrorCode {
</a><a href="#h85-0-77" id="h85-0-77" class="d">-	p := new(RpcError_ErrorCode)
</a><a href="#h85-0-78" id="h85-0-78" class="d">-	*p = x
</a><a href="#h85-0-79" id="h85-0-79" class="d">-	return p
</a><a href="#h85-0-80" id="h85-0-80" class="d">-}
</a><a href="#h85-0-81" id="h85-0-81" class="d">-func (x RpcError_ErrorCode) String() string {
</a><a href="#h85-0-82" id="h85-0-82" class="d">-	return proto.EnumName(RpcError_ErrorCode_name, int32(x))
</a><a href="#h85-0-83" id="h85-0-83" class="d">-}
</a><a href="#h85-0-84" id="h85-0-84" class="d">-func (x *RpcError_ErrorCode) UnmarshalJSON(data []byte) error {
</a><a href="#h85-0-85" id="h85-0-85" class="d">-	value, err := proto.UnmarshalJSONEnum(RpcError_ErrorCode_value, data, &quot;RpcError_ErrorCode&quot;)
</a><a href="#h85-0-86" id="h85-0-86" class="d">-	if err != nil {
</a><a href="#h85-0-87" id="h85-0-87" class="d">-		return err
</a><a href="#h85-0-88" id="h85-0-88" class="d">-	}
</a><a href="#h85-0-89" id="h85-0-89" class="d">-	*x = RpcError_ErrorCode(value)
</a><a href="#h85-0-90" id="h85-0-90" class="d">-	return nil
</a><a href="#h85-0-91" id="h85-0-91" class="d">-}
</a><a href="#h85-0-92" id="h85-0-92" class="d">-
</a><a href="#h85-0-93" id="h85-0-93" class="d">-type Request struct {
</a><a href="#h85-0-94" id="h85-0-94" class="d">-	ServiceName      *string `protobuf:&quot;bytes,2,req,name=service_name&quot; json:&quot;service_name,omitempty&quot;`
</a><a href="#h85-0-95" id="h85-0-95" class="d">-	Method           *string `protobuf:&quot;bytes,3,req,name=method&quot; json:&quot;method,omitempty&quot;`
</a><a href="#h85-0-96" id="h85-0-96" class="d">-	Request          []byte  `protobuf:&quot;bytes,4,req,name=request&quot; json:&quot;request,omitempty&quot;`
</a><a href="#h85-0-97" id="h85-0-97" class="d">-	RequestId        *string `protobuf:&quot;bytes,5,opt,name=request_id&quot; json:&quot;request_id,omitempty&quot;`
</a><a href="#h85-0-98" id="h85-0-98" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h85-0-99" id="h85-0-99" class="d">-}
</a><a href="#h85-0-100" id="h85-0-100" class="d">-
</a><a href="#h85-0-101" id="h85-0-101" class="d">-func (m *Request) Reset()         { *m = Request{} }
</a><a href="#h85-0-102" id="h85-0-102" class="d">-func (m *Request) String() string { return proto.CompactTextString(m) }
</a><a href="#h85-0-103" id="h85-0-103" class="d">-func (*Request) ProtoMessage()    {}
</a><a href="#h85-0-104" id="h85-0-104" class="d">-
</a><a href="#h85-0-105" id="h85-0-105" class="d">-func (m *Request) GetServiceName() string {
</a><a href="#h85-0-106" id="h85-0-106" class="d">-	if m != nil &amp;&amp; m.ServiceName != nil {
</a><a href="#h85-0-107" id="h85-0-107" class="d">-		return *m.ServiceName
</a><a href="#h85-0-108" id="h85-0-108" class="d">-	}
</a><a href="#h85-0-109" id="h85-0-109" class="d">-	return &quot;&quot;
</a><a href="#h85-0-110" id="h85-0-110" class="d">-}
</a><a href="#h85-0-111" id="h85-0-111" class="d">-
</a><a href="#h85-0-112" id="h85-0-112" class="d">-func (m *Request) GetMethod() string {
</a><a href="#h85-0-113" id="h85-0-113" class="d">-	if m != nil &amp;&amp; m.Method != nil {
</a><a href="#h85-0-114" id="h85-0-114" class="d">-		return *m.Method
</a><a href="#h85-0-115" id="h85-0-115" class="d">-	}
</a><a href="#h85-0-116" id="h85-0-116" class="d">-	return &quot;&quot;
</a><a href="#h85-0-117" id="h85-0-117" class="d">-}
</a><a href="#h85-0-118" id="h85-0-118" class="d">-
</a><a href="#h85-0-119" id="h85-0-119" class="d">-func (m *Request) GetRequest() []byte {
</a><a href="#h85-0-120" id="h85-0-120" class="d">-	if m != nil {
</a><a href="#h85-0-121" id="h85-0-121" class="d">-		return m.Request
</a><a href="#h85-0-122" id="h85-0-122" class="d">-	}
</a><a href="#h85-0-123" id="h85-0-123" class="d">-	return nil
</a><a href="#h85-0-124" id="h85-0-124" class="d">-}
</a><a href="#h85-0-125" id="h85-0-125" class="d">-
</a><a href="#h85-0-126" id="h85-0-126" class="d">-func (m *Request) GetRequestId() string {
</a><a href="#h85-0-127" id="h85-0-127" class="d">-	if m != nil &amp;&amp; m.RequestId != nil {
</a><a href="#h85-0-128" id="h85-0-128" class="d">-		return *m.RequestId
</a><a href="#h85-0-129" id="h85-0-129" class="d">-	}
</a><a href="#h85-0-130" id="h85-0-130" class="d">-	return &quot;&quot;
</a><a href="#h85-0-131" id="h85-0-131" class="d">-}
</a><a href="#h85-0-132" id="h85-0-132" class="d">-
</a><a href="#h85-0-133" id="h85-0-133" class="d">-type ApplicationError struct {
</a><a href="#h85-0-134" id="h85-0-134" class="d">-	Code             *int32  `protobuf:&quot;varint,1,req,name=code&quot; json:&quot;code,omitempty&quot;`
</a><a href="#h85-0-135" id="h85-0-135" class="d">-	Detail           *string `protobuf:&quot;bytes,2,req,name=detail&quot; json:&quot;detail,omitempty&quot;`
</a><a href="#h85-0-136" id="h85-0-136" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h85-0-137" id="h85-0-137" class="d">-}
</a><a href="#h85-0-138" id="h85-0-138" class="d">-
</a><a href="#h85-0-139" id="h85-0-139" class="d">-func (m *ApplicationError) Reset()         { *m = ApplicationError{} }
</a><a href="#h85-0-140" id="h85-0-140" class="d">-func (m *ApplicationError) String() string { return proto.CompactTextString(m) }
</a><a href="#h85-0-141" id="h85-0-141" class="d">-func (*ApplicationError) ProtoMessage()    {}
</a><a href="#h85-0-142" id="h85-0-142" class="d">-
</a><a href="#h85-0-143" id="h85-0-143" class="d">-func (m *ApplicationError) GetCode() int32 {
</a><a href="#h85-0-144" id="h85-0-144" class="d">-	if m != nil &amp;&amp; m.Code != nil {
</a><a href="#h85-0-145" id="h85-0-145" class="d">-		return *m.Code
</a><a href="#h85-0-146" id="h85-0-146" class="d">-	}
</a><a href="#h85-0-147" id="h85-0-147" class="d">-	return 0
</a><a href="#h85-0-148" id="h85-0-148" class="d">-}
</a><a href="#h85-0-149" id="h85-0-149" class="d">-
</a><a href="#h85-0-150" id="h85-0-150" class="d">-func (m *ApplicationError) GetDetail() string {
</a><a href="#h85-0-151" id="h85-0-151" class="d">-	if m != nil &amp;&amp; m.Detail != nil {
</a><a href="#h85-0-152" id="h85-0-152" class="d">-		return *m.Detail
</a><a href="#h85-0-153" id="h85-0-153" class="d">-	}
</a><a href="#h85-0-154" id="h85-0-154" class="d">-	return &quot;&quot;
</a><a href="#h85-0-155" id="h85-0-155" class="d">-}
</a><a href="#h85-0-156" id="h85-0-156" class="d">-
</a><a href="#h85-0-157" id="h85-0-157" class="d">-type RpcError struct {
</a><a href="#h85-0-158" id="h85-0-158" class="d">-	Code             *int32  `protobuf:&quot;varint,1,req,name=code&quot; json:&quot;code,omitempty&quot;`
</a><a href="#h85-0-159" id="h85-0-159" class="d">-	Detail           *string `protobuf:&quot;bytes,2,opt,name=detail&quot; json:&quot;detail,omitempty&quot;`
</a><a href="#h85-0-160" id="h85-0-160" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h85-0-161" id="h85-0-161" class="d">-}
</a><a href="#h85-0-162" id="h85-0-162" class="d">-
</a><a href="#h85-0-163" id="h85-0-163" class="d">-func (m *RpcError) Reset()         { *m = RpcError{} }
</a><a href="#h85-0-164" id="h85-0-164" class="d">-func (m *RpcError) String() string { return proto.CompactTextString(m) }
</a><a href="#h85-0-165" id="h85-0-165" class="d">-func (*RpcError) ProtoMessage()    {}
</a><a href="#h85-0-166" id="h85-0-166" class="d">-
</a><a href="#h85-0-167" id="h85-0-167" class="d">-func (m *RpcError) GetCode() int32 {
</a><a href="#h85-0-168" id="h85-0-168" class="d">-	if m != nil &amp;&amp; m.Code != nil {
</a><a href="#h85-0-169" id="h85-0-169" class="d">-		return *m.Code
</a><a href="#h85-0-170" id="h85-0-170" class="d">-	}
</a><a href="#h85-0-171" id="h85-0-171" class="d">-	return 0
</a><a href="#h85-0-172" id="h85-0-172" class="d">-}
</a><a href="#h85-0-173" id="h85-0-173" class="d">-
</a><a href="#h85-0-174" id="h85-0-174" class="d">-func (m *RpcError) GetDetail() string {
</a><a href="#h85-0-175" id="h85-0-175" class="d">-	if m != nil &amp;&amp; m.Detail != nil {
</a><a href="#h85-0-176" id="h85-0-176" class="d">-		return *m.Detail
</a><a href="#h85-0-177" id="h85-0-177" class="d">-	}
</a><a href="#h85-0-178" id="h85-0-178" class="d">-	return &quot;&quot;
</a><a href="#h85-0-179" id="h85-0-179" class="d">-}
</a><a href="#h85-0-180" id="h85-0-180" class="d">-
</a><a href="#h85-0-181" id="h85-0-181" class="d">-type Response struct {
</a><a href="#h85-0-182" id="h85-0-182" class="d">-	Response         []byte            `protobuf:&quot;bytes,1,opt,name=response&quot; json:&quot;response,omitempty&quot;`
</a><a href="#h85-0-183" id="h85-0-183" class="d">-	Exception        []byte            `protobuf:&quot;bytes,2,opt,name=exception&quot; json:&quot;exception,omitempty&quot;`
</a><a href="#h85-0-184" id="h85-0-184" class="d">-	ApplicationError *ApplicationError `protobuf:&quot;bytes,3,opt,name=application_error&quot; json:&quot;application_error,omitempty&quot;`
</a><a href="#h85-0-185" id="h85-0-185" class="d">-	JavaException    []byte            `protobuf:&quot;bytes,4,opt,name=java_exception&quot; json:&quot;java_exception,omitempty&quot;`
</a><a href="#h85-0-186" id="h85-0-186" class="d">-	RpcError         *RpcError         `protobuf:&quot;bytes,5,opt,name=rpc_error&quot; json:&quot;rpc_error,omitempty&quot;`
</a><a href="#h85-0-187" id="h85-0-187" class="d">-	XXX_unrecognized []byte            `json:&quot;-&quot;`
</a><a href="#h85-0-188" id="h85-0-188" class="d">-}
</a><a href="#h85-0-189" id="h85-0-189" class="d">-
</a><a href="#h85-0-190" id="h85-0-190" class="d">-func (m *Response) Reset()         { *m = Response{} }
</a><a href="#h85-0-191" id="h85-0-191" class="d">-func (m *Response) String() string { return proto.CompactTextString(m) }
</a><a href="#h85-0-192" id="h85-0-192" class="d">-func (*Response) ProtoMessage()    {}
</a><a href="#h85-0-193" id="h85-0-193" class="d">-
</a><a href="#h85-0-194" id="h85-0-194" class="d">-func (m *Response) GetResponse() []byte {
</a><a href="#h85-0-195" id="h85-0-195" class="d">-	if m != nil {
</a><a href="#h85-0-196" id="h85-0-196" class="d">-		return m.Response
</a><a href="#h85-0-197" id="h85-0-197" class="d">-	}
</a><a href="#h85-0-198" id="h85-0-198" class="d">-	return nil
</a><a href="#h85-0-199" id="h85-0-199" class="d">-}
</a><a href="#h85-0-200" id="h85-0-200" class="d">-
</a><a href="#h85-0-201" id="h85-0-201" class="d">-func (m *Response) GetException() []byte {
</a><a href="#h85-0-202" id="h85-0-202" class="d">-	if m != nil {
</a><a href="#h85-0-203" id="h85-0-203" class="d">-		return m.Exception
</a><a href="#h85-0-204" id="h85-0-204" class="d">-	}
</a><a href="#h85-0-205" id="h85-0-205" class="d">-	return nil
</a><a href="#h85-0-206" id="h85-0-206" class="d">-}
</a><a href="#h85-0-207" id="h85-0-207" class="d">-
</a><a href="#h85-0-208" id="h85-0-208" class="d">-func (m *Response) GetApplicationError() *ApplicationError {
</a><a href="#h85-0-209" id="h85-0-209" class="d">-	if m != nil {
</a><a href="#h85-0-210" id="h85-0-210" class="d">-		return m.ApplicationError
</a><a href="#h85-0-211" id="h85-0-211" class="d">-	}
</a><a href="#h85-0-212" id="h85-0-212" class="d">-	return nil
</a><a href="#h85-0-213" id="h85-0-213" class="d">-}
</a><a href="#h85-0-214" id="h85-0-214" class="d">-
</a><a href="#h85-0-215" id="h85-0-215" class="d">-func (m *Response) GetJavaException() []byte {
</a><a href="#h85-0-216" id="h85-0-216" class="d">-	if m != nil {
</a><a href="#h85-0-217" id="h85-0-217" class="d">-		return m.JavaException
</a><a href="#h85-0-218" id="h85-0-218" class="d">-	}
</a><a href="#h85-0-219" id="h85-0-219" class="d">-	return nil
</a><a href="#h85-0-220" id="h85-0-220" class="d">-}
</a><a href="#h85-0-221" id="h85-0-221" class="d">-
</a><a href="#h85-0-222" id="h85-0-222" class="d">-func (m *Response) GetRpcError() *RpcError {
</a><a href="#h85-0-223" id="h85-0-223" class="d">-	if m != nil {
</a><a href="#h85-0-224" id="h85-0-224" class="d">-		return m.RpcError
</a><a href="#h85-0-225" id="h85-0-225" class="d">-	}
</a><a href="#h85-0-226" id="h85-0-226" class="d">-	return nil
</a><a href="#h85-0-227" id="h85-0-227" class="d">-}
</a><a href="#h85-0-228" id="h85-0-228" class="d">-
</a><a href="#h85-0-229" id="h85-0-229" class="d">-func init() {
</a><a href="#h85-0-230" id="h85-0-230" class="d">-}
</a><b>diff --git a/<a id="h86" href="../file/vendor/google.golang.org/appengine/internal/remote_api/remote_api.proto">vendor/google.golang.org/appengine/internal/remote_api/remote_api.proto</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/remote_api/remote_api.proto">vendor/google.golang.org/appengine/internal/remote_api/remote_api.proto</a></b>
<a href="#h86-0" id="h86-0" class="h">@@ -1,44 +0,0 @@
</a><a href="#h86-0-0" id="h86-0-0" class="d">-syntax = &quot;proto2&quot;;
</a><a href="#h86-0-1" id="h86-0-1" class="d">-option go_package = &quot;remote_api&quot;;
</a><a href="#h86-0-2" id="h86-0-2" class="d">-
</a><a href="#h86-0-3" id="h86-0-3" class="d">-package remote_api;
</a><a href="#h86-0-4" id="h86-0-4" class="d">-
</a><a href="#h86-0-5" id="h86-0-5" class="d">-message Request {
</a><a href="#h86-0-6" id="h86-0-6" class="d">-  required string service_name = 2;
</a><a href="#h86-0-7" id="h86-0-7" class="d">-  required string method = 3;
</a><a href="#h86-0-8" id="h86-0-8" class="d">-  required bytes request = 4;
</a><a href="#h86-0-9" id="h86-0-9" class="d">-  optional string request_id = 5;
</a><a href="#h86-0-10" id="h86-0-10" class="d">-}
</a><a href="#h86-0-11" id="h86-0-11" class="d">-
</a><a href="#h86-0-12" id="h86-0-12" class="d">-message ApplicationError {
</a><a href="#h86-0-13" id="h86-0-13" class="d">-  required int32 code = 1;
</a><a href="#h86-0-14" id="h86-0-14" class="d">-  required string detail = 2;
</a><a href="#h86-0-15" id="h86-0-15" class="d">-}
</a><a href="#h86-0-16" id="h86-0-16" class="d">-
</a><a href="#h86-0-17" id="h86-0-17" class="d">-message RpcError {
</a><a href="#h86-0-18" id="h86-0-18" class="d">-  enum ErrorCode {
</a><a href="#h86-0-19" id="h86-0-19" class="d">-    UNKNOWN = 0;
</a><a href="#h86-0-20" id="h86-0-20" class="d">-    CALL_NOT_FOUND = 1;
</a><a href="#h86-0-21" id="h86-0-21" class="d">-    PARSE_ERROR = 2;
</a><a href="#h86-0-22" id="h86-0-22" class="d">-    SECURITY_VIOLATION = 3;
</a><a href="#h86-0-23" id="h86-0-23" class="d">-    OVER_QUOTA = 4;
</a><a href="#h86-0-24" id="h86-0-24" class="d">-    REQUEST_TOO_LARGE = 5;
</a><a href="#h86-0-25" id="h86-0-25" class="d">-    CAPABILITY_DISABLED = 6;
</a><a href="#h86-0-26" id="h86-0-26" class="d">-    FEATURE_DISABLED = 7;
</a><a href="#h86-0-27" id="h86-0-27" class="d">-    BAD_REQUEST = 8;
</a><a href="#h86-0-28" id="h86-0-28" class="d">-    RESPONSE_TOO_LARGE = 9;
</a><a href="#h86-0-29" id="h86-0-29" class="d">-    CANCELLED = 10;
</a><a href="#h86-0-30" id="h86-0-30" class="d">-    REPLAY_ERROR = 11;
</a><a href="#h86-0-31" id="h86-0-31" class="d">-    DEADLINE_EXCEEDED = 12;
</a><a href="#h86-0-32" id="h86-0-32" class="d">-  }
</a><a href="#h86-0-33" id="h86-0-33" class="d">-  required int32 code = 1;
</a><a href="#h86-0-34" id="h86-0-34" class="d">-  optional string detail = 2;
</a><a href="#h86-0-35" id="h86-0-35" class="d">-}
</a><a href="#h86-0-36" id="h86-0-36" class="d">-
</a><a href="#h86-0-37" id="h86-0-37" class="d">-message Response {
</a><a href="#h86-0-38" id="h86-0-38" class="d">-  optional bytes response = 1;
</a><a href="#h86-0-39" id="h86-0-39" class="d">-  optional bytes exception = 2;
</a><a href="#h86-0-40" id="h86-0-40" class="d">-  optional ApplicationError application_error = 3;
</a><a href="#h86-0-41" id="h86-0-41" class="d">-  optional bytes java_exception = 4;
</a><a href="#h86-0-42" id="h86-0-42" class="d">-  optional RpcError rpc_error = 5;
</a><a href="#h86-0-43" id="h86-0-43" class="d">-}
</a><b>diff --git a/<a id="h87" href="../file/vendor/google.golang.org/appengine/internal/transaction.go">vendor/google.golang.org/appengine/internal/transaction.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/transaction.go">vendor/google.golang.org/appengine/internal/transaction.go</a></b>
<a href="#h87-0" id="h87-0" class="h">@@ -1,107 +0,0 @@
</a><a href="#h87-0-0" id="h87-0-0" class="d">-// Copyright 2014 Google Inc. All rights reserved.
</a><a href="#h87-0-1" id="h87-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h87-0-2" id="h87-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h87-0-3" id="h87-0-3" class="d">-
</a><a href="#h87-0-4" id="h87-0-4" class="d">-package internal
</a><a href="#h87-0-5" id="h87-0-5" class="d">-
</a><a href="#h87-0-6" id="h87-0-6" class="d">-// This file implements hooks for applying datastore transactions.
</a><a href="#h87-0-7" id="h87-0-7" class="d">-
</a><a href="#h87-0-8" id="h87-0-8" class="d">-import (
</a><a href="#h87-0-9" id="h87-0-9" class="d">-	&quot;errors&quot;
</a><a href="#h87-0-10" id="h87-0-10" class="d">-	&quot;reflect&quot;
</a><a href="#h87-0-11" id="h87-0-11" class="d">-
</a><a href="#h87-0-12" id="h87-0-12" class="d">-	&quot;github.com/golang/protobuf/proto&quot;
</a><a href="#h87-0-13" id="h87-0-13" class="d">-	netcontext &quot;golang.org/x/net/context&quot;
</a><a href="#h87-0-14" id="h87-0-14" class="d">-
</a><a href="#h87-0-15" id="h87-0-15" class="d">-	basepb &quot;google.golang.org/appengine/internal/base&quot;
</a><a href="#h87-0-16" id="h87-0-16" class="d">-	pb &quot;google.golang.org/appengine/internal/datastore&quot;
</a><a href="#h87-0-17" id="h87-0-17" class="d">-)
</a><a href="#h87-0-18" id="h87-0-18" class="d">-
</a><a href="#h87-0-19" id="h87-0-19" class="d">-var transactionSetters = make(map[reflect.Type]reflect.Value)
</a><a href="#h87-0-20" id="h87-0-20" class="d">-
</a><a href="#h87-0-21" id="h87-0-21" class="d">-// RegisterTransactionSetter registers a function that sets transaction information
</a><a href="#h87-0-22" id="h87-0-22" class="d">-// in a protocol buffer message. f should be a function with two arguments,
</a><a href="#h87-0-23" id="h87-0-23" class="d">-// the first being a protocol buffer type, and the second being *datastore.Transaction.
</a><a href="#h87-0-24" id="h87-0-24" class="d">-func RegisterTransactionSetter(f interface{}) {
</a><a href="#h87-0-25" id="h87-0-25" class="d">-	v := reflect.ValueOf(f)
</a><a href="#h87-0-26" id="h87-0-26" class="d">-	transactionSetters[v.Type().In(0)] = v
</a><a href="#h87-0-27" id="h87-0-27" class="d">-}
</a><a href="#h87-0-28" id="h87-0-28" class="d">-
</a><a href="#h87-0-29" id="h87-0-29" class="d">-// applyTransaction applies the transaction t to message pb
</a><a href="#h87-0-30" id="h87-0-30" class="d">-// by using the relevant setter passed to RegisterTransactionSetter.
</a><a href="#h87-0-31" id="h87-0-31" class="d">-func applyTransaction(pb proto.Message, t *pb.Transaction) {
</a><a href="#h87-0-32" id="h87-0-32" class="d">-	v := reflect.ValueOf(pb)
</a><a href="#h87-0-33" id="h87-0-33" class="d">-	if f, ok := transactionSetters[v.Type()]; ok {
</a><a href="#h87-0-34" id="h87-0-34" class="d">-		f.Call([]reflect.Value{v, reflect.ValueOf(t)})
</a><a href="#h87-0-35" id="h87-0-35" class="d">-	}
</a><a href="#h87-0-36" id="h87-0-36" class="d">-}
</a><a href="#h87-0-37" id="h87-0-37" class="d">-
</a><a href="#h87-0-38" id="h87-0-38" class="d">-var transactionKey = &quot;used for *Transaction&quot;
</a><a href="#h87-0-39" id="h87-0-39" class="d">-
</a><a href="#h87-0-40" id="h87-0-40" class="d">-func transactionFromContext(ctx netcontext.Context) *transaction {
</a><a href="#h87-0-41" id="h87-0-41" class="d">-	t, _ := ctx.Value(&amp;transactionKey).(*transaction)
</a><a href="#h87-0-42" id="h87-0-42" class="d">-	return t
</a><a href="#h87-0-43" id="h87-0-43" class="d">-}
</a><a href="#h87-0-44" id="h87-0-44" class="d">-
</a><a href="#h87-0-45" id="h87-0-45" class="d">-func withTransaction(ctx netcontext.Context, t *transaction) netcontext.Context {
</a><a href="#h87-0-46" id="h87-0-46" class="d">-	return netcontext.WithValue(ctx, &amp;transactionKey, t)
</a><a href="#h87-0-47" id="h87-0-47" class="d">-}
</a><a href="#h87-0-48" id="h87-0-48" class="d">-
</a><a href="#h87-0-49" id="h87-0-49" class="d">-type transaction struct {
</a><a href="#h87-0-50" id="h87-0-50" class="d">-	transaction pb.Transaction
</a><a href="#h87-0-51" id="h87-0-51" class="d">-	finished    bool
</a><a href="#h87-0-52" id="h87-0-52" class="d">-}
</a><a href="#h87-0-53" id="h87-0-53" class="d">-
</a><a href="#h87-0-54" id="h87-0-54" class="d">-var ErrConcurrentTransaction = errors.New(&quot;internal: concurrent transaction&quot;)
</a><a href="#h87-0-55" id="h87-0-55" class="d">-
</a><a href="#h87-0-56" id="h87-0-56" class="d">-func RunTransactionOnce(c netcontext.Context, f func(netcontext.Context) error, xg bool) error {
</a><a href="#h87-0-57" id="h87-0-57" class="d">-	if transactionFromContext(c) != nil {
</a><a href="#h87-0-58" id="h87-0-58" class="d">-		return errors.New(&quot;nested transactions are not supported&quot;)
</a><a href="#h87-0-59" id="h87-0-59" class="d">-	}
</a><a href="#h87-0-60" id="h87-0-60" class="d">-
</a><a href="#h87-0-61" id="h87-0-61" class="d">-	// Begin the transaction.
</a><a href="#h87-0-62" id="h87-0-62" class="d">-	t := &amp;transaction{}
</a><a href="#h87-0-63" id="h87-0-63" class="d">-	req := &amp;pb.BeginTransactionRequest{
</a><a href="#h87-0-64" id="h87-0-64" class="d">-		App: proto.String(FullyQualifiedAppID(c)),
</a><a href="#h87-0-65" id="h87-0-65" class="d">-	}
</a><a href="#h87-0-66" id="h87-0-66" class="d">-	if xg {
</a><a href="#h87-0-67" id="h87-0-67" class="d">-		req.AllowMultipleEg = proto.Bool(true)
</a><a href="#h87-0-68" id="h87-0-68" class="d">-	}
</a><a href="#h87-0-69" id="h87-0-69" class="d">-	if err := Call(c, &quot;datastore_v3&quot;, &quot;BeginTransaction&quot;, req, &amp;t.transaction); err != nil {
</a><a href="#h87-0-70" id="h87-0-70" class="d">-		return err
</a><a href="#h87-0-71" id="h87-0-71" class="d">-	}
</a><a href="#h87-0-72" id="h87-0-72" class="d">-
</a><a href="#h87-0-73" id="h87-0-73" class="d">-	// Call f, rolling back the transaction if f returns a non-nil error, or panics.
</a><a href="#h87-0-74" id="h87-0-74" class="d">-	// The panic is not recovered.
</a><a href="#h87-0-75" id="h87-0-75" class="d">-	defer func() {
</a><a href="#h87-0-76" id="h87-0-76" class="d">-		if t.finished {
</a><a href="#h87-0-77" id="h87-0-77" class="d">-			return
</a><a href="#h87-0-78" id="h87-0-78" class="d">-		}
</a><a href="#h87-0-79" id="h87-0-79" class="d">-		t.finished = true
</a><a href="#h87-0-80" id="h87-0-80" class="d">-		// Ignore the error return value, since we are already returning a non-nil
</a><a href="#h87-0-81" id="h87-0-81" class="d">-		// error (or we&#39;re panicking).
</a><a href="#h87-0-82" id="h87-0-82" class="d">-		Call(c, &quot;datastore_v3&quot;, &quot;Rollback&quot;, &amp;t.transaction, &amp;basepb.VoidProto{})
</a><a href="#h87-0-83" id="h87-0-83" class="d">-	}()
</a><a href="#h87-0-84" id="h87-0-84" class="d">-	if err := f(withTransaction(c, t)); err != nil {
</a><a href="#h87-0-85" id="h87-0-85" class="d">-		return err
</a><a href="#h87-0-86" id="h87-0-86" class="d">-	}
</a><a href="#h87-0-87" id="h87-0-87" class="d">-	t.finished = true
</a><a href="#h87-0-88" id="h87-0-88" class="d">-
</a><a href="#h87-0-89" id="h87-0-89" class="d">-	// Commit the transaction.
</a><a href="#h87-0-90" id="h87-0-90" class="d">-	res := &amp;pb.CommitResponse{}
</a><a href="#h87-0-91" id="h87-0-91" class="d">-	err := Call(c, &quot;datastore_v3&quot;, &quot;Commit&quot;, &amp;t.transaction, res)
</a><a href="#h87-0-92" id="h87-0-92" class="d">-	if ae, ok := err.(*APIError); ok {
</a><a href="#h87-0-93" id="h87-0-93" class="d">-		/* TODO: restore this conditional
</a><a href="#h87-0-94" id="h87-0-94" class="d">-		if appengine.IsDevAppServer() {
</a><a href="#h87-0-95" id="h87-0-95" class="d">-		*/
</a><a href="#h87-0-96" id="h87-0-96" class="d">-		// The Python Dev AppServer raises an ApplicationError with error code 2 (which is
</a><a href="#h87-0-97" id="h87-0-97" class="d">-		// Error.CONCURRENT_TRANSACTION) and message &quot;Concurrency exception.&quot;.
</a><a href="#h87-0-98" id="h87-0-98" class="d">-		if ae.Code == int32(pb.Error_BAD_REQUEST) &amp;&amp; ae.Detail == &quot;ApplicationError: 2 Concurrency exception.&quot; {
</a><a href="#h87-0-99" id="h87-0-99" class="d">-			return ErrConcurrentTransaction
</a><a href="#h87-0-100" id="h87-0-100" class="d">-		}
</a><a href="#h87-0-101" id="h87-0-101" class="d">-		if ae.Code == int32(pb.Error_CONCURRENT_TRANSACTION) {
</a><a href="#h87-0-102" id="h87-0-102" class="d">-			return ErrConcurrentTransaction
</a><a href="#h87-0-103" id="h87-0-103" class="d">-		}
</a><a href="#h87-0-104" id="h87-0-104" class="d">-	}
</a><a href="#h87-0-105" id="h87-0-105" class="d">-	return err
</a><a href="#h87-0-106" id="h87-0-106" class="d">-}
</a><b>diff --git a/<a id="h88" href="../file/vendor/google.golang.org/appengine/internal/urlfetch/BUILD">vendor/google.golang.org/appengine/internal/urlfetch/BUILD</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/urlfetch/BUILD">vendor/google.golang.org/appengine/internal/urlfetch/BUILD</a></b>
<a href="#h88-0" id="h88-0" class="h">@@ -1,19 +0,0 @@
</a><a href="#h88-0-0" id="h88-0-0" class="d">-
</a><a href="#h88-0-1" id="h88-0-1" class="d">-load(&quot;@io_bazel_rules_go//go:def.bzl&quot;,
</a><a href="#h88-0-2" id="h88-0-2" class="d">-  &quot;go_binary&quot;,
</a><a href="#h88-0-3" id="h88-0-3" class="d">-  &quot;go_library&quot;,
</a><a href="#h88-0-4" id="h88-0-4" class="d">-  &quot;go_test&quot;,
</a><a href="#h88-0-5" id="h88-0-5" class="d">-)
</a><a href="#h88-0-6" id="h88-0-6" class="d">-
</a><a href="#h88-0-7" id="h88-0-7" class="d">-go_library(
</a><a href="#h88-0-8" id="h88-0-8" class="d">-name = &quot;go_default_library&quot;,
</a><a href="#h88-0-9" id="h88-0-9" class="d">-  srcs = [
</a><a href="#h88-0-10" id="h88-0-10" class="d">-    &quot;urlfetch_service.pb.go&quot;,
</a><a href="#h88-0-11" id="h88-0-11" class="d">-  ],
</a><a href="#h88-0-12" id="h88-0-12" class="d">-  deps = [
</a><a href="#h88-0-13" id="h88-0-13" class="d">-    &quot;//vendor/github.com/golang/protobuf/proto:go_default_library&quot;,
</a><a href="#h88-0-14" id="h88-0-14" class="d">-  ],
</a><a href="#h88-0-15" id="h88-0-15" class="d">-  visibility = [&quot;//visibility:public&quot;],
</a><a href="#h88-0-16" id="h88-0-16" class="d">-)
</a><a href="#h88-0-17" id="h88-0-17" class="d">-
</a><a href="#h88-0-18" id="h88-0-18" class="d">-
</a><b>diff --git a/<a id="h89" href="../file/vendor/google.golang.org/appengine/internal/urlfetch/urlfetch_service.pb.go">vendor/google.golang.org/appengine/internal/urlfetch/urlfetch_service.pb.go</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/urlfetch/urlfetch_service.pb.go">vendor/google.golang.org/appengine/internal/urlfetch/urlfetch_service.pb.go</a></b>
<a href="#h89-0" id="h89-0" class="h">@@ -1,355 +0,0 @@
</a><a href="#h89-0-0" id="h89-0-0" class="d">-// Code generated by protoc-gen-go.
</a><a href="#h89-0-1" id="h89-0-1" class="d">-// source: google.golang.org/appengine/internal/urlfetch/urlfetch_service.proto
</a><a href="#h89-0-2" id="h89-0-2" class="d">-// DO NOT EDIT!
</a><a href="#h89-0-3" id="h89-0-3" class="d">-
</a><a href="#h89-0-4" id="h89-0-4" class="d">-/*
</a><a href="#h89-0-5" id="h89-0-5" class="d">-Package urlfetch is a generated protocol buffer package.
</a><a href="#h89-0-6" id="h89-0-6" class="d">-
</a><a href="#h89-0-7" id="h89-0-7" class="d">-It is generated from these files:
</a><a href="#h89-0-8" id="h89-0-8" class="d">-	google.golang.org/appengine/internal/urlfetch/urlfetch_service.proto
</a><a href="#h89-0-9" id="h89-0-9" class="d">-
</a><a href="#h89-0-10" id="h89-0-10" class="d">-It has these top-level messages:
</a><a href="#h89-0-11" id="h89-0-11" class="d">-	URLFetchServiceError
</a><a href="#h89-0-12" id="h89-0-12" class="d">-	URLFetchRequest
</a><a href="#h89-0-13" id="h89-0-13" class="d">-	URLFetchResponse
</a><a href="#h89-0-14" id="h89-0-14" class="d">-*/
</a><a href="#h89-0-15" id="h89-0-15" class="d">-package urlfetch
</a><a href="#h89-0-16" id="h89-0-16" class="d">-
</a><a href="#h89-0-17" id="h89-0-17" class="d">-import proto &quot;github.com/golang/protobuf/proto&quot;
</a><a href="#h89-0-18" id="h89-0-18" class="d">-import fmt &quot;fmt&quot;
</a><a href="#h89-0-19" id="h89-0-19" class="d">-import math &quot;math&quot;
</a><a href="#h89-0-20" id="h89-0-20" class="d">-
</a><a href="#h89-0-21" id="h89-0-21" class="d">-// Reference imports to suppress errors if they are not otherwise used.
</a><a href="#h89-0-22" id="h89-0-22" class="d">-var _ = proto.Marshal
</a><a href="#h89-0-23" id="h89-0-23" class="d">-var _ = fmt.Errorf
</a><a href="#h89-0-24" id="h89-0-24" class="d">-var _ = math.Inf
</a><a href="#h89-0-25" id="h89-0-25" class="d">-
</a><a href="#h89-0-26" id="h89-0-26" class="d">-type URLFetchServiceError_ErrorCode int32
</a><a href="#h89-0-27" id="h89-0-27" class="d">-
</a><a href="#h89-0-28" id="h89-0-28" class="d">-const (
</a><a href="#h89-0-29" id="h89-0-29" class="d">-	URLFetchServiceError_OK                       URLFetchServiceError_ErrorCode = 0
</a><a href="#h89-0-30" id="h89-0-30" class="d">-	URLFetchServiceError_INVALID_URL              URLFetchServiceError_ErrorCode = 1
</a><a href="#h89-0-31" id="h89-0-31" class="d">-	URLFetchServiceError_FETCH_ERROR              URLFetchServiceError_ErrorCode = 2
</a><a href="#h89-0-32" id="h89-0-32" class="d">-	URLFetchServiceError_UNSPECIFIED_ERROR        URLFetchServiceError_ErrorCode = 3
</a><a href="#h89-0-33" id="h89-0-33" class="d">-	URLFetchServiceError_RESPONSE_TOO_LARGE       URLFetchServiceError_ErrorCode = 4
</a><a href="#h89-0-34" id="h89-0-34" class="d">-	URLFetchServiceError_DEADLINE_EXCEEDED        URLFetchServiceError_ErrorCode = 5
</a><a href="#h89-0-35" id="h89-0-35" class="d">-	URLFetchServiceError_SSL_CERTIFICATE_ERROR    URLFetchServiceError_ErrorCode = 6
</a><a href="#h89-0-36" id="h89-0-36" class="d">-	URLFetchServiceError_DNS_ERROR                URLFetchServiceError_ErrorCode = 7
</a><a href="#h89-0-37" id="h89-0-37" class="d">-	URLFetchServiceError_CLOSED                   URLFetchServiceError_ErrorCode = 8
</a><a href="#h89-0-38" id="h89-0-38" class="d">-	URLFetchServiceError_INTERNAL_TRANSIENT_ERROR URLFetchServiceError_ErrorCode = 9
</a><a href="#h89-0-39" id="h89-0-39" class="d">-	URLFetchServiceError_TOO_MANY_REDIRECTS       URLFetchServiceError_ErrorCode = 10
</a><a href="#h89-0-40" id="h89-0-40" class="d">-	URLFetchServiceError_MALFORMED_REPLY          URLFetchServiceError_ErrorCode = 11
</a><a href="#h89-0-41" id="h89-0-41" class="d">-	URLFetchServiceError_CONNECTION_ERROR         URLFetchServiceError_ErrorCode = 12
</a><a href="#h89-0-42" id="h89-0-42" class="d">-)
</a><a href="#h89-0-43" id="h89-0-43" class="d">-
</a><a href="#h89-0-44" id="h89-0-44" class="d">-var URLFetchServiceError_ErrorCode_name = map[int32]string{
</a><a href="#h89-0-45" id="h89-0-45" class="d">-	0:  &quot;OK&quot;,
</a><a href="#h89-0-46" id="h89-0-46" class="d">-	1:  &quot;INVALID_URL&quot;,
</a><a href="#h89-0-47" id="h89-0-47" class="d">-	2:  &quot;FETCH_ERROR&quot;,
</a><a href="#h89-0-48" id="h89-0-48" class="d">-	3:  &quot;UNSPECIFIED_ERROR&quot;,
</a><a href="#h89-0-49" id="h89-0-49" class="d">-	4:  &quot;RESPONSE_TOO_LARGE&quot;,
</a><a href="#h89-0-50" id="h89-0-50" class="d">-	5:  &quot;DEADLINE_EXCEEDED&quot;,
</a><a href="#h89-0-51" id="h89-0-51" class="d">-	6:  &quot;SSL_CERTIFICATE_ERROR&quot;,
</a><a href="#h89-0-52" id="h89-0-52" class="d">-	7:  &quot;DNS_ERROR&quot;,
</a><a href="#h89-0-53" id="h89-0-53" class="d">-	8:  &quot;CLOSED&quot;,
</a><a href="#h89-0-54" id="h89-0-54" class="d">-	9:  &quot;INTERNAL_TRANSIENT_ERROR&quot;,
</a><a href="#h89-0-55" id="h89-0-55" class="d">-	10: &quot;TOO_MANY_REDIRECTS&quot;,
</a><a href="#h89-0-56" id="h89-0-56" class="d">-	11: &quot;MALFORMED_REPLY&quot;,
</a><a href="#h89-0-57" id="h89-0-57" class="d">-	12: &quot;CONNECTION_ERROR&quot;,
</a><a href="#h89-0-58" id="h89-0-58" class="d">-}
</a><a href="#h89-0-59" id="h89-0-59" class="d">-var URLFetchServiceError_ErrorCode_value = map[string]int32{
</a><a href="#h89-0-60" id="h89-0-60" class="d">-	&quot;OK&quot;:                       0,
</a><a href="#h89-0-61" id="h89-0-61" class="d">-	&quot;INVALID_URL&quot;:              1,
</a><a href="#h89-0-62" id="h89-0-62" class="d">-	&quot;FETCH_ERROR&quot;:              2,
</a><a href="#h89-0-63" id="h89-0-63" class="d">-	&quot;UNSPECIFIED_ERROR&quot;:        3,
</a><a href="#h89-0-64" id="h89-0-64" class="d">-	&quot;RESPONSE_TOO_LARGE&quot;:       4,
</a><a href="#h89-0-65" id="h89-0-65" class="d">-	&quot;DEADLINE_EXCEEDED&quot;:        5,
</a><a href="#h89-0-66" id="h89-0-66" class="d">-	&quot;SSL_CERTIFICATE_ERROR&quot;:    6,
</a><a href="#h89-0-67" id="h89-0-67" class="d">-	&quot;DNS_ERROR&quot;:                7,
</a><a href="#h89-0-68" id="h89-0-68" class="d">-	&quot;CLOSED&quot;:                   8,
</a><a href="#h89-0-69" id="h89-0-69" class="d">-	&quot;INTERNAL_TRANSIENT_ERROR&quot;: 9,
</a><a href="#h89-0-70" id="h89-0-70" class="d">-	&quot;TOO_MANY_REDIRECTS&quot;:       10,
</a><a href="#h89-0-71" id="h89-0-71" class="d">-	&quot;MALFORMED_REPLY&quot;:          11,
</a><a href="#h89-0-72" id="h89-0-72" class="d">-	&quot;CONNECTION_ERROR&quot;:         12,
</a><a href="#h89-0-73" id="h89-0-73" class="d">-}
</a><a href="#h89-0-74" id="h89-0-74" class="d">-
</a><a href="#h89-0-75" id="h89-0-75" class="d">-func (x URLFetchServiceError_ErrorCode) Enum() *URLFetchServiceError_ErrorCode {
</a><a href="#h89-0-76" id="h89-0-76" class="d">-	p := new(URLFetchServiceError_ErrorCode)
</a><a href="#h89-0-77" id="h89-0-77" class="d">-	*p = x
</a><a href="#h89-0-78" id="h89-0-78" class="d">-	return p
</a><a href="#h89-0-79" id="h89-0-79" class="d">-}
</a><a href="#h89-0-80" id="h89-0-80" class="d">-func (x URLFetchServiceError_ErrorCode) String() string {
</a><a href="#h89-0-81" id="h89-0-81" class="d">-	return proto.EnumName(URLFetchServiceError_ErrorCode_name, int32(x))
</a><a href="#h89-0-82" id="h89-0-82" class="d">-}
</a><a href="#h89-0-83" id="h89-0-83" class="d">-func (x *URLFetchServiceError_ErrorCode) UnmarshalJSON(data []byte) error {
</a><a href="#h89-0-84" id="h89-0-84" class="d">-	value, err := proto.UnmarshalJSONEnum(URLFetchServiceError_ErrorCode_value, data, &quot;URLFetchServiceError_ErrorCode&quot;)
</a><a href="#h89-0-85" id="h89-0-85" class="d">-	if err != nil {
</a><a href="#h89-0-86" id="h89-0-86" class="d">-		return err
</a><a href="#h89-0-87" id="h89-0-87" class="d">-	}
</a><a href="#h89-0-88" id="h89-0-88" class="d">-	*x = URLFetchServiceError_ErrorCode(value)
</a><a href="#h89-0-89" id="h89-0-89" class="d">-	return nil
</a><a href="#h89-0-90" id="h89-0-90" class="d">-}
</a><a href="#h89-0-91" id="h89-0-91" class="d">-
</a><a href="#h89-0-92" id="h89-0-92" class="d">-type URLFetchRequest_RequestMethod int32
</a><a href="#h89-0-93" id="h89-0-93" class="d">-
</a><a href="#h89-0-94" id="h89-0-94" class="d">-const (
</a><a href="#h89-0-95" id="h89-0-95" class="d">-	URLFetchRequest_GET    URLFetchRequest_RequestMethod = 1
</a><a href="#h89-0-96" id="h89-0-96" class="d">-	URLFetchRequest_POST   URLFetchRequest_RequestMethod = 2
</a><a href="#h89-0-97" id="h89-0-97" class="d">-	URLFetchRequest_HEAD   URLFetchRequest_RequestMethod = 3
</a><a href="#h89-0-98" id="h89-0-98" class="d">-	URLFetchRequest_PUT    URLFetchRequest_RequestMethod = 4
</a><a href="#h89-0-99" id="h89-0-99" class="d">-	URLFetchRequest_DELETE URLFetchRequest_RequestMethod = 5
</a><a href="#h89-0-100" id="h89-0-100" class="d">-	URLFetchRequest_PATCH  URLFetchRequest_RequestMethod = 6
</a><a href="#h89-0-101" id="h89-0-101" class="d">-)
</a><a href="#h89-0-102" id="h89-0-102" class="d">-
</a><a href="#h89-0-103" id="h89-0-103" class="d">-var URLFetchRequest_RequestMethod_name = map[int32]string{
</a><a href="#h89-0-104" id="h89-0-104" class="d">-	1: &quot;GET&quot;,
</a><a href="#h89-0-105" id="h89-0-105" class="d">-	2: &quot;POST&quot;,
</a><a href="#h89-0-106" id="h89-0-106" class="d">-	3: &quot;HEAD&quot;,
</a><a href="#h89-0-107" id="h89-0-107" class="d">-	4: &quot;PUT&quot;,
</a><a href="#h89-0-108" id="h89-0-108" class="d">-	5: &quot;DELETE&quot;,
</a><a href="#h89-0-109" id="h89-0-109" class="d">-	6: &quot;PATCH&quot;,
</a><a href="#h89-0-110" id="h89-0-110" class="d">-}
</a><a href="#h89-0-111" id="h89-0-111" class="d">-var URLFetchRequest_RequestMethod_value = map[string]int32{
</a><a href="#h89-0-112" id="h89-0-112" class="d">-	&quot;GET&quot;:    1,
</a><a href="#h89-0-113" id="h89-0-113" class="d">-	&quot;POST&quot;:   2,
</a><a href="#h89-0-114" id="h89-0-114" class="d">-	&quot;HEAD&quot;:   3,
</a><a href="#h89-0-115" id="h89-0-115" class="d">-	&quot;PUT&quot;:    4,
</a><a href="#h89-0-116" id="h89-0-116" class="d">-	&quot;DELETE&quot;: 5,
</a><a href="#h89-0-117" id="h89-0-117" class="d">-	&quot;PATCH&quot;:  6,
</a><a href="#h89-0-118" id="h89-0-118" class="d">-}
</a><a href="#h89-0-119" id="h89-0-119" class="d">-
</a><a href="#h89-0-120" id="h89-0-120" class="d">-func (x URLFetchRequest_RequestMethod) Enum() *URLFetchRequest_RequestMethod {
</a><a href="#h89-0-121" id="h89-0-121" class="d">-	p := new(URLFetchRequest_RequestMethod)
</a><a href="#h89-0-122" id="h89-0-122" class="d">-	*p = x
</a><a href="#h89-0-123" id="h89-0-123" class="d">-	return p
</a><a href="#h89-0-124" id="h89-0-124" class="d">-}
</a><a href="#h89-0-125" id="h89-0-125" class="d">-func (x URLFetchRequest_RequestMethod) String() string {
</a><a href="#h89-0-126" id="h89-0-126" class="d">-	return proto.EnumName(URLFetchRequest_RequestMethod_name, int32(x))
</a><a href="#h89-0-127" id="h89-0-127" class="d">-}
</a><a href="#h89-0-128" id="h89-0-128" class="d">-func (x *URLFetchRequest_RequestMethod) UnmarshalJSON(data []byte) error {
</a><a href="#h89-0-129" id="h89-0-129" class="d">-	value, err := proto.UnmarshalJSONEnum(URLFetchRequest_RequestMethod_value, data, &quot;URLFetchRequest_RequestMethod&quot;)
</a><a href="#h89-0-130" id="h89-0-130" class="d">-	if err != nil {
</a><a href="#h89-0-131" id="h89-0-131" class="d">-		return err
</a><a href="#h89-0-132" id="h89-0-132" class="d">-	}
</a><a href="#h89-0-133" id="h89-0-133" class="d">-	*x = URLFetchRequest_RequestMethod(value)
</a><a href="#h89-0-134" id="h89-0-134" class="d">-	return nil
</a><a href="#h89-0-135" id="h89-0-135" class="d">-}
</a><a href="#h89-0-136" id="h89-0-136" class="d">-
</a><a href="#h89-0-137" id="h89-0-137" class="d">-type URLFetchServiceError struct {
</a><a href="#h89-0-138" id="h89-0-138" class="d">-	XXX_unrecognized []byte `json:&quot;-&quot;`
</a><a href="#h89-0-139" id="h89-0-139" class="d">-}
</a><a href="#h89-0-140" id="h89-0-140" class="d">-
</a><a href="#h89-0-141" id="h89-0-141" class="d">-func (m *URLFetchServiceError) Reset()         { *m = URLFetchServiceError{} }
</a><a href="#h89-0-142" id="h89-0-142" class="d">-func (m *URLFetchServiceError) String() string { return proto.CompactTextString(m) }
</a><a href="#h89-0-143" id="h89-0-143" class="d">-func (*URLFetchServiceError) ProtoMessage()    {}
</a><a href="#h89-0-144" id="h89-0-144" class="d">-
</a><a href="#h89-0-145" id="h89-0-145" class="d">-type URLFetchRequest struct {
</a><a href="#h89-0-146" id="h89-0-146" class="d">-	Method                        *URLFetchRequest_RequestMethod `protobuf:&quot;varint,1,req,name=Method,enum=appengine.URLFetchRequest_RequestMethod&quot; json:&quot;Method,omitempty&quot;`
</a><a href="#h89-0-147" id="h89-0-147" class="d">-	Url                           *string                        `protobuf:&quot;bytes,2,req,name=Url&quot; json:&quot;Url,omitempty&quot;`
</a><a href="#h89-0-148" id="h89-0-148" class="d">-	Header                        []*URLFetchRequest_Header      `protobuf:&quot;group,3,rep,name=Header&quot; json:&quot;header,omitempty&quot;`
</a><a href="#h89-0-149" id="h89-0-149" class="d">-	Payload                       []byte                         `protobuf:&quot;bytes,6,opt,name=Payload&quot; json:&quot;Payload,omitempty&quot;`
</a><a href="#h89-0-150" id="h89-0-150" class="d">-	FollowRedirects               *bool                          `protobuf:&quot;varint,7,opt,name=FollowRedirects,def=1&quot; json:&quot;FollowRedirects,omitempty&quot;`
</a><a href="#h89-0-151" id="h89-0-151" class="d">-	Deadline                      *float64                       `protobuf:&quot;fixed64,8,opt,name=Deadline&quot; json:&quot;Deadline,omitempty&quot;`
</a><a href="#h89-0-152" id="h89-0-152" class="d">-	MustValidateServerCertificate *bool                          `protobuf:&quot;varint,9,opt,name=MustValidateServerCertificate,def=1&quot; json:&quot;MustValidateServerCertificate,omitempty&quot;`
</a><a href="#h89-0-153" id="h89-0-153" class="d">-	XXX_unrecognized              []byte                         `json:&quot;-&quot;`
</a><a href="#h89-0-154" id="h89-0-154" class="d">-}
</a><a href="#h89-0-155" id="h89-0-155" class="d">-
</a><a href="#h89-0-156" id="h89-0-156" class="d">-func (m *URLFetchRequest) Reset()         { *m = URLFetchRequest{} }
</a><a href="#h89-0-157" id="h89-0-157" class="d">-func (m *URLFetchRequest) String() string { return proto.CompactTextString(m) }
</a><a href="#h89-0-158" id="h89-0-158" class="d">-func (*URLFetchRequest) ProtoMessage()    {}
</a><a href="#h89-0-159" id="h89-0-159" class="d">-
</a><a href="#h89-0-160" id="h89-0-160" class="d">-const Default_URLFetchRequest_FollowRedirects bool = true
</a><a href="#h89-0-161" id="h89-0-161" class="d">-const Default_URLFetchRequest_MustValidateServerCertificate bool = true
</a><a href="#h89-0-162" id="h89-0-162" class="d">-
</a><a href="#h89-0-163" id="h89-0-163" class="d">-func (m *URLFetchRequest) GetMethod() URLFetchRequest_RequestMethod {
</a><a href="#h89-0-164" id="h89-0-164" class="d">-	if m != nil &amp;&amp; m.Method != nil {
</a><a href="#h89-0-165" id="h89-0-165" class="d">-		return *m.Method
</a><a href="#h89-0-166" id="h89-0-166" class="d">-	}
</a><a href="#h89-0-167" id="h89-0-167" class="d">-	return URLFetchRequest_GET
</a><a href="#h89-0-168" id="h89-0-168" class="d">-}
</a><a href="#h89-0-169" id="h89-0-169" class="d">-
</a><a href="#h89-0-170" id="h89-0-170" class="d">-func (m *URLFetchRequest) GetUrl() string {
</a><a href="#h89-0-171" id="h89-0-171" class="d">-	if m != nil &amp;&amp; m.Url != nil {
</a><a href="#h89-0-172" id="h89-0-172" class="d">-		return *m.Url
</a><a href="#h89-0-173" id="h89-0-173" class="d">-	}
</a><a href="#h89-0-174" id="h89-0-174" class="d">-	return &quot;&quot;
</a><a href="#h89-0-175" id="h89-0-175" class="d">-}
</a><a href="#h89-0-176" id="h89-0-176" class="d">-
</a><a href="#h89-0-177" id="h89-0-177" class="d">-func (m *URLFetchRequest) GetHeader() []*URLFetchRequest_Header {
</a><a href="#h89-0-178" id="h89-0-178" class="d">-	if m != nil {
</a><a href="#h89-0-179" id="h89-0-179" class="d">-		return m.Header
</a><a href="#h89-0-180" id="h89-0-180" class="d">-	}
</a><a href="#h89-0-181" id="h89-0-181" class="d">-	return nil
</a><a href="#h89-0-182" id="h89-0-182" class="d">-}
</a><a href="#h89-0-183" id="h89-0-183" class="d">-
</a><a href="#h89-0-184" id="h89-0-184" class="d">-func (m *URLFetchRequest) GetPayload() []byte {
</a><a href="#h89-0-185" id="h89-0-185" class="d">-	if m != nil {
</a><a href="#h89-0-186" id="h89-0-186" class="d">-		return m.Payload
</a><a href="#h89-0-187" id="h89-0-187" class="d">-	}
</a><a href="#h89-0-188" id="h89-0-188" class="d">-	return nil
</a><a href="#h89-0-189" id="h89-0-189" class="d">-}
</a><a href="#h89-0-190" id="h89-0-190" class="d">-
</a><a href="#h89-0-191" id="h89-0-191" class="d">-func (m *URLFetchRequest) GetFollowRedirects() bool {
</a><a href="#h89-0-192" id="h89-0-192" class="d">-	if m != nil &amp;&amp; m.FollowRedirects != nil {
</a><a href="#h89-0-193" id="h89-0-193" class="d">-		return *m.FollowRedirects
</a><a href="#h89-0-194" id="h89-0-194" class="d">-	}
</a><a href="#h89-0-195" id="h89-0-195" class="d">-	return Default_URLFetchRequest_FollowRedirects
</a><a href="#h89-0-196" id="h89-0-196" class="d">-}
</a><a href="#h89-0-197" id="h89-0-197" class="d">-
</a><a href="#h89-0-198" id="h89-0-198" class="d">-func (m *URLFetchRequest) GetDeadline() float64 {
</a><a href="#h89-0-199" id="h89-0-199" class="d">-	if m != nil &amp;&amp; m.Deadline != nil {
</a><a href="#h89-0-200" id="h89-0-200" class="d">-		return *m.Deadline
</a><a href="#h89-0-201" id="h89-0-201" class="d">-	}
</a><a href="#h89-0-202" id="h89-0-202" class="d">-	return 0
</a><a href="#h89-0-203" id="h89-0-203" class="d">-}
</a><a href="#h89-0-204" id="h89-0-204" class="d">-
</a><a href="#h89-0-205" id="h89-0-205" class="d">-func (m *URLFetchRequest) GetMustValidateServerCertificate() bool {
</a><a href="#h89-0-206" id="h89-0-206" class="d">-	if m != nil &amp;&amp; m.MustValidateServerCertificate != nil {
</a><a href="#h89-0-207" id="h89-0-207" class="d">-		return *m.MustValidateServerCertificate
</a><a href="#h89-0-208" id="h89-0-208" class="d">-	}
</a><a href="#h89-0-209" id="h89-0-209" class="d">-	return Default_URLFetchRequest_MustValidateServerCertificate
</a><a href="#h89-0-210" id="h89-0-210" class="d">-}
</a><a href="#h89-0-211" id="h89-0-211" class="d">-
</a><a href="#h89-0-212" id="h89-0-212" class="d">-type URLFetchRequest_Header struct {
</a><a href="#h89-0-213" id="h89-0-213" class="d">-	Key              *string `protobuf:&quot;bytes,4,req,name=Key&quot; json:&quot;Key,omitempty&quot;`
</a><a href="#h89-0-214" id="h89-0-214" class="d">-	Value            *string `protobuf:&quot;bytes,5,req,name=Value&quot; json:&quot;Value,omitempty&quot;`
</a><a href="#h89-0-215" id="h89-0-215" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h89-0-216" id="h89-0-216" class="d">-}
</a><a href="#h89-0-217" id="h89-0-217" class="d">-
</a><a href="#h89-0-218" id="h89-0-218" class="d">-func (m *URLFetchRequest_Header) Reset()         { *m = URLFetchRequest_Header{} }
</a><a href="#h89-0-219" id="h89-0-219" class="d">-func (m *URLFetchRequest_Header) String() string { return proto.CompactTextString(m) }
</a><a href="#h89-0-220" id="h89-0-220" class="d">-func (*URLFetchRequest_Header) ProtoMessage()    {}
</a><a href="#h89-0-221" id="h89-0-221" class="d">-
</a><a href="#h89-0-222" id="h89-0-222" class="d">-func (m *URLFetchRequest_Header) GetKey() string {
</a><a href="#h89-0-223" id="h89-0-223" class="d">-	if m != nil &amp;&amp; m.Key != nil {
</a><a href="#h89-0-224" id="h89-0-224" class="d">-		return *m.Key
</a><a href="#h89-0-225" id="h89-0-225" class="d">-	}
</a><a href="#h89-0-226" id="h89-0-226" class="d">-	return &quot;&quot;
</a><a href="#h89-0-227" id="h89-0-227" class="d">-}
</a><a href="#h89-0-228" id="h89-0-228" class="d">-
</a><a href="#h89-0-229" id="h89-0-229" class="d">-func (m *URLFetchRequest_Header) GetValue() string {
</a><a href="#h89-0-230" id="h89-0-230" class="d">-	if m != nil &amp;&amp; m.Value != nil {
</a><a href="#h89-0-231" id="h89-0-231" class="d">-		return *m.Value
</a><a href="#h89-0-232" id="h89-0-232" class="d">-	}
</a><a href="#h89-0-233" id="h89-0-233" class="d">-	return &quot;&quot;
</a><a href="#h89-0-234" id="h89-0-234" class="d">-}
</a><a href="#h89-0-235" id="h89-0-235" class="d">-
</a><a href="#h89-0-236" id="h89-0-236" class="d">-type URLFetchResponse struct {
</a><a href="#h89-0-237" id="h89-0-237" class="d">-	Content               []byte                     `protobuf:&quot;bytes,1,opt,name=Content&quot; json:&quot;Content,omitempty&quot;`
</a><a href="#h89-0-238" id="h89-0-238" class="d">-	StatusCode            *int32                     `protobuf:&quot;varint,2,req,name=StatusCode&quot; json:&quot;StatusCode,omitempty&quot;`
</a><a href="#h89-0-239" id="h89-0-239" class="d">-	Header                []*URLFetchResponse_Header `protobuf:&quot;group,3,rep,name=Header&quot; json:&quot;header,omitempty&quot;`
</a><a href="#h89-0-240" id="h89-0-240" class="d">-	ContentWasTruncated   *bool                      `protobuf:&quot;varint,6,opt,name=ContentWasTruncated,def=0&quot; json:&quot;ContentWasTruncated,omitempty&quot;`
</a><a href="#h89-0-241" id="h89-0-241" class="d">-	ExternalBytesSent     *int64                     `protobuf:&quot;varint,7,opt,name=ExternalBytesSent&quot; json:&quot;ExternalBytesSent,omitempty&quot;`
</a><a href="#h89-0-242" id="h89-0-242" class="d">-	ExternalBytesReceived *int64                     `protobuf:&quot;varint,8,opt,name=ExternalBytesReceived&quot; json:&quot;ExternalBytesReceived,omitempty&quot;`
</a><a href="#h89-0-243" id="h89-0-243" class="d">-	FinalUrl              *string                    `protobuf:&quot;bytes,9,opt,name=FinalUrl&quot; json:&quot;FinalUrl,omitempty&quot;`
</a><a href="#h89-0-244" id="h89-0-244" class="d">-	ApiCpuMilliseconds    *int64                     `protobuf:&quot;varint,10,opt,name=ApiCpuMilliseconds,def=0&quot; json:&quot;ApiCpuMilliseconds,omitempty&quot;`
</a><a href="#h89-0-245" id="h89-0-245" class="d">-	ApiBytesSent          *int64                     `protobuf:&quot;varint,11,opt,name=ApiBytesSent,def=0&quot; json:&quot;ApiBytesSent,omitempty&quot;`
</a><a href="#h89-0-246" id="h89-0-246" class="d">-	ApiBytesReceived      *int64                     `protobuf:&quot;varint,12,opt,name=ApiBytesReceived,def=0&quot; json:&quot;ApiBytesReceived,omitempty&quot;`
</a><a href="#h89-0-247" id="h89-0-247" class="d">-	XXX_unrecognized      []byte                     `json:&quot;-&quot;`
</a><a href="#h89-0-248" id="h89-0-248" class="d">-}
</a><a href="#h89-0-249" id="h89-0-249" class="d">-
</a><a href="#h89-0-250" id="h89-0-250" class="d">-func (m *URLFetchResponse) Reset()         { *m = URLFetchResponse{} }
</a><a href="#h89-0-251" id="h89-0-251" class="d">-func (m *URLFetchResponse) String() string { return proto.CompactTextString(m) }
</a><a href="#h89-0-252" id="h89-0-252" class="d">-func (*URLFetchResponse) ProtoMessage()    {}
</a><a href="#h89-0-253" id="h89-0-253" class="d">-
</a><a href="#h89-0-254" id="h89-0-254" class="d">-const Default_URLFetchResponse_ContentWasTruncated bool = false
</a><a href="#h89-0-255" id="h89-0-255" class="d">-const Default_URLFetchResponse_ApiCpuMilliseconds int64 = 0
</a><a href="#h89-0-256" id="h89-0-256" class="d">-const Default_URLFetchResponse_ApiBytesSent int64 = 0
</a><a href="#h89-0-257" id="h89-0-257" class="d">-const Default_URLFetchResponse_ApiBytesReceived int64 = 0
</a><a href="#h89-0-258" id="h89-0-258" class="d">-
</a><a href="#h89-0-259" id="h89-0-259" class="d">-func (m *URLFetchResponse) GetContent() []byte {
</a><a href="#h89-0-260" id="h89-0-260" class="d">-	if m != nil {
</a><a href="#h89-0-261" id="h89-0-261" class="d">-		return m.Content
</a><a href="#h89-0-262" id="h89-0-262" class="d">-	}
</a><a href="#h89-0-263" id="h89-0-263" class="d">-	return nil
</a><a href="#h89-0-264" id="h89-0-264" class="d">-}
</a><a href="#h89-0-265" id="h89-0-265" class="d">-
</a><a href="#h89-0-266" id="h89-0-266" class="d">-func (m *URLFetchResponse) GetStatusCode() int32 {
</a><a href="#h89-0-267" id="h89-0-267" class="d">-	if m != nil &amp;&amp; m.StatusCode != nil {
</a><a href="#h89-0-268" id="h89-0-268" class="d">-		return *m.StatusCode
</a><a href="#h89-0-269" id="h89-0-269" class="d">-	}
</a><a href="#h89-0-270" id="h89-0-270" class="d">-	return 0
</a><a href="#h89-0-271" id="h89-0-271" class="d">-}
</a><a href="#h89-0-272" id="h89-0-272" class="d">-
</a><a href="#h89-0-273" id="h89-0-273" class="d">-func (m *URLFetchResponse) GetHeader() []*URLFetchResponse_Header {
</a><a href="#h89-0-274" id="h89-0-274" class="d">-	if m != nil {
</a><a href="#h89-0-275" id="h89-0-275" class="d">-		return m.Header
</a><a href="#h89-0-276" id="h89-0-276" class="d">-	}
</a><a href="#h89-0-277" id="h89-0-277" class="d">-	return nil
</a><a href="#h89-0-278" id="h89-0-278" class="d">-}
</a><a href="#h89-0-279" id="h89-0-279" class="d">-
</a><a href="#h89-0-280" id="h89-0-280" class="d">-func (m *URLFetchResponse) GetContentWasTruncated() bool {
</a><a href="#h89-0-281" id="h89-0-281" class="d">-	if m != nil &amp;&amp; m.ContentWasTruncated != nil {
</a><a href="#h89-0-282" id="h89-0-282" class="d">-		return *m.ContentWasTruncated
</a><a href="#h89-0-283" id="h89-0-283" class="d">-	}
</a><a href="#h89-0-284" id="h89-0-284" class="d">-	return Default_URLFetchResponse_ContentWasTruncated
</a><a href="#h89-0-285" id="h89-0-285" class="d">-}
</a><a href="#h89-0-286" id="h89-0-286" class="d">-
</a><a href="#h89-0-287" id="h89-0-287" class="d">-func (m *URLFetchResponse) GetExternalBytesSent() int64 {
</a><a href="#h89-0-288" id="h89-0-288" class="d">-	if m != nil &amp;&amp; m.ExternalBytesSent != nil {
</a><a href="#h89-0-289" id="h89-0-289" class="d">-		return *m.ExternalBytesSent
</a><a href="#h89-0-290" id="h89-0-290" class="d">-	}
</a><a href="#h89-0-291" id="h89-0-291" class="d">-	return 0
</a><a href="#h89-0-292" id="h89-0-292" class="d">-}
</a><a href="#h89-0-293" id="h89-0-293" class="d">-
</a><a href="#h89-0-294" id="h89-0-294" class="d">-func (m *URLFetchResponse) GetExternalBytesReceived() int64 {
</a><a href="#h89-0-295" id="h89-0-295" class="d">-	if m != nil &amp;&amp; m.ExternalBytesReceived != nil {
</a><a href="#h89-0-296" id="h89-0-296" class="d">-		return *m.ExternalBytesReceived
</a><a href="#h89-0-297" id="h89-0-297" class="d">-	}
</a><a href="#h89-0-298" id="h89-0-298" class="d">-	return 0
</a><a href="#h89-0-299" id="h89-0-299" class="d">-}
</a><a href="#h89-0-300" id="h89-0-300" class="d">-
</a><a href="#h89-0-301" id="h89-0-301" class="d">-func (m *URLFetchResponse) GetFinalUrl() string {
</a><a href="#h89-0-302" id="h89-0-302" class="d">-	if m != nil &amp;&amp; m.FinalUrl != nil {
</a><a href="#h89-0-303" id="h89-0-303" class="d">-		return *m.FinalUrl
</a><a href="#h89-0-304" id="h89-0-304" class="d">-	}
</a><a href="#h89-0-305" id="h89-0-305" class="d">-	return &quot;&quot;
</a><a href="#h89-0-306" id="h89-0-306" class="d">-}
</a><a href="#h89-0-307" id="h89-0-307" class="d">-
</a><a href="#h89-0-308" id="h89-0-308" class="d">-func (m *URLFetchResponse) GetApiCpuMilliseconds() int64 {
</a><a href="#h89-0-309" id="h89-0-309" class="d">-	if m != nil &amp;&amp; m.ApiCpuMilliseconds != nil {
</a><a href="#h89-0-310" id="h89-0-310" class="d">-		return *m.ApiCpuMilliseconds
</a><a href="#h89-0-311" id="h89-0-311" class="d">-	}
</a><a href="#h89-0-312" id="h89-0-312" class="d">-	return Default_URLFetchResponse_ApiCpuMilliseconds
</a><a href="#h89-0-313" id="h89-0-313" class="d">-}
</a><a href="#h89-0-314" id="h89-0-314" class="d">-
</a><a href="#h89-0-315" id="h89-0-315" class="d">-func (m *URLFetchResponse) GetApiBytesSent() int64 {
</a><a href="#h89-0-316" id="h89-0-316" class="d">-	if m != nil &amp;&amp; m.ApiBytesSent != nil {
</a><a href="#h89-0-317" id="h89-0-317" class="d">-		return *m.ApiBytesSent
</a><a href="#h89-0-318" id="h89-0-318" class="d">-	}
</a><a href="#h89-0-319" id="h89-0-319" class="d">-	return Default_URLFetchResponse_ApiBytesSent
</a><a href="#h89-0-320" id="h89-0-320" class="d">-}
</a><a href="#h89-0-321" id="h89-0-321" class="d">-
</a><a href="#h89-0-322" id="h89-0-322" class="d">-func (m *URLFetchResponse) GetApiBytesReceived() int64 {
</a><a href="#h89-0-323" id="h89-0-323" class="d">-	if m != nil &amp;&amp; m.ApiBytesReceived != nil {
</a><a href="#h89-0-324" id="h89-0-324" class="d">-		return *m.ApiBytesReceived
</a><a href="#h89-0-325" id="h89-0-325" class="d">-	}
</a><a href="#h89-0-326" id="h89-0-326" class="d">-	return Default_URLFetchResponse_ApiBytesReceived
</a><a href="#h89-0-327" id="h89-0-327" class="d">-}
</a><a href="#h89-0-328" id="h89-0-328" class="d">-
</a><a href="#h89-0-329" id="h89-0-329" class="d">-type URLFetchResponse_Header struct {
</a><a href="#h89-0-330" id="h89-0-330" class="d">-	Key              *string `protobuf:&quot;bytes,4,req,name=Key&quot; json:&quot;Key,omitempty&quot;`
</a><a href="#h89-0-331" id="h89-0-331" class="d">-	Value            *string `protobuf:&quot;bytes,5,req,name=Value&quot; json:&quot;Value,omitempty&quot;`
</a><a href="#h89-0-332" id="h89-0-332" class="d">-	XXX_unrecognized []byte  `json:&quot;-&quot;`
</a><a href="#h89-0-333" id="h89-0-333" class="d">-}
</a><a href="#h89-0-334" id="h89-0-334" class="d">-
</a><a href="#h89-0-335" id="h89-0-335" class="d">-func (m *URLFetchResponse_Header) Reset()         { *m = URLFetchResponse_Header{} }
</a><a href="#h89-0-336" id="h89-0-336" class="d">-func (m *URLFetchResponse_Header) String() string { return proto.CompactTextString(m) }
</a><a href="#h89-0-337" id="h89-0-337" class="d">-func (*URLFetchResponse_Header) ProtoMessage()    {}
</a><a href="#h89-0-338" id="h89-0-338" class="d">-
</a><a href="#h89-0-339" id="h89-0-339" class="d">-func (m *URLFetchResponse_Header) GetKey() string {
</a><a href="#h89-0-340" id="h89-0-340" class="d">-	if m != nil &amp;&amp; m.Key != nil {
</a><a href="#h89-0-341" id="h89-0-341" class="d">-		return *m.Key
</a><a href="#h89-0-342" id="h89-0-342" class="d">-	}
</a><a href="#h89-0-343" id="h89-0-343" class="d">-	return &quot;&quot;
</a><a href="#h89-0-344" id="h89-0-344" class="d">-}
</a><a href="#h89-0-345" id="h89-0-345" class="d">-
</a><a href="#h89-0-346" id="h89-0-346" class="d">-func (m *URLFetchResponse_Header) GetValue() string {
</a><a href="#h89-0-347" id="h89-0-347" class="d">-	if m != nil &amp;&amp; m.Value != nil {
</a><a href="#h89-0-348" id="h89-0-348" class="d">-		return *m.Value
</a><a href="#h89-0-349" id="h89-0-349" class="d">-	}
</a><a href="#h89-0-350" id="h89-0-350" class="d">-	return &quot;&quot;
</a><a href="#h89-0-351" id="h89-0-351" class="d">-}
</a><a href="#h89-0-352" id="h89-0-352" class="d">-
</a><a href="#h89-0-353" id="h89-0-353" class="d">-func init() {
</a><a href="#h89-0-354" id="h89-0-354" class="d">-}
</a><b>diff --git a/<a id="h90" href="../file/vendor/google.golang.org/appengine/internal/urlfetch/urlfetch_service.proto">vendor/google.golang.org/appengine/internal/urlfetch/urlfetch_service.proto</a> b/<a href="../file/vendor/google.golang.org/appengine/internal/urlfetch/urlfetch_service.proto">vendor/google.golang.org/appengine/internal/urlfetch/urlfetch_service.proto</a></b>
<a href="#h90-0" id="h90-0" class="h">@@ -1,64 +0,0 @@
</a><a href="#h90-0-0" id="h90-0-0" class="d">-syntax = &quot;proto2&quot;;
</a><a href="#h90-0-1" id="h90-0-1" class="d">-option go_package = &quot;urlfetch&quot;;
</a><a href="#h90-0-2" id="h90-0-2" class="d">-
</a><a href="#h90-0-3" id="h90-0-3" class="d">-package appengine;
</a><a href="#h90-0-4" id="h90-0-4" class="d">-
</a><a href="#h90-0-5" id="h90-0-5" class="d">-message URLFetchServiceError {
</a><a href="#h90-0-6" id="h90-0-6" class="d">-  enum ErrorCode {
</a><a href="#h90-0-7" id="h90-0-7" class="d">-    OK = 0;
</a><a href="#h90-0-8" id="h90-0-8" class="d">-    INVALID_URL = 1;
</a><a href="#h90-0-9" id="h90-0-9" class="d">-    FETCH_ERROR = 2;
</a><a href="#h90-0-10" id="h90-0-10" class="d">-    UNSPECIFIED_ERROR = 3;
</a><a href="#h90-0-11" id="h90-0-11" class="d">-    RESPONSE_TOO_LARGE = 4;
</a><a href="#h90-0-12" id="h90-0-12" class="d">-    DEADLINE_EXCEEDED = 5;
</a><a href="#h90-0-13" id="h90-0-13" class="d">-    SSL_CERTIFICATE_ERROR = 6;
</a><a href="#h90-0-14" id="h90-0-14" class="d">-    DNS_ERROR = 7;
</a><a href="#h90-0-15" id="h90-0-15" class="d">-    CLOSED = 8;
</a><a href="#h90-0-16" id="h90-0-16" class="d">-    INTERNAL_TRANSIENT_ERROR = 9;
</a><a href="#h90-0-17" id="h90-0-17" class="d">-    TOO_MANY_REDIRECTS = 10;
</a><a href="#h90-0-18" id="h90-0-18" class="d">-    MALFORMED_REPLY = 11;
</a><a href="#h90-0-19" id="h90-0-19" class="d">-    CONNECTION_ERROR = 12;
</a><a href="#h90-0-20" id="h90-0-20" class="d">-  }
</a><a href="#h90-0-21" id="h90-0-21" class="d">-}
</a><a href="#h90-0-22" id="h90-0-22" class="d">-
</a><a href="#h90-0-23" id="h90-0-23" class="d">-message URLFetchRequest {
</a><a href="#h90-0-24" id="h90-0-24" class="d">-  enum RequestMethod {
</a><a href="#h90-0-25" id="h90-0-25" class="d">-    GET = 1;
</a><a href="#h90-0-26" id="h90-0-26" class="d">-    POST = 2;
</a><a href="#h90-0-27" id="h90-0-27" class="d">-    HEAD = 3;
</a><a href="#h90-0-28" id="h90-0-28" class="d">-    PUT = 4;
</a><a href="#h90-0-29" id="h90-0-29" class="d">-    DELETE = 5;
</a><a href="#h90-0-30" id="h90-0-30" class="d">-    PATCH = 6;
</a><a href="#h90-0-31" id="h90-0-31" class="d">-  }
</a><a href="#h90-0-32" id="h90-0-32" class="d">-  required RequestMethod Method = 1;
</a><a href="#h90-0-33" id="h90-0-33" class="d">-  required string Url = 2;
</a><a href="#h90-0-34" id="h90-0-34" class="d">-  repeated group Header = 3 {
</a><a href="#h90-0-35" id="h90-0-35" class="d">-    required string Key = 4;
</a><a href="#h90-0-36" id="h90-0-36" class="d">-    required string Value = 5;
</a><a href="#h90-0-37" id="h90-0-37" class="d">-  }
</a><a href="#h90-0-38" id="h90-0-38" class="d">-  optional bytes Payload = 6 [ctype=CORD];
</a><a href="#h90-0-39" id="h90-0-39" class="d">-
</a><a href="#h90-0-40" id="h90-0-40" class="d">-  optional bool FollowRedirects = 7 [default=true];
</a><a href="#h90-0-41" id="h90-0-41" class="d">-
</a><a href="#h90-0-42" id="h90-0-42" class="d">-  optional double Deadline = 8;
</a><a href="#h90-0-43" id="h90-0-43" class="d">-
</a><a href="#h90-0-44" id="h90-0-44" class="d">-  optional bool MustValidateServerCertificate = 9 [default=true];
</a><a href="#h90-0-45" id="h90-0-45" class="d">-}
</a><a href="#h90-0-46" id="h90-0-46" class="d">-
</a><a href="#h90-0-47" id="h90-0-47" class="d">-message URLFetchResponse {
</a><a href="#h90-0-48" id="h90-0-48" class="d">-  optional bytes Content = 1;
</a><a href="#h90-0-49" id="h90-0-49" class="d">-  required int32 StatusCode = 2;
</a><a href="#h90-0-50" id="h90-0-50" class="d">-  repeated group Header = 3 {
</a><a href="#h90-0-51" id="h90-0-51" class="d">-    required string Key = 4;
</a><a href="#h90-0-52" id="h90-0-52" class="d">-    required string Value = 5;
</a><a href="#h90-0-53" id="h90-0-53" class="d">-  }
</a><a href="#h90-0-54" id="h90-0-54" class="d">-  optional bool ContentWasTruncated = 6 [default=false];
</a><a href="#h90-0-55" id="h90-0-55" class="d">-  optional int64 ExternalBytesSent = 7;
</a><a href="#h90-0-56" id="h90-0-56" class="d">-  optional int64 ExternalBytesReceived = 8;
</a><a href="#h90-0-57" id="h90-0-57" class="d">-
</a><a href="#h90-0-58" id="h90-0-58" class="d">-  optional string FinalUrl = 9;
</a><a href="#h90-0-59" id="h90-0-59" class="d">-
</a><a href="#h90-0-60" id="h90-0-60" class="d">-  optional int64 ApiCpuMilliseconds = 10 [default=0];
</a><a href="#h90-0-61" id="h90-0-61" class="d">-  optional int64 ApiBytesSent = 11 [default=0];
</a><a href="#h90-0-62" id="h90-0-62" class="d">-  optional int64 ApiBytesReceived = 12 [default=0];
</a><a href="#h90-0-63" id="h90-0-63" class="d">-}
</a><b>diff --git a/<a id="h91" href="../file/vendor/google.golang.org/appengine/urlfetch/BUILD">vendor/google.golang.org/appengine/urlfetch/BUILD</a> b/<a href="../file/vendor/google.golang.org/appengine/urlfetch/BUILD">vendor/google.golang.org/appengine/urlfetch/BUILD</a></b>
<a href="#h91-0" id="h91-0" class="h">@@ -1,22 +0,0 @@
</a><a href="#h91-0-0" id="h91-0-0" class="d">-
</a><a href="#h91-0-1" id="h91-0-1" class="d">-load(&quot;@io_bazel_rules_go//go:def.bzl&quot;,
</a><a href="#h91-0-2" id="h91-0-2" class="d">-  &quot;go_binary&quot;,
</a><a href="#h91-0-3" id="h91-0-3" class="d">-  &quot;go_library&quot;,
</a><a href="#h91-0-4" id="h91-0-4" class="d">-  &quot;go_test&quot;,
</a><a href="#h91-0-5" id="h91-0-5" class="d">-)
</a><a href="#h91-0-6" id="h91-0-6" class="d">-
</a><a href="#h91-0-7" id="h91-0-7" class="d">-go_library(
</a><a href="#h91-0-8" id="h91-0-8" class="d">-name = &quot;go_default_library&quot;,
</a><a href="#h91-0-9" id="h91-0-9" class="d">-  srcs = [
</a><a href="#h91-0-10" id="h91-0-10" class="d">-    &quot;urlfetch.go&quot;,
</a><a href="#h91-0-11" id="h91-0-11" class="d">-  ],
</a><a href="#h91-0-12" id="h91-0-12" class="d">-  deps = [
</a><a href="#h91-0-13" id="h91-0-13" class="d">-    &quot;//vendor/github.com/golang/protobuf/proto:go_default_library&quot;,
</a><a href="#h91-0-14" id="h91-0-14" class="d">-    &quot;//vendor/golang.org/x/net/context:go_default_library&quot;,
</a><a href="#h91-0-15" id="h91-0-15" class="d">-    &quot;//vendor/google.golang.org/appengine/internal/urlfetch:go_default_library&quot;,
</a><a href="#h91-0-16" id="h91-0-16" class="d">-    &quot;//vendor/google.golang.org/appengine/internal:go_default_library&quot;,
</a><a href="#h91-0-17" id="h91-0-17" class="d">-  ],
</a><a href="#h91-0-18" id="h91-0-18" class="d">-  visibility = [&quot;//visibility:public&quot;],
</a><a href="#h91-0-19" id="h91-0-19" class="d">-)
</a><a href="#h91-0-20" id="h91-0-20" class="d">-
</a><a href="#h91-0-21" id="h91-0-21" class="d">-
</a><b>diff --git a/<a id="h92" href="../file/vendor/google.golang.org/appengine/urlfetch/urlfetch.go">vendor/google.golang.org/appengine/urlfetch/urlfetch.go</a> b/<a href="../file/vendor/google.golang.org/appengine/urlfetch/urlfetch.go">vendor/google.golang.org/appengine/urlfetch/urlfetch.go</a></b>
<a href="#h92-0" id="h92-0" class="h">@@ -1,210 +0,0 @@
</a><a href="#h92-0-0" id="h92-0-0" class="d">-// Copyright 2011 Google Inc. All rights reserved.
</a><a href="#h92-0-1" id="h92-0-1" class="d">-// Use of this source code is governed by the Apache 2.0
</a><a href="#h92-0-2" id="h92-0-2" class="d">-// license that can be found in the LICENSE file.
</a><a href="#h92-0-3" id="h92-0-3" class="d">-
</a><a href="#h92-0-4" id="h92-0-4" class="d">-// Package urlfetch provides an http.RoundTripper implementation
</a><a href="#h92-0-5" id="h92-0-5" class="d">-// for fetching URLs via App Engine&#39;s urlfetch service.
</a><a href="#h92-0-6" id="h92-0-6" class="d">-package urlfetch // import &quot;google.golang.org/appengine/urlfetch&quot;
</a><a href="#h92-0-7" id="h92-0-7" class="d">-
</a><a href="#h92-0-8" id="h92-0-8" class="d">-import (
</a><a href="#h92-0-9" id="h92-0-9" class="d">-	&quot;errors&quot;
</a><a href="#h92-0-10" id="h92-0-10" class="d">-	&quot;fmt&quot;
</a><a href="#h92-0-11" id="h92-0-11" class="d">-	&quot;io&quot;
</a><a href="#h92-0-12" id="h92-0-12" class="d">-	&quot;io/ioutil&quot;
</a><a href="#h92-0-13" id="h92-0-13" class="d">-	&quot;net/http&quot;
</a><a href="#h92-0-14" id="h92-0-14" class="d">-	&quot;net/url&quot;
</a><a href="#h92-0-15" id="h92-0-15" class="d">-	&quot;strconv&quot;
</a><a href="#h92-0-16" id="h92-0-16" class="d">-	&quot;strings&quot;
</a><a href="#h92-0-17" id="h92-0-17" class="d">-	&quot;time&quot;
</a><a href="#h92-0-18" id="h92-0-18" class="d">-
</a><a href="#h92-0-19" id="h92-0-19" class="d">-	&quot;github.com/golang/protobuf/proto&quot;
</a><a href="#h92-0-20" id="h92-0-20" class="d">-	&quot;golang.org/x/net/context&quot;
</a><a href="#h92-0-21" id="h92-0-21" class="d">-
</a><a href="#h92-0-22" id="h92-0-22" class="d">-	&quot;google.golang.org/appengine/internal&quot;
</a><a href="#h92-0-23" id="h92-0-23" class="d">-	pb &quot;google.golang.org/appengine/internal/urlfetch&quot;
</a><a href="#h92-0-24" id="h92-0-24" class="d">-)
</a><a href="#h92-0-25" id="h92-0-25" class="d">-
</a><a href="#h92-0-26" id="h92-0-26" class="d">-// Transport is an implementation of http.RoundTripper for
</a><a href="#h92-0-27" id="h92-0-27" class="d">-// App Engine. Users should generally create an http.Client using
</a><a href="#h92-0-28" id="h92-0-28" class="d">-// this transport and use the Client rather than using this transport
</a><a href="#h92-0-29" id="h92-0-29" class="d">-// directly.
</a><a href="#h92-0-30" id="h92-0-30" class="d">-type Transport struct {
</a><a href="#h92-0-31" id="h92-0-31" class="d">-	Context context.Context
</a><a href="#h92-0-32" id="h92-0-32" class="d">-
</a><a href="#h92-0-33" id="h92-0-33" class="d">-	// Controls whether the application checks the validity of SSL certificates
</a><a href="#h92-0-34" id="h92-0-34" class="d">-	// over HTTPS connections. A value of false (the default) instructs the
</a><a href="#h92-0-35" id="h92-0-35" class="d">-	// application to send a request to the server only if the certificate is
</a><a href="#h92-0-36" id="h92-0-36" class="d">-	// valid and signed by a trusted certificate authority (CA), and also
</a><a href="#h92-0-37" id="h92-0-37" class="d">-	// includes a hostname that matches the certificate. A value of true
</a><a href="#h92-0-38" id="h92-0-38" class="d">-	// instructs the application to perform no certificate validation.
</a><a href="#h92-0-39" id="h92-0-39" class="d">-	AllowInvalidServerCertificate bool
</a><a href="#h92-0-40" id="h92-0-40" class="d">-}
</a><a href="#h92-0-41" id="h92-0-41" class="d">-
</a><a href="#h92-0-42" id="h92-0-42" class="d">-// Verify statically that *Transport implements http.RoundTripper.
</a><a href="#h92-0-43" id="h92-0-43" class="d">-var _ http.RoundTripper = (*Transport)(nil)
</a><a href="#h92-0-44" id="h92-0-44" class="d">-
</a><a href="#h92-0-45" id="h92-0-45" class="d">-// Client returns an *http.Client using a default urlfetch Transport. This
</a><a href="#h92-0-46" id="h92-0-46" class="d">-// client will have the default deadline of 5 seconds, and will check the
</a><a href="#h92-0-47" id="h92-0-47" class="d">-// validity of SSL certificates.
</a><a href="#h92-0-48" id="h92-0-48" class="d">-//
</a><a href="#h92-0-49" id="h92-0-49" class="d">-// Any deadline of the provided context will be used for requests through this client;
</a><a href="#h92-0-50" id="h92-0-50" class="d">-// if the client does not have a deadline then a 5 second default is used.
</a><a href="#h92-0-51" id="h92-0-51" class="d">-func Client(ctx context.Context) *http.Client {
</a><a href="#h92-0-52" id="h92-0-52" class="d">-	return &amp;http.Client{
</a><a href="#h92-0-53" id="h92-0-53" class="d">-		Transport: &amp;Transport{
</a><a href="#h92-0-54" id="h92-0-54" class="d">-			Context: ctx,
</a><a href="#h92-0-55" id="h92-0-55" class="d">-		},
</a><a href="#h92-0-56" id="h92-0-56" class="d">-	}
</a><a href="#h92-0-57" id="h92-0-57" class="d">-}
</a><a href="#h92-0-58" id="h92-0-58" class="d">-
</a><a href="#h92-0-59" id="h92-0-59" class="d">-type bodyReader struct {
</a><a href="#h92-0-60" id="h92-0-60" class="d">-	content   []byte
</a><a href="#h92-0-61" id="h92-0-61" class="d">-	truncated bool
</a><a href="#h92-0-62" id="h92-0-62" class="d">-	closed    bool
</a><a href="#h92-0-63" id="h92-0-63" class="d">-}
</a><a href="#h92-0-64" id="h92-0-64" class="d">-
</a><a href="#h92-0-65" id="h92-0-65" class="d">-// ErrTruncatedBody is the error returned after the final Read() from a
</a><a href="#h92-0-66" id="h92-0-66" class="d">-// response&#39;s Body if the body has been truncated by App Engine&#39;s proxy.
</a><a href="#h92-0-67" id="h92-0-67" class="d">-var ErrTruncatedBody = errors.New(&quot;urlfetch: truncated body&quot;)
</a><a href="#h92-0-68" id="h92-0-68" class="d">-
</a><a href="#h92-0-69" id="h92-0-69" class="d">-func statusCodeToText(code int) string {
</a><a href="#h92-0-70" id="h92-0-70" class="d">-	if t := http.StatusText(code); t != &quot;&quot; {
</a><a href="#h92-0-71" id="h92-0-71" class="d">-		return t
</a><a href="#h92-0-72" id="h92-0-72" class="d">-	}
</a><a href="#h92-0-73" id="h92-0-73" class="d">-	return strconv.Itoa(code)
</a><a href="#h92-0-74" id="h92-0-74" class="d">-}
</a><a href="#h92-0-75" id="h92-0-75" class="d">-
</a><a href="#h92-0-76" id="h92-0-76" class="d">-func (br *bodyReader) Read(p []byte) (n int, err error) {
</a><a href="#h92-0-77" id="h92-0-77" class="d">-	if br.closed {
</a><a href="#h92-0-78" id="h92-0-78" class="d">-		if br.truncated {
</a><a href="#h92-0-79" id="h92-0-79" class="d">-			return 0, ErrTruncatedBody
</a><a href="#h92-0-80" id="h92-0-80" class="d">-		}
</a><a href="#h92-0-81" id="h92-0-81" class="d">-		return 0, io.EOF
</a><a href="#h92-0-82" id="h92-0-82" class="d">-	}
</a><a href="#h92-0-83" id="h92-0-83" class="d">-	n = copy(p, br.content)
</a><a href="#h92-0-84" id="h92-0-84" class="d">-	if n &gt; 0 {
</a><a href="#h92-0-85" id="h92-0-85" class="d">-		br.content = br.content[n:]
</a><a href="#h92-0-86" id="h92-0-86" class="d">-		return
</a><a href="#h92-0-87" id="h92-0-87" class="d">-	}
</a><a href="#h92-0-88" id="h92-0-88" class="d">-	if br.truncated {
</a><a href="#h92-0-89" id="h92-0-89" class="d">-		br.closed = true
</a><a href="#h92-0-90" id="h92-0-90" class="d">-		return 0, ErrTruncatedBody
</a><a href="#h92-0-91" id="h92-0-91" class="d">-	}
</a><a href="#h92-0-92" id="h92-0-92" class="d">-	return 0, io.EOF
</a><a href="#h92-0-93" id="h92-0-93" class="d">-}
</a><a href="#h92-0-94" id="h92-0-94" class="d">-
</a><a href="#h92-0-95" id="h92-0-95" class="d">-func (br *bodyReader) Close() error {
</a><a href="#h92-0-96" id="h92-0-96" class="d">-	br.closed = true
</a><a href="#h92-0-97" id="h92-0-97" class="d">-	br.content = nil
</a><a href="#h92-0-98" id="h92-0-98" class="d">-	return nil
</a><a href="#h92-0-99" id="h92-0-99" class="d">-}
</a><a href="#h92-0-100" id="h92-0-100" class="d">-
</a><a href="#h92-0-101" id="h92-0-101" class="d">-// A map of the URL Fetch-accepted methods that take a request body.
</a><a href="#h92-0-102" id="h92-0-102" class="d">-var methodAcceptsRequestBody = map[string]bool{
</a><a href="#h92-0-103" id="h92-0-103" class="d">-	&quot;POST&quot;:  true,
</a><a href="#h92-0-104" id="h92-0-104" class="d">-	&quot;PUT&quot;:   true,
</a><a href="#h92-0-105" id="h92-0-105" class="d">-	&quot;PATCH&quot;: true,
</a><a href="#h92-0-106" id="h92-0-106" class="d">-}
</a><a href="#h92-0-107" id="h92-0-107" class="d">-
</a><a href="#h92-0-108" id="h92-0-108" class="d">-// urlString returns a valid string given a URL. This function is necessary because
</a><a href="#h92-0-109" id="h92-0-109" class="d">-// the String method of URL doesn&#39;t correctly handle URLs with non-empty Opaque values.
</a><a href="#h92-0-110" id="h92-0-110" class="d">-// See http://code.google.com/p/go/issues/detail?id=4860.
</a><a href="#h92-0-111" id="h92-0-111" class="d">-func urlString(u *url.URL) string {
</a><a href="#h92-0-112" id="h92-0-112" class="d">-	if u.Opaque == &quot;&quot; || strings.HasPrefix(u.Opaque, &quot;//&quot;) {
</a><a href="#h92-0-113" id="h92-0-113" class="d">-		return u.String()
</a><a href="#h92-0-114" id="h92-0-114" class="d">-	}
</a><a href="#h92-0-115" id="h92-0-115" class="d">-	aux := *u
</a><a href="#h92-0-116" id="h92-0-116" class="d">-	aux.Opaque = &quot;//&quot; + aux.Host + aux.Opaque
</a><a href="#h92-0-117" id="h92-0-117" class="d">-	return aux.String()
</a><a href="#h92-0-118" id="h92-0-118" class="d">-}
</a><a href="#h92-0-119" id="h92-0-119" class="d">-
</a><a href="#h92-0-120" id="h92-0-120" class="d">-// RoundTrip issues a single HTTP request and returns its response. Per the
</a><a href="#h92-0-121" id="h92-0-121" class="d">-// http.RoundTripper interface, RoundTrip only returns an error if there
</a><a href="#h92-0-122" id="h92-0-122" class="d">-// was an unsupported request or the URL Fetch proxy fails.
</a><a href="#h92-0-123" id="h92-0-123" class="d">-// Note that HTTP response codes such as 5xx, 403, 404, etc are not
</a><a href="#h92-0-124" id="h92-0-124" class="d">-// errors as far as the transport is concerned and will be returned
</a><a href="#h92-0-125" id="h92-0-125" class="d">-// with err set to nil.
</a><a href="#h92-0-126" id="h92-0-126" class="d">-func (t *Transport) RoundTrip(req *http.Request) (res *http.Response, err error) {
</a><a href="#h92-0-127" id="h92-0-127" class="d">-	methNum, ok := pb.URLFetchRequest_RequestMethod_value[req.Method]
</a><a href="#h92-0-128" id="h92-0-128" class="d">-	if !ok {
</a><a href="#h92-0-129" id="h92-0-129" class="d">-		return nil, fmt.Errorf(&quot;urlfetch: unsupported HTTP method %q&quot;, req.Method)
</a><a href="#h92-0-130" id="h92-0-130" class="d">-	}
</a><a href="#h92-0-131" id="h92-0-131" class="d">-
</a><a href="#h92-0-132" id="h92-0-132" class="d">-	method := pb.URLFetchRequest_RequestMethod(methNum)
</a><a href="#h92-0-133" id="h92-0-133" class="d">-
</a><a href="#h92-0-134" id="h92-0-134" class="d">-	freq := &amp;pb.URLFetchRequest{
</a><a href="#h92-0-135" id="h92-0-135" class="d">-		Method:                        &amp;method,
</a><a href="#h92-0-136" id="h92-0-136" class="d">-		Url:                           proto.String(urlString(req.URL)),
</a><a href="#h92-0-137" id="h92-0-137" class="d">-		FollowRedirects:               proto.Bool(false), // http.Client&#39;s responsibility
</a><a href="#h92-0-138" id="h92-0-138" class="d">-		MustValidateServerCertificate: proto.Bool(!t.AllowInvalidServerCertificate),
</a><a href="#h92-0-139" id="h92-0-139" class="d">-	}
</a><a href="#h92-0-140" id="h92-0-140" class="d">-	if deadline, ok := t.Context.Deadline(); ok {
</a><a href="#h92-0-141" id="h92-0-141" class="d">-		freq.Deadline = proto.Float64(deadline.Sub(time.Now()).Seconds())
</a><a href="#h92-0-142" id="h92-0-142" class="d">-	}
</a><a href="#h92-0-143" id="h92-0-143" class="d">-
</a><a href="#h92-0-144" id="h92-0-144" class="d">-	for k, vals := range req.Header {
</a><a href="#h92-0-145" id="h92-0-145" class="d">-		for _, val := range vals {
</a><a href="#h92-0-146" id="h92-0-146" class="d">-			freq.Header = append(freq.Header, &amp;pb.URLFetchRequest_Header{
</a><a href="#h92-0-147" id="h92-0-147" class="d">-				Key:   proto.String(k),
</a><a href="#h92-0-148" id="h92-0-148" class="d">-				Value: proto.String(val),
</a><a href="#h92-0-149" id="h92-0-149" class="d">-			})
</a><a href="#h92-0-150" id="h92-0-150" class="d">-		}
</a><a href="#h92-0-151" id="h92-0-151" class="d">-	}
</a><a href="#h92-0-152" id="h92-0-152" class="d">-	if methodAcceptsRequestBody[req.Method] &amp;&amp; req.Body != nil {
</a><a href="#h92-0-153" id="h92-0-153" class="d">-		// Avoid a []byte copy if req.Body has a Bytes method.
</a><a href="#h92-0-154" id="h92-0-154" class="d">-		switch b := req.Body.(type) {
</a><a href="#h92-0-155" id="h92-0-155" class="d">-		case interface {
</a><a href="#h92-0-156" id="h92-0-156" class="d">-			Bytes() []byte
</a><a href="#h92-0-157" id="h92-0-157" class="d">-		}:
</a><a href="#h92-0-158" id="h92-0-158" class="d">-			freq.Payload = b.Bytes()
</a><a href="#h92-0-159" id="h92-0-159" class="d">-		default:
</a><a href="#h92-0-160" id="h92-0-160" class="d">-			freq.Payload, err = ioutil.ReadAll(req.Body)
</a><a href="#h92-0-161" id="h92-0-161" class="d">-			if err != nil {
</a><a href="#h92-0-162" id="h92-0-162" class="d">-				return nil, err
</a><a href="#h92-0-163" id="h92-0-163" class="d">-			}
</a><a href="#h92-0-164" id="h92-0-164" class="d">-		}
</a><a href="#h92-0-165" id="h92-0-165" class="d">-	}
</a><a href="#h92-0-166" id="h92-0-166" class="d">-
</a><a href="#h92-0-167" id="h92-0-167" class="d">-	fres := &amp;pb.URLFetchResponse{}
</a><a href="#h92-0-168" id="h92-0-168" class="d">-	if err := internal.Call(t.Context, &quot;urlfetch&quot;, &quot;Fetch&quot;, freq, fres); err != nil {
</a><a href="#h92-0-169" id="h92-0-169" class="d">-		return nil, err
</a><a href="#h92-0-170" id="h92-0-170" class="d">-	}
</a><a href="#h92-0-171" id="h92-0-171" class="d">-
</a><a href="#h92-0-172" id="h92-0-172" class="d">-	res = &amp;http.Response{}
</a><a href="#h92-0-173" id="h92-0-173" class="d">-	res.StatusCode = int(*fres.StatusCode)
</a><a href="#h92-0-174" id="h92-0-174" class="d">-	res.Status = fmt.Sprintf(&quot;%d %s&quot;, res.StatusCode, statusCodeToText(res.StatusCode))
</a><a href="#h92-0-175" id="h92-0-175" class="d">-	res.Header = make(http.Header)
</a><a href="#h92-0-176" id="h92-0-176" class="d">-	res.Request = req
</a><a href="#h92-0-177" id="h92-0-177" class="d">-
</a><a href="#h92-0-178" id="h92-0-178" class="d">-	// Faked:
</a><a href="#h92-0-179" id="h92-0-179" class="d">-	res.ProtoMajor = 1
</a><a href="#h92-0-180" id="h92-0-180" class="d">-	res.ProtoMinor = 1
</a><a href="#h92-0-181" id="h92-0-181" class="d">-	res.Proto = &quot;HTTP/1.1&quot;
</a><a href="#h92-0-182" id="h92-0-182" class="d">-	res.Close = true
</a><a href="#h92-0-183" id="h92-0-183" class="d">-
</a><a href="#h92-0-184" id="h92-0-184" class="d">-	for _, h := range fres.Header {
</a><a href="#h92-0-185" id="h92-0-185" class="d">-		hkey := http.CanonicalHeaderKey(*h.Key)
</a><a href="#h92-0-186" id="h92-0-186" class="d">-		hval := *h.Value
</a><a href="#h92-0-187" id="h92-0-187" class="d">-		if hkey == &quot;Content-Length&quot; {
</a><a href="#h92-0-188" id="h92-0-188" class="d">-			// Will get filled in below for all but HEAD requests.
</a><a href="#h92-0-189" id="h92-0-189" class="d">-			if req.Method == &quot;HEAD&quot; {
</a><a href="#h92-0-190" id="h92-0-190" class="d">-				res.ContentLength, _ = strconv.ParseInt(hval, 10, 64)
</a><a href="#h92-0-191" id="h92-0-191" class="d">-			}
</a><a href="#h92-0-192" id="h92-0-192" class="d">-			continue
</a><a href="#h92-0-193" id="h92-0-193" class="d">-		}
</a><a href="#h92-0-194" id="h92-0-194" class="d">-		res.Header.Add(hkey, hval)
</a><a href="#h92-0-195" id="h92-0-195" class="d">-	}
</a><a href="#h92-0-196" id="h92-0-196" class="d">-
</a><a href="#h92-0-197" id="h92-0-197" class="d">-	if req.Method != &quot;HEAD&quot; {
</a><a href="#h92-0-198" id="h92-0-198" class="d">-		res.ContentLength = int64(len(fres.Content))
</a><a href="#h92-0-199" id="h92-0-199" class="d">-	}
</a><a href="#h92-0-200" id="h92-0-200" class="d">-
</a><a href="#h92-0-201" id="h92-0-201" class="d">-	truncated := fres.GetContentWasTruncated()
</a><a href="#h92-0-202" id="h92-0-202" class="d">-	res.Body = &amp;bodyReader{content: fres.Content, truncated: truncated}
</a><a href="#h92-0-203" id="h92-0-203" class="d">-	return
</a><a href="#h92-0-204" id="h92-0-204" class="d">-}
</a><a href="#h92-0-205" id="h92-0-205" class="d">-
</a><a href="#h92-0-206" id="h92-0-206" class="d">-func init() {
</a><a href="#h92-0-207" id="h92-0-207" class="d">-	internal.RegisterErrorCodeMap(&quot;urlfetch&quot;, pb.URLFetchServiceError_ErrorCode_name)
</a><a href="#h92-0-208" id="h92-0-208" class="d">-	internal.RegisterTimeoutErrorCode(&quot;urlfetch&quot;, int32(pb.URLFetchServiceError_DEADLINE_EXCEEDED))
</a><a href="#h92-0-209" id="h92-0-209" class="d">-}
</a></pre>
</div>
</body>
</html>
